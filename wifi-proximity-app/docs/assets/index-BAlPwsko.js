function LU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const h=Object.getOwnPropertyDescriptor(r,s);h&&Object.defineProperty(t,s,h.get?h:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(s){if(s.ep)return;s.ep=!0;const h=n(s);fetch(s.href,h)}})();function ZE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LC={exports:{}},Sx={};var eP;function OU(){if(eP)return Sx;eP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,h){var p=null;if(h!==void 0&&(p=""+h),s.key!==void 0&&(p=""+s.key),"key"in s){h={};for(var _ in s)_!=="key"&&(h[_]=s[_])}else h=s;return s=h.ref,{$$typeof:t,type:r,key:p,ref:s!==void 0?s:null,props:h}}return Sx.Fragment=e,Sx.jsx=n,Sx.jsxs=n,Sx}var tP;function zU(){return tP||(tP=1,LC.exports=OU()),LC.exports}var V=zU(),OC={exports:{}},Cx={},zC={exports:{}},NC={};var nP;function NU(){return nP||(nP=1,(function(t){function e(Ce,Xe){var tt=Ce.length;Ce.push(Xe);e:for(;0<tt;){var Be=tt-1>>>1,yt=Ce[Be];if(0<s(yt,Xe))Ce[Be]=Xe,Ce[tt]=yt,tt=Be;else break e}}function n(Ce){return Ce.length===0?null:Ce[0]}function r(Ce){if(Ce.length===0)return null;var Xe=Ce[0],tt=Ce.pop();if(tt!==Xe){Ce[0]=tt;e:for(var Be=0,yt=Ce.length,Me=yt>>>1;Be<Me;){var et=2*(Be+1)-1,At=Ce[et],Dt=et+1,Gt=Ce[Dt];if(0>s(At,tt))Dt<yt&&0>s(Gt,At)?(Ce[Be]=Gt,Ce[Dt]=tt,Be=Dt):(Ce[Be]=At,Ce[et]=tt,Be=et);else if(Dt<yt&&0>s(Gt,tt))Ce[Be]=Gt,Ce[Dt]=tt,Be=Dt;else break e}}return Xe}function s(Ce,Xe){var tt=Ce.sortIndex-Xe.sortIndex;return tt!==0?tt:Ce.id-Xe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;t.unstable_now=function(){return h.now()}}else{var p=Date,_=p.now();t.unstable_now=function(){return p.now()-_}}var o=[],T=[],I=1,M=null,L=3,F=!1,q=!1,$=!1,X=!1,te=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function me(Ce){for(var Xe=n(T);Xe!==null;){if(Xe.callback===null)r(T);else if(Xe.startTime<=Ce)r(T),Xe.sortIndex=Xe.expirationTime,e(o,Xe);else break;Xe=n(T)}}function ge(Ce){if($=!1,me(Ce),!q)if(n(o)!==null)q=!0,Ee||(Ee=!0,Q());else{var Xe=n(T);Xe!==null&&Ke(ge,Xe.startTime-Ce)}}var Ee=!1,ce=-1,ee=5,le=-1;function se(){return X?!0:!(t.unstable_now()-le<ee)}function _e(){if(X=!1,Ee){var Ce=t.unstable_now();le=Ce;var Xe=!0;try{e:{q=!1,$&&($=!1,he(ce),ce=-1),F=!0;var tt=L;try{t:{for(me(Ce),M=n(o);M!==null&&!(M.expirationTime>Ce&&se());){var Be=M.callback;if(typeof Be=="function"){M.callback=null,L=M.priorityLevel;var yt=Be(M.expirationTime<=Ce);if(Ce=t.unstable_now(),typeof yt=="function"){M.callback=yt,me(Ce),Xe=!0;break t}M===n(o)&&r(o),me(Ce)}else r(o);M=n(o)}if(M!==null)Xe=!0;else{var Me=n(T);Me!==null&&Ke(ge,Me.startTime-Ce),Xe=!1}}break e}finally{M=null,L=tt,F=!1}Xe=void 0}}finally{Xe?Q():Ee=!1}}}var Q;if(typeof ie=="function")Q=function(){ie(_e)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ve=de.port2;de.port1.onmessage=_e,Q=function(){Ve.postMessage(null)}}else Q=function(){te(_e,0)};function Ke(Ce,Xe){ce=te(function(){Ce(t.unstable_now())},Xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_next=function(Ce){switch(L){case 1:case 2:case 3:var Xe=3;break;default:Xe=L}var tt=L;L=Xe;try{return Ce()}finally{L=tt}},t.unstable_requestPaint=function(){X=!0},t.unstable_runWithPriority=function(Ce,Xe){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var tt=L;L=Ce;try{return Xe()}finally{L=tt}},t.unstable_scheduleCallback=function(Ce,Xe,tt){var Be=t.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?Be+tt:Be):tt=Be,Ce){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=tt+yt,Ce={id:I++,callback:Xe,priorityLevel:Ce,startTime:tt,expirationTime:yt,sortIndex:-1},tt>Be?(Ce.sortIndex=tt,e(T,Ce),n(o)===null&&Ce===n(T)&&($?(he(ce),ce=-1):$=!0,Ke(ge,tt-Be))):(Ce.sortIndex=yt,e(o,Ce),q||F||(q=!0,Ee||(Ee=!0,Q()))),Ce},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(Ce){var Xe=L;return function(){var tt=L;L=Xe;try{return Ce.apply(this,arguments)}finally{L=tt}}}})(NC)),NC}var rP;function BU(){return rP||(rP=1,zC.exports=NU()),zC.exports}var BC={exports:{}},Ar={};var iP;function FU(){if(iP)return Ar;iP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),o=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),L=Symbol.iterator;function F(Me){return Me===null||typeof Me!="object"?null:(Me=L&&Me[L]||Me["@@iterator"],typeof Me=="function"?Me:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,X={};function te(Me,et,At){this.props=Me,this.context=et,this.refs=X,this.updater=At||q}te.prototype.isReactComponent={},te.prototype.setState=function(Me,et){if(typeof Me!="object"&&typeof Me!="function"&&Me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Me,et,"setState")},te.prototype.forceUpdate=function(Me){this.updater.enqueueForceUpdate(this,Me,"forceUpdate")};function he(){}he.prototype=te.prototype;function ie(Me,et,At){this.props=Me,this.context=et,this.refs=X,this.updater=At||q}var me=ie.prototype=new he;me.constructor=ie,$(me,te.prototype),me.isPureReactComponent=!0;var ge=Array.isArray;function Ee(){}var ce={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function le(Me,et,At){var Dt=At.ref;return{$$typeof:t,type:Me,key:et,ref:Dt!==void 0?Dt:null,props:At}}function se(Me,et){return le(Me.type,et,Me.props)}function _e(Me){return typeof Me=="object"&&Me!==null&&Me.$$typeof===t}function Q(Me){var et={"=":"=0",":":"=2"};return"$"+Me.replace(/[=:]/g,function(At){return et[At]})}var de=/\/+/g;function Ve(Me,et){return typeof Me=="object"&&Me!==null&&Me.key!=null?Q(""+Me.key):et.toString(36)}function Ke(Me){switch(Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason;default:switch(typeof Me.status=="string"?Me.then(Ee,Ee):(Me.status="pending",Me.then(function(et){Me.status==="pending"&&(Me.status="fulfilled",Me.value=et)},function(et){Me.status==="pending"&&(Me.status="rejected",Me.reason=et)})),Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason}}throw Me}function Ce(Me,et,At,Dt,Gt){var Kt=typeof Me;(Kt==="undefined"||Kt==="boolean")&&(Me=null);var dn=!1;if(Me===null)dn=!0;else switch(Kt){case"bigint":case"string":case"number":dn=!0;break;case"object":switch(Me.$$typeof){case t:case e:dn=!0;break;case I:return dn=Me._init,Ce(dn(Me._payload),et,At,Dt,Gt)}}if(dn)return Gt=Gt(Me),dn=Dt===""?"."+Ve(Me,0):Dt,ge(Gt)?(At="",dn!=null&&(At=dn.replace(de,"$&/")+"/"),Ce(Gt,et,At,"",function(Tn){return Tn})):Gt!=null&&(_e(Gt)&&(Gt=se(Gt,At+(Gt.key==null||Me&&Me.key===Gt.key?"":(""+Gt.key).replace(de,"$&/")+"/")+dn)),et.push(Gt)),1;dn=0;var Fn=Dt===""?".":Dt+":";if(ge(Me))for(var An=0;An<Me.length;An++)Dt=Me[An],Kt=Fn+Ve(Dt,An),dn+=Ce(Dt,et,At,Kt,Gt);else if(An=F(Me),typeof An=="function")for(Me=An.call(Me),An=0;!(Dt=Me.next()).done;)Dt=Dt.value,Kt=Fn+Ve(Dt,An++),dn+=Ce(Dt,et,At,Kt,Gt);else if(Kt==="object"){if(typeof Me.then=="function")return Ce(Ke(Me),et,At,Dt,Gt);throw et=String(Me),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(Me).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return dn}function Xe(Me,et,At){if(Me==null)return Me;var Dt=[],Gt=0;return Ce(Me,Dt,"","",function(Kt){return et.call(At,Kt,Gt++)}),Dt}function tt(Me){if(Me._status===-1){var et=Me._result;et=et(),et.then(function(At){(Me._status===0||Me._status===-1)&&(Me._status=1,Me._result=At)},function(At){(Me._status===0||Me._status===-1)&&(Me._status=2,Me._result=At)}),Me._status===-1&&(Me._status=0,Me._result=et)}if(Me._status===1)return Me._result.default;throw Me._result}var Be=typeof reportError=="function"?reportError:function(Me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Me=="object"&&Me!==null&&typeof Me.message=="string"?String(Me.message):String(Me),error:Me});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Me);return}console.error(Me)},yt={map:Xe,forEach:function(Me,et,At){Xe(Me,function(){et.apply(this,arguments)},At)},count:function(Me){var et=0;return Xe(Me,function(){et++}),et},toArray:function(Me){return Xe(Me,function(et){return et})||[]},only:function(Me){if(!_e(Me))throw Error("React.Children.only expected to receive a single React element child.");return Me}};return Ar.Activity=M,Ar.Children=yt,Ar.Component=te,Ar.Fragment=n,Ar.Profiler=s,Ar.PureComponent=ie,Ar.StrictMode=r,Ar.Suspense=o,Ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ar.__COMPILER_RUNTIME={__proto__:null,c:function(Me){return ce.H.useMemoCache(Me)}},Ar.cache=function(Me){return function(){return Me.apply(null,arguments)}},Ar.cacheSignal=function(){return null},Ar.cloneElement=function(Me,et,At){if(Me==null)throw Error("The argument must be a React element, but you passed "+Me+".");var Dt=$({},Me.props),Gt=Me.key;if(et!=null)for(Kt in et.key!==void 0&&(Gt=""+et.key),et)!ee.call(et,Kt)||Kt==="key"||Kt==="__self"||Kt==="__source"||Kt==="ref"&&et.ref===void 0||(Dt[Kt]=et[Kt]);var Kt=arguments.length-2;if(Kt===1)Dt.children=At;else if(1<Kt){for(var dn=Array(Kt),Fn=0;Fn<Kt;Fn++)dn[Fn]=arguments[Fn+2];Dt.children=dn}return le(Me.type,Gt,Dt)},Ar.createContext=function(Me){return Me={$$typeof:p,_currentValue:Me,_currentValue2:Me,_threadCount:0,Provider:null,Consumer:null},Me.Provider=Me,Me.Consumer={$$typeof:h,_context:Me},Me},Ar.createElement=function(Me,et,At){var Dt,Gt={},Kt=null;if(et!=null)for(Dt in et.key!==void 0&&(Kt=""+et.key),et)ee.call(et,Dt)&&Dt!=="key"&&Dt!=="__self"&&Dt!=="__source"&&(Gt[Dt]=et[Dt]);var dn=arguments.length-2;if(dn===1)Gt.children=At;else if(1<dn){for(var Fn=Array(dn),An=0;An<dn;An++)Fn[An]=arguments[An+2];Gt.children=Fn}if(Me&&Me.defaultProps)for(Dt in dn=Me.defaultProps,dn)Gt[Dt]===void 0&&(Gt[Dt]=dn[Dt]);return le(Me,Kt,Gt)},Ar.createRef=function(){return{current:null}},Ar.forwardRef=function(Me){return{$$typeof:_,render:Me}},Ar.isValidElement=_e,Ar.lazy=function(Me){return{$$typeof:I,_payload:{_status:-1,_result:Me},_init:tt}},Ar.memo=function(Me,et){return{$$typeof:T,type:Me,compare:et===void 0?null:et}},Ar.startTransition=function(Me){var et=ce.T,At={};ce.T=At;try{var Dt=Me(),Gt=ce.S;Gt!==null&&Gt(At,Dt),typeof Dt=="object"&&Dt!==null&&typeof Dt.then=="function"&&Dt.then(Ee,Be)}catch(Kt){Be(Kt)}finally{et!==null&&At.types!==null&&(et.types=At.types),ce.T=et}},Ar.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ar.use=function(Me){return ce.H.use(Me)},Ar.useActionState=function(Me,et,At){return ce.H.useActionState(Me,et,At)},Ar.useCallback=function(Me,et){return ce.H.useCallback(Me,et)},Ar.useContext=function(Me){return ce.H.useContext(Me)},Ar.useDebugValue=function(){},Ar.useDeferredValue=function(Me,et){return ce.H.useDeferredValue(Me,et)},Ar.useEffect=function(Me,et){return ce.H.useEffect(Me,et)},Ar.useEffectEvent=function(Me){return ce.H.useEffectEvent(Me)},Ar.useId=function(){return ce.H.useId()},Ar.useImperativeHandle=function(Me,et,At){return ce.H.useImperativeHandle(Me,et,At)},Ar.useInsertionEffect=function(Me,et){return ce.H.useInsertionEffect(Me,et)},Ar.useLayoutEffect=function(Me,et){return ce.H.useLayoutEffect(Me,et)},Ar.useMemo=function(Me,et){return ce.H.useMemo(Me,et)},Ar.useOptimistic=function(Me,et){return ce.H.useOptimistic(Me,et)},Ar.useReducer=function(Me,et,At){return ce.H.useReducer(Me,et,At)},Ar.useRef=function(Me){return ce.H.useRef(Me)},Ar.useState=function(Me){return ce.H.useState(Me)},Ar.useSyncExternalStore=function(Me,et,At){return ce.H.useSyncExternalStore(Me,et,At)},Ar.useTransition=function(){return ce.H.useTransition()},Ar.version="19.2.0",Ar}var sP;function IM(){return sP||(sP=1,BC.exports=FU()),BC.exports}var FC={exports:{}},ll={};var oP;function VU(){if(oP)return ll;oP=1;var t=IM();function e(o){var T="https://react.dev/errors/"+o;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)T+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+o+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function h(o,T,I){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:M==null?null:""+M,children:o,containerInfo:T,implementation:I}}var p=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(o,T){if(o==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return ll.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ll.createPortal=function(o,T){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(e(299));return h(o,T,null,I)},ll.flushSync=function(o){var T=p.T,I=r.p;try{if(p.T=null,r.p=2,o)return o()}finally{p.T=T,r.p=I,r.d.f()}},ll.preconnect=function(o,T){typeof o=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,r.d.C(o,T))},ll.prefetchDNS=function(o){typeof o=="string"&&r.d.D(o)},ll.preinit=function(o,T){if(typeof o=="string"&&T&&typeof T.as=="string"){var I=T.as,M=_(I,T.crossOrigin),L=typeof T.integrity=="string"?T.integrity:void 0,F=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;I==="style"?r.d.S(o,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:M,integrity:L,fetchPriority:F}):I==="script"&&r.d.X(o,{crossOrigin:M,integrity:L,fetchPriority:F,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},ll.preinitModule=function(o,T){if(typeof o=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var I=_(T.as,T.crossOrigin);r.d.M(o,{crossOrigin:I,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&r.d.M(o)},ll.preload=function(o,T){if(typeof o=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var I=T.as,M=_(I,T.crossOrigin);r.d.L(o,I,{crossOrigin:M,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},ll.preloadModule=function(o,T){if(typeof o=="string")if(T){var I=_(T.as,T.crossOrigin);r.d.m(o,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:I,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else r.d.m(o)},ll.requestFormReset=function(o){r.d.r(o)},ll.unstable_batchedUpdates=function(o,T){return o(T)},ll.useFormState=function(o,T,I){return p.H.useFormState(o,T,I)},ll.useFormStatus=function(){return p.H.useHostTransitionStatus()},ll.version="19.2.0",ll}var aP;function SN(){if(aP)return FC.exports;aP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),FC.exports=VU(),FC.exports}var lP;function UU(){if(lP)return Cx;lP=1;var t=BU(),e=IM(),n=SN();function r(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function h(u){var d=u,y=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(y=d.return),u=d.return;while(u)}return d.tag===3?y:null}function p(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function _(u){if(u.tag===31){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function o(u){if(h(u)!==u)throw Error(r(188))}function T(u){var d=u.alternate;if(!d){if(d=h(u),d===null)throw Error(r(188));return d!==u?null:u}for(var y=u,E=d;;){var P=y.return;if(P===null)break;var N=P.alternate;if(N===null){if(E=P.return,E!==null){y=E;continue}break}if(P.child===N.child){for(N=P.child;N;){if(N===y)return o(P),u;if(N===E)return o(P),d;N=N.sibling}throw Error(r(188))}if(y.return!==E.return)y=P,E=N;else{for(var ne=!1,xe=P.child;xe;){if(xe===y){ne=!0,y=P,E=N;break}if(xe===E){ne=!0,E=P,y=N;break}xe=xe.sibling}if(!ne){for(xe=N.child;xe;){if(xe===y){ne=!0,y=N,E=P;break}if(xe===E){ne=!0,E=N,y=P;break}xe=xe.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==E)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?u:d}function I(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u;for(u=u.child;u!==null;){if(d=I(u),d!==null)return d;u=u.sibling}return null}var M=Object.assign,L=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Q(u){return u===null||typeof u!="object"?null:(u=_e&&u[_e]||u["@@iterator"],typeof u=="function"?u:null)}var de=Symbol.for("react.client.reference");function Ve(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===de?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case $:return"Fragment";case te:return"Profiler";case X:return"StrictMode";case ge:return"Suspense";case Ee:return"SuspenseList";case le:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case q:return"Portal";case ie:return u.displayName||"Context";case he:return(u._context.displayName||"Context")+".Consumer";case me:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case ce:return d=u.displayName||null,d!==null?d:Ve(u.type)||"Memo";case ee:d=u._payload,u=u._init;try{return Ve(u(d))}catch{}}return null}var Ke=Array.isArray,Ce=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},Be=[],yt=-1;function Me(u){return{current:u}}function et(u){0>yt||(u.current=Be[yt],Be[yt]=null,yt--)}function At(u,d){yt++,Be[yt]=u.current,u.current=d}var Dt=Me(null),Gt=Me(null),Kt=Me(null),dn=Me(null);function Fn(u,d){switch(At(Kt,d),At(Gt,u),At(Dt,null),d.nodeType){case 9:case 11:u=(u=d.documentElement)&&(u=u.namespaceURI)?qf(u):0;break;default:if(u=d.tagName,d=d.namespaceURI)d=qf(d),u=vw(d,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}et(Dt),At(Dt,u)}function An(){et(Dt),et(Gt),et(Kt)}function Tn(u){u.memoizedState!==null&&At(dn,u);var d=Dt.current,y=vw(d,u.type);d!==y&&(At(Gt,u),At(Dt,y))}function Lt(u){Gt.current===u&&(et(Dt),et(Gt)),dn.current===u&&(et(dn),pm._currentValue=tt)}var Ft,gn;function mn(u){if(Ft===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Ft=d&&d[1]||"",gn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+u+gn}var tr=!1;function On(u,d){if(!u||tr)return"";tr=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(d){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch(Tt){var gt=Tt}Reflect.construct(u,[],jt)}else{try{jt.call()}catch(Tt){gt=Tt}u.call(jt.prototype)}}else{try{throw Error()}catch(Tt){gt=Tt}(jt=u())&&typeof jt.catch=="function"&&jt.catch(function(){})}}catch(Tt){if(Tt&&gt&&typeof Tt.stack=="string")return[Tt.stack,gt.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=E.DetermineComponentFrameRoot(),ne=N[0],xe=N[1];if(ne&&xe){var We=ne.split(`
`),mt=xe.split(`
`);for(P=E=0;E<We.length&&!We[E].includes("DetermineComponentFrameRoot");)E++;for(;P<mt.length&&!mt[P].includes("DetermineComponentFrameRoot");)P++;if(E===We.length||P===mt.length)for(E=We.length-1,P=mt.length-1;1<=E&&0<=P&&We[E]!==mt[P];)P--;for(;1<=E&&0<=P;E--,P--)if(We[E]!==mt[P]){if(E!==1||P!==1)do if(E--,P--,0>P||We[E]!==mt[P]){var kt=`
`+We[E].replace(" at new "," at ");return u.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",u.displayName)),kt}while(1<=E&&0<=P);break}}}finally{tr=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?mn(y):""}function jn(u,d){switch(u.tag){case 26:case 27:case 5:return mn(u.type);case 16:return mn("Lazy");case 13:return u.child!==d&&d!==null?mn("Suspense Fallback"):mn("Suspense");case 19:return mn("SuspenseList");case 0:case 15:return On(u.type,!1);case 11:return On(u.type.render,!1);case 1:return On(u.type,!0);case 31:return mn("Activity");default:return""}}function Lr(u){try{var d="",y=null;do d+=jn(u,y),y=u,u=u.return;while(u);return d}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var $n=Object.prototype.hasOwnProperty,Vn=t.unstable_scheduleCallback,Tr=t.unstable_cancelCallback,En=t.unstable_shouldYield,Hi=t.unstable_requestPaint,nr=t.unstable_now,on=t.unstable_getCurrentPriorityLevel,en=t.unstable_ImmediatePriority,yn=t.unstable_UserBlockingPriority,bn=t.unstable_NormalPriority,Pn=t.unstable_LowPriority,Bn=t.unstable_IdlePriority,Zn=t.log,vi=t.unstable_setDisableYieldValue,Sr=null,Or=null;function vn(u){if(typeof Zn=="function"&&vi(u),Or&&typeof Or.setStrictMode=="function")try{Or.setStrictMode(Sr,u)}catch{}}var Wn=Math.clz32?Math.clz32:Jo,ri=Math.log,Ss=Math.LN2;function Jo(u){return u>>>=0,u===0?32:31-(ri(u)/Ss|0)|0}var Oe=256,pe=262144,fe=4194304;function ke(u){var d=u&42;if(d!==0)return d;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Fe(u,d,y){var E=u.pendingLanes;if(E===0)return 0;var P=0,N=u.suspendedLanes,ne=u.pingedLanes;u=u.warmLanes;var xe=E&134217727;return xe!==0?(E=xe&~N,E!==0?P=ke(E):(ne&=xe,ne!==0?P=ke(ne):y||(y=xe&~u,y!==0&&(P=ke(y))))):(xe=E&~N,xe!==0?P=ke(xe):ne!==0?P=ke(ne):y||(y=E&~u,y!==0&&(P=ke(y)))),P===0?0:d!==0&&d!==P&&(d&N)===0&&(N=P&-P,y=d&-d,N>=y||N===32&&(y&4194048)!==0)?d:P}function Ge(u,d){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&d)===0}function nt(u,d){switch(u){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rt(){var u=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),u}function Ye(u){for(var d=[],y=0;31>y;y++)d.push(u);return d}function ut(u,d){u.pendingLanes|=d,d!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Yt(u,d,y,E,P,N){var ne=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var xe=u.entanglements,We=u.expirationTimes,mt=u.hiddenUpdates;for(y=ne&~y;0<y;){var kt=31-Wn(y),jt=1<<kt;xe[kt]=0,We[kt]=-1;var gt=mt[kt];if(gt!==null)for(mt[kt]=null,kt=0;kt<gt.length;kt++){var Tt=gt[kt];Tt!==null&&(Tt.lane&=-536870913)}y&=~jt}E!==0&&Qt(u,E,0),N!==0&&P===0&&u.tag!==0&&(u.suspendedLanes|=N&~(ne&~d))}function Qt(u,d,y){u.pendingLanes|=d,u.suspendedLanes&=~d;var E=31-Wn(d);u.entangledLanes|=d,u.entanglements[E]=u.entanglements[E]|1073741824|y&261930}function $t(u,d){var y=u.entangledLanes|=d;for(u=u.entanglements;y;){var E=31-Wn(y),P=1<<E;P&d|u[E]&d&&(u[E]|=d),y&=~P}}function Xn(u,d){var y=d&-d;return y=(y&42)!==0?1:Jn(y),(y&(u.suspendedLanes|d))!==0?0:y}function Jn(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function qn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function ir(){var u=Xe.p;return u!==0?u:(u=window.event,u===void 0?32:Qf(u.type))}function er(u,d){var y=Xe.p;try{return Xe.p=u,d()}finally{Xe.p=y}}var Vr=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Vr,Kr="__reactProps$"+Vr,xi="__reactContainer$"+Vr,No="__reactEvents$"+Vr,Cs="__reactListeners$"+Vr,Hs="__reactHandles$"+Vr,lc="__reactResources$"+Vr,Ul="__reactMarker$"+Vr;function Nu(u){delete u[Cr],delete u[Kr],delete u[No],delete u[Cs],delete u[Hs]}function _r(u){var d=u[Cr];if(d)return d;for(var y=u.parentNode;y;){if(d=y[xi]||y[Cr]){if(y=d.alternate,d.child!==null||y!==null&&y.child!==null)for(u=Cw(u);u!==null;){if(y=u[Cr])return y;u=Cw(u)}return d}u=y,y=u.parentNode}return null}function ea(u){if(u=u[Cr]||u[xi]){var d=u.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return u}return null}function io(u){var d=u.tag;if(d===5||d===26||d===27||d===6)return u.stateNode;throw Error(r(33))}function Na(u){var d=u[lc];return d||(d=u[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function hs(u){u[Ul]=!0}var ta=new Set,ma={};function Ba(u,d){Fa(u,d),Fa(u+"Capture",d)}function Fa(u,d){for(ma[u]=d,u=0;u<d.length;u++)ta.add(d[u])}var yl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ga={},cc={};function xt(u){return $n.call(cc,u)?!0:$n.call(ga,u)?!1:yl.test(u)?cc[u]=!0:(ga[u]=!0,!1)}function na(u,d,y){if(xt(d))if(y===null)u.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(d);return;case"boolean":var E=d.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){u.removeAttribute(d);return}}u.setAttribute(d,""+y)}}function Zr(u,d,y){if(y===null)u.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(d);return}u.setAttribute(d,""+y)}}function zr(u,d,y,E){if(E===null)u.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(d,y,""+E)}}function zs(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function so(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Bu(u,d,y){var E=Object.getOwnPropertyDescriptor(u.constructor.prototype,d);if(!u.hasOwnProperty(d)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var P=E.get,N=E.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return P.call(this)},set:function(ne){y=""+ne,N.call(this,ne)}}),Object.defineProperty(u,d,{enumerable:E.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function mi(u){if(!u._valueTracker){var d=so(u)?"checked":"value";u._valueTracker=Bu(u,d,""+u[d])}}function Va(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var y=d.getValue(),E="";return u&&(E=so(u)?u.checked?"true":"false":u.value),u=E,u!==y?(d.setValue(u),!0):!1}function nn(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var sr=/[\n"\\]/g;function Hn(u){return u.replace(sr,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Gs(u,d,y,E,P,N,ne,xe){u.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?u.type=ne:u.removeAttribute("type"),d!=null?ne==="number"?(d===0&&u.value===""||u.value!=d)&&(u.value=""+zs(d)):u.value!==""+zs(d)&&(u.value=""+zs(d)):ne!=="submit"&&ne!=="reset"||u.removeAttribute("value"),d!=null?or(u,ne,zs(d)):y!=null?or(u,ne,zs(y)):E!=null&&u.removeAttribute("value"),P==null&&N!=null&&(u.defaultChecked=!!N),P!=null&&(u.checked=P&&typeof P!="function"&&typeof P!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?u.name=""+zs(xe):u.removeAttribute("name")}function ra(u,d,y,E,P,N,ne,xe){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(u.type=N),d!=null||y!=null){if(!(N!=="submit"&&N!=="reset"||d!=null)){mi(u);return}y=y!=null?""+zs(y):"",d=d!=null?""+zs(d):y,xe||d===u.value||(u.value=d),u.defaultValue=d}E=E??P,E=typeof E!="function"&&typeof E!="symbol"&&!!E,u.checked=xe?u.checked:!!E,u.defaultChecked=!!E,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(u.name=ne),mi(u)}function or(u,d,y){d==="number"&&nn(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function As(u,d,y,E){if(u=u.options,d){d={};for(var P=0;P<y.length;P++)d["$"+y[P]]=!0;for(y=0;y<u.length;y++)P=d.hasOwnProperty("$"+u[y].value),u[y].selected!==P&&(u[y].selected=P),P&&E&&(u[y].defaultSelected=!0)}else{for(y=""+zs(y),d=null,P=0;P<u.length;P++){if(u[P].value===y){u[P].selected=!0,E&&(u[P].defaultSelected=!0);return}d!==null||u[P].disabled||(d=u[P])}d!==null&&(d.selected=!0)}}function qc(u,d,y){if(d!=null&&(d=""+zs(d),d!==u.value&&(u.value=d),y==null)){u.defaultValue!==d&&(u.defaultValue=d);return}u.defaultValue=y!=null?""+zs(y):""}function ia(u,d,y,E){if(d==null){if(E!=null){if(y!=null)throw Error(r(92));if(Ke(E)){if(1<E.length)throw Error(r(93));E=E[0]}y=E}y==null&&(y=""),d=y}y=zs(d),u.defaultValue=y,E=u.textContent,E===y&&E!==""&&E!==null&&(u.value=E),mi(u)}function Ji(u,d){if(d){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=d;return}}u.textContent=d}var bi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nh(u,d,y){var E=d.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?E?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="":E?u.setProperty(d,y):typeof y!="number"||y===0||bi.has(d)?d==="float"?u.cssFloat=y:u[d]=(""+y).trim():u[d]=y+"px"}function ya(u,d,y){if(d!=null&&typeof d!="object")throw Error(r(62));if(u=u.style,y!=null){for(var E in y)!y.hasOwnProperty(E)||d!=null&&d.hasOwnProperty(E)||(E.indexOf("--")===0?u.setProperty(E,""):E==="float"?u.cssFloat="":u[E]="");for(var P in d)E=d[P],d.hasOwnProperty(P)&&y[P]!==E&&Nh(u,P,E)}else for(var N in d)d.hasOwnProperty(N)&&Nh(u,N,d[N])}function jl(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$l=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fu(u){return $l.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Bo(){}var uc=null;function Fo(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var _a=null,ds=null;function Ii(u){var d=ea(u);if(d&&(u=d.stateNode)){var y=u[Kr]||null;e:switch(u=d.stateNode,d.type){case"input":if(Gs(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),d=y.name,y.type==="radio"&&d!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Hn(""+d)+'"][type="radio"]'),d=0;d<y.length;d++){var E=y[d];if(E!==u&&E.form===u.form){var P=E[Kr]||null;if(!P)throw Error(r(90));Gs(E,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(d=0;d<y.length;d++)E=y[d],E.form===u.form&&Va(E)}break e;case"textarea":qc(u,y.value,y.defaultValue);break e;case"select":d=y.value,d!=null&&As(u,!!y.multiple,d,!1)}}}var Gc=!1;function ql(u,d,y){if(Gc)return u(d,y);Gc=!0;try{var E=u(d);return E}finally{if(Gc=!1,(_a!==null||ds!==null)&&(sm(),_a&&(d=_a,u=ds,ds=_a=null,Ii(d),u)))for(d=0;d<u.length;d++)Ii(u[d])}}function as(u,d){var y=u.stateNode;if(y===null)return null;var E=y[Kr]||null;if(E===null)return null;y=E[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(u=u.type,E=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!E;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(r(231,d,typeof y));return y}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(fs)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Wc=!1}var si=null,hc=null,dc=null;function _l(){if(dc)return dc;var u,d=hc,y=d.length,E,P="value"in si?si.value:si.textContent,N=P.length;for(u=0;u<y&&d[u]===P[u];u++);var ne=y-u;for(E=1;E<=ne&&d[y-E]===P[N-E];E++);return dc=P.slice(u,1<E?1-E:void 0)}function ps(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function vl(){return!0}function va(){return!1}function es(u){function d(y,E,P,N,ne){this._reactName=y,this._targetInst=P,this.type=E,this.nativeEvent=N,this.target=ne,this.currentTarget=null;for(var xe in u)u.hasOwnProperty(xe)&&(y=u[xe],this[xe]=y?y(N):N[xe]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?vl:va,this.isPropagationStopped=va,this}return M(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),d}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xa=es(yo),Yc=M({},yo,{view:0,detail:0}),Vu=es(Yc),ba,Vo,Ua,ja=M({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Ua&&(Ua&&u.type==="mousemove"?(ba=u.screenX-Ua.screenX,Vo=u.screenY-Ua.screenY):Vo=ba=0,Ua=u),ba)},movementY:function(u){return"movementY"in u?u.movementY:Vo}}),wa=es(ja),xl=M({},ja,{dataTransfer:0}),$a=es(xl),Uu=M({},Yc,{relatedTarget:0}),qa=es(Uu),fc=M({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),uf=es(fc),pc=M({},yo,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Bh=es(pc),Fh=M({},yo,{data:0}),Uo=es(Fh),Nr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=Vh[u])?!!d[u]:!1}function Hl(){return hf}var _o=M({},Yc,{key:function(u){if(u.key){var d=Nr[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=ps(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ap[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(u){return u.type==="keypress"?ps(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ps(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Uh=es(_o),mc=M({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ha=es(mc),D=M({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),K=es(D),ae=M({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ie=es(ae),dt=M({},ja,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),_t=es(dt),hn=M({},yo,{newState:0,oldState:0}),gr=es(hn),ls=[9,13,27,32],Hr=fs&&"CompositionEvent"in window,Gi=null;fs&&"documentMode"in document&&(Gi=document.documentMode);var rr=fs&&"TextEvent"in window&&!Gi,sa=fs&&(!Hr||Gi&&8<Gi&&11>=Gi),Ga=" ",Ta=!1;function Xc(u,d){switch(u){case"keyup":return ls.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wa(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Kc=!1;function r0(u,d){switch(u){case"compositionend":return Wa(d);case"keypress":return d.which!==32?null:(Ta=!0,Ga);case"textInput":return u=d.data,u===Ga&&Ta?null:u;default:return null}}function i0(u,d){if(Kc)return u==="compositionend"||!Hr&&Xc(u,d)?(u=_l(),dc=hc=si=null,Kc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return sa&&d.locale!=="ko"?null:d.data;default:return null}}var s0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!s0[u.type]:d==="textarea"}function Mp(u,d,y,E){_a?ds?ds.push(E):ds=[E]:_a=E,d=jf(d,"onChange"),0<d.length&&(y=new xa("onChange","change",null,y,E),u.push({event:y,listeners:d}))}var ju=null,Zc=null;function $y(u){X0(u,0)}function df(u){var d=io(u);if(Va(d))return u}function qy(u,d){if(u==="change")return d}var jh=!1;if(fs){var Qc;if(fs){var ff="oninput"in document;if(!ff){var $h=document.createElement("div");$h.setAttribute("oninput","return;"),ff=typeof $h.oninput=="function"}Qc=ff}else Qc=!1;jh=Qc&&(!document.documentMode||9<document.documentMode)}function Rp(){ju&&(ju.detachEvent("onpropertychange",bl),Zc=ju=null)}function bl(u){if(u.propertyName==="value"&&df(Zc)){var d=[];Mp(d,Zc,u,Fo(u)),ql($y,d)}}function Dp(u,d,y){u==="focusin"?(Rp(),ju=d,Zc=y,ju.attachEvent("onpropertychange",bl)):u==="focusout"&&Rp()}function ug(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return df(Zc)}function kp(u,d){if(u==="click")return df(d)}function Hy(u,d){if(u==="input"||u==="change")return df(d)}function hg(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Ea=typeof Object.is=="function"?Object.is:hg;function $u(u,d){if(Ea(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var y=Object.keys(u),E=Object.keys(d);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var P=y[E];if(!$n.call(d,P)||!Ea(u[P],d[P]))return!1}return!0}function pf(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function qh(u,d){var y=pf(u);u=0;for(var E;y;){if(y.nodeType===3){if(E=u+y.textContent.length,u<=d&&E>=d)return{node:y,offset:d-u};u=E}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=pf(y)}}function dg(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?dg(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function Pp(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var d=nn(u.document);d instanceof u.HTMLIFrameElement;){try{var y=typeof d.contentWindow.location.href=="string"}catch{y=!1}if(y)u=d.contentWindow;else break;d=nn(u.document)}return d}function fg(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}var pg=fs&&"documentMode"in document&&11>=document.documentMode,qu=null,Hu=null,Hh=null,Gh=!1;function mg(u,d,y){var E=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Gh||qu==null||qu!==nn(E)||(E=qu,"selectionStart"in E&&fg(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Hh&&$u(Hh,E)||(Hh=E,E=jf(Hu,"onSelect"),0<E.length&&(d=new xa("onSelect","select",null,d,y),u.push({event:d,listeners:E}),d.target=qu)))}function Ya(u,d){var y={};return y[u.toLowerCase()]=d.toLowerCase(),y["Webkit"+u]="webkit"+d,y["Moz"+u]="moz"+d,y}var Wh={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},gg={},Gy={};fs&&(Gy=document.createElement("div").style,"AnimationEvent"in window||(delete Wh.animationend.animation,delete Wh.animationiteration.animation,delete Wh.animationstart.animation),"TransitionEvent"in window||delete Wh.transitionend.transition);function Gu(u){if(gg[u])return gg[u];if(!Wh[u])return u;var d=Wh[u],y;for(y in d)if(d.hasOwnProperty(y)&&y in Gy)return gg[u]=d[y];return u}var Wy=Gu("animationend"),yg=Gu("animationiteration"),mf=Gu("animationstart"),Yh=Gu("transitionrun"),Yy=Gu("transitionstart"),Xy=Gu("transitioncancel"),Gl=Gu("transitionend"),gf=new Map,oa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oa.push("scrollEnd");function jo(u,d){gf.set(u,d),Ba(d,[u])}var yf=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Ws=[],wl=0,Xh=0;function Wu(){for(var u=wl,d=Xh=wl=0;d<u;){var y=Ws[d];Ws[d++]=null;var E=Ws[d];Ws[d++]=null;var P=Ws[d];Ws[d++]=null;var N=Ws[d];if(Ws[d++]=null,E!==null&&P!==null){var ne=E.pending;ne===null?P.next=P:(P.next=ne.next,ne.next=P),E.pending=P}N!==0&&_f(y,P,N)}}function Dr(u,d,y,E){Ws[wl++]=u,Ws[wl++]=d,Ws[wl++]=y,Ws[wl++]=E,Xh|=E,u.lanes|=E,u=u.alternate,u!==null&&(u.lanes|=E)}function Yu(u,d,y,E){return Dr(u,d,y,E),gc(u)}function Jc(u,d){return Dr(u,null,null,d),gc(u)}function _f(u,d,y){u.lanes|=y;var E=u.alternate;E!==null&&(E.lanes|=y);for(var P=!1,N=u.return;N!==null;)N.childLanes|=y,E=N.alternate,E!==null&&(E.childLanes|=y),N.tag===22&&(u=N.stateNode,u===null||u._visibility&1||(P=!0)),u=N,N=N.return;return u.tag===3?(N=u.stateNode,P&&d!==null&&(P=31-Wn(y),u=N.hiddenUpdates,E=u[P],E===null?u[P]=[d]:E.push(d),d.lane=y|536870912),N):null}function gc(u){if(50<ts)throw ts=0,rm=null,Error(r(185));for(var d=u.return;d!==null;)u=d,d=u.return;return u.tag===3?u.stateNode:null}var Xu={};function Lp(u,d,y,E){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(u,d,y,E){return new Lp(u,d,y,E)}function Op(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Xa(u,d){var y=u.alternate;return y===null?(y=bs(u.tag,d,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=d,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,d=u.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function Ku(u,d){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=d,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,d=y.dependencies,u.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),u}function yc(u,d,y,E,P,N){var ne=0;if(E=u,typeof u=="function")Op(u)&&(ne=1);else if(typeof u=="string")ne=kw(u,y,Dt.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case le:return u=bs(31,y,d,P),u.elementType=le,u.lanes=N,u;case $:return _c(y.children,P,N,d);case X:ne=8,P|=24;break;case te:return u=bs(12,y,d,P|2),u.elementType=te,u.lanes=N,u;case ge:return u=bs(13,y,d,P),u.elementType=ge,u.lanes=N,u;case Ee:return u=bs(19,y,d,P),u.elementType=Ee,u.lanes=N,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case ie:ne=10;break e;case he:ne=9;break e;case me:ne=11;break e;case ce:ne=14;break e;case ee:ne=16,E=null;break e}ne=29,y=Error(r(130,u===null?"null":typeof u,"")),E=null}return d=bs(ne,y,d,P),d.elementType=u,d.type=E,d.lanes=N,d}function _c(u,d,y,E){return u=bs(7,u,E,d),u.lanes=y,u}function Zu(u,d,y){return u=bs(6,u,null,d),u.lanes=y,u}function Kh(u){var d=bs(18,null,null,0);return d.stateNode=u,d}function Zh(u,d,y){return d=bs(4,u.children!==null?u.children:[],u.key,d),d.lanes=y,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}var vf=new WeakMap;function rn(u,d){if(typeof u=="object"&&u!==null){var y=vf.get(u);return y!==void 0?y:(d={value:u,source:d,stack:Lr(d)},vf.set(u,d),d)}return{value:u,source:d,stack:Lr(d)}}var vo=[],Qu=0,eu=null,vc=0,wi=[],xo=0,Tl=null,Ka=1,Sa="";function Wl(u,d){vo[Qu++]=vc,vo[Qu++]=eu,eu=u,vc=d}function xf(u,d,y){wi[xo++]=Ka,wi[xo++]=Sa,wi[xo++]=Tl,Tl=u;var E=Ka;u=Sa;var P=32-Wn(E)-1;E&=~(1<<P),y+=1;var N=32-Wn(d)+P;if(30<N){var ne=P-P%5;N=(E&(1<<ne)-1).toString(32),E>>=ne,P-=ne,Ka=1<<32-Wn(d)+P|y<<P|E,Sa=N+u}else Ka=1<<N|y<<P|E,Sa=u}function tu(u){u.return!==null&&(Wl(u,1),xf(u,1,0))}function bf(u){for(;u===eu;)eu=vo[--Qu],vo[Qu]=null,vc=vo[--Qu],vo[Qu]=null;for(;u===Tl;)Tl=wi[--xo],wi[xo]=null,Sa=wi[--xo],wi[xo]=null,Ka=wi[--xo],wi[xo]=null}function Ky(u,d){wi[xo++]=Ka,wi[xo++]=Sa,wi[xo++]=Tl,Ka=d.id,Sa=d.overflow,Tl=u}var Ys=null,gi=null,Br=!1,Yl=null,aa=!1,Qh=Error(r(519));function Za(u){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qa(rn(d,u)),Qh}function Jh(u){var d=u.stateNode,y=u.type,E=u.memoizedProps;switch(d[Cr]=u,d[Kr]=E,y){case"dialog":Fr("cancel",d),Fr("close",d);break;case"iframe":case"object":case"embed":Fr("load",d);break;case"video":case"audio":for(y=0;y<pu.length;y++)Fr(pu[y],d);break;case"source":Fr("error",d);break;case"img":case"image":case"link":Fr("error",d),Fr("load",d);break;case"details":Fr("toggle",d);break;case"input":Fr("invalid",d),ra(d,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":Fr("invalid",d);break;case"textarea":Fr("invalid",d),ia(d,E.value,E.defaultValue,E.children)}y=E.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||d.textContent===""+y||E.suppressHydrationWarning===!0||gw(d.textContent,y)?(E.popover!=null&&(Fr("beforetoggle",d),Fr("toggle",d)),E.onScroll!=null&&Fr("scroll",d),E.onScrollEnd!=null&&Fr("scrollend",d),E.onClick!=null&&(d.onclick=Bo),d=!0):d=!1,d||Za(u,!0)}function zp(u){for(Ys=u.return;Ys;)switch(Ys.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:Ys=Ys.return}}function Ju(u){if(u!==Ys)return!1;if(!Br)return zp(u),Br=!0,!1;var d=u.tag,y;if((y=d!==3&&d!==27)&&((y=d===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||tx(u.type,u.memoizedProps)),y=!y),y&&gi&&Za(u),zp(u),d===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));gi=Sw(u)}else if(d===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));gi=Sw(u)}else d===27?(d=gi,mu(u.type)?(u=ax,ax=null,gi=u):gi=d):gi=Ys?tc(u.stateNode.nextSibling):null;return!0}function xc(){gi=Ys=null,Br=!1}function Np(){var u=Yl;return u!==null&&(Ma===null?Ma=u:Ma.push.apply(Ma,u),Yl=null),u}function Qa(u){Yl===null?Yl=[u]:Yl.push(u)}var Bp=Me(null),nu=null,bc=null;function wc(u,d,y){At(Bp,d._currentValue),d._currentValue=y}function El(u){u._currentValue=Bp.current,et(Bp)}function Fp(u,d,y){for(;u!==null;){var E=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),u===y)break;u=u.return}}function Vp(u,d,y,E){var P=u.child;for(P!==null&&(P.return=u);P!==null;){var N=P.dependencies;if(N!==null){var ne=P.child;N=N.firstContext;e:for(;N!==null;){var xe=N;N=P;for(var We=0;We<d.length;We++)if(xe.context===d[We]){N.lanes|=y,xe=N.alternate,xe!==null&&(xe.lanes|=y),Fp(N.return,y,u),E||(ne=null);break e}N=xe.next}}else if(P.tag===18){if(ne=P.return,ne===null)throw Error(r(341));ne.lanes|=y,N=ne.alternate,N!==null&&(N.lanes|=y),Fp(ne,y,u),ne=null}else ne=P.child;if(ne!==null)ne.return=P;else for(ne=P;ne!==null;){if(ne===u){ne=null;break}if(P=ne.sibling,P!==null){P.return=ne.return,ne=P;break}ne=ne.return}P=ne}}function ws(u,d,y,E){u=null;for(var P=d,N=!1;P!==null;){if(!N){if((P.flags&524288)!==0)N=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var ne=P.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var xe=P.type;Ea(P.pendingProps.value,ne.value)||(u!==null?u.push(xe):u=[xe])}}else if(P===dn.current){if(ne=P.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(u!==null?u.push(pm):u=[pm])}P=P.return}u!==null&&Vp(d,u,y,E),d.flags|=262144}function Up(u){for(u=u.firstContext;u!==null;){if(!Ea(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function ru(u){nu=u,bc=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function oo(u){return Ca(nu,u)}function jp(u,d){return nu===null&&ru(u),Ca(u,d)}function Ca(u,d){var y=d._currentValue;if(d={context:d,memoizedValue:y,next:null},bc===null){if(u===null)throw Error(r(308));bc=d,u.dependencies={lanes:0,firstContext:d},u.flags|=524288}else bc=bc.next=d;return y}var Zy=typeof AbortController<"u"?AbortController:function(){var u=[],d=this.signal={aborted:!1,addEventListener:function(y,E){u.push(E)}};this.abort=function(){d.aborted=!0,u.forEach(function(y){return y()})}},o0=t.unstable_scheduleCallback,Sl=t.unstable_NormalPriority,Ti={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tc(){return{controller:new Zy,data:new Map,refCount:0}}function iu(u){u.refCount--,u.refCount===0&&o0(Sl,function(){u.controller.abort()})}var fn=null,wf=0,su=0,Cl=null;function eh(u,d){if(fn===null){var y=fn=[];wf=0,su=I_(),Cl={status:"pending",value:void 0,then:function(E){y.push(E)}}}return wf++,d.then(an,an),d}function an(){if(--wf===0&&fn!==null){Cl!==null&&(Cl.status="fulfilled");var u=fn;fn=null,su=0,Cl=null;for(var d=0;d<u.length;d++)(0,u[d])()}}function _g(u,d){var y=[],E={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return u.then(function(){E.status="fulfilled",E.value=d;for(var P=0;P<y.length;P++)(0,y[P])(d)},function(P){for(E.status="rejected",E.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),E}var Qy=Ce.S;Ce.S=function(u,d){X1=nr(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&eh(u,d),Qy!==null&&Qy(u,d)};var ou=Me(null);function Tf(){var u=ou.current;return u!==null?u:Wi.pooledCache}function Ef(u,d){d===null?At(ou,ou.current):At(ou,d.pool)}function vg(){var u=Tf();return u===null?null:{parent:Ti._currentValue,pool:u}}var ed=Error(r(460)),xg=Error(r(474)),td=Error(r(542)),nd={then:function(){}};function $p(u){return u=u.status,u==="fulfilled"||u==="rejected"}function th(u,d,y){switch(y=u[y],y===void 0?u.push(d):y!==d&&(d.then(Bo,Bo),d=y),d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,b(u),u;default:if(typeof d.status=="string")d.then(Bo,Bo);else{if(u=Wi,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=d,u.status="pending",u.then(function(E){if(d.status==="pending"){var P=d;P.status="fulfilled",P.value=E}},function(E){if(d.status==="pending"){var P=d;P.status="rejected",P.reason=E}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw u=d.reason,b(u),u}throw c=d,ed}}function v(u){try{var d=u._init;return d(u._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(c=y,ed):y}}var c=null;function m(){if(c===null)throw Error(r(459));var u=c;return c=null,u}function b(u){if(u===ed||u===td)throw Error(r(483))}var S=null,A=0;function O(u){var d=A;return A+=1,S===null&&(S=[]),th(S,u,d)}function z(u,d){d=d.props.ref,u.ref=d!==void 0?d:null}function U(u,d){throw d.$$typeof===L?Error(r(525)):(u=Object.prototype.toString.call(d),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u)))}function Y(u){function d(st,Ze){if(u){var ft=st.deletions;ft===null?(st.deletions=[Ze],st.flags|=16):ft.push(Ze)}}function y(st,Ze){if(!u)return null;for(;Ze!==null;)d(st,Ze),Ze=Ze.sibling;return null}function E(st){for(var Ze=new Map;st!==null;)st.key!==null?Ze.set(st.key,st):Ze.set(st.index,st),st=st.sibling;return Ze}function P(st,Ze){return st=Xa(st,Ze),st.index=0,st.sibling=null,st}function N(st,Ze,ft){return st.index=ft,u?(ft=st.alternate,ft!==null?(ft=ft.index,ft<Ze?(st.flags|=67108866,Ze):ft):(st.flags|=67108866,Ze)):(st.flags|=1048576,Ze)}function ne(st){return u&&st.alternate===null&&(st.flags|=67108866),st}function xe(st,Ze,ft,Pt){return Ze===null||Ze.tag!==6?(Ze=Zu(ft,st.mode,Pt),Ze.return=st,Ze):(Ze=P(Ze,ft),Ze.return=st,Ze)}function We(st,Ze,ft,Pt){var Yn=ft.type;return Yn===$?kt(st,Ze,ft.props.children,Pt,ft.key):Ze!==null&&(Ze.elementType===Yn||typeof Yn=="object"&&Yn!==null&&Yn.$$typeof===ee&&v(Yn)===Ze.type)?(Ze=P(Ze,ft.props),z(Ze,ft),Ze.return=st,Ze):(Ze=yc(ft.type,ft.key,ft.props,null,st.mode,Pt),z(Ze,ft),Ze.return=st,Ze)}function mt(st,Ze,ft,Pt){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ft.containerInfo||Ze.stateNode.implementation!==ft.implementation?(Ze=Zh(ft,st.mode,Pt),Ze.return=st,Ze):(Ze=P(Ze,ft.children||[]),Ze.return=st,Ze)}function kt(st,Ze,ft,Pt,Yn){return Ze===null||Ze.tag!==7?(Ze=_c(ft,st.mode,Pt,Yn),Ze.return=st,Ze):(Ze=P(Ze,ft),Ze.return=st,Ze)}function jt(st,Ze,ft){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=Zu(""+Ze,st.mode,ft),Ze.return=st,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case F:return ft=yc(Ze.type,Ze.key,Ze.props,null,st.mode,ft),z(ft,Ze),ft.return=st,ft;case q:return Ze=Zh(Ze,st.mode,ft),Ze.return=st,Ze;case ee:return Ze=v(Ze),jt(st,Ze,ft)}if(Ke(Ze)||Q(Ze))return Ze=_c(Ze,st.mode,ft,null),Ze.return=st,Ze;if(typeof Ze.then=="function")return jt(st,O(Ze),ft);if(Ze.$$typeof===ie)return jt(st,jp(st,Ze),ft);U(st,Ze)}return null}function gt(st,Ze,ft,Pt){var Yn=Ze!==null?Ze.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Yn!==null?null:xe(st,Ze,""+ft,Pt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case F:return ft.key===Yn?We(st,Ze,ft,Pt):null;case q:return ft.key===Yn?mt(st,Ze,ft,Pt):null;case ee:return ft=v(ft),gt(st,Ze,ft,Pt)}if(Ke(ft)||Q(ft))return Yn!==null?null:kt(st,Ze,ft,Pt,null);if(typeof ft.then=="function")return gt(st,Ze,O(ft),Pt);if(ft.$$typeof===ie)return gt(st,Ze,jp(st,ft),Pt);U(st,ft)}return null}function Tt(st,Ze,ft,Pt,Yn){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return st=st.get(ft)||null,xe(Ze,st,""+Pt,Yn);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case F:return st=st.get(Pt.key===null?ft:Pt.key)||null,We(Ze,st,Pt,Yn);case q:return st=st.get(Pt.key===null?ft:Pt.key)||null,mt(Ze,st,Pt,Yn);case ee:return Pt=v(Pt),Tt(st,Ze,ft,Pt,Yn)}if(Ke(Pt)||Q(Pt))return st=st.get(ft)||null,kt(Ze,st,Pt,Yn,null);if(typeof Pt.then=="function")return Tt(st,Ze,ft,O(Pt),Yn);if(Pt.$$typeof===ie)return Tt(st,Ze,ft,jp(Ze,Pt),Yn);U(Ze,Pt)}return null}function In(st,Ze,ft,Pt){for(var Yn=null,oi=null,Nn=Ze,xr=Ze=0,Yr=null;Nn!==null&&xr<ft.length;xr++){Nn.index>xr?(Yr=Nn,Nn=null):Yr=Nn.sibling;var yi=gt(st,Nn,ft[xr],Pt);if(yi===null){Nn===null&&(Nn=Yr);break}u&&Nn&&yi.alternate===null&&d(st,Nn),Ze=N(yi,Ze,xr),oi===null?Yn=yi:oi.sibling=yi,oi=yi,Nn=Yr}if(xr===ft.length)return y(st,Nn),Br&&Wl(st,xr),Yn;if(Nn===null){for(;xr<ft.length;xr++)Nn=jt(st,ft[xr],Pt),Nn!==null&&(Ze=N(Nn,Ze,xr),oi===null?Yn=Nn:oi.sibling=Nn,oi=Nn);return Br&&Wl(st,xr),Yn}for(Nn=E(Nn);xr<ft.length;xr++)Yr=Tt(Nn,st,xr,ft[xr],Pt),Yr!==null&&(u&&Yr.alternate!==null&&Nn.delete(Yr.key===null?xr:Yr.key),Ze=N(Yr,Ze,xr),oi===null?Yn=Yr:oi.sibling=Yr,oi=Yr);return u&&Nn.forEach(function(Ed){return d(st,Ed)}),Br&&Wl(st,xr),Yn}function Kn(st,Ze,ft,Pt){if(ft==null)throw Error(r(151));for(var Yn=null,oi=null,Nn=Ze,xr=Ze=0,Yr=null,yi=ft.next();Nn!==null&&!yi.done;xr++,yi=ft.next()){Nn.index>xr?(Yr=Nn,Nn=null):Yr=Nn.sibling;var Ed=gt(st,Nn,yi.value,Pt);if(Ed===null){Nn===null&&(Nn=Yr);break}u&&Nn&&Ed.alternate===null&&d(st,Nn),Ze=N(Ed,Ze,xr),oi===null?Yn=Ed:oi.sibling=Ed,oi=Ed,Nn=Yr}if(yi.done)return y(st,Nn),Br&&Wl(st,xr),Yn;if(Nn===null){for(;!yi.done;xr++,yi=ft.next())yi=jt(st,yi.value,Pt),yi!==null&&(Ze=N(yi,Ze,xr),oi===null?Yn=yi:oi.sibling=yi,oi=yi);return Br&&Wl(st,xr),Yn}for(Nn=E(Nn);!yi.done;xr++,yi=ft.next())yi=Tt(Nn,st,xr,yi.value,Pt),yi!==null&&(u&&yi.alternate!==null&&Nn.delete(yi.key===null?xr:yi.key),Ze=N(yi,Ze,xr),oi===null?Yn=yi:oi.sibling=yi,oi=yi);return u&&Nn.forEach(function(yC){return d(st,yC)}),Br&&Wl(st,xr),Yn}function Ai(st,Ze,ft,Pt){if(typeof ft=="object"&&ft!==null&&ft.type===$&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case F:e:{for(var Yn=ft.key;Ze!==null;){if(Ze.key===Yn){if(Yn=ft.type,Yn===$){if(Ze.tag===7){y(st,Ze.sibling),Pt=P(Ze,ft.props.children),Pt.return=st,st=Pt;break e}}else if(Ze.elementType===Yn||typeof Yn=="object"&&Yn!==null&&Yn.$$typeof===ee&&v(Yn)===Ze.type){y(st,Ze.sibling),Pt=P(Ze,ft.props),z(Pt,ft),Pt.return=st,st=Pt;break e}y(st,Ze);break}else d(st,Ze);Ze=Ze.sibling}ft.type===$?(Pt=_c(ft.props.children,st.mode,Pt,ft.key),Pt.return=st,st=Pt):(Pt=yc(ft.type,ft.key,ft.props,null,st.mode,Pt),z(Pt,ft),Pt.return=st,st=Pt)}return ne(st);case q:e:{for(Yn=ft.key;Ze!==null;){if(Ze.key===Yn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ft.containerInfo&&Ze.stateNode.implementation===ft.implementation){y(st,Ze.sibling),Pt=P(Ze,ft.children||[]),Pt.return=st,st=Pt;break e}else{y(st,Ze);break}else d(st,Ze);Ze=Ze.sibling}Pt=Zh(ft,st.mode,Pt),Pt.return=st,st=Pt}return ne(st);case ee:return ft=v(ft),Ai(st,Ze,ft,Pt)}if(Ke(ft))return In(st,Ze,ft,Pt);if(Q(ft)){if(Yn=Q(ft),typeof Yn!="function")throw Error(r(150));return ft=Yn.call(ft),Kn(st,Ze,ft,Pt)}if(typeof ft.then=="function")return Ai(st,Ze,O(ft),Pt);if(ft.$$typeof===ie)return Ai(st,Ze,jp(st,ft),Pt);U(st,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,Ze!==null&&Ze.tag===6?(y(st,Ze.sibling),Pt=P(Ze,ft),Pt.return=st,st=Pt):(y(st,Ze),Pt=Zu(ft,st.mode,Pt),Pt.return=st,st=Pt),ne(st)):y(st,Ze)}return function(st,Ze,ft,Pt){try{A=0;var Yn=Ai(st,Ze,ft,Pt);return S=null,Yn}catch(Nn){if(Nn===ed||Nn===td)throw Nn;var oi=bs(29,Nn,null,st.mode);return oi.lanes=Pt,oi.return=st,oi}finally{}}}var W=Y(!0),re=Y(!1),ye=!1;function we(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Se(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Te(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ae(u,d,y){var E=u.updateQueue;if(E===null)return null;if(E=E.shared,(Si&2)!==0){var P=E.pending;return P===null?d.next=d:(d.next=P.next,P.next=d),E.pending=d,d=gc(u),_f(u,null,y),d}return Dr(u,E,d,y),gc(u)}function oe(u,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194048)!==0)){var E=d.lanes;E&=u.pendingLanes,y|=E,d.lanes=y,$t(u,y)}}function be(u,d){var y=u.updateQueue,E=u.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var P=null,N=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};N===null?P=N=ne:N=N.next=ne,y=y.next}while(y!==null);N===null?P=N=d:N=N.next=d}else P=N=d;y={baseState:E.baseState,firstBaseUpdate:P,lastBaseUpdate:N,shared:E.shared,callbacks:E.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=d:u.next=d,y.lastBaseUpdate=d}var Pe=!1;function Le(){if(Pe){var u=Cl;if(u!==null)throw u}}function $e(u,d,y,E){Pe=!1;var P=u.updateQueue;ye=!1;var N=P.firstBaseUpdate,ne=P.lastBaseUpdate,xe=P.shared.pending;if(xe!==null){P.shared.pending=null;var We=xe,mt=We.next;We.next=null,ne===null?N=mt:ne.next=mt,ne=We;var kt=u.alternate;kt!==null&&(kt=kt.updateQueue,xe=kt.lastBaseUpdate,xe!==ne&&(xe===null?kt.firstBaseUpdate=mt:xe.next=mt,kt.lastBaseUpdate=We))}if(N!==null){var jt=P.baseState;ne=0,kt=mt=We=null,xe=N;do{var gt=xe.lane&-536870913,Tt=gt!==xe.lane;if(Tt?(Wr&gt)===gt:(E&gt)===gt){gt!==0&&gt===su&&(Pe=!0),kt!==null&&(kt=kt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var In=u,Kn=xe;gt=d;var Ai=y;switch(Kn.tag){case 1:if(In=Kn.payload,typeof In=="function"){jt=In.call(Ai,jt,gt);break e}jt=In;break e;case 3:In.flags=In.flags&-65537|128;case 0:if(In=Kn.payload,gt=typeof In=="function"?In.call(Ai,jt,gt):In,gt==null)break e;jt=M({},jt,gt);break e;case 2:ye=!0}}gt=xe.callback,gt!==null&&(u.flags|=64,Tt&&(u.flags|=8192),Tt=P.callbacks,Tt===null?P.callbacks=[gt]:Tt.push(gt))}else Tt={lane:gt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},kt===null?(mt=kt=Tt,We=jt):kt=kt.next=Tt,ne|=gt;if(xe=xe.next,xe===null){if(xe=P.shared.pending,xe===null)break;Tt=xe,xe=Tt.next,Tt.next=null,P.lastBaseUpdate=Tt,P.shared.pending=null}}while(!0);kt===null&&(We=jt),P.baseState=We,P.firstBaseUpdate=mt,P.lastBaseUpdate=kt,N===null&&(P.shared.lanes=0),fu|=ne,u.lanes=ne,u.memoizedState=jt}}function He(u,d){if(typeof u!="function")throw Error(r(191,u));u.call(d)}function qe(u,d){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)He(y[u],d)}var Je=Me(null),Qe=Me(0);function ct(u,d){u=Ms,At(Qe,u),At(Je,d),Ms=u|d.baseLanes}function Ut(){At(Qe,Ms),At(Je,Je.current)}function it(){Ms=Qe.current,et(Je),et(Qe)}var vt=Me(null),lt=null;function zt(u){var d=u.alternate;At(It,It.current&1),At(vt,u),lt===null&&(d===null||Je.current!==null||d.memoizedState!==null)&&(lt=u)}function ot(u){At(It,It.current),At(vt,u),lt===null&&(lt=u)}function Et(u){u.tag===22?(At(It,It.current),At(vt,u),lt===null&&(lt=u)):Nt()}function Nt(){At(It,It.current),At(vt,vt.current)}function St(u){et(vt),lt===u&&(lt=null),et(It)}var It=Me(0);function Sn(u){for(var d=u;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||sx(y)||ox(y)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var zn=0,Bt=null,ln=null,Ln=null,ar=!1,xn=!1,kr=!1,Qr=0,Gr=0,Ur=null,bo=0;function Pr(){throw Error(r(321))}function la(u,d){if(d===null)return!1;for(var y=0;y<d.length&&y<u.length;y++)if(!Ea(u[y],d[y]))return!1;return!0}function Ja(u,d,y,E,P,N){return zn=N,Bt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ce.H=u===null||u.memoizedState===null?s_:o_,kr=!1,N=y(E,P),kr=!1,xn&&(N=fi(d,y,E,P)),Oi(u),N}function Oi(u){Ce.H=Ml;var d=ln!==null&&ln.next!==null;if(zn=0,Ln=ln=Bt=null,ar=!1,Gr=0,Ur=null,d)throw Error(r(300));u===null||Ns||(u=u.dependencies,u!==null&&Up(u)&&(Ns=!0))}function fi(u,d,y,E){Bt=u;var P=0;do{if(xn&&(Ur=null),Gr=0,xn=!1,25<=P)throw Error(r(301));if(P+=1,Ln=ln=null,u.updateQueue!=null){var N=u.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}Ce.H=Wp,N=d(y,E)}while(xn);return N}function jr(){var u=Ce.H,d=u.useState()[0];return d=typeof d.then=="function"?Ec(d):d,u=u.useState()[0],(ln!==null?ln.memoizedState:null)!==u&&(Bt.flags|=1024),d}function ms(){var u=Qr!==0;return Qr=0,u}function ao(u,d,y){d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~y}function Ei(u){if(ar){for(u=u.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}ar=!1}zn=0,Ln=ln=Bt=null,xn=!1,Gr=Qr=0,Ur=null}function Mi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?Bt.memoizedState=Ln=u:Ln=Ln.next=u,Ln}function cs(){if(ln===null){var u=Bt.alternate;u=u!==null?u.memoizedState:null}else u=ln.next;var d=Ln===null?Bt.memoizedState:Ln.next;if(d!==null)Ln=d,ln=u;else{if(u===null)throw Bt.alternate===null?Error(r(467)):Error(r(310));ln=u,u={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Ln===null?Bt.memoizedState=Ln=u:Ln=Ln.next=u}return Ln}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(u){var d=Gr;return Gr+=1,Ur===null&&(Ur=[]),u=th(Ur,u,d),d=Bt,(Ln===null?d.memoizedState:Ln.next)===null&&(d=d.alternate,Ce.H=d===null||d.memoizedState===null?s_:o_),u}function el(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Ec(u);if(u.$$typeof===ie)return oo(u)}throw Error(r(438,String(u)))}function Kl(u){var d=null,y=Bt.updateQueue;if(y!==null&&(d=y.memoCache),d==null){var E=Bt.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(d={data:E.data.map(function(P){return P.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),y===null&&(y=Xl(),Bt.updateQueue=y),y.memoCache=d,y=d.data[d.index],y===void 0)for(y=d.data[d.index]=Array(u),E=0;E<u;E++)y[E]=se;return d.index++,y}function $o(u,d){return typeof d=="function"?d(u):d}function nh(u){var d=cs();return rh(d,ln,u)}function rh(u,d,y){var E=u.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=y;var P=u.baseQueue,N=E.pending;if(N!==null){if(P!==null){var ne=P.next;P.next=N.next,N.next=ne}d.baseQueue=P=N,E.pending=null}if(N=u.baseState,P===null)u.memoizedState=N;else{d=P.next;var xe=ne=null,We=null,mt=d,kt=!1;do{var jt=mt.lane&-536870913;if(jt!==mt.lane?(Wr&jt)===jt:(zn&jt)===jt){var gt=mt.revertLane;if(gt===0)We!==null&&(We=We.next={lane:0,revertLane:0,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),jt===su&&(kt=!0);else if((zn&gt)===gt){mt=mt.next,gt===su&&(kt=!0);continue}else jt={lane:0,revertLane:mt.revertLane,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},We===null?(xe=We=jt,ne=N):We=We.next=jt,Bt.lanes|=gt,fu|=gt;jt=mt.action,kr&&y(N,jt),N=mt.hasEagerState?mt.eagerState:y(N,jt)}else gt={lane:jt,revertLane:mt.revertLane,gesture:mt.gesture,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},We===null?(xe=We=gt,ne=N):We=We.next=gt,Bt.lanes|=jt,fu|=jt;mt=mt.next}while(mt!==null&&mt!==d);if(We===null?ne=N:We.next=xe,!Ea(N,u.memoizedState)&&(Ns=!0,kt&&(y=Cl,y!==null)))throw y;u.memoizedState=N,u.baseState=ne,u.baseQueue=We,E.lastRenderedState=N}return P===null&&(E.lanes=0),[u.memoizedState,E.dispatch]}function Sf(u){var d=cs(),y=d.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=u;var E=y.dispatch,P=y.pending,N=d.memoizedState;if(P!==null){y.pending=null;var ne=P=P.next;do N=u(N,ne.action),ne=ne.next;while(ne!==P);Ea(N,d.memoizedState)||(Ns=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),y.lastRenderedState=N}return[N,E]}function a0(u,d,y){var E=Bt,P=cs(),N=Br;if(N){if(y===void 0)throw Error(r(407));y=y()}else y=d();var ne=!Ea((ln||P).memoizedState,y);if(ne&&(P.memoizedState=y,Ns=!0),P=P.queue,f0(Jy.bind(null,E,P,u),[u]),P.getSnapshot!==d||ne||Ln!==null&&Ln.memoizedState.tag&1){if(E.flags|=2048,Al(9,{destroy:void 0},I1.bind(null,E,P,y,d),null),Wi===null)throw Error(r(349));N||(zn&127)!==0||l0(E,d,y)}return y}function l0(u,d,y){u.flags|=16384,u={getSnapshot:d,value:y},d=Bt.updateQueue,d===null?(d=Xl(),Bt.updateQueue=d,d.stores=[u]):(y=d.stores,y===null?d.stores=[u]:y.push(u))}function I1(u,d,y,E){d.value=y,d.getSnapshot=E,bg(d)&&c0(u)}function Jy(u,d,y){return y(function(){bg(d)&&c0(u)})}function bg(u){var d=u.getSnapshot;u=u.value;try{var y=d();return!Ea(u,y)}catch{return!0}}function c0(u){var d=Jc(u,2);d!==null&&Wo(d,u,2)}function wg(u){var d=Mi();if(typeof u=="function"){var y=u;if(u=y(),kr){vn(!0);try{y()}finally{vn(!1)}}}return d.memoizedState=d.baseState=u,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:u},d}function Tg(u,d,y,E){return u.baseState=y,rh(u,ln,typeof E=="function"?E:$o)}function ih(u,d,y,E,P){if(Ag(u))throw Error(r(485));if(u=d.action,u!==null){var N={payload:P,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){N.listeners.push(ne)}};Ce.T!==null?y(!0):N.isTransition=!1,E(N),y=d.pending,y===null?(N.next=d.pending=N,Eg(d,N)):(N.next=y.next,d.pending=y.next=N)}}function Eg(u,d){var y=d.action,E=d.payload,P=u.state;if(d.isTransition){var N=Ce.T,ne={};Ce.T=ne;try{var xe=y(P,E),We=Ce.S;We!==null&&We(ne,xe),u0(u,d,xe)}catch(mt){d0(u,d,mt)}finally{N!==null&&ne.types!==null&&(N.types=ne.types),Ce.T=N}}else try{N=y(P,E),u0(u,d,N)}catch(mt){d0(u,d,mt)}}function u0(u,d,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){h0(u,d,E)},function(E){return d0(u,d,E)}):h0(u,d,y)}function h0(u,d,y){d.status="fulfilled",d.value=y,M1(d),u.state=y,d=u.pending,d!==null&&(y=d.next,y===d?u.pending=null:(y=y.next,d.next=y,Eg(u,y)))}function d0(u,d,y){var E=u.pending;if(u.pending=null,E!==null){E=E.next;do d.status="rejected",d.reason=y,M1(d),d=d.next;while(d!==E)}u.action=null}function M1(u){u=u.listeners;for(var d=0;d<u.length;d++)(0,u[d])()}function R1(u,d){return d}function e_(u,d){if(Br){var y=Wi.formState;if(y!==null){e:{var E=Bt;if(Br){if(gi){t:{for(var P=gi,N=aa;P.nodeType!==8;){if(!N){P=null;break t}if(P=tc(P.nextSibling),P===null){P=null;break t}}N=P.data,P=N==="F!"||N==="F"?P:null}if(P){gi=tc(P.nextSibling),E=P.data==="F!";break e}}Za(E)}E=!1}E&&(d=y[0])}}return y=Mi(),y.memoizedState=y.baseState=d,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R1,lastRenderedState:d},y.queue=E,y=y0.bind(null,Bt,E),E.dispatch=y,E=wg(!1),N=Cg.bind(null,Bt,!1,E.queue),E=Mi(),P={state:d,dispatch:null,action:u,pending:null},E.queue=P,y=ih.bind(null,Bt,P,N,y),P.dispatch=y,E.memoizedState=u,[d,y,!1]}function qp(u){var d=cs();return Cf(d,ln,u)}function Cf(u,d,y){if(d=rh(u,d,R1)[0],u=nh($o)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var E=Ec(d)}catch(ne){throw ne===ed?td:ne}else E=d;d=cs();var P=d.queue,N=P.dispatch;return y!==d.memoizedState&&(Bt.flags|=2048,Al(9,{destroy:void 0},sh.bind(null,P,y),null)),[E,N,u]}function sh(u,d){u.action=d}function Zl(u){var d=cs(),y=ln;if(y!==null)return Cf(d,y,u);cs(),d=d.memoizedState,y=cs();var E=y.queue.dispatch;return y.memoizedState=u,[d,E,!1]}function Al(u,d,y,E){return u={tag:u,create:y,deps:E,inst:d,next:null},d=Bt.updateQueue,d===null&&(d=Xl(),Bt.updateQueue=d),y=d.lastEffect,y===null?d.lastEffect=u.next=u:(E=y.next,y.next=u,u.next=E,d.lastEffect=u),u}function oh(){return cs().memoizedState}function au(u,d,y,E){var P=Mi();Bt.flags|=u,P.memoizedState=Al(1|d,{destroy:void 0},y,E===void 0?null:E)}function t_(u,d,y,E){var P=cs();E=E===void 0?null:E;var N=P.memoizedState.inst;ln!==null&&E!==null&&la(E,ln.memoizedState.deps)?P.memoizedState=Al(d,N,y,E):(Bt.flags|=u,P.memoizedState=Al(1|d,N,y,E))}function D1(u,d){au(8390656,8,u,d)}function f0(u,d){t_(2048,8,u,d)}function sC(u){Bt.flags|=4;var d=Bt.updateQueue;if(d===null)d=Xl(),Bt.updateQueue=d,d.events=[u];else{var y=d.events;y===null?d.events=[u]:y.push(u)}}function p0(u){var d=cs().memoizedState;return sC({ref:d,nextImpl:u}),function(){if((Si&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function m0(u,d){return t_(4,2,u,d)}function Ql(u,d){return t_(4,4,u,d)}function k1(u,d){if(typeof d=="function"){u=u();var y=d(u);return function(){typeof y=="function"?y():d(null)}}if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function P1(u,d,y){y=y!=null?y.concat([u]):null,t_(4,4,k1.bind(null,d,u),y)}function gs(){}function Rn(u,d){var y=cs();d=d===void 0?null:d;var E=y.memoizedState;return d!==null&&la(d,E[1])?E[0]:(y.memoizedState=[u,d],u)}function ah(u,d){var y=cs();d=d===void 0?null:d;var E=y.memoizedState;if(d!==null&&la(d,E[1]))return E[0];if(E=u(),kr){vn(!0);try{u()}finally{vn(!1)}}return y.memoizedState=[E,d],E}function Hp(u,d,y){return y===void 0||(zn&1073741824)!==0&&(Wr&261930)===0?u.memoizedState=d:(u.memoizedState=y,u=Dg(),Bt.lanes|=u,fu|=u,y)}function Aa(u,d,y,E){return Ea(y,d)?y:Je.current!==null?(u=Hp(u,y,E),Ea(u,d)||(Ns=!0),u):(zn&42)===0||(zn&1073741824)!==0&&(Wr&261930)===0?(Ns=!0,u.memoizedState=y):(u=Dg(),Bt.lanes|=u,fu|=u,d)}function g0(u,d,y,E,P){var N=Xe.p;Xe.p=N!==0&&8>N?N:8;var ne=Ce.T,xe={};Ce.T=xe,Cg(u,!1,d,y);try{var We=P(),mt=Ce.S;if(mt!==null&&mt(xe,We),We!==null&&typeof We=="object"&&typeof We.then=="function"){var kt=_g(We,E);Sg(u,d,kt,il(u))}else Sg(u,d,E,il(u))}catch(jt){Sg(u,d,{then:function(){},status:"rejected",reason:jt},il())}finally{Xe.p=N,ne!==null&&xe.types!==null&&(ne.types=xe.types),Ce.T=ne}}function L1(){}function Il(u,d,y,E){if(u.tag!==5)throw Error(r(476));var P=n_(u).queue;g0(u,P,d,tt,y===null?L1:function(){return rd(u),y(E)})}function n_(u){var d=u.memoizedState;if(d!==null)return d;d={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:tt},next:null};var y={};return d.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:y},next:null},u.memoizedState=d,u=u.alternate,u!==null&&(u.memoizedState=d),d}function rd(u){var d=n_(u);d.next===null&&(d=u.alternate.memoizedState),Sg(u,d.next.queue,{},il())}function Af(){return oo(pm)}function id(){return cs().memoizedState}function r_(){return cs().memoizedState}function i_(u){for(var d=u.return;d!==null;){switch(d.tag){case 24:case 3:var y=il();u=Te(y);var E=Ae(d,u,y);E!==null&&(Wo(E,d,y),oe(E,d,y)),d={cache:Tc()},u.payload=d;return}d=d.return}}function O1(u,d,y){var E=il();y={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Ag(u)?Gp(d,y):(y=Yu(u,d,y,E),y!==null&&(Wo(y,u,E),If(y,d,E)))}function y0(u,d,y){var E=il();Sg(u,d,y,E)}function Sg(u,d,y,E){var P={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Ag(u))Gp(d,P);else{var N=u.alternate;if(u.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var ne=d.lastRenderedState,xe=N(ne,y);if(P.hasEagerState=!0,P.eagerState=xe,Ea(xe,ne))return Dr(u,d,P,0),Wi===null&&Wu(),!1}catch{}finally{}if(y=Yu(u,d,P,E),y!==null)return Wo(y,u,E),If(y,d,E),!0}return!1}function Cg(u,d,y,E){if(E={lane:2,revertLane:I_(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},Ag(u)){if(d)throw Error(r(479))}else d=Yu(u,y,E,2),d!==null&&Wo(d,u,2)}function Ag(u){var d=u.alternate;return u===Bt||d!==null&&d===Bt}function Gp(u,d){xn=ar=!0;var y=u.pending;y===null?d.next=d:(d.next=y.next,y.next=d),u.pending=d}function If(u,d,y){if((y&4194048)!==0){var E=d.lanes;E&=u.pendingLanes,y|=E,d.lanes=y,$t(u,y)}}var Ml={readContext:oo,use:el,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useLayoutEffect:Pr,useInsertionEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useSyncExternalStore:Pr,useId:Pr,useHostTransitionStatus:Pr,useFormState:Pr,useActionState:Pr,useOptimistic:Pr,useMemoCache:Pr,useCacheRefresh:Pr};Ml.useEffectEvent=Pr;var s_={readContext:oo,use:el,useCallback:function(u,d){return Mi().memoizedState=[u,d===void 0?null:d],u},useContext:oo,useEffect:D1,useImperativeHandle:function(u,d,y){y=y!=null?y.concat([u]):null,au(4194308,4,k1.bind(null,d,u),y)},useLayoutEffect:function(u,d){return au(4194308,4,u,d)},useInsertionEffect:function(u,d){au(4,2,u,d)},useMemo:function(u,d){var y=Mi();d=d===void 0?null:d;var E=u();if(kr){vn(!0);try{u()}finally{vn(!1)}}return y.memoizedState=[E,d],E},useReducer:function(u,d,y){var E=Mi();if(y!==void 0){var P=y(d);if(kr){vn(!0);try{y(d)}finally{vn(!1)}}}else P=d;return E.memoizedState=E.baseState=P,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:P},E.queue=u,u=u.dispatch=O1.bind(null,Bt,u),[E.memoizedState,u]},useRef:function(u){var d=Mi();return u={current:u},d.memoizedState=u},useState:function(u){u=wg(u);var d=u.queue,y=y0.bind(null,Bt,d);return d.dispatch=y,[u.memoizedState,y]},useDebugValue:gs,useDeferredValue:function(u,d){var y=Mi();return Hp(y,u,d)},useTransition:function(){var u=wg(!1);return u=g0.bind(null,Bt,u.queue,!0,!1),Mi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,d,y){var E=Bt,P=Mi();if(Br){if(y===void 0)throw Error(r(407));y=y()}else{if(y=d(),Wi===null)throw Error(r(349));(Wr&127)!==0||l0(E,d,y)}P.memoizedState=y;var N={value:y,getSnapshot:d};return P.queue=N,D1(Jy.bind(null,E,N,u),[u]),E.flags|=2048,Al(9,{destroy:void 0},I1.bind(null,E,N,y,d),null),y},useId:function(){var u=Mi(),d=Wi.identifierPrefix;if(Br){var y=Sa,E=Ka;y=(E&~(1<<32-Wn(E)-1)).toString(32)+y,d="_"+d+"R_"+y,y=Qr++,0<y&&(d+="H"+y.toString(32)),d+="_"}else y=bo++,d="_"+d+"r_"+y.toString(32)+"_";return u.memoizedState=d},useHostTransitionStatus:Af,useFormState:e_,useActionState:e_,useOptimistic:function(u){var d=Mi();d.memoizedState=d.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=y,d=Cg.bind(null,Bt,!0,y),y.dispatch=d,[u,d]},useMemoCache:Kl,useCacheRefresh:function(){return Mi().memoizedState=i_.bind(null,Bt)},useEffectEvent:function(u){var d=Mi(),y={impl:u};return d.memoizedState=y,function(){if((Si&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},o_={readContext:oo,use:el,useCallback:Rn,useContext:oo,useEffect:f0,useImperativeHandle:P1,useInsertionEffect:m0,useLayoutEffect:Ql,useMemo:ah,useReducer:nh,useRef:oh,useState:function(){return nh($o)},useDebugValue:gs,useDeferredValue:function(u,d){var y=cs();return Aa(y,ln.memoizedState,u,d)},useTransition:function(){var u=nh($o)[0],d=cs().memoizedState;return[typeof u=="boolean"?u:Ec(u),d]},useSyncExternalStore:a0,useId:id,useHostTransitionStatus:Af,useFormState:qp,useActionState:qp,useOptimistic:function(u,d){var y=cs();return Tg(y,ln,u,d)},useMemoCache:Kl,useCacheRefresh:r_};o_.useEffectEvent=p0;var Wp={readContext:oo,use:el,useCallback:Rn,useContext:oo,useEffect:f0,useImperativeHandle:P1,useInsertionEffect:m0,useLayoutEffect:Ql,useMemo:ah,useReducer:Sf,useRef:oh,useState:function(){return Sf($o)},useDebugValue:gs,useDeferredValue:function(u,d){var y=cs();return ln===null?Hp(y,u,d):Aa(y,ln.memoizedState,u,d)},useTransition:function(){var u=Sf($o)[0],d=cs().memoizedState;return[typeof u=="boolean"?u:Ec(u),d]},useSyncExternalStore:a0,useId:id,useHostTransitionStatus:Af,useFormState:Zl,useActionState:Zl,useOptimistic:function(u,d){var y=cs();return ln!==null?Tg(y,ln,u,d):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:Kl,useCacheRefresh:r_};Wp.useEffectEvent=p0;function Mf(u,d,y,E){d=u.memoizedState,y=y(E,d),y=y==null?d:M({},d,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var Ia={enqueueSetState:function(u,d,y){u=u._reactInternals;var E=il(),P=Te(E);P.payload=d,y!=null&&(P.callback=y),d=Ae(u,P,E),d!==null&&(Wo(d,u,E),oe(d,u,E))},enqueueReplaceState:function(u,d,y){u=u._reactInternals;var E=il(),P=Te(E);P.tag=1,P.payload=d,y!=null&&(P.callback=y),d=Ae(u,P,E),d!==null&&(Wo(d,u,E),oe(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var y=il(),E=Te(y);E.tag=2,d!=null&&(E.callback=d),d=Ae(u,E,y),d!==null&&(Wo(d,u,y),oe(d,u,y))}};function Yp(u,d,y,E,P,N,ne){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(E,N,ne):d.prototype&&d.prototype.isPureReactComponent?!$u(y,E)||!$u(P,N):!0}function qo(u,d,y,E){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,E),d.state!==u&&Ia.enqueueReplaceState(d,d.state,null)}function wo(u,d){var y=d;if("ref"in d){y={};for(var E in d)E!=="ref"&&(y[E]=d[E])}if(u=u.defaultProps){y===d&&(y=M({},y));for(var P in u)y[P]===void 0&&(y[P]=u[P])}return y}function a_(u){yf(u)}function ys(u){console.error(u)}function _0(u){yf(u)}function sd(u,d){try{var y=u.onUncaughtError;y(d.value,{componentStack:d.stack})}catch(E){setTimeout(function(){throw E})}}function Jl(u,d,y){try{var E=u.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function v0(u,d,y){return y=Te(y),y.tag=3,y.payload={element:null},y.callback=function(){sd(u,d)},y}function z1(u){return u=Te(u),u.tag=3,u}function x0(u,d,y,E){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var N=E.value;u.payload=function(){return P(N)},u.callback=function(){Jl(d,y,E)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(u.callback=function(){Jl(d,y,E),typeof P!="function"&&(dd===null?dd=new Set([this]):dd.add(this));var xe=E.stack;this.componentDidCatch(E.value,{componentStack:xe!==null?xe:""})})}function N1(u,d,y,E,P){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(d=y.alternate,d!==null&&ws(d,y,P,!0),y=vt.current,y!==null){switch(y.tag){case 31:case 13:return lt===null?am():y.alternate===null&&Rs===0&&(Rs=3),y.flags&=-257,y.flags|=65536,y.lanes=P,E===nd?y.flags|=16384:(d=y.updateQueue,d===null?y.updateQueue=new Set([E]):d.add(E),C_(u,E,P)),!1;case 22:return y.flags|=65536,E===nd?y.flags|=16384:(d=y.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=d):(y=d.retryQueue,y===null?d.retryQueue=new Set([E]):y.add(E)),C_(u,E,P)),!1}throw Error(r(435,y.tag))}return C_(u,E,P),am(),!1}if(Br)return d=vt.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=P,E!==Qh&&(u=Error(r(422),{cause:E}),Qa(rn(u,y)))):(E!==Qh&&(d=Error(r(423),{cause:E}),Qa(rn(d,y))),u=u.current.alternate,u.flags|=65536,P&=-P,u.lanes|=P,E=rn(E,y),P=v0(u.stateNode,E,P),be(u,P),Rs!==4&&(Rs=2)),!1;var N=Error(r(520),{cause:E});if(N=rn(N,y),ud===null?ud=[N]:ud.push(N),Rs!==4&&(Rs=2),d===null)return!0;E=rn(E,y),y=d;do{switch(y.tag){case 3:return y.flags|=65536,u=P&-P,y.lanes|=u,u=v0(y.stateNode,E,u),be(y,u),!1;case 1:if(d=y.type,N=y.stateNode,(y.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(dd===null||!dd.has(N))))return y.flags|=65536,P&=-P,y.lanes|=P,P=z1(P),x0(P,u,y,E),be(y,P),!1}y=y.return}while(y!==null);return!1}var lh=Error(r(461)),Ns=!1;function To(u,d,y,E){d.child=u===null?re(d,null,y,E):W(d,u.child,y,E)}function b0(u,d,y,E,P){y=y.render;var N=d.ref;if("ref"in E){var ne={};for(var xe in E)xe!=="ref"&&(ne[xe]=E[xe])}else ne=E;return ru(d),E=Ja(u,d,y,ne,N,P),xe=ms(),u!==null&&!Ns?(ao(u,d,P),So(u,d,P)):(Br&&xe&&tu(d),d.flags|=1,To(u,d,E,P),d.child)}function w0(u,d,y,E,P){if(u===null){var N=y.type;return typeof N=="function"&&!Op(N)&&N.defaultProps===void 0&&y.compare===null?(d.tag=15,d.type=N,B1(u,d,N,E,P)):(u=yc(y.type,null,E,d,d.mode,P),u.ref=d.ref,u.return=d,d.child=u)}if(N=u.child,!uh(u,P)){var ne=N.memoizedProps;if(y=y.compare,y=y!==null?y:$u,y(ne,E)&&u.ref===d.ref)return So(u,d,P)}return d.flags|=1,u=Xa(N,E),u.ref=d.ref,u.return=d,d.child=u}function B1(u,d,y,E,P){if(u!==null){var N=u.memoizedProps;if($u(N,E)&&u.ref===d.ref)if(Ns=!1,d.pendingProps=E=N,uh(u,P))(u.flags&131072)!==0&&(Ns=!0);else return d.lanes=u.lanes,So(u,d,P)}return Eo(u,d,y,E,P)}function F1(u,d,y,E){var P=E.children,N=u!==null?u.memoizedState:null;if(u===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((d.flags&128)!==0){if(N=N!==null?N.baseLanes|y:y,u!==null){for(E=d.child=u.child,P=0;E!==null;)P=P|E.lanes|E.childLanes,E=E.sibling;E=P&~N}else E=0,d.child=null;return T0(u,d,N,y,E)}if((y&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},u!==null&&Ef(d,N!==null?N.cachePool:null),N!==null?ct(d,N):Ut(),Et(d);else return E=d.lanes=536870912,T0(u,d,N!==null?N.baseLanes|y:y,y,E)}else N!==null?(Ef(d,N.cachePool),ct(d,N),Nt(),d.memoizedState=null):(u!==null&&Ef(d,null),Ut(),Nt());return To(u,d,P,y),d.child}function Xp(u,d){return u!==null&&u.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function T0(u,d,y,E,P){var N=Tf();return N=N===null?null:{parent:Ti._currentValue,pool:N},d.memoizedState={baseLanes:y,cachePool:N},u!==null&&Ef(d,null),Ut(),Et(d),u!==null&&ws(u,d,E,!0),d.childLanes=P,null}function od(u,d){return d=u_({mode:d.mode,children:d.children},u.mode),d.ref=u.ref,u.child=d,d.return=u,d}function l_(u,d,y){return W(d,u.child,null,y),u=od(d,d.pendingProps),u.flags|=2,St(d),d.memoizedState=null,u}function E0(u,d,y){var E=d.pendingProps,P=(d.flags&128)!==0;if(d.flags&=-129,u===null){if(Br){if(E.mode==="hidden")return u=od(d,E),d.lanes=536870912,Xp(null,u);if(ot(d),(u=gi)?(u=Ew(u,aa),u=u!==null&&u.data==="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:Tl!==null?{id:Ka,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},y=Kh(u),y.return=d,d.child=y,Ys=d,gi=null)):u=null,u===null)throw Za(d);return d.lanes=536870912,null}return od(d,E)}var N=u.memoizedState;if(N!==null){var ne=N.dehydrated;if(ot(d),P)if(d.flags&256)d.flags&=-257,d=l_(u,d,y);else if(d.memoizedState!==null)d.child=u.child,d.flags|=128,d=null;else throw Error(r(558));else if(Ns||ws(u,d,y,!1),P=(y&u.childLanes)!==0,Ns||P){if(E=Wi,E!==null&&(ne=Xn(E,y),ne!==0&&ne!==N.retryLane))throw N.retryLane=ne,Jc(u,ne),Wo(E,u,ne),lh;am(),d=l_(u,d,y)}else u=N.treeContext,gi=tc(ne.nextSibling),Ys=d,Br=!0,Yl=null,aa=!1,u!==null&&Ky(d,u),d=od(d,E),d.flags|=4096;return d}return u=Xa(u.child,{mode:E.mode,children:E.children}),u.ref=d.ref,d.child=u,u.return=d,u}function Kp(u,d){var y=d.ref;if(y===null)u!==null&&u.ref!==null&&(d.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(u===null||u.ref!==y)&&(d.flags|=4194816)}}function Eo(u,d,y,E,P){return ru(d),y=Ja(u,d,y,E,void 0,P),E=ms(),u!==null&&!Ns?(ao(u,d,P),So(u,d,P)):(Br&&E&&tu(d),d.flags|=1,To(u,d,y,P),d.child)}function c_(u,d,y,E,P,N){return ru(d),d.updateQueue=null,y=fi(d,E,y,P),Oi(u),E=ms(),u!==null&&!Ns?(ao(u,d,N),So(u,d,N)):(Br&&E&&tu(d),d.flags|=1,To(u,d,y,N),d.child)}function S0(u,d,y,E,P){if(ru(d),d.stateNode===null){var N=Xu,ne=y.contextType;typeof ne=="object"&&ne!==null&&(N=oo(ne)),N=new y(E,N),d.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Ia,d.stateNode=N,N._reactInternals=d,N=d.stateNode,N.props=E,N.state=d.memoizedState,N.refs={},we(d),ne=y.contextType,N.context=typeof ne=="object"&&ne!==null?oo(ne):Xu,N.state=d.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(Mf(d,y,ne,E),N.state=d.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(ne=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),ne!==N.state&&Ia.enqueueReplaceState(N,N.state,null),$e(d,E,N,P),Le(),N.state=d.memoizedState),typeof N.componentDidMount=="function"&&(d.flags|=4194308),E=!0}else if(u===null){N=d.stateNode;var xe=d.memoizedProps,We=wo(y,xe);N.props=We;var mt=N.context,kt=y.contextType;ne=Xu,typeof kt=="object"&&kt!==null&&(ne=oo(kt));var jt=y.getDerivedStateFromProps;kt=typeof jt=="function"||typeof N.getSnapshotBeforeUpdate=="function",xe=d.pendingProps!==xe,kt||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(xe||mt!==ne)&&qo(d,N,E,ne),ye=!1;var gt=d.memoizedState;N.state=gt,$e(d,E,N,P),Le(),mt=d.memoizedState,xe||gt!==mt||ye?(typeof jt=="function"&&(Mf(d,y,jt,E),mt=d.memoizedState),(We=ye||Yp(d,y,We,E,gt,mt,ne))?(kt||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(d.flags|=4194308)):(typeof N.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=mt),N.props=E,N.state=mt,N.context=ne,E=We):(typeof N.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{N=d.stateNode,Se(u,d),ne=d.memoizedProps,kt=wo(y,ne),N.props=kt,jt=d.pendingProps,gt=N.context,mt=y.contextType,We=Xu,typeof mt=="object"&&mt!==null&&(We=oo(mt)),xe=y.getDerivedStateFromProps,(mt=typeof xe=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(ne!==jt||gt!==We)&&qo(d,N,E,We),ye=!1,gt=d.memoizedState,N.state=gt,$e(d,E,N,P),Le();var Tt=d.memoizedState;ne!==jt||gt!==Tt||ye||u!==null&&u.dependencies!==null&&Up(u.dependencies)?(typeof xe=="function"&&(Mf(d,y,xe,E),Tt=d.memoizedState),(kt=ye||Yp(d,y,kt,E,gt,Tt,We)||u!==null&&u.dependencies!==null&&Up(u.dependencies))?(mt||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(E,Tt,We),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(E,Tt,We)),typeof N.componentDidUpdate=="function"&&(d.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof N.componentDidUpdate!="function"||ne===u.memoizedProps&&gt===u.memoizedState||(d.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&gt===u.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=Tt),N.props=E,N.state=Tt,N.context=We,E=kt):(typeof N.componentDidUpdate!="function"||ne===u.memoizedProps&&gt===u.memoizedState||(d.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||ne===u.memoizedProps&&gt===u.memoizedState||(d.flags|=1024),E=!1)}return N=E,Kp(u,d),E=(d.flags&128)!==0,N||E?(N=d.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:N.render(),d.flags|=1,u!==null&&E?(d.child=W(d,u.child,null,P),d.child=W(d,null,y,P)):To(u,d,y,P),d.memoizedState=N.state,u=d.child):u=So(u,d,P),u}function Sc(u,d,y,E){return xc(),d.flags|=256,To(u,d,y,E),d.child}var C0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ch(u){return{baseLanes:u,cachePool:vg()}}function Rf(u,d,y){return u=u!==null?u.childLanes&~y:0,d&&(u|=kl),u}function Rl(u,d,y){var E=d.pendingProps,P=!1,N=(d.flags&128)!==0,ne;if((ne=N)||(ne=u!==null&&u.memoizedState===null?!1:(It.current&2)!==0),ne&&(P=!0,d.flags&=-129),ne=(d.flags&32)!==0,d.flags&=-33,u===null){if(Br){if(P?zt(d):Nt(),(u=gi)?(u=Ew(u,aa),u=u!==null&&u.data!=="&"?u:null,u!==null&&(d.memoizedState={dehydrated:u,treeContext:Tl!==null?{id:Ka,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},y=Kh(u),y.return=d,d.child=y,Ys=d,gi=null)):u=null,u===null)throw Za(d);return ox(u)?d.lanes=32:d.lanes=536870912,null}var xe=E.children;return E=E.fallback,P?(Nt(),P=d.mode,xe=u_({mode:"hidden",children:xe},P),E=_c(E,P,y,null),xe.return=d,E.return=d,xe.sibling=E,d.child=xe,E=d.child,E.memoizedState=ch(y),E.childLanes=Rf(u,ne,y),d.memoizedState=C0,Xp(null,E)):(zt(d),tl(d,xe))}var We=u.memoizedState;if(We!==null&&(xe=We.dehydrated,xe!==null)){if(N)d.flags&256?(zt(d),d.flags&=-257,d=Zp(u,d,y)):d.memoizedState!==null?(Nt(),d.child=u.child,d.flags|=128,d=null):(Nt(),xe=E.fallback,P=d.mode,E=u_({mode:"visible",children:E.children},P),xe=_c(xe,P,y,null),xe.flags|=2,E.return=d,xe.return=d,E.sibling=xe,d.child=E,W(d,u.child,null,y),E=d.child,E.memoizedState=ch(y),E.childLanes=Rf(u,ne,y),d.memoizedState=C0,d=Xp(null,E));else if(zt(d),ox(xe)){if(ne=xe.nextSibling&&xe.nextSibling.dataset,ne)var mt=ne.dgst;ne=mt,E=Error(r(419)),E.stack="",E.digest=ne,Qa({value:E,source:null,stack:null}),d=Zp(u,d,y)}else if(Ns||ws(u,d,y,!1),ne=(y&u.childLanes)!==0,Ns||ne){if(ne=Wi,ne!==null&&(E=Xn(ne,y),E!==0&&E!==We.retryLane))throw We.retryLane=E,Jc(u,E),Wo(ne,u,E),lh;sx(xe)||am(),d=Zp(u,d,y)}else sx(xe)?(d.flags|=192,d.child=u.child,d=null):(u=We.treeContext,gi=tc(xe.nextSibling),Ys=d,Br=!0,Yl=null,aa=!1,u!==null&&Ky(d,u),d=tl(d,E.children),d.flags|=4096);return d}return P?(Nt(),xe=E.fallback,P=d.mode,We=u.child,mt=We.sibling,E=Xa(We,{mode:"hidden",children:E.children}),E.subtreeFlags=We.subtreeFlags&65011712,mt!==null?xe=Xa(mt,xe):(xe=_c(xe,P,y,null),xe.flags|=2),xe.return=d,E.return=d,E.sibling=xe,d.child=E,Xp(null,E),E=d.child,xe=u.child.memoizedState,xe===null?xe=ch(y):(P=xe.cachePool,P!==null?(We=Ti._currentValue,P=P.parent!==We?{parent:We,pool:We}:P):P=vg(),xe={baseLanes:xe.baseLanes|y,cachePool:P}),E.memoizedState=xe,E.childLanes=Rf(u,ne,y),d.memoizedState=C0,Xp(u.child,E)):(zt(d),y=u.child,u=y.sibling,y=Xa(y,{mode:"visible",children:E.children}),y.return=d,y.sibling=null,u!==null&&(ne=d.deletions,ne===null?(d.deletions=[u],d.flags|=16):ne.push(u)),d.child=y,d.memoizedState=null,y)}function tl(u,d){return d=u_({mode:"visible",children:d},u.mode),d.return=u,u.child=d}function u_(u,d){return u=bs(22,u,null,d),u.lanes=0,u}function Zp(u,d,y){return W(d,u.child,null,y),u=tl(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function A0(u,d,y){u.lanes|=d;var E=u.alternate;E!==null&&(E.lanes|=d),Fp(u.return,d,y)}function I0(u,d,y,E,P,N){var ne=u.memoizedState;ne===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:P,treeForkCount:N}:(ne.isBackwards=d,ne.rendering=null,ne.renderingStartTime=0,ne.last=E,ne.tail=y,ne.tailMode=P,ne.treeForkCount=N)}function h_(u,d,y){var E=d.pendingProps,P=E.revealOrder,N=E.tail;E=E.children;var ne=It.current,xe=(ne&2)!==0;if(xe?(ne=ne&1|2,d.flags|=128):ne&=1,At(It,ne),To(u,d,E,y),E=Br?vc:0,!xe&&u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&A0(u,y,d);else if(u.tag===19)A0(u,y,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(P){case"forwards":for(y=d.child,P=null;y!==null;)u=y.alternate,u!==null&&Sn(u)===null&&(P=y),y=y.sibling;y=P,y===null?(P=d.child,d.child=null):(P=y.sibling,y.sibling=null),I0(d,!1,P,y,N,E);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=d.child,d.child=null;P!==null;){if(u=P.alternate,u!==null&&Sn(u)===null){d.child=P;break}u=P.sibling,P.sibling=y,y=P,P=u}I0(d,!0,y,null,N,E);break;case"together":I0(d,!1,null,null,void 0,E);break;default:d.memoizedState=null}return d.child}function So(u,d,y){if(u!==null&&(d.dependencies=u.dependencies),fu|=d.lanes,(y&d.childLanes)===0)if(u!==null){if(ws(u,d,y,!1),(y&d.childLanes)===0)return null}else return null;if(u!==null&&d.child!==u.child)throw Error(r(153));if(d.child!==null){for(u=d.child,y=Xa(u,u.pendingProps),d.child=y,y.return=d;u.sibling!==null;)u=u.sibling,y=y.sibling=Xa(u,u.pendingProps),y.return=d;y.sibling=null}return d.child}function uh(u,d){return(u.lanes&d)!==0?!0:(u=u.dependencies,!!(u!==null&&Up(u)))}function V1(u,d,y){switch(d.tag){case 3:Fn(d,d.stateNode.containerInfo),wc(d,Ti,u.memoizedState.cache),xc();break;case 27:case 5:Tn(d);break;case 4:Fn(d,d.stateNode.containerInfo);break;case 10:wc(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,ot(d),null;break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(zt(d),d.flags|=128,null):(y&d.child.childLanes)!==0?Rl(u,d,y):(zt(d),u=So(u,d,y),u!==null?u.sibling:null);zt(d);break;case 19:var P=(u.flags&128)!==0;if(E=(y&d.childLanes)!==0,E||(ws(u,d,y,!1),E=(y&d.childLanes)!==0),P){if(E)return h_(u,d,y);d.flags|=128}if(P=d.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),At(It,It.current),E)break;return null;case 22:return d.lanes=0,F1(u,d,y,d.pendingProps);case 24:wc(d,Ti,u.memoizedState.cache)}return So(u,d,y)}function M0(u,d,y){if(u!==null)if(u.memoizedProps!==d.pendingProps)Ns=!0;else{if(!uh(u,y)&&(d.flags&128)===0)return Ns=!1,V1(u,d,y);Ns=(u.flags&131072)!==0}else Ns=!1,Br&&(d.flags&1048576)!==0&&xf(d,vc,d.index);switch(d.lanes=0,d.tag){case 16:e:{var E=d.pendingProps;if(u=v(d.elementType),d.type=u,typeof u=="function")Op(u)?(E=wo(u,E),d.tag=1,d=S0(null,d,u,E,y)):(d.tag=0,d=Eo(null,d,u,E,y));else{if(u!=null){var P=u.$$typeof;if(P===me){d.tag=11,d=b0(null,d,u,E,y);break e}else if(P===ce){d.tag=14,d=w0(null,d,u,E,y);break e}}throw d=Ve(u)||u,Error(r(306,d,""))}}return d;case 0:return Eo(u,d,d.type,d.pendingProps,y);case 1:return E=d.type,P=wo(E,d.pendingProps),S0(u,d,E,P,y);case 3:e:{if(Fn(d,d.stateNode.containerInfo),u===null)throw Error(r(387));E=d.pendingProps;var N=d.memoizedState;P=N.element,Se(u,d),$e(d,E,null,y);var ne=d.memoizedState;if(E=ne.cache,wc(d,Ti,E),E!==N.cache&&Vp(d,[Ti],y,!0),Le(),E=ne.element,N.isDehydrated)if(N={element:E,isDehydrated:!1,cache:ne.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=Sc(u,d,E,y);break e}else if(E!==P){P=rn(Error(r(424)),d),Qa(P),d=Sc(u,d,E,y);break e}else{switch(u=d.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(gi=tc(u.firstChild),Ys=d,Br=!0,Yl=null,aa=!0,y=re(d,null,E,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(xc(),E===P){d=So(u,d,y);break e}To(u,d,E,y)}d=d.child}return d;case 26:return Kp(u,d),u===null?(y=Wf(d.type,null,d.pendingProps,null))?d.memoizedState=y:Br||(y=d.type,u=d.pendingProps,E=$f(Kt.current).createElement(y),E[Cr]=d,E[Kr]=u,Yo(E,y,u),hs(E),d.stateNode=E):d.memoizedState=Wf(d.type,u.memoizedProps,d.pendingProps,u.memoizedState),null;case 27:return Tn(d),u===null&&Br&&(E=d.stateNode=Aw(d.type,d.pendingProps,Kt.current),Ys=d,aa=!0,P=gi,mu(d.type)?(ax=P,gi=tc(E.firstChild)):gi=P),To(u,d,d.pendingProps.children,y),Kp(u,d),u===null&&(d.flags|=4194304),d.child;case 5:return u===null&&Br&&((P=E=gi)&&(E=dm(E,d.type,d.pendingProps,aa),E!==null?(d.stateNode=E,Ys=d,gi=tc(E.firstChild),aa=!1,P=!0):P=!1),P||Za(d)),Tn(d),P=d.type,N=d.pendingProps,ne=u!==null?u.memoizedProps:null,E=N.children,tx(P,N)?E=null:ne!==null&&tx(P,ne)&&(d.flags|=32),d.memoizedState!==null&&(P=Ja(u,d,jr,null,null,y),pm._currentValue=P),Kp(u,d),To(u,d,E,y),d.child;case 6:return u===null&&Br&&((u=y=gi)&&(y=Tw(y,d.pendingProps,aa),y!==null?(d.stateNode=y,Ys=d,gi=null,u=!0):u=!1),u||Za(d)),null;case 13:return Rl(u,d,y);case 4:return Fn(d,d.stateNode.containerInfo),E=d.pendingProps,u===null?d.child=W(d,null,E,y):To(u,d,E,y),d.child;case 11:return b0(u,d,d.type,d.pendingProps,y);case 7:return To(u,d,d.pendingProps,y),d.child;case 8:return To(u,d,d.pendingProps.children,y),d.child;case 12:return To(u,d,d.pendingProps.children,y),d.child;case 10:return E=d.pendingProps,wc(d,d.type,E.value),To(u,d,E.children,y),d.child;case 9:return P=d.type._context,E=d.pendingProps.children,ru(d),P=oo(P),E=E(P),d.flags|=1,To(u,d,E,y),d.child;case 14:return w0(u,d,d.type,d.pendingProps,y);case 15:return B1(u,d,d.type,d.pendingProps,y);case 19:return h_(u,d,y);case 31:return E0(u,d,y);case 22:return F1(u,d,y,d.pendingProps);case 24:return ru(d),E=oo(Ti),u===null?(P=Tf(),P===null&&(P=Wi,N=Tc(),P.pooledCache=N,N.refCount++,N!==null&&(P.pooledCacheLanes|=y),P=N),d.memoizedState={parent:E,cache:P},we(d),wc(d,Ti,P)):((u.lanes&y)!==0&&(Se(u,d),$e(d,null,null,y),Le()),P=u.memoizedState,N=d.memoizedState,P.parent!==E?(P={parent:E,cache:E},d.memoizedState=P,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=P),wc(d,Ti,E)):(E=N.cache,wc(d,Ti,E),E!==P.cache&&Vp(d,[Ti],y,!0))),To(u,d,d.pendingProps.children,y),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function hh(u){u.flags|=4}function Qp(u,d,y,E,P){if((d=(u.mode&32)!==0)&&(d=!1),d){if(u.flags|=16777216,(P&335544128)===P)if(u.stateNode.complete)u.flags|=8192;else if(B0())u.flags|=8192;else throw c=nd,xg}else u.flags&=-16777217}function d_(u,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!px(d))if(B0())u.flags|=8192;else throw c=nd,xg}function dh(u,d){d!==null&&(u.flags|=4),u.flags&16384&&(d=u.tag!==22?rt():536870912,u.lanes|=d,cd|=d)}function lu(u,d){if(!Br)switch(u.tailMode){case"hidden":d=u.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:E.sibling=null}}function zi(u){var d=u.alternate!==null&&u.alternate.child===u.child,y=0,E=0;if(d)for(var P=u.child;P!==null;)y|=P.lanes|P.childLanes,E|=P.subtreeFlags&65011712,E|=P.flags&65011712,P.return=u,P=P.sibling;else for(P=u.child;P!==null;)y|=P.lanes|P.childLanes,E|=P.subtreeFlags,E|=P.flags,P.return=u,P=P.sibling;return u.subtreeFlags|=E,u.childLanes=y,d}function f_(u,d,y){var E=d.pendingProps;switch(bf(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(d),null;case 1:return zi(d),null;case 3:return y=d.stateNode,E=null,u!==null&&(E=u.memoizedState.cache),d.memoizedState.cache!==E&&(d.flags|=2048),El(Ti),An(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Ju(d)?hh(d):u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Np())),zi(d),null;case 26:var P=d.type,N=d.memoizedState;return u===null?(hh(d),N!==null?(zi(d),d_(d,N)):(zi(d),Qp(d,P,null,E,y))):N?N!==u.memoizedState?(hh(d),zi(d),d_(d,N)):(zi(d),d.flags&=-16777217):(u=u.memoizedProps,u!==E&&hh(d),zi(d),Qp(d,P,u,E,y)),null;case 27:if(Lt(d),y=Kt.current,P=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==E&&hh(d);else{if(!E){if(d.stateNode===null)throw Error(r(166));return zi(d),null}u=Dt.current,Ju(d)?Jh(d):(u=Aw(P,E,y),d.stateNode=u,hh(d))}return zi(d),null;case 5:if(Lt(d),P=d.type,u!==null&&d.stateNode!=null)u.memoizedProps!==E&&hh(d);else{if(!E){if(d.stateNode===null)throw Error(r(166));return zi(d),null}if(N=Dt.current,Ju(d))Jh(d);else{var ne=$f(Kt.current);switch(N){case 1:N=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:N=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":N=ne.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":N=ne.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":N=ne.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof E.is=="string"?ne.createElement("select",{is:E.is}):ne.createElement("select"),E.multiple?N.multiple=!0:E.size&&(N.size=E.size);break;default:N=typeof E.is=="string"?ne.createElement(P,{is:E.is}):ne.createElement(P)}}N[Cr]=d,N[Kr]=E;e:for(ne=d.child;ne!==null;){if(ne.tag===5||ne.tag===6)N.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===d)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===d)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}d.stateNode=N;e:switch(Yo(N,P,E),P){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&hh(d)}}return zi(d),Qp(d,d.type,u===null?null:u.memoizedProps,d.pendingProps,y),null;case 6:if(u&&d.stateNode!=null)u.memoizedProps!==E&&hh(d);else{if(typeof E!="string"&&d.stateNode===null)throw Error(r(166));if(u=Kt.current,Ju(d)){if(u=d.stateNode,y=d.memoizedProps,E=null,P=Ys,P!==null)switch(P.tag){case 27:case 5:E=P.memoizedProps}u[Cr]=d,u=!!(u.nodeValue===y||E!==null&&E.suppressHydrationWarning===!0||gw(u.nodeValue,y)),u||Za(d,!0)}else u=$f(u).createTextNode(E),u[Cr]=d,d.stateNode=u}return zi(d),null;case 31:if(y=d.memoizedState,u===null||u.memoizedState!==null){if(E=Ju(d),y!==null){if(u===null){if(!E)throw Error(r(318));if(u=d.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(557));u[Cr]=d}else xc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;zi(d),u=!1}else y=Np(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=y),u=!0;if(!u)return d.flags&256?(St(d),d):(St(d),null);if((d.flags&128)!==0)throw Error(r(558))}return zi(d),null;case 13:if(E=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(P=Ju(d),E!==null&&E.dehydrated!==null){if(u===null){if(!P)throw Error(r(318));if(P=d.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));P[Cr]=d}else xc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;zi(d),P=!1}else P=Np(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=P),P=!0;if(!P)return d.flags&256?(St(d),d):(St(d),null)}return St(d),(d.flags&128)!==0?(d.lanes=y,d):(y=E!==null,u=u!==null&&u.memoizedState!==null,y&&(E=d.child,P=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(P=E.alternate.memoizedState.cachePool.pool),N=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(N=E.memoizedState.cachePool.pool),N!==P&&(E.flags|=2048)),y!==u&&y&&(d.child.flags|=8192),dh(d,d.updateQueue),zi(d),null);case 4:return An(),u===null&&Z0(d.stateNode.containerInfo),zi(d),null;case 10:return El(d.type),zi(d),null;case 19:if(et(It),E=d.memoizedState,E===null)return zi(d),null;if(P=(d.flags&128)!==0,N=E.rendering,N===null)if(P)lu(E,!1);else{if(Rs!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(N=Sn(u),N!==null){for(d.flags|=128,lu(E,!1),u=N.updateQueue,d.updateQueue=u,dh(d,u),d.subtreeFlags=0,u=y,y=d.child;y!==null;)Ku(y,u),y=y.sibling;return At(It,It.current&1|2),Br&&Wl(d,E.treeForkCount),d.child}u=u.sibling}E.tail!==null&&nr()>b_&&(d.flags|=128,P=!0,lu(E,!1),d.lanes=4194304)}else{if(!P)if(u=Sn(N),u!==null){if(d.flags|=128,P=!0,u=u.updateQueue,d.updateQueue=u,dh(d,u),lu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!N.alternate&&!Br)return zi(d),null}else 2*nr()-E.renderingStartTime>b_&&y!==536870912&&(d.flags|=128,P=!0,lu(E,!1),d.lanes=4194304);E.isBackwards?(N.sibling=d.child,d.child=N):(u=E.last,u!==null?u.sibling=N:d.child=N,E.last=N)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=nr(),u.sibling=null,y=It.current,At(It,P?y&1|2:y&1),Br&&Wl(d,E.treeForkCount),u):(zi(d),null);case 22:case 23:return St(d),it(),E=d.memoizedState!==null,u!==null?u.memoizedState!==null!==E&&(d.flags|=8192):E&&(d.flags|=8192),E?(y&536870912)!==0&&(d.flags&128)===0&&(zi(d),d.subtreeFlags&6&&(d.flags|=8192)):zi(d),y=d.updateQueue,y!==null&&dh(d,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==y&&(d.flags|=2048),u!==null&&et(ou),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),El(Ti),zi(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function U1(u,d){switch(bf(d),d.tag){case 1:return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return El(Ti),An(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 26:case 27:case 5:return Lt(d),null;case 31:if(d.memoizedState!==null){if(St(d),d.alternate===null)throw Error(r(340));xc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 13:if(St(d),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(r(340));xc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return et(It),null;case 4:return An(),null;case 10:return El(d.type),null;case 22:case 23:return St(d),it(),u!==null&&et(ou),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 24:return El(Ti),null;case 25:return null;default:return null}}function Jp(u,d){switch(bf(d),d.tag){case 3:El(Ti),An();break;case 26:case 27:case 5:Lt(d);break;case 4:An();break;case 31:d.memoizedState!==null&&St(d);break;case 13:St(d);break;case 19:et(It);break;case 10:El(d.type);break;case 22:case 23:St(d),it(),u!==null&&et(ou);break;case 24:El(Ti)}}function Df(u,d){try{var y=d.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var P=E.next;y=P;do{if((y.tag&u)===u){E=void 0;var N=y.create,ne=y.inst;E=N(),ne.destroy=E}y=y.next}while(y!==P)}}catch(xe){Di(d,d.return,xe)}}function fh(u,d,y){try{var E=d.updateQueue,P=E!==null?E.lastEffect:null;if(P!==null){var N=P.next;E=N;do{if((E.tag&u)===u){var ne=E.inst,xe=ne.destroy;if(xe!==void 0){ne.destroy=void 0,P=d;var We=y,mt=xe;try{mt()}catch(kt){Di(P,We,kt)}}}E=E.next}while(E!==N)}}catch(kt){Di(d,d.return,kt)}}function kf(u){var d=u.updateQueue;if(d!==null){var y=u.stateNode;try{qe(d,y)}catch(E){Di(u,u.return,E)}}}function R0(u,d,y){y.props=wo(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(E){Di(u,d,E)}}function Pf(u,d){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var E=u.stateNode;break;case 30:E=u.stateNode;break;default:E=u.stateNode}typeof y=="function"?u.refCleanup=y(E):y.current=E}}catch(P){Di(u,d,P)}}function Cc(u,d){var y=u.ref,E=u.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(P){Di(u,d,P)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){Di(u,d,P)}else y.current=null}function j1(u){var d=u.type,y=u.memoizedProps,E=u.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":y.autoFocus&&E.focus();break e;case"img":y.src?E.src=y.src:y.srcSet&&(E.srcset=y.srcSet)}}catch(P){Di(u,u.return,P)}}function D0(u,d,y){try{var E=u.stateNode;yw(E,u.type,y,d),E[Kr]=d}catch(P){Di(u,u.return,P)}}function em(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&mu(u.type)||u.tag===4}function p_(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||em(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&mu(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function cu(u,d,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,d?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,d):(d=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,d.appendChild(u),y=y._reactRootContainer,y!=null||d.onclick!==null||(d.onclick=Bo));else if(E!==4&&(E===27&&mu(u.type)&&(y=u.stateNode,d=null),u=u.child,u!==null))for(cu(u,d,y),u=u.sibling;u!==null;)cu(u,d,y),u=u.sibling}function Jr(u,d,y){var E=u.tag;if(E===5||E===6)u=u.stateNode,d?y.insertBefore(u,d):y.appendChild(u);else if(E!==4&&(E===27&&mu(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(Jr(u,d,y),u=u.sibling;u!==null;)Jr(u,d,y),u=u.sibling}function m_(u){var d=u.stateNode,y=u.memoizedProps;try{for(var E=u.type,P=d.attributes;P.length;)d.removeAttributeNode(P[0]);Yo(d,E,y),d[Cr]=u,d[Kr]=y}catch(N){Di(u,u.return,N)}}var Co=!1,Ni=!1,Dl=!1,nl=typeof WeakSet=="function"?WeakSet:Set,ei=null;function $1(u,d){if(u=u.containerInfo,Pl=Zf,u=Pp(u),fg(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var E=y.getSelection&&y.getSelection();if(E&&E.rangeCount!==0){y=E.anchorNode;var P=E.anchorOffset,N=E.focusNode;E=E.focusOffset;try{y.nodeType,N.nodeType}catch{y=null;break e}var ne=0,xe=-1,We=-1,mt=0,kt=0,jt=u,gt=null;t:for(;;){for(var Tt;jt!==y||P!==0&&jt.nodeType!==3||(xe=ne+P),jt!==N||E!==0&&jt.nodeType!==3||(We=ne+E),jt.nodeType===3&&(ne+=jt.nodeValue.length),(Tt=jt.firstChild)!==null;)gt=jt,jt=Tt;for(;;){if(jt===u)break t;if(gt===y&&++mt===P&&(xe=ne),gt===N&&++kt===E&&(We=ne),(Tt=jt.nextSibling)!==null)break;jt=gt,gt=jt.parentNode}jt=Tt}y=xe===-1||We===-1?null:{start:xe,end:We}}else y=null}y=y||{start:0,end:0}}else y=null;for(Ng={focusedElem:u,selectionRange:y},Zf=!1,ei=d;ei!==null;)if(d=ei,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,ei=u;else for(;ei!==null;){switch(d=ei,N=d.alternate,u=d.flags,d.tag){case 0:if((u&4)!==0&&(u=d.updateQueue,u=u!==null?u.events:null,u!==null))for(y=0;y<u.length;y++)P=u[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&N!==null){u=void 0,y=d,P=N.memoizedProps,N=N.memoizedState,E=y.stateNode;try{var In=wo(y.type,P);u=E.getSnapshotBeforeUpdate(In,N),E.__reactInternalSnapshotBeforeUpdate=u}catch(Kn){Di(y,y.return,Kn)}}break;case 3:if((u&1024)!==0){if(u=d.stateNode.containerInfo,y=u.nodeType,y===9)Dc(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":Dc(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=d.sibling,u!==null){u.return=d.return,ei=u;break}ei=d.return}}function lo(u,d,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:hu(u,y),E&4&&Df(5,y);break;case 1:if(hu(u,y),E&4)if(u=y.stateNode,d===null)try{u.componentDidMount()}catch(ne){Di(y,y.return,ne)}else{var P=wo(y.type,d.memoizedProps);d=d.memoizedState;try{u.componentDidUpdate(P,d,u.__reactInternalSnapshotBeforeUpdate)}catch(ne){Di(y,y.return,ne)}}E&64&&kf(y),E&512&&Pf(y,y.return);break;case 3:if(hu(u,y),E&64&&(u=y.updateQueue,u!==null)){if(d=null,y.child!==null)switch(y.child.tag){case 27:case 5:d=y.child.stateNode;break;case 1:d=y.child.stateNode}try{qe(u,d)}catch(ne){Di(y,y.return,ne)}}break;case 27:d===null&&E&4&&m_(y);case 26:case 5:hu(u,y),d===null&&E&4&&j1(y),E&512&&Pf(y,y.return);break;case 12:hu(u,y);break;case 31:hu(u,y),E&4&&q1(u,y);break;case 13:hu(u,y),E&4&&y_(u,y),E&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=lC.bind(null,y),dC(u,y))));break;case 22:if(E=y.memoizedState!==null||Co,!E){d=d!==null&&d.memoizedState!==null||Ni,P=Co;var N=Ni;Co=E,(Ni=d)&&!N?du(u,y,(y.subtreeFlags&8772)!==0):hu(u,y),Co=P,Ni=N}break;case 30:break;default:hu(u,y)}}function k0(u){var d=u.alternate;d!==null&&(u.alternate=null,k0(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&Nu(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Bi=null,ca=!1;function uu(u,d,y){for(y=y.child;y!==null;)g_(u,d,y),y=y.sibling}function g_(u,d,y){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(Sr,y)}catch{}switch(y.tag){case 26:Ni||Cc(y,d),uu(u,d,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Ni||Cc(y,d);var E=Bi,P=ca;mu(y.type)&&(Bi=y.stateNode,ca=!1),uu(u,d,y),yd(y.stateNode),Bi=E,ca=P;break;case 5:Ni||Cc(y,d);case 6:if(E=Bi,P=ca,Bi=null,uu(u,d,y),Bi=E,ca=P,Bi!==null)if(ca)try{(Bi.nodeType===9?Bi.body:Bi.nodeName==="HTML"?Bi.ownerDocument.body:Bi).removeChild(y.stateNode)}catch(N){Di(y,d,N)}else try{Bi.removeChild(y.stateNode)}catch(N){Di(y,d,N)}break;case 18:Bi!==null&&(ca?(u=Bi,rx(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),ym(u)):rx(Bi,y.stateNode));break;case 4:E=Bi,P=ca,Bi=y.stateNode.containerInfo,ca=!0,uu(u,d,y),Bi=E,ca=P;break;case 0:case 11:case 14:case 15:fh(2,y,d),Ni||fh(4,y,d),uu(u,d,y);break;case 1:Ni||(Cc(y,d),E=y.stateNode,typeof E.componentWillUnmount=="function"&&R0(y,d,E)),uu(u,d,y);break;case 21:uu(u,d,y);break;case 22:Ni=(E=Ni)||y.memoizedState!==null,uu(u,d,y),Ni=E;break;default:uu(u,d,y)}}function q1(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{ym(u)}catch(y){Di(d,d.return,y)}}}function y_(u,d){if(d.memoizedState===null&&(u=d.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{ym(u)}catch(y){Di(d,d.return,y)}}function H1(u){switch(u.tag){case 31:case 13:case 19:var d=u.stateNode;return d===null&&(d=u.stateNode=new nl),d;case 22:return u=u.stateNode,d=u._retryCache,d===null&&(d=u._retryCache=new nl),d;default:throw Error(r(435,u.tag))}}function __(u,d){var y=H1(u);d.forEach(function(E){if(!y.has(E)){y.add(E);var P=$0.bind(null,u,E);E.then(P,P)}})}function Is(u,d){var y=d.deletions;if(y!==null)for(var E=0;E<y.length;E++){var P=y[E],N=u,ne=d,xe=ne;e:for(;xe!==null;){switch(xe.tag){case 27:if(mu(xe.type)){Bi=xe.stateNode,ca=!1;break e}break;case 5:Bi=xe.stateNode,ca=!1;break e;case 3:case 4:Bi=xe.stateNode.containerInfo,ca=!0;break e}xe=xe.return}if(Bi===null)throw Error(r(160));g_(N,ne,P),Bi=null,ca=!1,N=P.alternate,N!==null&&(N.return=null),P.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Ig(d,u),d=d.sibling}var Ho=null;function Ig(u,d){var y=u.alternate,E=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Is(d,u),Go(u),E&4&&(fh(3,u,u.return),Df(3,u),fh(5,u,u.return));break;case 1:Is(d,u),Go(u),E&512&&(Ni||y===null||Cc(y,y.return)),E&64&&Co&&(u=u.updateQueue,u!==null&&(E=u.callbacks,E!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:var P=Ho;if(Is(d,u),Go(u),E&512&&(Ni||y===null||Cc(y,y.return)),E&4){var N=y!==null?y.memoizedState:null;if(E=u.memoizedState,y===null)if(E===null)if(u.stateNode===null){e:{E=u.type,y=u.memoizedProps,P=P.ownerDocument||P;t:switch(E){case"title":N=P.getElementsByTagName("title")[0],(!N||N[Ul]||N[Cr]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=P.createElement(E),P.head.insertBefore(N,P.querySelector("head > title"))),Yo(N,E,y),N[Cr]=u,hs(N),E=N;break e;case"link":var ne=fx("link","href",P).get(E+(y.href||""));if(ne){for(var xe=0;xe<ne.length;xe++)if(N=ne[xe],N.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&N.getAttribute("rel")===(y.rel==null?null:y.rel)&&N.getAttribute("title")===(y.title==null?null:y.title)&&N.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(xe,1);break t}}N=P.createElement(E),Yo(N,E,y),P.head.appendChild(N);break;case"meta":if(ne=fx("meta","content",P).get(E+(y.content||""))){for(xe=0;xe<ne.length;xe++)if(N=ne[xe],N.getAttribute("content")===(y.content==null?null:""+y.content)&&N.getAttribute("name")===(y.name==null?null:y.name)&&N.getAttribute("property")===(y.property==null?null:y.property)&&N.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&N.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(xe,1);break t}}N=P.createElement(E),Yo(N,E,y),P.head.appendChild(N);break;default:throw Error(r(468,E))}N[Cr]=u,hs(N),E=N}u.stateNode=E}else gu(P,u.type,u.stateNode);else u.stateNode=dx(P,E,u.memoizedProps);else N!==E?(N===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):N.count--,E===null?gu(P,u.type,u.stateNode):dx(P,E,u.memoizedProps)):E===null&&u.stateNode!==null&&D0(u,u.memoizedProps,y.memoizedProps)}break;case 27:Is(d,u),Go(u),E&512&&(Ni||y===null||Cc(y,y.return)),y!==null&&E&4&&D0(u,u.memoizedProps,y.memoizedProps);break;case 5:if(Is(d,u),Go(u),E&512&&(Ni||y===null||Cc(y,y.return)),u.flags&32){P=u.stateNode;try{Ji(P,"")}catch(In){Di(u,u.return,In)}}E&4&&u.stateNode!=null&&(P=u.memoizedProps,D0(u,P,y!==null?y.memoizedProps:P)),E&1024&&(Dl=!0);break;case 6:if(Is(d,u),Go(u),E&4){if(u.stateNode===null)throw Error(r(162));E=u.memoizedProps,y=u.stateNode;try{y.nodeValue=E}catch(In){Di(u,u.return,In)}}break;case 3:if(k_=null,P=Ho,Ho=Gf(d.containerInfo),Is(d,u),Ho=P,Go(u),E&4&&y!==null&&y.memoizedState.isDehydrated)try{ym(d.containerInfo)}catch(In){Di(u,u.return,In)}Dl&&(Dl=!1,v_(u));break;case 4:E=Ho,Ho=Gf(u.stateNode.containerInfo),Is(d,u),Go(u),Ho=E;break;case 12:Is(d,u),Go(u);break;case 31:Is(d,u),Go(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,__(u,E)));break;case 13:Is(d,u),Go(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(hd=nr()),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,__(u,E)));break;case 22:P=u.memoizedState!==null;var We=y!==null&&y.memoizedState!==null,mt=Co,kt=Ni;if(Co=mt||P,Ni=kt||We,Is(d,u),Ni=kt,Co=mt,Go(u),E&8192)e:for(d=u.stateNode,d._visibility=P?d._visibility&-2:d._visibility|1,P&&(y===null||We||Co||Ni||Lf(u)),y=null,d=u;;){if(d.tag===5||d.tag===26){if(y===null){We=y=d;try{if(N=We.stateNode,P)ne=N.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{xe=We.stateNode;var jt=We.memoizedProps.style,gt=jt!=null&&jt.hasOwnProperty("display")?jt.display:null;xe.style.display=gt==null||typeof gt=="boolean"?"":(""+gt).trim()}}catch(In){Di(We,We.return,In)}}}else if(d.tag===6){if(y===null){We=d;try{We.stateNode.nodeValue=P?"":We.memoizedProps}catch(In){Di(We,We.return,In)}}}else if(d.tag===18){if(y===null){We=d;try{var Tt=We.stateNode;P?ix(Tt,!0):ix(We.stateNode,!1)}catch(In){Di(We,We.return,In)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;y===d&&(y=null),d=d.return}y===d&&(y=null),d.sibling.return=d.return,d=d.sibling}E&4&&(E=u.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,__(u,y))));break;case 19:Is(d,u),Go(u),E&4&&(E=u.updateQueue,E!==null&&(u.updateQueue=null,__(u,E)));break;case 30:break;case 21:break;default:Is(d,u),Go(u)}}function Go(u){var d=u.flags;if(d&2){try{for(var y,E=u.return;E!==null;){if(em(E)){y=E;break}E=E.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var P=y.stateNode,N=p_(u);Jr(u,N,P);break;case 5:var ne=y.stateNode;y.flags&32&&(Ji(ne,""),y.flags&=-33);var xe=p_(u);Jr(u,xe,ne);break;case 3:case 4:var We=y.stateNode.containerInfo,mt=p_(u);cu(u,mt,We);break;default:throw Error(r(161))}}catch(kt){Di(u,u.return,kt)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function v_(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var d=u;v_(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),u=u.sibling}}function hu(u,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)lo(u,d.alternate,d),d=d.sibling}function Lf(u){for(u=u.child;u!==null;){var d=u;switch(d.tag){case 0:case 11:case 14:case 15:fh(4,d,d.return),Lf(d);break;case 1:Cc(d,d.return);var y=d.stateNode;typeof y.componentWillUnmount=="function"&&R0(d,d.return,y),Lf(d);break;case 27:yd(d.stateNode);case 26:case 5:Cc(d,d.return),Lf(d);break;case 22:d.memoizedState===null&&Lf(d);break;case 30:Lf(d);break;default:Lf(d)}u=u.sibling}}function du(u,d,y){for(y=y&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var E=d.alternate,P=u,N=d,ne=N.flags;switch(N.tag){case 0:case 11:case 15:du(P,N,y),Df(4,N);break;case 1:if(du(P,N,y),E=N,P=E.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(mt){Di(E,E.return,mt)}if(E=N,P=E.updateQueue,P!==null){var xe=E.stateNode;try{var We=P.shared.hiddenCallbacks;if(We!==null)for(P.shared.hiddenCallbacks=null,P=0;P<We.length;P++)He(We[P],xe)}catch(mt){Di(E,E.return,mt)}}y&&ne&64&&kf(N),Pf(N,N.return);break;case 27:m_(N);case 26:case 5:du(P,N,y),y&&E===null&&ne&4&&j1(N),Pf(N,N.return);break;case 12:du(P,N,y);break;case 31:du(P,N,y),y&&ne&4&&q1(P,N);break;case 13:du(P,N,y),y&&ne&4&&y_(P,N);break;case 22:N.memoizedState===null&&du(P,N,y),Pf(N,N.return);break;case 30:break;default:du(P,N,y)}d=d.sibling}}function P0(u,d){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(u=d.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&iu(y))}function Mg(u,d){u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&iu(u))}function Ac(u,d,y,E){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)x_(u,d,y,E),d=d.sibling}function x_(u,d,y,E){var P=d.flags;switch(d.tag){case 0:case 11:case 15:Ac(u,d,y,E),P&2048&&Df(9,d);break;case 1:Ac(u,d,y,E);break;case 3:Ac(u,d,y,E),P&2048&&(u=null,d.alternate!==null&&(u=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==u&&(d.refCount++,u!=null&&iu(u)));break;case 12:if(P&2048){Ac(u,d,y,E),u=d.stateNode;try{var N=d.memoizedProps,ne=N.id,xe=N.onPostCommit;typeof xe=="function"&&xe(ne,d.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(We){Di(d,d.return,We)}}else Ac(u,d,y,E);break;case 31:Ac(u,d,y,E);break;case 13:Ac(u,d,y,E);break;case 23:break;case 22:N=d.stateNode,ne=d.alternate,d.memoizedState!==null?N._visibility&2?Ac(u,d,y,E):tm(u,d):N._visibility&2?Ac(u,d,y,E):(N._visibility|=2,Of(u,d,y,E,(d.subtreeFlags&10256)!==0||!1)),P&2048&&P0(ne,d);break;case 24:Ac(u,d,y,E),P&2048&&Mg(d.alternate,d);break;default:Ac(u,d,y,E)}}function Of(u,d,y,E,P){for(P=P&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var N=u,ne=d,xe=y,We=E,mt=ne.flags;switch(ne.tag){case 0:case 11:case 15:Of(N,ne,xe,We,P),Df(8,ne);break;case 23:break;case 22:var kt=ne.stateNode;ne.memoizedState!==null?kt._visibility&2?Of(N,ne,xe,We,P):tm(N,ne):(kt._visibility|=2,Of(N,ne,xe,We,P)),P&&mt&2048&&P0(ne.alternate,ne);break;case 24:Of(N,ne,xe,We,P),P&&mt&2048&&Mg(ne.alternate,ne);break;default:Of(N,ne,xe,We,P)}d=d.sibling}}function tm(u,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var y=u,E=d,P=E.flags;switch(E.tag){case 22:tm(y,E),P&2048&&P0(E.alternate,E);break;case 24:tm(y,E),P&2048&&Mg(E.alternate,E);break;default:tm(y,E)}d=d.sibling}}var Ic=8192;function zf(u,d,y){if(u.subtreeFlags&Ic)for(u=u.child;u!==null;)G1(u,d,y),u=u.sibling}function G1(u,d,y){switch(u.tag){case 26:zf(u,d,y),u.flags&Ic&&u.memoizedState!==null&&Pw(y,Ho,u.memoizedState,u.memoizedProps);break;case 5:zf(u,d,y);break;case 3:case 4:var E=Ho;Ho=Gf(u.stateNode.containerInfo),zf(u,d,y),Ho=E;break;case 22:u.memoizedState===null&&(E=u.alternate,E!==null&&E.memoizedState!==null?(E=Ic,Ic=16777216,zf(u,d,y),Ic=E):zf(u,d,y));break;default:zf(u,d,y)}}function Nf(u){var d=u.alternate;if(d!==null&&(u=d.child,u!==null)){d.child=null;do d=u.sibling,u.sibling=null,u=d;while(u!==null)}}function ad(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var E=d[y];ei=E,W1(E,u)}Nf(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)L0(u),u=u.sibling}function L0(u){switch(u.tag){case 0:case 11:case 15:ad(u),u.flags&2048&&fh(9,u,u.return);break;case 3:ad(u);break;case 12:ad(u);break;case 22:var d=u.stateNode;u.memoizedState!==null&&d._visibility&2&&(u.return===null||u.return.tag!==13)?(d._visibility&=-3,Rg(u)):ad(u);break;default:ad(u)}}function Rg(u){var d=u.deletions;if((u.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var E=d[y];ei=E,W1(E,u)}Nf(u)}for(u=u.child;u!==null;){switch(d=u,d.tag){case 0:case 11:case 15:fh(8,d,d.return),Rg(d);break;case 22:y=d.stateNode,y._visibility&2&&(y._visibility&=-3,Rg(d));break;default:Rg(d)}u=u.sibling}}function W1(u,d){for(;ei!==null;){var y=ei;switch(y.tag){case 0:case 11:case 15:fh(8,y,d);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:iu(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,ei=E;else e:for(y=u;ei!==null;){E=ei;var P=E.sibling,N=E.return;if(k0(E),E===y){ei=null;break e}if(P!==null){P.return=N,ei=P;break e}ei=N}}}var oC={getCacheForType:function(u){var d=oo(Ti),y=d.data.get(u);return y===void 0&&(y=u(),d.data.set(u,y)),y},cacheSignal:function(){return oo(Ti).controller.signal}},Y1=typeof WeakMap=="function"?WeakMap:Map,Si=0,Wi=null,$r=null,Wr=0,Ri=0,rl=null,ph=!1,ld=!1,Mc=!1,Ms=0,Rs=0,fu=0,Bf=0,O0=0,kl=0,cd=0,ud=null,Ma=null,mh=!1,hd=0,X1=0,b_=1/0,w_=null,dd=null,co=0,fd=null,nm=null,Rc=0,z0=0,pd=null,K1=null,ts=0,rm=null;function il(){return(Si&2)!==0&&Wr!==0?Wr&-Wr:Ce.T!==null?I_():ir()}function Dg(){if(kl===0)if((Wr&536870912)===0||Br){var u=pe;pe<<=1,(pe&3932160)===0&&(pe=262144),kl=u}else kl=536870912;return u=vt.current,u!==null&&(u.flags|=32),kl}function Wo(u,d,y){(u===Wi&&(Ri===2||Ri===9)||u.cancelPendingCommit!==null)&&(md(u,0),ec(u,Wr,kl,!1)),ut(u,y),((Si&2)===0||u!==Wi)&&(u===Wi&&((Si&2)===0&&(Bf|=y),Rs===4&&ec(u,Wr,kl,!1)),sl(u))}function im(u,d,y){if((Si&6)!==0)throw Error(r(327));var E=!y&&(d&127)===0&&(d&u.expiredLanes)===0||Ge(u,d),P=E?U0(u,d):F0(u,d,!0),N=E;do{if(P===0){ld&&!E&&ec(u,d,0,!1);break}else{if(y=u.current.alternate,N&&!Z1(y)){P=F0(u,d,!1),N=!1;continue}if(P===2){if(N=d,u.errorRecoveryDisabledLanes&N)var ne=0;else ne=u.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){d=ne;e:{var xe=u;P=ud;var We=xe.current.memoizedState.isDehydrated;if(We&&(md(xe,ne).flags|=256),ne=F0(xe,ne,!1),ne!==2){if(Mc&&!We){xe.errorRecoveryDisabledLanes|=N,Bf|=N,P=4;break e}N=Ma,Ma=P,N!==null&&(Ma===null?Ma=N:Ma.push.apply(Ma,N))}P=ne}if(N=!1,P!==2)continue}}if(P===1){md(u,0),ec(u,d,0,!0);break}e:{switch(E=u,N=P,N){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:ec(E,d,kl,!ph);break e;case 2:Ma=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(P=hd+300-nr(),10<P)){if(ec(E,d,kl,!ph),Fe(E,0,!0)!==0)break e;Rc=d,E.timeoutHandle=xw(N0.bind(null,E,y,Ma,w_,mh,d,kl,Bf,cd,ph,N,"Throttled",-0,0),P);break e}N0(E,y,Ma,w_,mh,d,kl,Bf,cd,ph,N,null,-0,0)}}break}while(!0);sl(u)}function N0(u,d,y,E,P,N,ne,xe,We,mt,kt,jt,gt,Tt){if(u.timeoutHandle=-1,jt=d.subtreeFlags,jt&8192||(jt&16785408)===16785408){jt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bo},G1(d,N,jt);var In=(N&62914560)===N?hd-nr():(N&4194048)===N?X1-nr():0;if(In=mC(jt,In),In!==null){Rc=N,u.cancelPendingCommit=In(rw.bind(null,u,d,N,y,E,P,ne,xe,We,kt,jt,null,gt,Tt)),ec(u,N,ne,!mt);return}}rw(u,d,N,y,E,P,ne,xe,We)}function Z1(u){for(var d=u;;){var y=d.tag;if((y===0||y===11||y===15)&&d.flags&16384&&(y=d.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var P=y[E],N=P.getSnapshot;P=P.value;try{if(!Ea(N(),P))return!1}catch{return!1}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ec(u,d,y,E){d&=~O0,d&=~Bf,u.suspendedLanes|=d,u.pingedLanes&=~d,E&&(u.warmLanes|=d),E=u.expirationTimes;for(var P=d;0<P;){var N=31-Wn(P),ne=1<<N;E[N]=-1,P&=~ne}y!==0&&Qt(u,y,d)}function sm(){return(Si&6)===0?(um(0),!1):!0}function kg(){if($r!==null){if(Ri===0)var u=$r.return;else u=$r,bc=nu=null,Ei(u),S=null,A=0,u=$r;for(;u!==null;)Jp(u.alternate,u),u=u.return;$r=null}}function md(u,d){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,bw(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),Rc=0,kg(),Wi=u,$r=y=Xa(u.current,null),Wr=d,Ri=0,rl=null,ph=!1,ld=Ge(u,d),Mc=!1,cd=kl=O0=Bf=fu=Rs=0,Ma=ud=null,mh=!1,(d&8)!==0&&(d|=d&32);var E=u.entangledLanes;if(E!==0)for(u=u.entanglements,E&=d;0<E;){var P=31-Wn(E),N=1<<P;d|=u[P],E&=~N}return Ms=d,Wu(),y}function Q1(u,d){Bt=null,Ce.H=Ml,d===ed||d===td?(d=m(),Ri=3):d===xg?(d=m(),Ri=4):Ri=d===lh?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,rl=d,$r===null&&(Rs=1,sd(u,rn(d,u.current)))}function B0(){var u=vt.current;return u===null?!0:(Wr&4194048)===Wr?lt===null:(Wr&62914560)===Wr||(Wr&536870912)!==0?u===lt:!1}function om(){var u=Ce.H;return Ce.H=Ml,u===null?Ml:u}function J1(){var u=Ce.A;return Ce.A=oC,u}function am(){Rs=4,ph||(Wr&4194048)!==Wr&&vt.current!==null||(ld=!0),(fu&134217727)===0&&(Bf&134217727)===0||Wi===null||ec(Wi,Wr,kl,!1)}function F0(u,d,y){var E=Si;Si|=2;var P=om(),N=J1();(Wi!==u||Wr!==d)&&(w_=null,md(u,d)),d=!1;var ne=Rs;e:do try{if(Ri!==0&&$r!==null){var xe=$r,We=rl;switch(Ri){case 8:kg(),ne=6;break e;case 3:case 2:case 9:case 6:vt.current===null&&(d=!0);var mt=Ri;if(Ri=0,rl=null,lm(u,xe,We,mt),y&&ld){ne=0;break e}break;default:mt=Ri,Ri=0,rl=null,lm(u,xe,We,mt)}}V0(),ne=Rs;break}catch(kt){Q1(u,kt)}while(!0);return d&&u.shellSuspendCounter++,bc=nu=null,Si=E,Ce.H=P,Ce.A=N,$r===null&&(Wi=null,Wr=0,Wu()),ne}function V0(){for(;$r!==null;)ew($r)}function U0(u,d){var y=Si;Si|=2;var E=om(),P=J1();Wi!==u||Wr!==d?(w_=null,b_=nr()+500,md(u,d)):ld=Ge(u,d);e:do try{if(Ri!==0&&$r!==null){d=$r;var N=rl;t:switch(Ri){case 1:Ri=0,rl=null,lm(u,d,N,1);break;case 2:case 9:if($p(N)){Ri=0,rl=null,tw(d);break}d=function(){Ri!==2&&Ri!==9||Wi!==u||(Ri=7),sl(u)},N.then(d,d);break e;case 3:Ri=7;break e;case 4:Ri=5;break e;case 7:$p(N)?(Ri=0,rl=null,tw(d)):(Ri=0,rl=null,lm(u,d,N,7));break;case 5:var ne=null;switch($r.tag){case 26:ne=$r.memoizedState;case 5:case 27:var xe=$r;if(ne?px(ne):xe.stateNode.complete){Ri=0,rl=null;var We=xe.sibling;if(We!==null)$r=We;else{var mt=xe.return;mt!==null?($r=mt,E_(mt)):$r=null}break t}}Ri=0,rl=null,lm(u,d,N,5);break;case 6:Ri=0,rl=null,lm(u,d,N,6);break;case 8:kg(),Rs=6;break e;default:throw Error(r(462))}}T_();break}catch(kt){Q1(u,kt)}while(!0);return bc=nu=null,Ce.H=E,Ce.A=P,Si=y,$r!==null?0:(Wi=null,Wr=0,Wu(),Rs)}function T_(){for(;$r!==null&&!En();)ew($r)}function ew(u){var d=M0(u.alternate,u,Ms);u.memoizedProps=u.pendingProps,d===null?E_(u):$r=d}function tw(u){var d=u,y=d.alternate;switch(d.tag){case 15:case 0:d=c_(y,d,d.pendingProps,d.type,void 0,Wr);break;case 11:d=c_(y,d,d.pendingProps,d.type.render,d.ref,Wr);break;case 5:Ei(d);default:Jp(y,d),d=$r=Ku(d,Ms),d=M0(y,d,Ms)}u.memoizedProps=u.pendingProps,d===null?E_(u):$r=d}function lm(u,d,y,E){bc=nu=null,Ei(d),S=null,A=0;var P=d.return;try{if(N1(u,P,d,y,Wr)){Rs=1,sd(u,rn(y,u.current)),$r=null;return}}catch(N){if(P!==null)throw $r=P,N;Rs=1,sd(u,rn(y,u.current)),$r=null;return}d.flags&32768?(Br||E===1?u=!0:ld||(Wr&536870912)!==0?u=!1:(ph=u=!0,(E===2||E===9||E===3||E===6)&&(E=vt.current,E!==null&&E.tag===13&&(E.flags|=16384))),nw(d,u)):E_(d)}function E_(u){var d=u;do{if((d.flags&32768)!==0){nw(d,ph);return}u=d.return;var y=f_(d.alternate,d,Ms);if(y!==null){$r=y;return}if(d=d.sibling,d!==null){$r=d;return}$r=d=u}while(d!==null);Rs===0&&(Rs=5)}function nw(u,d){do{var y=U1(u.alternate,u);if(y!==null){y.flags&=32767,$r=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!d&&(u=u.sibling,u!==null)){$r=u;return}$r=u=y}while(u!==null);Rs=6,$r=null}function rw(u,d,y,E,P,N,ne,xe,We){u.cancelPendingCommit=null;do S_();while(co!==0);if((Si&6)!==0)throw Error(r(327));if(d!==null){if(d===u.current)throw Error(r(177));if(N=d.lanes|d.childLanes,N|=Xh,Yt(u,y,N,ne,xe,We),u===Wi&&($r=Wi=null,Wr=0),nm=d,fd=u,Rc=y,z0=N,pd=P,K1=E,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,A_(bn,function(){return sw(),null})):(u.callbackNode=null,u.callbackPriority=0),E=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||E){E=Ce.T,Ce.T=null,P=Xe.p,Xe.p=2,ne=Si,Si|=4;try{$1(u,d,y)}finally{Si=ne,Xe.p=P,Ce.T=E}}co=1,Pg(),iw(),j0()}}function Pg(){if(co===1){co=0;var u=fd,d=nm,y=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||y){y=Ce.T,Ce.T=null;var E=Xe.p;Xe.p=2;var P=Si;Si|=4;try{Ig(d,u);var N=Ng,ne=Pp(u.containerInfo),xe=N.focusedElem,We=N.selectionRange;if(ne!==xe&&xe&&xe.ownerDocument&&dg(xe.ownerDocument.documentElement,xe)){if(We!==null&&fg(xe)){var mt=We.start,kt=We.end;if(kt===void 0&&(kt=mt),"selectionStart"in xe)xe.selectionStart=mt,xe.selectionEnd=Math.min(kt,xe.value.length);else{var jt=xe.ownerDocument||document,gt=jt&&jt.defaultView||window;if(gt.getSelection){var Tt=gt.getSelection(),In=xe.textContent.length,Kn=Math.min(We.start,In),Ai=We.end===void 0?Kn:Math.min(We.end,In);!Tt.extend&&Kn>Ai&&(ne=Ai,Ai=Kn,Kn=ne);var st=qh(xe,Kn),Ze=qh(xe,Ai);if(st&&Ze&&(Tt.rangeCount!==1||Tt.anchorNode!==st.node||Tt.anchorOffset!==st.offset||Tt.focusNode!==Ze.node||Tt.focusOffset!==Ze.offset)){var ft=jt.createRange();ft.setStart(st.node,st.offset),Tt.removeAllRanges(),Kn>Ai?(Tt.addRange(ft),Tt.extend(Ze.node,Ze.offset)):(ft.setEnd(Ze.node,Ze.offset),Tt.addRange(ft))}}}}for(jt=[],Tt=xe;Tt=Tt.parentNode;)Tt.nodeType===1&&jt.push({element:Tt,left:Tt.scrollLeft,top:Tt.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<jt.length;xe++){var Pt=jt[xe];Pt.element.scrollLeft=Pt.left,Pt.element.scrollTop=Pt.top}}Zf=!!Pl,Ng=Pl=null}finally{Si=P,Xe.p=E,Ce.T=y}}u.current=d,co=2}}function iw(){if(co===2){co=0;var u=fd,d=nm,y=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||y){y=Ce.T,Ce.T=null;var E=Xe.p;Xe.p=2;var P=Si;Si|=4;try{lo(u,d.alternate,d)}finally{Si=P,Xe.p=E,Ce.T=y}}co=3}}function j0(){if(co===4||co===3){co=0,Hi();var u=fd,d=nm,y=Rc,E=K1;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?co=5:(co=0,nm=fd=null,Ff(u,u.pendingLanes));var P=u.pendingLanes;if(P===0&&(dd=null),qn(y),d=d.stateNode,Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(Sr,d,void 0,(d.current.flags&128)===128)}catch{}if(E!==null){d=Ce.T,P=Xe.p,Xe.p=2,Ce.T=null;try{for(var N=u.onRecoverableError,ne=0;ne<E.length;ne++){var xe=E[ne];N(xe.value,{componentStack:xe.stack})}}finally{Ce.T=d,Xe.p=P}}(Rc&3)!==0&&S_(),sl(u),P=u.pendingLanes,(y&261930)!==0&&(P&42)!==0?u===rm?ts++:(ts=0,rm=u):ts=0,um(0)}}function Ff(u,d){(u.pooledCacheLanes&=d)===0&&(d=u.pooledCache,d!=null&&(u.pooledCache=null,iu(d)))}function S_(){return Pg(),iw(),j0(),sw()}function sw(){if(co!==5)return!1;var u=fd,d=z0;z0=0;var y=qn(Rc),E=Ce.T,P=Xe.p;try{Xe.p=32>y?32:y,Ce.T=null,y=pd,pd=null;var N=fd,ne=Rc;if(co=0,nm=fd=null,Rc=0,(Si&6)!==0)throw Error(r(331));var xe=Si;if(Si|=4,L0(N.current),x_(N,N.current,ne,y),Si=xe,um(0,!1),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(Sr,N)}catch{}return!0}finally{Xe.p=P,Ce.T=E,Ff(u,d)}}function ow(u,d,y){d=rn(y,d),d=v0(u.stateNode,d,2),u=Ae(u,d,2),u!==null&&(ut(u,2),sl(u))}function Di(u,d,y){if(u.tag===3)ow(u,u,y);else for(;d!==null;){if(d.tag===3){ow(d,u,y);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(dd===null||!dd.has(E))){u=rn(y,u),y=z1(2),E=Ae(d,y,2),E!==null&&(x0(y,E,d,u),ut(E,2),sl(E));break}}d=d.return}}function C_(u,d,y){var E=u.pingCache;if(E===null){E=u.pingCache=new Y1;var P=new Set;E.set(d,P)}else P=E.get(d),P===void 0&&(P=new Set,E.set(d,P));P.has(y)||(Mc=!0,P.add(y),u=aC.bind(null,u,d,y),d.then(u,u))}function aC(u,d,y){var E=u.pingCache;E!==null&&E.delete(d),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,Wi===u&&(Wr&y)===y&&(Rs===4||Rs===3&&(Wr&62914560)===Wr&&300>nr()-hd?(Si&2)===0&&md(u,0):O0|=y,cd===Wr&&(cd=0)),sl(u)}function aw(u,d){d===0&&(d=rt()),u=Jc(u,d),u!==null&&(ut(u,d),sl(u))}function lC(u){var d=u.memoizedState,y=0;d!==null&&(y=d.retryLane),aw(u,y)}function $0(u,d){var y=0;switch(u.tag){case 31:case 13:var E=u.stateNode,P=u.memoizedState;P!==null&&(y=P.retryLane);break;case 19:E=u.stateNode;break;case 22:E=u.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(d),aw(u,y)}function A_(u,d){return Vn(u,d)}var Vf=null,cm=null,q0=!1,gd=!1,Uf=!1,gh=0;function sl(u){u!==cm&&u.next===null&&(cm===null?Vf=cm=u:cm=cm.next=u),gd=!0,q0||(q0=!0,lw())}function um(u,d){if(!Uf&&gd){Uf=!0;do for(var y=!1,E=Vf;E!==null;){if(u!==0){var P=E.pendingLanes;if(P===0)var N=0;else{var ne=E.suspendedLanes,xe=E.pingedLanes;N=(1<<31-Wn(42|u)+1)-1,N&=P&~(ne&~xe),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(y=!0,Y0(E,N))}else N=Wr,N=Fe(E,E===Wi?N:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(N&3)===0||Ge(E,N)||(y=!0,Y0(E,N));E=E.next}while(y);Uf=!1}}function cC(){H0()}function H0(){gd=q0=!1;var u=0;gh!==0&&hC()&&(u=gh);for(var d=nr(),y=null,E=Vf;E!==null;){var P=E.next,N=G0(E,d);N===0?(E.next=null,y===null?Vf=P:y.next=P,P===null&&(cm=y)):(y=E,(u!==0||(N&3)!==0)&&(gd=!0)),E=P}co!==0&&co!==5||um(u),gh!==0&&(gh=0)}function G0(u,d){for(var y=u.suspendedLanes,E=u.pingedLanes,P=u.expirationTimes,N=u.pendingLanes&-62914561;0<N;){var ne=31-Wn(N),xe=1<<ne,We=P[ne];We===-1?((xe&y)===0||(xe&E)!==0)&&(P[ne]=nt(xe,d)):We<=d&&(u.expiredLanes|=xe),N&=~xe}if(d=Wi,y=Wr,y=Fe(u,u===d?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),E=u.callbackNode,y===0||u===d&&(Ri===2||Ri===9)||u.cancelPendingCommit!==null)return E!==null&&E!==null&&Tr(E),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||Ge(u,y)){if(d=y&-y,d===u.callbackPriority)return d;switch(E!==null&&Tr(E),qn(y)){case 2:case 8:y=yn;break;case 32:y=bn;break;case 268435456:y=Bn;break;default:y=bn}return E=W0.bind(null,u),y=Vn(y,E),u.callbackPriority=d,u.callbackNode=y,d}return E!==null&&E!==null&&Tr(E),u.callbackPriority=2,u.callbackNode=null,2}function W0(u,d){if(co!==0&&co!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(S_()&&u.callbackNode!==y)return null;var E=Wr;return E=Fe(u,u===Wi?E:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),E===0?null:(im(u,E,d),G0(u,nr()),u.callbackNode!=null&&u.callbackNode===y?W0.bind(null,u):null)}function Y0(u,d){if(S_())return null;im(u,d,!0)}function lw(){ww(function(){(Si&6)!==0?Vn(en,cC):H0()})}function I_(){if(gh===0){var u=su;u===0&&(u=Oe,Oe<<=1,(Oe&261888)===0&&(Oe=256)),gh=u}return gh}function cw(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Fu(""+u)}function uw(u,d){var y=d.ownerDocument.createElement("input");return y.name=d.name,y.value=d.value,u.id&&y.setAttribute("form",u.id),d.parentNode.insertBefore(y,d),u=new FormData(u),y.parentNode.removeChild(y),u}function hw(u,d,y,E,P){if(d==="submit"&&y&&y.stateNode===P){var N=cw((P[Kr]||null).action),ne=E.submitter;ne&&(d=(d=ne[Kr]||null)?cw(d.formAction):ne.getAttribute("formAction"),d!==null&&(N=d,ne=null));var xe=new xa("action","action",null,E,P);u.push({event:xe,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(gh!==0){var We=ne?uw(P,ne):new FormData(P);Il(y,{pending:!0,data:We,method:P.method,action:N},null,We)}}else typeof N=="function"&&(xe.preventDefault(),We=ne?uw(P,ne):new FormData(P),Il(y,{pending:!0,data:We,method:P.method,action:N},N,We))},currentTarget:P}]})}}for(var hm=0;hm<oa.length;hm++){var M_=oa[hm],ua=M_.toLowerCase(),Lg=M_[0].toUpperCase()+M_.slice(1);jo(ua,"on"+Lg)}jo(Wy,"onAnimationEnd"),jo(yg,"onAnimationIteration"),jo(mf,"onAnimationStart"),jo("dblclick","onDoubleClick"),jo("focusin","onFocus"),jo("focusout","onBlur"),jo(Yh,"onTransitionRun"),jo(Yy,"onTransitionStart"),jo(Xy,"onTransitionCancel"),jo(Gl,"onTransitionEnd"),Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Og=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function X0(u,d){d=(d&4)!==0;for(var y=0;y<u.length;y++){var E=u[y],P=E.event;E=E.listeners;e:{var N=void 0;if(d)for(var ne=E.length-1;0<=ne;ne--){var xe=E[ne],We=xe.instance,mt=xe.currentTarget;if(xe=xe.listener,We!==N&&P.isPropagationStopped())break e;N=xe,P.currentTarget=mt;try{N(P)}catch(kt){yf(kt)}P.currentTarget=null,N=We}else for(ne=0;ne<E.length;ne++){if(xe=E[ne],We=xe.instance,mt=xe.currentTarget,xe=xe.listener,We!==N&&P.isPropagationStopped())break e;N=xe,P.currentTarget=mt;try{N(P)}catch(kt){yf(kt)}P.currentTarget=null,N=We}}}}function Fr(u,d){var y=d[No];y===void 0&&(y=d[No]=new Set);var E=u+"__bubble";y.has(E)||(dw(d,u,2,!1),y.add(E))}function K0(u,d,y){var E=0;d&&(E|=4),dw(y,u,E,d)}var R_="_reactListening"+Math.random().toString(36).slice(2);function Z0(u){if(!u[R_]){u[R_]=!0,ta.forEach(function(y){y!=="selectionchange"&&(Og.has(y)||K0(y,!1,u),K0(y,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[R_]||(d[R_]=!0,K0("selectionchange",!1,d))}}function dw(u,d,y,E){switch(Qf(d)){case 2:var P=N_;break;case 8:P=gC;break;default:P=gx}y=P.bind(null,d,y,u),P=void 0,!Wc||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(P=!0),E?P!==void 0?u.addEventListener(d,y,{capture:!0,passive:P}):u.addEventListener(d,y,!0):P!==void 0?u.addEventListener(d,y,{passive:P}):u.addEventListener(d,y,!1)}function Q0(u,d,y,E,P){var N=E;if((d&1)===0&&(d&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var xe=E.stateNode.containerInfo;if(xe===P)break;if(ne===4)for(ne=E.return;ne!==null;){var We=ne.tag;if((We===3||We===4)&&ne.stateNode.containerInfo===P)return;ne=ne.return}for(;xe!==null;){if(ne=_r(xe),ne===null)return;if(We=ne.tag,We===5||We===6||We===26||We===27){E=N=ne;continue e}xe=xe.parentNode}}E=E.return}ql(function(){var mt=N,kt=Fo(y),jt=[];e:{var gt=gf.get(u);if(gt!==void 0){var Tt=xa,In=u;switch(u){case"keypress":if(ps(y)===0)break e;case"keydown":case"keyup":Tt=Uh;break;case"focusin":In="focus",Tt=qa;break;case"focusout":In="blur",Tt=qa;break;case"beforeblur":case"afterblur":Tt=qa;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=$a;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=K;break;case Wy:case yg:case mf:Tt=uf;break;case Gl:Tt=Ie;break;case"scroll":case"scrollend":Tt=Vu;break;case"wheel":Tt=_t;break;case"copy":case"cut":case"paste":Tt=Bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=Ha;break;case"toggle":case"beforetoggle":Tt=gr}var Kn=(d&4)!==0,Ai=!Kn&&(u==="scroll"||u==="scrollend"),st=Kn?gt!==null?gt+"Capture":null:gt;Kn=[];for(var Ze=mt,ft;Ze!==null;){var Pt=Ze;if(ft=Pt.stateNode,Pt=Pt.tag,Pt!==5&&Pt!==26&&Pt!==27||ft===null||st===null||(Pt=as(Ze,st),Pt!=null&&Kn.push(zg(Ze,Pt,ft))),Ai)break;Ze=Ze.return}0<Kn.length&&(gt=new Tt(gt,In,null,y,kt),jt.push({event:gt,listeners:Kn}))}}if((d&7)===0){e:{if(gt=u==="mouseover"||u==="pointerover",Tt=u==="mouseout"||u==="pointerout",gt&&y!==uc&&(In=y.relatedTarget||y.fromElement)&&(_r(In)||In[xi]))break e;if((Tt||gt)&&(gt=kt.window===kt?kt:(gt=kt.ownerDocument)?gt.defaultView||gt.parentWindow:window,Tt?(In=y.relatedTarget||y.toElement,Tt=mt,In=In?_r(In):null,In!==null&&(Ai=h(In),Kn=In.tag,In!==Ai||Kn!==5&&Kn!==27&&Kn!==6)&&(In=null)):(Tt=null,In=mt),Tt!==In)){if(Kn=wa,Pt="onMouseLeave",st="onMouseEnter",Ze="mouse",(u==="pointerout"||u==="pointerover")&&(Kn=Ha,Pt="onPointerLeave",st="onPointerEnter",Ze="pointer"),Ai=Tt==null?gt:io(Tt),ft=In==null?gt:io(In),gt=new Kn(Pt,Ze+"leave",Tt,y,kt),gt.target=Ai,gt.relatedTarget=ft,Pt=null,_r(kt)===mt&&(Kn=new Kn(st,Ze+"enter",In,y,kt),Kn.target=ft,Kn.relatedTarget=Ai,Pt=Kn),Ai=Pt,Tt&&In)t:{for(Kn=uC,st=Tt,Ze=In,ft=0,Pt=st;Pt;Pt=Kn(Pt))ft++;Pt=0;for(var Yn=Ze;Yn;Yn=Kn(Yn))Pt++;for(;0<ft-Pt;)st=Kn(st),ft--;for(;0<Pt-ft;)Ze=Kn(Ze),Pt--;for(;ft--;){if(st===Ze||Ze!==null&&st===Ze.alternate){Kn=st;break t}st=Kn(st),Ze=Kn(Ze)}Kn=null}else Kn=null;Tt!==null&&J0(jt,gt,Tt,Kn,!1),In!==null&&Ai!==null&&J0(jt,Ai,In,Kn,!0)}}e:{if(gt=mt?io(mt):window,Tt=gt.nodeName&&gt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&gt.type==="file")var oi=qy;else if(Ip(gt))if(jh)oi=Hy;else{oi=ug;var Nn=Dp}else Tt=gt.nodeName,!Tt||Tt.toLowerCase()!=="input"||gt.type!=="checkbox"&&gt.type!=="radio"?mt&&jl(mt.elementType)&&(oi=qy):oi=kp;if(oi&&(oi=oi(u,mt))){Mp(jt,oi,y,kt);break e}Nn&&Nn(u,gt,mt),u==="focusout"&&mt&&gt.type==="number"&&mt.memoizedProps.value!=null&&or(gt,"number",gt.value)}switch(Nn=mt?io(mt):window,u){case"focusin":(Ip(Nn)||Nn.contentEditable==="true")&&(qu=Nn,Hu=mt,Hh=null);break;case"focusout":Hh=Hu=qu=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,mg(jt,y,kt);break;case"selectionchange":if(pg)break;case"keydown":case"keyup":mg(jt,y,kt)}var xr;if(Hr)e:{switch(u){case"compositionstart":var Yr="onCompositionStart";break e;case"compositionend":Yr="onCompositionEnd";break e;case"compositionupdate":Yr="onCompositionUpdate";break e}Yr=void 0}else Kc?Xc(u,y)&&(Yr="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(Yr="onCompositionStart");Yr&&(sa&&y.locale!=="ko"&&(Kc||Yr!=="onCompositionStart"?Yr==="onCompositionEnd"&&Kc&&(xr=_l()):(si=kt,hc="value"in si?si.value:si.textContent,Kc=!0)),Nn=jf(mt,Yr),0<Nn.length&&(Yr=new Uo(Yr,u,null,y,kt),jt.push({event:Yr,listeners:Nn}),xr?Yr.data=xr:(xr=Wa(y),xr!==null&&(Yr.data=xr)))),(xr=rr?r0(u,y):i0(u,y))&&(Yr=jf(mt,"onBeforeInput"),0<Yr.length&&(Nn=new Uo("onBeforeInput","beforeinput",null,y,kt),jt.push({event:Nn,listeners:Yr}),Nn.data=xr)),hw(jt,u,mt,y,kt)}X0(jt,d)})}function zg(u,d,y){return{instance:u,listener:d,currentTarget:y}}function jf(u,d){for(var y=d+"Capture",E=[];u!==null;){var P=u,N=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||N===null||(P=as(u,y),P!=null&&E.unshift(zg(u,P,N)),P=as(u,d),P!=null&&E.push(zg(u,P,N))),u.tag===3)return E;u=u.return}return[]}function uC(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function J0(u,d,y,E,P){for(var N=d._reactName,ne=[];y!==null&&y!==E;){var xe=y,We=xe.alternate,mt=xe.stateNode;if(xe=xe.tag,We!==null&&We===E)break;xe!==5&&xe!==26&&xe!==27||mt===null||(We=mt,P?(mt=as(y,N),mt!=null&&ne.unshift(zg(y,mt,We))):P||(mt=as(y,N),mt!=null&&ne.push(zg(y,mt,We)))),y=y.return}ne.length!==0&&u.push({event:d,listeners:ne})}var fw=/\r\n?/g,pw=/\u0000|\uFFFD/g;function mw(u){return(typeof u=="string"?u:""+u).replace(fw,`
`).replace(pw,"")}function gw(u,d){return d=mw(d),mw(u)===d}function Yi(u,d,y,E,P,N){switch(y){case"children":typeof E=="string"?d==="body"||d==="textarea"&&E===""||Ji(u,E):(typeof E=="number"||typeof E=="bigint")&&d!=="body"&&Ji(u,""+E);break;case"className":Zr(u,"class",E);break;case"tabIndex":Zr(u,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(u,y,E);break;case"style":ya(u,E,N);break;case"data":if(d!=="object"){Zr(u,"data",E);break}case"src":case"href":if(E===""&&(d!=="a"||y!=="href")){u.removeAttribute(y);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){u.removeAttribute(y);break}E=Fu(""+E),u.setAttribute(y,E);break;case"action":case"formAction":if(typeof E=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(y==="formAction"?(d!=="input"&&Yi(u,d,"name",P.name,P,null),Yi(u,d,"formEncType",P.formEncType,P,null),Yi(u,d,"formMethod",P.formMethod,P,null),Yi(u,d,"formTarget",P.formTarget,P,null)):(Yi(u,d,"encType",P.encType,P,null),Yi(u,d,"method",P.method,P,null),Yi(u,d,"target",P.target,P,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){u.removeAttribute(y);break}E=Fu(""+E),u.setAttribute(y,E);break;case"onClick":E!=null&&(u.onclick=Bo);break;case"onScroll":E!=null&&Fr("scroll",u);break;case"onScrollEnd":E!=null&&Fr("scrollend",u);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(P.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"multiple":u.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":u.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){u.removeAttribute("xlink:href");break}y=Fu(""+E),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?u.setAttribute(y,""+E):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":E===!0?u.setAttribute(y,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?u.setAttribute(y,E):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?u.setAttribute(y,E):u.removeAttribute(y);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?u.removeAttribute(y):u.setAttribute(y,E);break;case"popover":Fr("beforetoggle",u),Fr("toggle",u),na(u,"popover",E);break;case"xlinkActuate":zr(u,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":zr(u,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":zr(u,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":zr(u,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":zr(u,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":zr(u,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":zr(u,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":zr(u,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":zr(u,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":na(u,"is",E);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Hc.get(y)||y,na(u,y,E))}}function ex(u,d,y,E,P,N){switch(y){case"style":ya(u,E,N);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(P.children!=null)throw Error(r(60));u.innerHTML=y}}break;case"children":typeof E=="string"?Ji(u,E):(typeof E=="number"||typeof E=="bigint")&&Ji(u,""+E);break;case"onScroll":E!=null&&Fr("scroll",u);break;case"onScrollEnd":E!=null&&Fr("scrollend",u);break;case"onClick":E!=null&&(u.onclick=Bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),d=y.slice(2,P?y.length-7:void 0),N=u[Kr]||null,N=N!=null?N[y]:null,typeof N=="function"&&u.removeEventListener(d,N,P),typeof E=="function")){typeof N!="function"&&N!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(d,E,P);break e}y in u?u[y]=E:E===!0?u.setAttribute(y,""):na(u,y,E)}}}function Yo(u,d,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fr("error",u),Fr("load",u);var E=!1,P=!1,N;for(N in y)if(y.hasOwnProperty(N)){var ne=y[N];if(ne!=null)switch(N){case"src":E=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Yi(u,d,N,ne,y,null)}}P&&Yi(u,d,"srcSet",y.srcSet,y,null),E&&Yi(u,d,"src",y.src,y,null);return;case"input":Fr("invalid",u);var xe=N=ne=P=null,We=null,mt=null;for(E in y)if(y.hasOwnProperty(E)){var kt=y[E];if(kt!=null)switch(E){case"name":P=kt;break;case"type":ne=kt;break;case"checked":We=kt;break;case"defaultChecked":mt=kt;break;case"value":N=kt;break;case"defaultValue":xe=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(r(137,d));break;default:Yi(u,d,E,kt,y,null)}}ra(u,N,xe,We,mt,ne,P,!1);return;case"select":Fr("invalid",u),E=ne=N=null;for(P in y)if(y.hasOwnProperty(P)&&(xe=y[P],xe!=null))switch(P){case"value":N=xe;break;case"defaultValue":ne=xe;break;case"multiple":E=xe;default:Yi(u,d,P,xe,y,null)}d=N,y=ne,u.multiple=!!E,d!=null?As(u,!!E,d,!1):y!=null&&As(u,!!E,y,!0);return;case"textarea":Fr("invalid",u),N=P=E=null;for(ne in y)if(y.hasOwnProperty(ne)&&(xe=y[ne],xe!=null))switch(ne){case"value":E=xe;break;case"defaultValue":P=xe;break;case"children":N=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(91));break;default:Yi(u,d,ne,xe,y,null)}ia(u,E,P,N);return;case"option":for(We in y)if(y.hasOwnProperty(We)&&(E=y[We],E!=null))switch(We){case"selected":u.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Yi(u,d,We,E,y,null)}return;case"dialog":Fr("beforetoggle",u),Fr("toggle",u),Fr("cancel",u),Fr("close",u);break;case"iframe":case"object":Fr("load",u);break;case"video":case"audio":for(E=0;E<pu.length;E++)Fr(pu[E],u);break;case"image":Fr("error",u),Fr("load",u);break;case"details":Fr("toggle",u);break;case"embed":case"source":case"link":Fr("error",u),Fr("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in y)if(y.hasOwnProperty(mt)&&(E=y[mt],E!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Yi(u,d,mt,E,y,null)}return;default:if(jl(d)){for(kt in y)y.hasOwnProperty(kt)&&(E=y[kt],E!==void 0&&ex(u,d,kt,E,y,void 0));return}}for(xe in y)y.hasOwnProperty(xe)&&(E=y[xe],E!=null&&Yi(u,d,xe,E,y,null))}function yw(u,d,y,E){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,N=null,ne=null,xe=null,We=null,mt=null,kt=null;for(Tt in y){var jt=y[Tt];if(y.hasOwnProperty(Tt)&&jt!=null)switch(Tt){case"checked":break;case"value":break;case"defaultValue":We=jt;default:E.hasOwnProperty(Tt)||Yi(u,d,Tt,null,E,jt)}}for(var gt in E){var Tt=E[gt];if(jt=y[gt],E.hasOwnProperty(gt)&&(Tt!=null||jt!=null))switch(gt){case"type":N=Tt;break;case"name":P=Tt;break;case"checked":mt=Tt;break;case"defaultChecked":kt=Tt;break;case"value":ne=Tt;break;case"defaultValue":xe=Tt;break;case"children":case"dangerouslySetInnerHTML":if(Tt!=null)throw Error(r(137,d));break;default:Tt!==jt&&Yi(u,d,gt,Tt,E,jt)}}Gs(u,ne,xe,We,mt,kt,N,P);return;case"select":Tt=ne=xe=gt=null;for(N in y)if(We=y[N],y.hasOwnProperty(N)&&We!=null)switch(N){case"value":break;case"multiple":Tt=We;default:E.hasOwnProperty(N)||Yi(u,d,N,null,E,We)}for(P in E)if(N=E[P],We=y[P],E.hasOwnProperty(P)&&(N!=null||We!=null))switch(P){case"value":gt=N;break;case"defaultValue":xe=N;break;case"multiple":ne=N;default:N!==We&&Yi(u,d,P,N,E,We)}d=xe,y=ne,E=Tt,gt!=null?As(u,!!y,gt,!1):!!E!=!!y&&(d!=null?As(u,!!y,d,!0):As(u,!!y,y?[]:"",!1));return;case"textarea":Tt=gt=null;for(xe in y)if(P=y[xe],y.hasOwnProperty(xe)&&P!=null&&!E.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Yi(u,d,xe,null,E,P)}for(ne in E)if(P=E[ne],N=y[ne],E.hasOwnProperty(ne)&&(P!=null||N!=null))switch(ne){case"value":gt=P;break;case"defaultValue":Tt=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:P!==N&&Yi(u,d,ne,P,E,N)}qc(u,gt,Tt);return;case"option":for(var In in y)if(gt=y[In],y.hasOwnProperty(In)&&gt!=null&&!E.hasOwnProperty(In))switch(In){case"selected":u.selected=!1;break;default:Yi(u,d,In,null,E,gt)}for(We in E)if(gt=E[We],Tt=y[We],E.hasOwnProperty(We)&&gt!==Tt&&(gt!=null||Tt!=null))switch(We){case"selected":u.selected=gt&&typeof gt!="function"&&typeof gt!="symbol";break;default:Yi(u,d,We,gt,E,Tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kn in y)gt=y[Kn],y.hasOwnProperty(Kn)&&gt!=null&&!E.hasOwnProperty(Kn)&&Yi(u,d,Kn,null,E,gt);for(mt in E)if(gt=E[mt],Tt=y[mt],E.hasOwnProperty(mt)&&gt!==Tt&&(gt!=null||Tt!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,d));break;default:Yi(u,d,mt,gt,E,Tt)}return;default:if(jl(d)){for(var Ai in y)gt=y[Ai],y.hasOwnProperty(Ai)&&gt!==void 0&&!E.hasOwnProperty(Ai)&&ex(u,d,Ai,void 0,E,gt);for(kt in E)gt=E[kt],Tt=y[kt],!E.hasOwnProperty(kt)||gt===Tt||gt===void 0&&Tt===void 0||ex(u,d,kt,gt,E,Tt);return}}for(var st in y)gt=y[st],y.hasOwnProperty(st)&&gt!=null&&!E.hasOwnProperty(st)&&Yi(u,d,st,null,E,gt);for(jt in E)gt=E[jt],Tt=y[jt],!E.hasOwnProperty(jt)||gt===Tt||gt==null&&Tt==null||Yi(u,d,jt,gt,E,Tt)}function _w(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uo(){if(typeof performance.getEntriesByType=="function"){for(var u=0,d=0,y=performance.getEntriesByType("resource"),E=0;E<y.length;E++){var P=y[E],N=P.transferSize,ne=P.initiatorType,xe=P.duration;if(N&&xe&&_w(ne)){for(ne=0,xe=P.responseEnd,E+=1;E<y.length;E++){var We=y[E],mt=We.startTime;if(mt>xe)break;var kt=We.transferSize,jt=We.initiatorType;kt&&_w(jt)&&(We=We.responseEnd,ne+=kt*(We<xe?1:(xe-mt)/(We-mt)))}if(--E,d+=8*(N+ne)/(P.duration/1e3),u++,10<u)break}}if(0<u)return d/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var Pl=null,Ng=null;function $f(u){return u.nodeType===9?u:u.ownerDocument}function qf(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vw(u,d){if(u===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&d==="foreignObject"?0:u}function tx(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Hf=null;function hC(){var u=window.event;return u&&u.type==="popstate"?u===Hf?!1:(Hf=u,!0):(Hf=null,!1)}var xw=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,nx=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof nx<"u"?function(u){return nx.resolve(null).then(u).catch(Ci)}:xw;function Ci(u){setTimeout(function(){throw u})}function mu(u){return u==="head"}function rx(u,d){var y=d,E=0;do{var P=y.nextSibling;if(u.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(E===0){u.removeChild(P),ym(d);return}E--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")E++;else if(y==="html")yd(u.ownerDocument.documentElement);else if(y==="head"){y=u.ownerDocument.head,yd(y);for(var N=y.firstChild;N;){var ne=N.nextSibling,xe=N.nodeName;N[Ul]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&N.rel.toLowerCase()==="stylesheet"||y.removeChild(N),N=ne}}else y==="body"&&yd(u.ownerDocument.body);y=P}while(y);ym(d)}function ix(u,d){var y=u;u=0;do{var E=y.nextSibling;if(y.nodeType===1?d?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(d?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),E&&E.nodeType===8)if(y=E.data,y==="/$"){if(u===0)break;u--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||u++;y=E}while(y)}function Dc(u){var d=u.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var y=d;switch(d=d.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Dc(y),Nu(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function dm(u,d,y,E){for(;u.nodeType===1;){var P=y;if(u.nodeName.toLowerCase()!==d.toLowerCase()){if(!E&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(E){if(!u[Ul])switch(d){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(N=u.getAttribute("rel"),N==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(N!==P.rel||u.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||u.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||u.getAttribute("title")!==(P.title==null?null:P.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(N=u.getAttribute("src"),(N!==(P.src==null?null:P.src)||u.getAttribute("type")!==(P.type==null?null:P.type)||u.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&N&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(d==="input"&&u.type==="hidden"){var N=P.name==null?null:""+P.name;if(P.type==="hidden"&&u.getAttribute("name")===N)return u}else return u;if(u=tc(u.nextSibling),u===null)break}return null}function Tw(u,d,y){if(d==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=tc(u.nextSibling),u===null))return null;return u}function Ew(u,d){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!d||(u=tc(u.nextSibling),u===null))return null;return u}function sx(u){return u.data==="$?"||u.data==="$~"}function ox(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function dC(u,d){var y=u.ownerDocument;if(u.data==="$~")u._reactRetry=d;else if(u.data!=="$?"||y.readyState!=="loading")d();else{var E=function(){d(),y.removeEventListener("DOMContentLoaded",E)};y.addEventListener("DOMContentLoaded",E),u._reactRetry=E}}function tc(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return u}var ax=null;function Sw(u){u=u.nextSibling;for(var d=0;u;){if(u.nodeType===8){var y=u.data;if(y==="/$"||y==="/&"){if(d===0)return tc(u.nextSibling);d--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||d++}u=u.nextSibling}return null}function Cw(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(d===0)return u;d--}else y!=="/$"&&y!=="/&"||d++}u=u.previousSibling}return null}function Aw(u,d,y){switch(d=$f(y),u){case"html":if(u=d.documentElement,!u)throw Error(r(452));return u;case"head":if(u=d.head,!u)throw Error(r(453));return u;case"body":if(u=d.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function yd(u){for(var d=u.attributes;d.length;)u.removeAttributeNode(d[0]);Nu(u)}var Xo=new Map,lx=new Set;function Gf(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var kc=Xe.d;Xe.d={f:fC,r:pC,D:ux,C:Ra,L:hx,m:Iw,X:Mw,S:Ll,M:Bg};function fC(){var u=kc.f(),d=sm();return u||d}function pC(u){var d=ea(u);d!==null&&d.tag===5&&d.type==="form"?rd(d):kc.r(u)}var fm=typeof document>"u"?null:document;function cx(u,d,y){var E=fm;if(E&&typeof d=="string"&&d){var P=Hn(d);P='link[rel="'+u+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),lx.has(P)||(lx.add(P),u={rel:u,crossOrigin:y,href:d},E.querySelector(P)===null&&(d=E.createElement("link"),Yo(d,"link",u),hs(d),E.head.appendChild(d)))}}function ux(u){kc.D(u),cx("dns-prefetch",u,null)}function Ra(u,d){kc.C(u,d),cx("preconnect",u,d)}function hx(u,d,y){kc.L(u,d,y);var E=fm;if(E&&u&&d){var P='link[rel="preload"][as="'+Hn(d)+'"]';d==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+Hn(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+Hn(y.imageSizes)+'"]')):P+='[href="'+Hn(u)+'"]';var N=P;switch(d){case"style":N=_d(u);break;case"script":N=Yf(u)}Xo.has(N)||(u=M({rel:"preload",href:d==="image"&&y&&y.imageSrcSet?void 0:u,as:d},y),Xo.set(N,u),E.querySelector(P)!==null||d==="style"&&E.querySelector(vd(N))||d==="script"&&E.querySelector(Fg(N))||(d=E.createElement("link"),Yo(d,"link",u),hs(d),E.head.appendChild(d)))}}function Iw(u,d){kc.m(u,d);var y=fm;if(y&&u){var E=d&&typeof d.as=="string"?d.as:"script",P='link[rel="modulepreload"][as="'+Hn(E)+'"][href="'+Hn(u)+'"]',N=P;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Yf(u)}if(!Xo.has(N)&&(u=M({rel:"modulepreload",href:u},d),Xo.set(N,u),y.querySelector(P)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Fg(N)))return}E=y.createElement("link"),Yo(E,"link",u),hs(E),y.head.appendChild(E)}}}function Ll(u,d,y){kc.S(u,d,y);var E=fm;if(E&&u){var P=Na(E).hoistableStyles,N=_d(u);d=d||"default";var ne=P.get(N);if(!ne){var xe={loading:0,preload:null};if(ne=E.querySelector(vd(N)))xe.loading=5;else{u=M({rel:"stylesheet",href:u,"data-precedence":d},y),(y=Xo.get(N))&&Ug(u,y);var We=ne=E.createElement("link");hs(We),Yo(We,"link",u),We._p=new Promise(function(mt,kt){We.onload=mt,We.onerror=kt}),We.addEventListener("load",function(){xe.loading|=1}),We.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,Vg(ne,d,E)}ne={type:"stylesheet",instance:ne,count:1,state:xe},P.set(N,ne)}}}function Mw(u,d){kc.X(u,d);var y=fm;if(y&&u){var E=Na(y).hoistableScripts,P=Yf(u),N=E.get(P);N||(N=y.querySelector(Fg(P)),N||(u=M({src:u,async:!0},d),(d=Xo.get(P))&&D_(u,d),N=y.createElement("script"),hs(N),Yo(N,"link",u),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},E.set(P,N))}}function Bg(u,d){kc.M(u,d);var y=fm;if(y&&u){var E=Na(y).hoistableScripts,P=Yf(u),N=E.get(P);N||(N=y.querySelector(Fg(P)),N||(u=M({src:u,async:!0,type:"module"},d),(d=Xo.get(P))&&D_(u,d),N=y.createElement("script"),hs(N),Yo(N,"link",u),y.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},E.set(P,N))}}function Wf(u,d,y,E){var P=(P=Kt.current)?Gf(P):null;if(!P)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(d=_d(y.href),y=Na(P).hoistableStyles,E=y.get(d),E||(E={type:"style",instance:null,count:0,state:null},y.set(d,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=_d(y.href);var N=Na(P).hoistableStyles,ne=N.get(u);if(ne||(P=P.ownerDocument||P,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(u,ne),(N=P.querySelector(vd(u)))&&!N._p&&(ne.instance=N,ne.state.loading=5),Xo.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Xo.set(u,y),N||Dw(P,u,y,ne.state))),d&&E===null)throw Error(r(528,""));return ne}if(d&&E!==null)throw Error(r(529,""));return null;case"script":return d=y.async,y=y.src,typeof y=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Yf(y),y=Na(P).hoistableScripts,E=y.get(d),E||(E={type:"script",instance:null,count:0,state:null},y.set(d,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function _d(u){return'href="'+Hn(u)+'"'}function vd(u){return'link[rel="stylesheet"]['+u+"]"}function Rw(u){return M({},u,{"data-precedence":u.precedence,precedence:null})}function Dw(u,d,y,E){u.querySelector('link[rel="preload"][as="style"]['+d+"]")?E.loading=1:(d=u.createElement("link"),E.preload=d,d.addEventListener("load",function(){return E.loading|=1}),d.addEventListener("error",function(){return E.loading|=2}),Yo(d,"link",y),hs(d),u.head.appendChild(d))}function Yf(u){return'[src="'+Hn(u)+'"]'}function Fg(u){return"script[async]"+u}function dx(u,d,y){if(d.count++,d.instance===null)switch(d.type){case"style":var E=u.querySelector('style[data-href~="'+Hn(y.href)+'"]');if(E)return d.instance=E,hs(E),E;var P=M({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return E=(u.ownerDocument||u).createElement("style"),hs(E),Yo(E,"style",P),Vg(E,y.precedence,u),d.instance=E;case"stylesheet":P=_d(y.href);var N=u.querySelector(vd(P));if(N)return d.state.loading|=4,d.instance=N,hs(N),N;E=Rw(y),(P=Xo.get(P))&&Ug(E,P),N=(u.ownerDocument||u).createElement("link"),hs(N);var ne=N;return ne._p=new Promise(function(xe,We){ne.onload=xe,ne.onerror=We}),Yo(N,"link",E),d.state.loading|=4,Vg(N,y.precedence,u),d.instance=N;case"script":return N=Yf(y.src),(P=u.querySelector(Fg(N)))?(d.instance=P,hs(P),P):(E=y,(P=Xo.get(N))&&(E=M({},y),D_(E,P)),u=u.ownerDocument||u,P=u.createElement("script"),hs(P),Yo(P,"link",E),u.head.appendChild(P),d.instance=P);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(E=d.instance,d.state.loading|=4,Vg(E,y.precedence,u));return d.instance}function Vg(u,d,y){for(var E=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=E.length?E[E.length-1]:null,N=P,ne=0;ne<E.length;ne++){var xe=E[ne];if(xe.dataset.precedence===d)N=xe;else if(N!==P)break}N?N.parentNode.insertBefore(u,N.nextSibling):(d=y.nodeType===9?y.head:y,d.insertBefore(u,d.firstChild))}function Ug(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.title==null&&(u.title=d.title)}function D_(u,d){u.crossOrigin==null&&(u.crossOrigin=d.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=d.referrerPolicy),u.integrity==null&&(u.integrity=d.integrity)}var k_=null;function fx(u,d,y){if(k_===null){var E=new Map,P=k_=new Map;P.set(y,E)}else P=k_,E=P.get(y),E||(E=new Map,P.set(y,E));if(E.has(u))return E;for(E.set(u,null),y=y.getElementsByTagName(u),P=0;P<y.length;P++){var N=y[P];if(!(N[Ul]||N[Cr]||u==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=N.getAttribute(d)||"";ne=u+ne;var xe=E.get(ne);xe?xe.push(N):E.set(ne,[N])}}return E}function gu(u,d,y){u=u.ownerDocument||u,u.head.insertBefore(y,d==="title"?u.querySelector("head > title"):null)}function kw(u,d,y){if(y===1||d.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return u=d.disabled,typeof d.precedence=="string"&&u==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function px(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function Pw(u,d,y,E){if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=_d(E.href),N=d.querySelector(vd(P));if(N){d=N._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(u.count++,u=L_.bind(u),d.then(u,u)),y.state.loading|=4,y.instance=N,hs(N);return}N=d.ownerDocument||d,E=Rw(E),(P=Xo.get(P))&&Ug(E,P),N=N.createElement("link"),hs(N);var ne=N;ne._p=new Promise(function(xe,We){ne.onload=xe,ne.onerror=We}),Yo(N,"link",E),y.instance=N}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(y,d),(d=y.state.preload)&&(y.state.loading&3)===0&&(u.count++,y=L_.bind(u),d.addEventListener("load",y),d.addEventListener("error",y))}}var P_=0;function mC(u,d){return u.stylesheets&&u.count===0&&$g(u,u.stylesheets),0<u.count||0<u.imgCount?function(y){var E=setTimeout(function(){if(u.stylesheets&&$g(u,u.stylesheets),u.unsuspend){var N=u.unsuspend;u.unsuspend=null,N()}},6e4+d);0<u.imgBytes&&P_===0&&(P_=62500*uo());var P=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&$g(u,u.stylesheets),u.unsuspend)){var N=u.unsuspend;u.unsuspend=null,N()}},(u.imgBytes>P_?50:800)+d);return u.unsuspend=y,function(){u.unsuspend=null,clearTimeout(E),clearTimeout(P)}}:null}function L_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$g(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var jg=null;function $g(u,d){u.stylesheets=null,u.unsuspend!==null&&(u.count++,jg=new Map,d.forEach(qg,u),jg=null,L_.call(u))}function qg(u,d){if(!(d.state.loading&4)){var y=jg.get(u);if(y)var E=y.get(null);else{y=new Map,jg.set(u,y);for(var P=u.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<P.length;N++){var ne=P[N];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),E=ne)}E&&y.set(null,E)}P=d.instance,ne=P.getAttribute("data-precedence"),N=y.get(ne)||E,N===E&&y.set(null,P),y.set(ne,P),this.count++,E=L_.bind(this),P.addEventListener("load",E),P.addEventListener("error",E),N?N.parentNode.insertBefore(P,N.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(P,u.firstChild)),d.state.loading|=4}}var pm={$$typeof:ie,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function Lw(u,d,y,E,P,N,ne,xe,We){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ye(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ye(0),this.hiddenUpdates=Ye(null),this.identifierPrefix=E,this.onUncaughtError=P,this.onCaughtError=N,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=We,this.incompleteTransitions=new Map}function nc(u,d,y,E,P,N,ne,xe,We,mt,kt,jt){return u=new Lw(u,d,y,ne,We,mt,kt,jt,xe),d=1,N===!0&&(d|=24),N=bs(3,null,null,d),u.current=N,N.stateNode=u,d=Tc(),d.refCount++,u.pooledCache=d,d.refCount++,N.memoizedState={element:E,isDehydrated:y,cache:d},we(N),u}function O_(u){return u?(u=Xu,u):Xu}function Xf(u,d,y,E,P,N){P=O_(P),E.context===null?E.context=P:E.pendingContext=P,E=Te(d),E.payload={element:y},N=N===void 0?null:N,N!==null&&(E.callback=N),y=Ae(u,E,d),y!==null&&(Wo(y,u,d),oe(y,u,d))}function Kf(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<d?y:d}}function z_(u,d){Kf(u,d),(u=u.alternate)&&Kf(u,d)}function Hg(u){if(u.tag===13||u.tag===31){var d=Jc(u,67108864);d!==null&&Wo(d,u,67108864),z_(u,67108864)}}function mx(u){if(u.tag===13||u.tag===31){var d=il();d=Jn(d);var y=Jc(u,d);y!==null&&Wo(y,u,d),z_(u,d)}}var Zf=!0;function N_(u,d,y,E){var P=Ce.T;Ce.T=null;var N=Xe.p;try{Xe.p=2,gx(u,d,y,E)}finally{Xe.p=N,Ce.T=P}}function gC(u,d,y,E){var P=Ce.T;Ce.T=null;var N=Xe.p;try{Xe.p=8,gx(u,d,y,E)}finally{Xe.p=N,Ce.T=P}}function gx(u,d,y,E){if(Zf){var P=yx(E);if(P===null)Q0(u,d,E,B_,y),_h(u,E);else if(Ow(P,u,d,y,E))E.stopPropagation();else if(_h(u,E),d&4&&-1<Wg.indexOf(u)){for(;P!==null;){var N=ea(P);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var ne=ke(N.pendingLanes);if(ne!==0){var xe=N;for(xe.pendingLanes|=2,xe.entangledLanes|=2;ne;){var We=1<<31-Wn(ne);xe.entanglements[1]|=We,ne&=~We}sl(N),(Si&6)===0&&(b_=nr()+500,um(0))}}break;case 31:case 13:xe=Jc(N,2),xe!==null&&Wo(xe,N,2),sm(),z_(N,2)}if(N=yx(E),N===null&&Q0(u,d,E,B_,y),N===P)break;P=N}P!==null&&E.stopPropagation()}else Q0(u,d,E,null,y)}}function yx(u){return u=Fo(u),_x(u)}var B_=null;function _x(u){if(B_=null,u=_r(u),u!==null){var d=h(u);if(d===null)u=null;else{var y=d.tag;if(y===13){if(u=p(d),u!==null)return u;u=null}else if(y===31){if(u=_(d),u!==null)return u;u=null}else if(y===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null)}}return B_=u,null}function Qf(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(on()){case en:return 2;case yn:return 8;case bn:case Pn:return 32;case Bn:return 268435456;default:return 32}default:return 32}}var xd=!1,yu=null,bd=null,yh=null,Gg=new Map,Jf=new Map,wd=[],Wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _h(u,d){switch(u){case"focusin":case"focusout":yu=null;break;case"dragenter":case"dragleave":bd=null;break;case"mouseover":case"mouseout":yh=null;break;case"pointerover":case"pointerout":Gg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jf.delete(d.pointerId)}}function mm(u,d,y,E,P,N){return u===null||u.nativeEvent!==N?(u={blockedOn:d,domEventName:y,eventSystemFlags:E,nativeEvent:N,targetContainers:[P]},d!==null&&(d=ea(d),d!==null&&Hg(d)),u):(u.eventSystemFlags|=E,d=u.targetContainers,P!==null&&d.indexOf(P)===-1&&d.push(P),u)}function Ow(u,d,y,E,P){switch(d){case"focusin":return yu=mm(yu,u,d,y,E,P),!0;case"dragenter":return bd=mm(bd,u,d,y,E,P),!0;case"mouseover":return yh=mm(yh,u,d,y,E,P),!0;case"pointerover":var N=P.pointerId;return Gg.set(N,mm(Gg.get(N)||null,u,d,y,E,P)),!0;case"gotpointercapture":return N=P.pointerId,Jf.set(N,mm(Jf.get(N)||null,u,d,y,E,P)),!0}return!1}function Yg(u){var d=_r(u.target);if(d!==null){var y=h(d);if(y!==null){if(d=y.tag,d===13){if(d=p(y),d!==null){u.blockedOn=d,er(u.priority,function(){mx(y)});return}}else if(d===31){if(d=_(y),d!==null){u.blockedOn=d,er(u.priority,function(){mx(y)});return}}else if(d===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function gm(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var y=yx(u.nativeEvent);if(y===null){y=u.nativeEvent;var E=new y.constructor(y.type,y);uc=E,y.target.dispatchEvent(E),uc=null}else return d=ea(y),d!==null&&Hg(d),u.blockedOn=y,!1;d.shift()}return!0}function zw(u,d,y){gm(u)&&y.delete(d)}function Nw(){xd=!1,yu!==null&&gm(yu)&&(yu=null),bd!==null&&gm(bd)&&(bd=null),yh!==null&&gm(yh)&&(yh=null),Gg.forEach(zw),Jf.forEach(zw)}function _u(u,d){u.blockedOn===d&&(u.blockedOn=null,xd||(xd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Nw)))}var F_=null;function vh(u){F_!==u&&(F_=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){F_===u&&(F_=null);for(var d=0;d<u.length;d+=3){var y=u[d],E=u[d+1],P=u[d+2];if(typeof E!="function"){if(_x(E||y)===null)continue;break}var N=ea(y);N!==null&&(u.splice(d,3),d-=3,Il(N,{pending:!0,data:P,method:y.method,action:E},E,P))}}))}function ym(u){function d(We){return _u(We,u)}yu!==null&&_u(yu,u),bd!==null&&_u(bd,u),yh!==null&&_u(yh,u),Gg.forEach(d),Jf.forEach(d);for(var y=0;y<wd.length;y++){var E=wd[y];E.blockedOn===u&&(E.blockedOn=null)}for(;0<wd.length&&(y=wd[0],y.blockedOn===null);)Yg(y),y.blockedOn===null&&wd.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(E=0;E<y.length;E+=3){var P=y[E],N=y[E+1],ne=P[Kr]||null;if(typeof N=="function")ne||vh(y);else if(ne){var xe=null;if(N&&N.hasAttribute("formAction")){if(P=N,ne=N[Kr]||null)xe=ne.formAction;else if(_x(P)!==null)continue}else xe=ne.action;typeof xe=="function"?y[E+1]=xe:(y.splice(E,3),E-=3),vh(y)}}}function _m(){function u(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(ne){return P=ne})},focusReset:"manual",scroll:"manual"})}function d(){P!==null&&(P(),P=null),E||setTimeout(y,20)}function y(){if(!E&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,P=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(y,100),function(){E=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),P!==null&&(P(),P=null)}}}function ep(u){this._internalRoot=u}Td.prototype.render=ep.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(r(409));var y=d.current,E=il();Xf(y,E,u,d,null,null)},Td.prototype.unmount=ep.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;Xf(u.current,2,null,u,null,null),sm(),d[xi]=null}};function Td(u){this._internalRoot=u}Td.prototype.unstable_scheduleHydration=function(u){if(u){var d=ir();u={blockedOn:null,target:u,priority:d};for(var y=0;y<wd.length&&d!==0&&d<wd[y].priority;y++);wd.splice(y,0,u),y===0&&Yg(u)}};var vm=e.version;if(vm!=="19.2.0")throw Error(r(527,vm,"19.2.0"));Xe.findDOMNode=function(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=T(d),u=u!==null?I(u):null,u=u===null?null:u.stateNode,u};var V_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ce,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U_.isDisabled&&U_.supportsFiber)try{Sr=U_.inject(V_),Or=U_}catch{}}return Cx.createRoot=function(u,d){if(!s(u))throw Error(r(299));var y=!1,E="",P=a_,N=ys,ne=_0;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(P=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(ne=d.onRecoverableError)),d=nc(u,1,!1,null,null,y,E,null,P,N,ne,_m),u[xi]=d.current,Z0(u),new ep(d)},Cx.hydrateRoot=function(u,d,y){if(!s(u))throw Error(r(299));var E=!1,P="",N=a_,ne=ys,xe=_0,We=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(N=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(xe=y.onRecoverableError),y.formState!==void 0&&(We=y.formState)),d=nc(u,1,!0,d,y??null,E,P,We,N,ne,xe,_m),d.context=O_(null),y=d.current,E=il(),E=Jn(E),P=Te(E),P.callback=null,Ae(y,P,E),y=E,d.current.lanes=y,ut(d,y),sl(d),u[xi]=d.current,Z0(u),new Td(d)},Cx.version="19.2.0",Cx}var cP;function jU(){if(cP)return OC.exports;cP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),OC.exports=UU(),OC.exports}var $U=jU();const qU=ZE($U);var H=IM();const Ct=ZE(H),vb=LU({__proto__:null,default:Ct},[H]);var uP="popstate";function HU(t={}){function e(r,s){let{pathname:h,search:p,hash:_}=r.location;return XA("",{pathname:h,search:p,hash:_},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xb(s)}return WU(e,n,null,t)}function Ls(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GU(){return Math.random().toString(36).substring(2,10)}function hP(t,e){return{usr:t.state,key:t.key,idx:e}}function XA(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Uv(e):e,state:n,key:e&&e.key||r||GU()}}function xb({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Uv(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WU(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:h=!1}=r,p=s.history,_="POP",o=null,T=I();T==null&&(T=0,p.replaceState({...p.state,idx:T},""));function I(){return(p.state||{idx:null}).idx}function M(){_="POP";let X=I(),te=X==null?null:X-T;T=X,o&&o({action:_,location:$.location,delta:te})}function L(X,te){_="PUSH";let he=XA($.location,X,te);T=I()+1;let ie=hP(he,T),me=$.createHref(he);try{p.pushState(ie,"",me)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;s.location.assign(me)}h&&o&&o({action:_,location:$.location,delta:1})}function F(X,te){_="REPLACE";let he=XA($.location,X,te);T=I();let ie=hP(he,T),me=$.createHref(he);p.replaceState(ie,"",me),h&&o&&o({action:_,location:$.location,delta:0})}function q(X){return YU(X)}let $={get action(){return _},get location(){return t(s,p)},listen(X){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(uP,M),o=X,()=>{s.removeEventListener(uP,M),o=null}},createHref(X){return e(s,X)},createURL:q,encodeLocation(X){let te=q(X);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:L,replace:F,go(X){return p.go(X)}};return $}function YU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ls(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:xb(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function CN(t,e,n="/"){return XU(t,e,n,!1)}function XU(t,e,n,r){let s=typeof e=="string"?Uv(e):e,h=mp(s.pathname||"/",n);if(h==null)return null;let p=AN(t);KU(p);let _=null;for(let o=0;_==null&&o<p.length;++o){let T=aj(h);_=sj(p[o],T,r)}return _}function AN(t,e=[],n=[],r="",s=!1){let h=(p,_,o=s,T)=>{let I={relativePath:T===void 0?p.path||"":T,caseSensitive:p.caseSensitive===!0,childrenIndex:_,route:p};if(I.relativePath.startsWith("/")){if(!I.relativePath.startsWith(r)&&o)return;Ls(I.relativePath.startsWith(r),`Absolute route path "${I.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),I.relativePath=I.relativePath.slice(r.length)}let M=ap([r,I.relativePath]),L=n.concat(I);p.children&&p.children.length>0&&(Ls(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),AN(p.children,e,L,M,o)),!(p.path==null&&!p.index)&&e.push({path:M,score:rj(M,p.index),routesMeta:L})};return t.forEach((p,_)=>{if(p.path===""||!p.path?.includes("?"))h(p,_);else for(let o of IN(p.path))h(p,_,!0,o)}),e}function IN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),h=n.replace(/\?$/,"");if(r.length===0)return s?[h,""]:[h];let p=IN(r.join("/")),_=[];return _.push(...p.map(o=>o===""?h:[h,o].join("/"))),s&&_.push(...p),_.map(o=>t.startsWith("/")&&o===""?"/":o)}function KU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ij(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ZU=/^:[\w-]+$/,QU=3,JU=2,ej=1,tj=10,nj=-2,dP=t=>t==="*";function rj(t,e){let n=t.split("/"),r=n.length;return n.some(dP)&&(r+=nj),e&&(r+=JU),n.filter(s=>!dP(s)).reduce((s,h)=>s+(ZU.test(h)?QU:h===""?ej:tj),r)}function ij(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sj(t,e,n=!1){let{routesMeta:r}=t,s={},h="/",p=[];for(let _=0;_<r.length;++_){let o=r[_],T=_===r.length-1,I=h==="/"?e:e.slice(h.length)||"/",M=tE({path:o.relativePath,caseSensitive:o.caseSensitive,end:T},I),L=o.route;if(!M&&T&&n&&!r[r.length-1].route.index&&(M=tE({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},I)),!M)return null;Object.assign(s,M.params),p.push({params:s,pathname:ap([h,M.pathname]),pathnameBase:dj(ap([h,M.pathnameBase])),route:L}),M.pathnameBase!=="/"&&(h=ap([h,M.pathnameBase]))}return p}function tE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let h=s[0],p=h.replace(/(.)\/+$/,"$1"),_=s.slice(1);return{params:r.reduce((T,{paramName:I,isOptional:M},L)=>{if(I==="*"){let q=_[L]||"";p=h.slice(0,h.length-q.length).replace(/(.)\/+$/,"$1")}const F=_[L];return M&&!F?T[I]=void 0:T[I]=(F||"").replace(/%2F/g,"/"),T},{}),pathname:h,pathnameBase:p,pattern:t}}function oj(t,e=!1,n=!0){jc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,_,o)=>(r.push({paramName:_,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jc(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var lj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cj=t=>lj.test(t);function uj(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Uv(t):t,h;if(n)if(cj(n))h=n;else{if(n.includes("//")){let p=n;n=n.replace(/\/\/+/g,"/"),jc(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${n}`)}n.startsWith("/")?h=fP(n.substring(1),"/"):h=fP(n,e)}else h=e;return{pathname:h,search:fj(r),hash:pj(s)}}function fP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function VC(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MM(t){let e=hj(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function RM(t,e,n,r=!1){let s;typeof t=="string"?s=Uv(t):(s={...t},Ls(!s.pathname||!s.pathname.includes("?"),VC("?","pathname","search",s)),Ls(!s.pathname||!s.pathname.includes("#"),VC("#","pathname","hash",s)),Ls(!s.search||!s.search.includes("#"),VC("#","search","hash",s)));let h=t===""||s.pathname==="",p=h?"/":s.pathname,_;if(p==null)_=n;else{let M=e.length-1;if(!r&&p.startsWith("..")){let L=p.split("/");for(;L[0]==="..";)L.shift(),M-=1;s.pathname=L.join("/")}_=M>=0?e[M]:"/"}let o=uj(s,_),T=p&&p!=="/"&&p.endsWith("/"),I=(h||p===".")&&n.endsWith("/");return!o.pathname.endsWith("/")&&(T||I)&&(o.pathname+="/"),o}var ap=t=>t.join("/").replace(/\/\/+/g,"/"),dj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var MN=["POST","PUT","PATCH","DELETE"];new Set(MN);var gj=["GET",...MN];new Set(gj);var jv=H.createContext(null);jv.displayName="DataRouter";var QE=H.createContext(null);QE.displayName="DataRouterState";H.createContext(!1);var RN=H.createContext({isTransitioning:!1});RN.displayName="ViewTransition";var yj=H.createContext(new Map);yj.displayName="Fetchers";var _j=H.createContext(null);_j.displayName="Await";var Ph=H.createContext(null);Ph.displayName="Navigation";var Gb=H.createContext(null);Gb.displayName="Location";var Lh=H.createContext({outlet:null,matches:[],isDataRoute:!1});Lh.displayName="Route";var DM=H.createContext(null);DM.displayName="RouteError";function vj(t,{relative:e}={}){Ls($v(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=H.useContext(Ph),{hash:s,pathname:h,search:p}=Wb(t,{relative:e}),_=h;return n!=="/"&&(_=h==="/"?n:ap([n,h])),r.createHref({pathname:_,search:p,hash:s})}function $v(){return H.useContext(Gb)!=null}function Oh(){return Ls($v(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Gb).location}var DN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kN(t){H.useContext(Ph).static||H.useLayoutEffect(t)}function Pu(){let{isDataRoute:t}=H.useContext(Lh);return t?kj():xj()}function xj(){Ls($v(),"useNavigate() may be used only in the context of a <Router> component.");let t=H.useContext(jv),{basename:e,navigator:n}=H.useContext(Ph),{matches:r}=H.useContext(Lh),{pathname:s}=Oh(),h=JSON.stringify(MM(r)),p=H.useRef(!1);return kN(()=>{p.current=!0}),H.useCallback((o,T={})=>{if(jc(p.current,DN),!p.current)return;if(typeof o=="number"){n.go(o);return}let I=RM(o,JSON.parse(h),s,T.relative==="path");t==null&&e!=="/"&&(I.pathname=I.pathname==="/"?e:ap([e,I.pathname])),(T.replace?n.replace:n.push)(I,T.state,T)},[e,n,h,s,t])}H.createContext(null);function JE(){let{matches:t}=H.useContext(Lh),e=t[t.length-1];return e?e.params:{}}function Wb(t,{relative:e}={}){let{matches:n}=H.useContext(Lh),{pathname:r}=Oh(),s=JSON.stringify(MM(n));return H.useMemo(()=>RM(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function bj(t,e){return PN(t,e)}function PN(t,e,n,r,s){Ls($v(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=H.useContext(Ph),{matches:p}=H.useContext(Lh),_=p[p.length-1],o=_?_.params:{},T=_?_.pathname:"/",I=_?_.pathnameBase:"/",M=_&&_.route;{let he=M&&M.path||"";LN(T,!M||he.endsWith("*")||he.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${T}" (under <Route path="${he}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${he}"> to <Route path="${he==="/"?"*":`${he}/*`}">.`)}let L=Oh(),F;if(e){let he=typeof e=="string"?Uv(e):e;Ls(I==="/"||he.pathname?.startsWith(I),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${I}" but pathname "${he.pathname}" was given in the \`location\` prop.`),F=he}else F=L;let q=F.pathname||"/",$=q;if(I!=="/"){let he=I.replace(/^\//,"").split("/");$="/"+q.replace(/^\//,"").split("/").slice(he.length).join("/")}let X=CN(t,{pathname:$});jc(M||X!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),jc(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=Cj(X&&X.map(he=>Object.assign({},he,{params:Object.assign({},o,he.params),pathname:ap([I,h.encodeLocation?h.encodeLocation(he.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathname]),pathnameBase:he.pathnameBase==="/"?I:ap([I,h.encodeLocation?h.encodeLocation(he.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathnameBase])})),p,n,r,s);return e&&te?H.createElement(Gb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},te):te}function wj(){let t=Dj(),e=mj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},h={padding:"2px 4px",backgroundColor:r},p=null;return console.error("Error handled by React Router default ErrorBoundary:",t),p=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:h},"ErrorBoundary")," or"," ",H.createElement("code",{style:h},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:s},n):null,p)}var Tj=H.createElement(wj,null),Ej=class extends H.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?H.createElement(Lh.Provider,{value:this.props.routeContext},H.createElement(DM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Sj({routeContext:t,match:e,children:n}){let r=H.useContext(jv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Lh.Provider,{value:t},n)}function Cj(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let h=t,p=n?.errors;if(p!=null){let I=h.findIndex(M=>M.route.id&&p?.[M.route.id]!==void 0);Ls(I>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,I+1))}let _=!1,o=-1;if(n)for(let I=0;I<h.length;I++){let M=h[I];if((M.route.HydrateFallback||M.route.hydrateFallbackElement)&&(o=I),M.route.id){let{loaderData:L,errors:F}=n,q=M.route.loader&&!L.hasOwnProperty(M.route.id)&&(!F||F[M.route.id]===void 0);if(M.route.lazy||q){_=!0,o>=0?h=h.slice(0,o+1):h=[h[0]];break}}}let T=n&&r?(I,M)=>{r(I,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:M})}:void 0;return h.reduceRight((I,M,L)=>{let F,q=!1,$=null,X=null;n&&(F=p&&M.route.id?p[M.route.id]:void 0,$=M.route.errorElement||Tj,_&&(o<0&&L===0?(LN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,X=null):o===L&&(q=!0,X=M.route.hydrateFallbackElement||null)));let te=e.concat(h.slice(0,L+1)),he=()=>{let ie;return F?ie=$:q?ie=X:M.route.Component?ie=H.createElement(M.route.Component,null):M.route.element?ie=M.route.element:ie=I,H.createElement(Sj,{match:M,routeContext:{outlet:I,matches:te,isDataRoute:n!=null},children:ie})};return n&&(M.route.ErrorBoundary||M.route.errorElement||L===0)?H.createElement(Ej,{location:n.location,revalidation:n.revalidation,component:$,error:F,children:he(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:T}):he()},null)}function kM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Aj(t){let e=H.useContext(jv);return Ls(e,kM(t)),e}function Ij(t){let e=H.useContext(QE);return Ls(e,kM(t)),e}function Mj(t){let e=H.useContext(Lh);return Ls(e,kM(t)),e}function PM(t){let e=Mj(t),n=e.matches[e.matches.length-1];return Ls(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Rj(){return PM("useRouteId")}function Dj(){let t=H.useContext(DM),e=Ij("useRouteError"),n=PM("useRouteError");return t!==void 0?t:e.errors?.[n]}function kj(){let{router:t}=Aj("useNavigate"),e=PM("useNavigate"),n=H.useRef(!1);return kN(()=>{n.current=!0}),H.useCallback(async(s,h={})=>{jc(n.current,DN),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...h}))},[t,e])}var pP={};function LN(t,e,n){!e&&!pP[t]&&(pP[t]=!0,jc(!1,n))}H.memo(Pj);function Pj({routes:t,future:e,state:n,unstable_onError:r}){return PN(t,void 0,n,r,e)}function ON({to:t,replace:e,state:n,relative:r}){Ls($v(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=H.useContext(Ph);jc(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=H.useContext(Lh),{pathname:p}=Oh(),_=Pu(),o=RM(t,MM(h),p,r==="path"),T=JSON.stringify(o);return H.useEffect(()=>{_(JSON.parse(T),{replace:e,state:n,relative:r})},[_,T,r,e,n]),null}function Pc(t){Ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Lj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:h=!1}){Ls(!$v(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=t.replace(/^\/*/,"/"),_=H.useMemo(()=>({basename:p,navigator:s,static:h,future:{}}),[p,s,h]);typeof n=="string"&&(n=Uv(n));let{pathname:o="/",search:T="",hash:I="",state:M=null,key:L="default"}=n,F=H.useMemo(()=>{let q=mp(o,p);return q==null?null:{location:{pathname:q,search:T,hash:I,state:M,key:L},navigationType:r}},[p,o,T,I,M,L,r]);return jc(F!=null,`<Router basename="${p}"> is not able to match the URL "${o}${T}${I}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:H.createElement(Ph.Provider,{value:_},H.createElement(Gb.Provider,{children:e,value:F}))}function Oj({children:t,location:e}){return bj(KA(t),e)}function KA(t,e=[]){let n=[];return H.Children.forEach(t,(r,s)=>{if(!H.isValidElement(r))return;let h=[...e,s];if(r.type===H.Fragment){n.push.apply(n,KA(r.props.children,h));return}Ls(r.type===Pc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ls(!r.props.index||!r.props.children,"An index route cannot have child routes.");let p={id:r.props.id||h.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(p.children=KA(r.props.children,h)),n.push(p)}),n}var bT="get",wT="application/x-www-form-urlencoded";function eS(t){return t!=null&&typeof t.tagName=="string"}function zj(t){return eS(t)&&t.tagName.toLowerCase()==="button"}function Nj(t){return eS(t)&&t.tagName.toLowerCase()==="form"}function Bj(t){return eS(t)&&t.tagName.toLowerCase()==="input"}function Fj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vj(t,e){return t.button===0&&(!e||e==="_self")&&!Fj(t)}function ZA(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Uj(t,e){let n=ZA(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(h=>{n.append(s,h)})}),n}var Uw=null;function jj(){if(Uw===null)try{new FormData(document.createElement("form"),0),Uw=!1}catch{Uw=!0}return Uw}var $j=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function UC(t){return t!=null&&!$j.has(t)?(jc(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wT}"`),null):t}function qj(t,e){let n,r,s,h,p;if(Nj(t)){let _=t.getAttribute("action");r=_?mp(_,e):null,n=t.getAttribute("method")||bT,s=UC(t.getAttribute("enctype"))||wT,h=new FormData(t)}else if(zj(t)||Bj(t)&&(t.type==="submit"||t.type==="image")){let _=t.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=t.getAttribute("formaction")||_.getAttribute("action");if(r=o?mp(o,e):null,n=t.getAttribute("formmethod")||_.getAttribute("method")||bT,s=UC(t.getAttribute("formenctype"))||UC(_.getAttribute("enctype"))||wT,h=new FormData(_,t),!jj()){let{name:T,type:I,value:M}=t;if(I==="image"){let L=T?`${T}.`:"";h.append(`${L}x`,"0"),h.append(`${L}y`,"0")}else T&&h.append(T,M)}}else{if(eS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=bT,r=null,s=wT,p=t}return h&&s==="text/plain"&&(p=h,h=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function LM(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hj(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&mp(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Gj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Yj(t,e,n){let r=await Promise.all(t.map(async s=>{let h=e.routes[s.route.id];if(h){let p=await Gj(h,n);return p.links?p.links():[]}return[]}));return Qj(r.flat(1).filter(Wj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function mP(t,e,n,r,s,h){let p=(o,T)=>n[T]?o.route.id!==n[T].route.id:!0,_=(o,T)=>n[T].pathname!==o.pathname||n[T].route.path?.endsWith("*")&&n[T].params["*"]!==o.params["*"];return h==="assets"?e.filter((o,T)=>p(o,T)||_(o,T)):h==="data"?e.filter((o,T)=>{let I=r.routes[o.route.id];if(!I||!I.hasLoader)return!1;if(p(o,T)||_(o,T))return!0;if(o.route.shouldRevalidate){let M=o.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:o.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function Xj(t,e,{includeHydrateFallback:n}={}){return Kj(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let h=[s.module];return s.clientActionModule&&(h=h.concat(s.clientActionModule)),s.clientLoaderModule&&(h=h.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(h=h.concat(s.hydrateFallbackModule)),s.imports&&(h=h.concat(s.imports)),h}).flat(1))}function Kj(t){return[...new Set(t)]}function Zj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Qj(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let h=JSON.stringify(Zj(s));return n.has(h)||(n.add(h),r.push({key:h,link:s})),r},[])}function zN(){let t=H.useContext(jv);return LM(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Jj(){let t=H.useContext(QE);return LM(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var OM=H.createContext(void 0);OM.displayName="FrameworkContext";function NN(){let t=H.useContext(OM);return LM(t,"You must render this element inside a <HydratedRouter> element"),t}function e8(t,e){let n=H.useContext(OM),[r,s]=H.useState(!1),[h,p]=H.useState(!1),{onFocus:_,onBlur:o,onMouseEnter:T,onMouseLeave:I,onTouchStart:M}=e,L=H.useRef(null);H.useEffect(()=>{if(t==="render"&&p(!0),t==="viewport"){let $=te=>{te.forEach(he=>{p(he.isIntersecting)})},X=new IntersectionObserver($,{threshold:.5});return L.current&&X.observe(L.current),()=>{X.disconnect()}}},[t]),H.useEffect(()=>{if(r){let $=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout($)}}},[r]);let F=()=>{s(!0)},q=()=>{s(!1),p(!1)};return n?t!=="intent"?[h,L,{}]:[h,L,{onFocus:Ax(_,F),onBlur:Ax(o,q),onMouseEnter:Ax(T,F),onMouseLeave:Ax(I,q),onTouchStart:Ax(M,F)}]:[!1,L,{}]}function Ax(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function t8({page:t,...e}){let{router:n}=zN(),r=H.useMemo(()=>CN(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?H.createElement(r8,{page:t,matches:r,...e}):null}function n8(t){let{manifest:e,routeModules:n}=NN(),[r,s]=H.useState([]);return H.useEffect(()=>{let h=!1;return Yj(t,e,n).then(p=>{h||s(p)}),()=>{h=!0}},[t,e,n]),r}function r8({page:t,matches:e,...n}){let r=Oh(),{manifest:s,routeModules:h}=NN(),{basename:p}=zN(),{loaderData:_,matches:o}=Jj(),T=H.useMemo(()=>mP(t,e,o,s,r,"data"),[t,e,o,s,r]),I=H.useMemo(()=>mP(t,e,o,s,r,"assets"),[t,e,o,s,r]),M=H.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let q=new Set,$=!1;if(e.forEach(te=>{let he=s.routes[te.route.id];!he||!he.hasLoader||(!T.some(ie=>ie.route.id===te.route.id)&&te.route.id in _&&h[te.route.id]?.shouldRevalidate||he.hasClientLoader?$=!0:q.add(te.route.id))}),q.size===0)return[];let X=Hj(t,p,"data");return $&&q.size>0&&X.searchParams.set("_routes",e.filter(te=>q.has(te.route.id)).map(te=>te.route.id).join(",")),[X.pathname+X.search]},[p,_,r,s,T,e,t,h]),L=H.useMemo(()=>Xj(I,s),[I,s]),F=n8(I);return H.createElement(H.Fragment,null,M.map(q=>H.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...n})),L.map(q=>H.createElement("link",{key:q,rel:"modulepreload",href:q,...n})),F.map(({key:q,link:$})=>H.createElement("link",{key:q,nonce:n.nonce,...$})))}function i8(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var BN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BN&&(window.__reactRouterVersion="7.9.6")}catch{}function s8({basename:t,children:e,window:n}){let r=H.useRef();r.current==null&&(r.current=HU({window:n,v5Compat:!0}));let s=r.current,[h,p]=H.useState({action:s.action,location:s.location}),_=H.useCallback(o=>{H.startTransition(()=>p(o))},[p]);return H.useLayoutEffect(()=>s.listen(_),[s,_]),H.createElement(Lj,{basename:t,children:e,location:h.location,navigationType:h.action,navigator:s})}var FN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bc=H.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:h,replace:p,state:_,target:o,to:T,preventScrollReset:I,viewTransition:M,...L},F){let{basename:q}=H.useContext(Ph),$=typeof T=="string"&&FN.test(T),X,te=!1;if(typeof T=="string"&&$&&(X=T,BN))try{let le=new URL(window.location.href),se=T.startsWith("//")?new URL(le.protocol+T):new URL(T),_e=mp(se.pathname,q);se.origin===le.origin&&_e!=null?T=_e+se.search+se.hash:te=!0}catch{jc(!1,`<Link to="${T}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let he=vj(T,{relative:s}),[ie,me,ge]=e8(r,L),Ee=c8(T,{replace:p,state:_,target:o,preventScrollReset:I,relative:s,viewTransition:M});function ce(le){e&&e(le),le.defaultPrevented||Ee(le)}let ee=H.createElement("a",{...L,...ge,href:X||he,onClick:te||h?e:ce,ref:i8(F,me),target:o,"data-discover":!$&&n==="render"?"true":void 0});return ie&&!$?H.createElement(H.Fragment,null,ee,H.createElement(t8,{page:he})):ee});Bc.displayName="Link";var o8=H.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:h,to:p,viewTransition:_,children:o,...T},I){let M=Wb(p,{relative:T.relative}),L=Oh(),F=H.useContext(QE),{navigator:q,basename:$}=H.useContext(Ph),X=F!=null&&p8(M)&&_===!0,te=q.encodeLocation?q.encodeLocation(M).pathname:M.pathname,he=L.pathname,ie=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;n||(he=he.toLowerCase(),ie=ie?ie.toLowerCase():null,te=te.toLowerCase()),ie&&$&&(ie=mp(ie,$)||ie);const me=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ge=he===te||!s&&he.startsWith(te)&&he.charAt(me)==="/",Ee=ie!=null&&(ie===te||!s&&ie.startsWith(te)&&ie.charAt(te.length)==="/"),ce={isActive:ge,isPending:Ee,isTransitioning:X},ee=ge?e:void 0,le;typeof r=="function"?le=r(ce):le=[r,ge?"active":null,Ee?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let se=typeof h=="function"?h(ce):h;return H.createElement(Bc,{...T,"aria-current":ee,className:le,ref:I,style:se,to:p,viewTransition:_},typeof o=="function"?o(ce):o)});o8.displayName="NavLink";var a8=H.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:h,method:p=bT,action:_,onSubmit:o,relative:T,preventScrollReset:I,viewTransition:M,...L},F)=>{let q=d8(),$=f8(_,{relative:T}),X=p.toLowerCase()==="get"?"get":"post",te=typeof _=="string"&&FN.test(_),he=ie=>{if(o&&o(ie),ie.defaultPrevented)return;ie.preventDefault();let me=ie.nativeEvent.submitter,ge=me?.getAttribute("formmethod")||p;q(me||ie.currentTarget,{fetcherKey:e,method:ge,navigate:n,replace:s,state:h,relative:T,preventScrollReset:I,viewTransition:M})};return H.createElement("form",{ref:F,method:X,action:$,onSubmit:r?o:he,...L,"data-discover":!te&&t==="render"?"true":void 0})});a8.displayName="Form";function l8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VN(t){let e=H.useContext(jv);return Ls(e,l8(t)),e}function c8(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:h,viewTransition:p}={}){let _=Pu(),o=Oh(),T=Wb(t,{relative:h});return H.useCallback(I=>{if(Vj(I,e)){I.preventDefault();let M=n!==void 0?n:xb(o)===xb(T);_(t,{replace:M,state:r,preventScrollReset:s,relative:h,viewTransition:p})}},[o,_,T,n,r,e,t,s,h,p])}function UN(t){jc(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=H.useRef(ZA(t)),n=H.useRef(!1),r=Oh(),s=H.useMemo(()=>Uj(r.search,n.current?null:e.current),[r.search]),h=Pu(),p=H.useCallback((_,o)=>{const T=ZA(typeof _=="function"?_(new URLSearchParams(s)):_);n.current=!0,h("?"+T,o)},[h,s]);return[s,p]}var u8=0,h8=()=>`__${String(++u8)}__`;function d8(){let{router:t}=VN("useSubmit"),{basename:e}=H.useContext(Ph),n=Rj();return H.useCallback(async(r,s={})=>{let{action:h,method:p,encType:_,formData:o,body:T}=qj(r,e);if(s.navigate===!1){let I=s.fetcherKey||h8();await t.fetch(I,n,s.action||h,{preventScrollReset:s.preventScrollReset,formData:o,body:T,formMethod:s.method||p,formEncType:s.encType||_,flushSync:s.flushSync})}else await t.navigate(s.action||h,{preventScrollReset:s.preventScrollReset,formData:o,body:T,formMethod:s.method||p,formEncType:s.encType||_,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function f8(t,{relative:e}={}){let{basename:n}=H.useContext(Ph),r=H.useContext(Lh);Ls(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),h={...Wb(t||".",{relative:e})},p=Oh();if(t==null){h.search=p.search;let _=new URLSearchParams(h.search),o=_.getAll("index");if(o.some(I=>I==="")){_.delete("index"),o.filter(M=>M).forEach(M=>_.append("index",M));let I=_.toString();h.search=I?`?${I}`:""}}return(!t||t===".")&&s.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:ap([n,h.pathname])),xb(h)}function p8(t,{relative:e}={}){let n=H.useContext(RN);Ls(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=VN("useViewTransitionState"),s=Wb(t,{relative:e});if(!n.isTransitioning)return!1;let h=mp(n.currentLocation.pathname,r)||n.currentLocation.pathname,p=mp(n.nextLocation.pathname,r)||n.nextLocation.pathname;return tE(s.pathname,p)!=null||tE(s.pathname,h)!=null}var zM=SN();const jx=ZE(zM),NM=H.createContext({});function BM(t){const e=H.useRef(null);return e.current===null&&(e.current=t()),e.current}const FM=typeof window<"u",jN=FM?H.useLayoutEffect:H.useEffect,tS=H.createContext(null);function VM(t,e){t.indexOf(e)===-1&&t.push(e)}function UM(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const gp=(t,e,n)=>n>e?e:n<t?t:n;let jM=()=>{};const yp={},$N=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function qN(t){return typeof t=="object"&&t!==null}const HN=t=>/^0[^.\s]+$/u.test(t);function $M(t){let e;return()=>(e===void 0&&(e=t()),e)}const Du=t=>t,m8=(t,e)=>n=>e(t(n)),Yb=(...t)=>t.reduce(m8),bb=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class qM{constructor(){this.subscriptions=[]}add(e){return VM(this.subscriptions,e),()=>UM(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let h=0;h<s;h++){const p=this.subscriptions[h];p&&p(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $d=t=>t*1e3,Mu=t=>t/1e3;function GN(t,e){return e?t*(1e3/e):0}const WN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,g8=1e-7,y8=12;function _8(t,e,n,r,s){let h,p,_=0;do p=e+(n-e)/2,h=WN(p,r,s)-t,h>0?n=p:e=p;while(Math.abs(h)>g8&&++_<y8);return p}function Xb(t,e,n,r){if(t===e&&n===r)return Du;const s=h=>_8(h,0,1,t,n);return h=>h===0||h===1?h:WN(s(h),e,r)}const YN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XN=t=>e=>1-t(1-e),KN=Xb(.33,1.53,.69,.99),HM=XN(KN),ZN=YN(HM),QN=t=>(t*=2)<1?.5*HM(t):.5*(2-Math.pow(2,-10*(t-1))),GM=t=>1-Math.sin(Math.acos(t)),JN=XN(GM),e5=YN(GM),v8=Xb(.42,0,1,1),x8=Xb(0,0,.58,1),t5=Xb(.42,0,.58,1),b8=t=>Array.isArray(t)&&typeof t[0]!="number",n5=t=>Array.isArray(t)&&typeof t[0]=="number",w8={linear:Du,easeIn:v8,easeInOut:t5,easeOut:x8,circIn:GM,circInOut:e5,circOut:JN,backIn:HM,backInOut:ZN,backOut:KN,anticipate:QN},T8=t=>typeof t=="string",gP=t=>{if(n5(t)){jM(t.length===4);const[e,n,r,s]=t;return Xb(e,n,r,s)}else if(T8(t))return w8[t];return t},jw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function E8(t,e){let n=new Set,r=new Set,s=!1,h=!1;const p=new WeakSet;let _={delta:0,timestamp:0,isProcessing:!1};function o(I){p.has(I)&&(T.schedule(I),t()),I(_)}const T={schedule:(I,M=!1,L=!1)=>{const q=L&&s?n:r;return M&&p.add(I),q.has(I)||q.add(I),I},cancel:I=>{r.delete(I),p.delete(I)},process:I=>{if(_=I,s){h=!0;return}s=!0,[n,r]=[r,n],n.forEach(o),n.clear(),s=!1,h&&(h=!1,T.process(I))}};return T}const S8=40;function r5(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,p=jw.reduce((ie,me)=>(ie[me]=E8(h),ie),{}),{setup:_,read:o,resolveKeyframes:T,preUpdate:I,update:M,preRender:L,render:F,postRender:q}=p,$=()=>{const ie=yp.useManualTiming?s.timestamp:performance.now();n=!1,yp.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(ie-s.timestamp,S8),1)),s.timestamp=ie,s.isProcessing=!0,_.process(s),o.process(s),T.process(s),I.process(s),M.process(s),L.process(s),F.process(s),q.process(s),s.isProcessing=!1,n&&e&&(r=!1,t($))},X=()=>{n=!0,r=!0,s.isProcessing||t($)};return{schedule:jw.reduce((ie,me)=>{const ge=p[me];return ie[me]=(Ee,ce=!1,ee=!1)=>(n||X(),ge.schedule(Ee,ce,ee)),ie},{}),cancel:ie=>{for(let me=0;me<jw.length;me++)p[jw[me]].cancel(ie)},state:s,steps:p}}const{schedule:ks,cancel:$m,state:Da,steps:jC}=r5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Du,!0);let TT;function C8(){TT=void 0}const oc={now:()=>(TT===void 0&&oc.set(Da.isProcessing||yp.useManualTiming?Da.timestamp:performance.now()),TT),set:t=>{TT=t,queueMicrotask(C8)}},i5=t=>e=>typeof e=="string"&&e.startsWith(t),WM=i5("--"),A8=i5("var(--"),YM=t=>A8(t)?I8.test(t.split("/*")[0].trim()):!1,I8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wb={...qv,transform:t=>gp(0,1,t)},$w={...qv,default:1},rb=t=>Math.round(t*1e5)/1e5,XM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function M8(t){return t==null}const R8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,KM=(t,e)=>n=>!!(typeof n=="string"&&R8.test(n)&&n.startsWith(t)||e&&!M8(n)&&Object.prototype.hasOwnProperty.call(n,e)),s5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,h,p,_]=r.match(XM);return{[t]:parseFloat(s),[e]:parseFloat(h),[n]:parseFloat(p),alpha:_!==void 0?parseFloat(_):1}},D8=t=>gp(0,255,t),$C={...qv,transform:t=>Math.round(D8(t))},cy={test:KM("rgb","red"),parse:s5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+$C.transform(t)+", "+$C.transform(e)+", "+$C.transform(n)+", "+rb(wb.transform(r))+")"};function k8(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const QA={test:KM("#"),parse:k8,transform:cy.transform},Kb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cm=Kb("deg"),qd=Kb("%"),yr=Kb("px"),P8=Kb("vh"),L8=Kb("vw"),yP={...qd,parse:t=>qd.parse(t)/100,transform:t=>qd.transform(t*100)},ov={test:KM("hsl","hue"),parse:s5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+qd.transform(rb(e))+", "+qd.transform(rb(n))+", "+rb(wb.transform(r))+")"},Ro={test:t=>cy.test(t)||QA.test(t)||ov.test(t),parse:t=>cy.test(t)?cy.parse(t):ov.test(t)?ov.parse(t):QA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cy.transform(t):ov.transform(t),getAnimatableNone:t=>{const e=Ro.parse(t);return e.alpha=0,Ro.transform(e)}},O8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function z8(t){return isNaN(t)&&typeof t=="string"&&(t.match(XM)?.length||0)+(t.match(O8)?.length||0)>0}const o5="number",a5="color",N8="var",B8="var(",_P="${}",F8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tb(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let h=0;const _=e.replace(F8,o=>(Ro.test(o)?(r.color.push(h),s.push(a5),n.push(Ro.parse(o))):o.startsWith(B8)?(r.var.push(h),s.push(N8),n.push(o)):(r.number.push(h),s.push(o5),n.push(parseFloat(o))),++h,_P)).split(_P);return{values:n,split:_,indexes:r,types:s}}function l5(t){return Tb(t).values}function c5(t){const{split:e,types:n}=Tb(t),r=e.length;return s=>{let h="";for(let p=0;p<r;p++)if(h+=e[p],s[p]!==void 0){const _=n[p];_===o5?h+=rb(s[p]):_===a5?h+=Ro.transform(s[p]):h+=s[p]}return h}}const V8=t=>typeof t=="number"?0:Ro.test(t)?Ro.getAnimatableNone(t):t;function U8(t){const e=l5(t);return c5(t)(e.map(V8))}const qm={test:z8,parse:l5,createTransformer:c5,getAnimatableNone:U8};function qC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function j8({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,h=0,p=0;if(!e)s=h=p=n;else{const _=n<.5?n*(1+e):n+e-n*e,o=2*n-_;s=qC(o,_,t+1/3),h=qC(o,_,t),p=qC(o,_,t-1/3)}return{red:Math.round(s*255),green:Math.round(h*255),blue:Math.round(p*255),alpha:r}}function nE(t,e){return n=>n>0?e:t}const js=(t,e,n)=>t+(e-t)*n,HC=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},$8=[QA,cy,ov],q8=t=>$8.find(e=>e.test(t));function vP(t){const e=q8(t);if(!e)return!1;let n=e.parse(t);return e===ov&&(n=j8(n)),n}const xP=(t,e)=>{const n=vP(t),r=vP(e);if(!n||!r)return nE(t,e);const s={...n};return h=>(s.red=HC(n.red,r.red,h),s.green=HC(n.green,r.green,h),s.blue=HC(n.blue,r.blue,h),s.alpha=js(n.alpha,r.alpha,h),cy.transform(s))},JA=new Set(["none","hidden"]);function H8(t,e){return JA.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function G8(t,e){return n=>js(t,e,n)}function ZM(t){return typeof t=="number"?G8:typeof t=="string"?YM(t)?nE:Ro.test(t)?xP:X8:Array.isArray(t)?u5:typeof t=="object"?Ro.test(t)?xP:W8:nE}function u5(t,e){const n=[...t],r=n.length,s=t.map((h,p)=>ZM(h)(h,e[p]));return h=>{for(let p=0;p<r;p++)n[p]=s[p](h);return n}}function W8(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=ZM(t[s])(t[s],e[s]));return s=>{for(const h in r)n[h]=r[h](s);return n}}function Y8(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const h=e.types[s],p=t.indexes[h][r[h]],_=t.values[p]??0;n[s]=_,r[h]++}return n}const X8=(t,e)=>{const n=qm.createTransformer(e),r=Tb(t),s=Tb(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?JA.has(t)&&!s.values.length||JA.has(e)&&!r.values.length?H8(t,e):Yb(u5(Y8(r,s),s.values),n):nE(t,e)};function h5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?js(t,e,n):ZM(t)(t,e)}const K8=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ks.update(e,n),stop:()=>$m(e),now:()=>Da.isProcessing?Da.timestamp:oc.now()}},d5=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let h=0;h<s;h++)r+=Math.round(t(h/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},rE=2e4;function QM(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<rE;)e+=n,r=t.next(e);return e>=rE?1/0:e}function Z8(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(QM(r),rE);return{type:"keyframes",ease:h=>r.next(s*h).value/e,duration:Mu(s)}}const Q8=5;function f5(t,e,n){const r=Math.max(e-Q8,0);return GN(n-t(r),e-r)}const Qs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},GC=.001;function J8({duration:t=Qs.duration,bounce:e=Qs.bounce,velocity:n=Qs.velocity,mass:r=Qs.mass}){let s,h,p=1-e;p=gp(Qs.minDamping,Qs.maxDamping,p),t=gp(Qs.minDuration,Qs.maxDuration,Mu(t)),p<1?(s=T=>{const I=T*p,M=I*t,L=I-n,F=eI(T,p),q=Math.exp(-M);return GC-L/F*q},h=T=>{const M=T*p*t,L=M*n+n,F=Math.pow(p,2)*Math.pow(T,2)*t,q=Math.exp(-M),$=eI(Math.pow(T,2),p);return(-s(T)+GC>0?-1:1)*((L-F)*q)/$}):(s=T=>{const I=Math.exp(-T*t),M=(T-n)*t+1;return-GC+I*M},h=T=>{const I=Math.exp(-T*t),M=(n-T)*(t*t);return I*M});const _=5/t,o=t$(s,h,_);if(t=$d(t),isNaN(o))return{stiffness:Qs.stiffness,damping:Qs.damping,duration:t};{const T=Math.pow(o,2)*r;return{stiffness:T,damping:p*2*Math.sqrt(r*T),duration:t}}}const e$=12;function t$(t,e,n){let r=n;for(let s=1;s<e$;s++)r=r-t(r)/e(r);return r}function eI(t,e){return t*Math.sqrt(1-e*e)}const n$=["duration","bounce"],r$=["stiffness","damping","mass"];function bP(t,e){return e.some(n=>t[n]!==void 0)}function i$(t){let e={velocity:Qs.velocity,stiffness:Qs.stiffness,damping:Qs.damping,mass:Qs.mass,isResolvedFromDuration:!1,...t};if(!bP(t,r$)&&bP(t,n$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,h=2*gp(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Qs.mass,stiffness:s,damping:h}}else{const n=J8(t);e={...e,...n,mass:Qs.mass},e.isResolvedFromDuration=!0}return e}function iE(t=Qs.visualDuration,e=Qs.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const h=n.keyframes[0],p=n.keyframes[n.keyframes.length-1],_={done:!1,value:h},{stiffness:o,damping:T,mass:I,duration:M,velocity:L,isResolvedFromDuration:F}=i$({...n,velocity:-Mu(n.velocity||0)}),q=L||0,$=T/(2*Math.sqrt(o*I)),X=p-h,te=Mu(Math.sqrt(o/I)),he=Math.abs(X)<5;r||(r=he?Qs.restSpeed.granular:Qs.restSpeed.default),s||(s=he?Qs.restDelta.granular:Qs.restDelta.default);let ie;if($<1){const ge=eI(te,$);ie=Ee=>{const ce=Math.exp(-$*te*Ee);return p-ce*((q+$*te*X)/ge*Math.sin(ge*Ee)+X*Math.cos(ge*Ee))}}else if($===1)ie=ge=>p-Math.exp(-te*ge)*(X+(q+te*X)*ge);else{const ge=te*Math.sqrt($*$-1);ie=Ee=>{const ce=Math.exp(-$*te*Ee),ee=Math.min(ge*Ee,300);return p-ce*((q+$*te*X)*Math.sinh(ee)+ge*X*Math.cosh(ee))/ge}}const me={calculatedDuration:F&&M||null,next:ge=>{const Ee=ie(ge);if(F)_.done=ge>=M;else{let ce=ge===0?q:0;$<1&&(ce=ge===0?$d(q):f5(ie,ge,Ee));const ee=Math.abs(ce)<=r,le=Math.abs(p-Ee)<=s;_.done=ee&&le}return _.value=_.done?p:Ee,_},toString:()=>{const ge=Math.min(QM(me),rE),Ee=d5(ce=>me.next(ge*ce).value,ge,30);return ge+"ms "+Ee},toTransition:()=>{}};return me}iE.applyToOptions=t=>{const e=Z8(t,100,iE);return t.ease=e.ease,t.duration=$d(e.duration),t.type="keyframes",t};function tI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:h=500,modifyTarget:p,min:_,max:o,restDelta:T=.5,restSpeed:I}){const M=t[0],L={done:!1,value:M},F=ee=>_!==void 0&&ee<_||o!==void 0&&ee>o,q=ee=>_===void 0?o:o===void 0||Math.abs(_-ee)<Math.abs(o-ee)?_:o;let $=n*e;const X=M+$,te=p===void 0?X:p(X);te!==X&&($=te-M);const he=ee=>-$*Math.exp(-ee/r),ie=ee=>te+he(ee),me=ee=>{const le=he(ee),se=ie(ee);L.done=Math.abs(le)<=T,L.value=L.done?te:se};let ge,Ee;const ce=ee=>{F(L.value)&&(ge=ee,Ee=iE({keyframes:[L.value,q(L.value)],velocity:f5(ie,ee,L.value),damping:s,stiffness:h,restDelta:T,restSpeed:I}))};return ce(0),{calculatedDuration:null,next:ee=>{let le=!1;return!Ee&&ge===void 0&&(le=!0,me(ee),ce(ee)),ge!==void 0&&ee>=ge?Ee.next(ee-ge):(!le&&me(ee),L)}}}function s$(t,e,n){const r=[],s=n||yp.mix||h5,h=t.length-1;for(let p=0;p<h;p++){let _=s(t[p],t[p+1]);if(e){const o=Array.isArray(e)?e[p]||Du:e;_=Yb(o,_)}r.push(_)}return r}function o$(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const h=t.length;if(jM(h===e.length),h===1)return()=>e[0];if(h===2&&e[0]===e[1])return()=>e[1];const p=t[0]===t[1];t[0]>t[h-1]&&(t=[...t].reverse(),e=[...e].reverse());const _=s$(e,r,s),o=_.length,T=I=>{if(p&&I<t[0])return e[0];let M=0;if(o>1)for(;M<t.length-2&&!(I<t[M+1]);M++);const L=bb(t[M],t[M+1],I);return _[M](L)};return n?I=>T(gp(t[0],t[h-1],I)):T}function a$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=bb(0,e,r);t.push(js(n,1,s))}}function l$(t){const e=[0];return a$(e,t.length-1),e}function c$(t,e){return t.map(n=>n*e)}function u$(t,e){return t.map(()=>e||t5).splice(0,t.length-1)}function ib({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=b8(r)?r.map(gP):gP(r),h={done:!1,value:e[0]},p=c$(n&&n.length===e.length?n:l$(e),t),_=o$(p,e,{ease:Array.isArray(s)?s:u$(e,s)});return{calculatedDuration:t,next:o=>(h.value=_(o),h.done=o>=t,h)}}const h$=t=>t!==null;function JM(t,{repeat:e,repeatType:n="loop"},r,s=1){const h=t.filter(h$),_=s<0||e&&n!=="loop"&&e%2===1?0:h.length-1;return!_||r===void 0?h[_]:r}const d$={decay:tI,inertia:tI,tween:ib,keyframes:ib,spring:iE};function p5(t){typeof t.type=="string"&&(t.type=d$[t.type])}class eR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const f$=t=>t/100;class tR extends eR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==oc.now()&&this.tick(oc.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;p5(e);const{type:n=ib,repeat:r=0,repeatDelay:s=0,repeatType:h,velocity:p=0}=e;let{keyframes:_}=e;const o=n||ib;o!==ib&&typeof _[0]!="number"&&(this.mixKeyframes=Yb(f$,h5(_[0],_[1])),_=[0,100]);const T=o({...e,keyframes:_});h==="mirror"&&(this.mirroredGenerator=o({...e,keyframes:[..._].reverse(),velocity:-p})),T.calculatedDuration===null&&(T.calculatedDuration=QM(T));const{calculatedDuration:I}=T;this.calculatedDuration=I,this.resolvedDuration=I+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=T}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:h,mirroredGenerator:p,resolvedDuration:_,calculatedDuration:o}=this;if(this.startTime===null)return r.next(0);const{delay:T=0,keyframes:I,repeat:M,repeatType:L,repeatDelay:F,type:q,onUpdate:$,finalKeyframe:X}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const te=this.currentTime-T*(this.playbackSpeed>=0?1:-1),he=this.playbackSpeed>=0?te<0:te>s;this.currentTime=Math.max(te,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let ie=this.currentTime,me=r;if(M){const ee=Math.min(this.currentTime,s)/_;let le=Math.floor(ee),se=ee%1;!se&&ee>=1&&(se=1),se===1&&le--,le=Math.min(le,M+1),!!(le%2)&&(L==="reverse"?(se=1-se,F&&(se-=F/_)):L==="mirror"&&(me=p)),ie=gp(0,1,se)*_}const ge=he?{done:!1,value:I[0]}:me.next(ie);h&&(ge.value=h(ge.value));let{done:Ee}=ge;!he&&o!==null&&(Ee=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const ce=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Ee);return ce&&q!==tI&&(ge.value=JM(I,this.options,X,this.speed)),$&&$(ge.value),ce&&this.finish(),ge}then(e,n){return this.finished.then(e,n)}get duration(){return Mu(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mu(e)}get time(){return Mu(this.currentTime)}set time(e){e=$d(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(oc.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mu(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=K8,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(oc.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function p$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const uy=t=>t*180/Math.PI,nI=t=>{const e=uy(Math.atan2(t[1],t[0]));return rI(e)},m$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:nI,rotateZ:nI,skewX:t=>uy(Math.atan(t[1])),skewY:t=>uy(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rI=t=>(t=t%360,t<0&&(t+=360),t),wP=nI,TP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),EP=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),g$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TP,scaleY:EP,scale:t=>(TP(t)+EP(t))/2,rotateX:t=>rI(uy(Math.atan2(t[6],t[5]))),rotateY:t=>rI(uy(Math.atan2(-t[2],t[0]))),rotateZ:wP,rotate:wP,skewX:t=>uy(Math.atan(t[4])),skewY:t=>uy(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function iI(t){return t.includes("scale")?1:0}function sI(t,e){if(!t||t==="none")return iI(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=g$,s=n;else{const _=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=m$,s=_}if(!s)return iI(e);const h=r[e],p=s[1].split(",").map(_$);return typeof h=="function"?h(p):p[h]}const y$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return sI(n,e)};function _$(t){return parseFloat(t.trim())}const Hv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gv=new Set(Hv),SP=t=>t===qv||t===yr,v$=new Set(["x","y","z"]),x$=Hv.filter(t=>!v$.has(t));function b$(t){const e=[];return x$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gy={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>sI(e,"x"),y:(t,{transform:e})=>sI(e,"y")};gy.translateX=gy.x;gy.translateY=gy.y;const yy=new Set;let oI=!1,aI=!1,lI=!1;function m5(){if(aI){const t=Array.from(yy).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=b$(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([h,p])=>{r.getValue(h)?.set(p)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}aI=!1,oI=!1,yy.forEach(t=>t.complete(lI)),yy.clear()}function g5(){yy.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(aI=!0)})}function w$(){lI=!0,g5(),m5(),lI=!1}class nR{constructor(e,n,r,s,h,p=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=h,this.isAsync=p}scheduleResolve(){this.state="scheduled",this.isAsync?(yy.add(this),oI||(oI=!0,ks.read(g5),ks.resolveKeyframes(m5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const h=s?.get(),p=e[e.length-1];if(h!==void 0)e[0]=h;else if(r&&n){const _=r.readValue(n,p);_!=null&&(e[0]=_)}e[0]===void 0&&(e[0]=p),s&&h===void 0&&s.set(e[0])}p$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yy.delete(this)}cancel(){this.state==="scheduled"&&(yy.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const T$=t=>t.startsWith("--");function E$(t,e,n){T$(e)?t.style.setProperty(e,n):t.style[e]=n}const S$=$M(()=>window.ScrollTimeline!==void 0),C$={};function A$(t,e){const n=$M(t);return()=>C$[e]??n()}const y5=A$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$x=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,CP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$x([0,.65,.55,1]),circOut:$x([.55,0,1,.45]),backIn:$x([.31,.01,.66,-.59]),backOut:$x([.33,1.53,.69,.99])};function _5(t,e){if(t)return typeof t=="function"?y5()?d5(t,e):"ease-out":n5(t)?$x(t):Array.isArray(t)?t.map(n=>_5(n,e)||CP.easeOut):CP[t]}function I$(t,e,n,{delay:r=0,duration:s=300,repeat:h=0,repeatType:p="loop",ease:_="easeOut",times:o}={},T=void 0){const I={[e]:n};o&&(I.offset=o);const M=_5(_,s);Array.isArray(M)&&(I.easing=M);const L={delay:r,duration:s,easing:Array.isArray(M)?"linear":M,fill:"both",iterations:h+1,direction:p==="reverse"?"alternate":"normal"};return T&&(L.pseudoElement=T),t.animate(I,L)}function v5(t){return typeof t=="function"&&"applyToOptions"in t}function M$({type:t,...e}){return v5(t)&&y5()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class R$ extends eR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:h,allowFlatten:p=!1,finalKeyframe:_,onComplete:o}=e;this.isPseudoElement=!!h,this.allowFlatten=p,this.options=e,jM(typeof e.type!="string");const T=M$(e);this.animation=I$(n,r,s,T,h),T.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!h){const I=JM(s,this.options,_,this.speed);this.updateMotionValue?this.updateMotionValue(I):E$(n,r,I),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Mu(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mu(e)}get time(){return Mu(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$d(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&S$()?(this.animation.timeline=e,Du):n(this)}}const x5={anticipate:QN,backInOut:ZN,circInOut:e5};function D$(t){return t in x5}function k$(t){typeof t.ease=="string"&&D$(t.ease)&&(t.ease=x5[t.ease])}const AP=10;class P$ extends R${constructor(e){k$(e),p5(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:h,...p}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const _=new tR({...p,autoplay:!1}),o=$d(this.finishedTime??this.time);n.setWithVelocity(_.sample(o-AP).value,_.sample(o).value,AP),_.stop()}}const IP=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(qm.test(t)||t==="0")&&!t.startsWith("url("));function L$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function O$(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const h=t[t.length-1],p=IP(s,e),_=IP(h,e);return!p||!_?!1:L$(t)||(n==="spring"||v5(n))&&r}function cI(t){t.duration=0,t.type="keyframes"}const z$=new Set(["opacity","clipPath","filter","transform"]),N$=$M(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function B$(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:h,type:p}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:T}=e.owner.getProps();return N$()&&n&&z$.has(n)&&(n!=="transform"||!T)&&!o&&!r&&s!=="mirror"&&h!==0&&p!=="inertia"}const F$=40;class V$ extends eR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:h=0,repeatType:p="loop",keyframes:_,name:o,motionValue:T,element:I,...M}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=oc.now();const L={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:h,repeatType:p,name:o,motionValue:T,element:I,...M},F=I?.KeyframeResolver||nR;this.keyframeResolver=new F(_,(q,$,X)=>this.onKeyframesResolved(q,$,L,!X),o,T,I),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:h,type:p,velocity:_,delay:o,isHandoff:T,onUpdate:I}=r;this.resolvedAt=oc.now(),O$(e,h,p,_)||((yp.instantAnimations||!o)&&I?.(JM(e,r,n)),e[0]=e[e.length-1],cI(r),r.repeat=0);const L={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>F$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},F=!T&&B$(L)?new P$({...L,element:L.motionValue.owner.current}):new tR(L);F.finished.then(()=>this.notifyFinished()).catch(Du),this.pendingTimeline&&(this.stopTimeline=F.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=F}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),w$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const U$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function j$(t){const e=U$.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function b5(t,e,n=1){const[r,s]=j$(t);if(!r)return;const h=window.getComputedStyle(e).getPropertyValue(r);if(h){const p=h.trim();return $N(p)?parseFloat(p):p}return YM(s)?b5(s,e,n+1):s}function rR(t,e){return t?.[e]??t?.default??t}const w5=new Set(["width","height","top","left","right","bottom",...Hv]),$$={test:t=>t==="auto",parse:t=>t},T5=t=>e=>e.test(t),E5=[qv,yr,qd,Cm,L8,P8,$$],MP=t=>E5.find(T5(t));function q$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||HN(t):!0}const H$=new Set(["brightness","contrast","saturate","opacity"]);function G$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(XM)||[];if(!r)return t;const s=n.replace(r,"");let h=H$.has(e)?1:0;return r!==n&&(h*=100),e+"("+h+s+")"}const W$=/\b([a-z-]*)\(.*?\)/gu,uI={...qm,getAnimatableNone:t=>{const e=t.match(W$);return e?e.map(G$).join(" "):t}},RP={...qv,transform:Math.round},Y$={rotate:Cm,rotateX:Cm,rotateY:Cm,rotateZ:Cm,scale:$w,scaleX:$w,scaleY:$w,scaleZ:$w,skew:Cm,skewX:Cm,skewY:Cm,distance:yr,translateX:yr,translateY:yr,translateZ:yr,x:yr,y:yr,z:yr,perspective:yr,transformPerspective:yr,opacity:wb,originX:yP,originY:yP,originZ:yr},iR={borderWidth:yr,borderTopWidth:yr,borderRightWidth:yr,borderBottomWidth:yr,borderLeftWidth:yr,borderRadius:yr,radius:yr,borderTopLeftRadius:yr,borderTopRightRadius:yr,borderBottomRightRadius:yr,borderBottomLeftRadius:yr,width:yr,maxWidth:yr,height:yr,maxHeight:yr,top:yr,right:yr,bottom:yr,left:yr,padding:yr,paddingTop:yr,paddingRight:yr,paddingBottom:yr,paddingLeft:yr,margin:yr,marginTop:yr,marginRight:yr,marginBottom:yr,marginLeft:yr,backgroundPositionX:yr,backgroundPositionY:yr,...Y$,zIndex:RP,fillOpacity:wb,strokeOpacity:wb,numOctaves:RP},X$={...iR,color:Ro,backgroundColor:Ro,outlineColor:Ro,fill:Ro,stroke:Ro,borderColor:Ro,borderTopColor:Ro,borderRightColor:Ro,borderBottomColor:Ro,borderLeftColor:Ro,filter:uI,WebkitFilter:uI},S5=t=>X$[t];function C5(t,e){let n=S5(t);return n!==uI&&(n=qm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const K$=new Set(["auto","none","0"]);function Z$(t,e,n){let r=0,s;for(;r<t.length&&!s;){const h=t[r];typeof h=="string"&&!K$.has(h)&&Tb(h).values.length&&(s=t[r]),r++}if(s&&n)for(const h of e)t[h]=C5(n,s)}class Q$ extends nR{constructor(e,n,r,s,h){super(e,n,r,s,h,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let T=e[o];if(typeof T=="string"&&(T=T.trim(),YM(T))){const I=b5(T,n.current);I!==void 0&&(e[o]=I),o===e.length-1&&(this.finalKeyframe=T)}}if(this.resolveNoneKeyframes(),!w5.has(r)||e.length!==2)return;const[s,h]=e,p=MP(s),_=MP(h);if(p!==_)if(SP(p)&&SP(_))for(let o=0;o<e.length;o++){const T=e[o];typeof T=="string"&&(e[o]=parseFloat(T))}else gy[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||q$(e[s]))&&r.push(s);r.length&&Z$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gy[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const h=r.length-1,p=r[h];r[h]=gy[n](e.measureViewportBox(),window.getComputedStyle(e.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),this.removedTransforms?.length&&this.removedTransforms.forEach(([_,o])=>{e.getValue(_).set(o)}),this.resolveNoneKeyframes()}}function J$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const A5=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function I5(t){return qN(t)&&"offsetHeight"in t}const DP=30,e9=t=>!isNaN(parseFloat(t));class t9{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=oc.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=oc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=e9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new qM);const r=this.events[e].add(n);return e==="change"?()=>{r(),ks.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=oc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>DP)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,DP);return GN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Tv(t,e){return new t9(t,e)}const{schedule:sR}=r5(queueMicrotask,!1),Th={x:!1,y:!1};function M5(){return Th.x||Th.y}function n9(t){return t==="x"||t==="y"?Th[t]?null:(Th[t]=!0,()=>{Th[t]=!1}):Th.x||Th.y?null:(Th.x=Th.y=!0,()=>{Th.x=Th.y=!1})}function R5(t,e){const n=J$(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function kP(t){return!(t.pointerType==="touch"||M5())}function r9(t,e,n={}){const[r,s,h]=R5(t,n),p=_=>{if(!kP(_))return;const{target:o}=_,T=e(o,_);if(typeof T!="function"||!o)return;const I=M=>{kP(M)&&(T(M),o.removeEventListener("pointerleave",I))};o.addEventListener("pointerleave",I,s)};return r.forEach(_=>{_.addEventListener("pointerenter",p,s)}),h}const D5=(t,e)=>e?t===e?!0:D5(t,e.parentElement):!1,oR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,i9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function s9(t){return i9.has(t.tagName)||t.tabIndex!==-1}const ET=new WeakSet;function PP(t){return e=>{e.key==="Enter"&&t(e)}}function WC(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const o9=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=PP(()=>{if(ET.has(n))return;WC(n,"down");const s=PP(()=>{WC(n,"up")}),h=()=>WC(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",h,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function LP(t){return oR(t)&&!M5()}function a9(t,e,n={}){const[r,s,h]=R5(t,n),p=_=>{const o=_.currentTarget;if(!LP(_))return;ET.add(o);const T=e(o,_),I=(F,q)=>{window.removeEventListener("pointerup",M),window.removeEventListener("pointercancel",L),ET.has(o)&&ET.delete(o),LP(F)&&typeof T=="function"&&T(F,{success:q})},M=F=>{I(F,o===window||o===document||n.useGlobalTarget||D5(o,F.target))},L=F=>{I(F,!1)};window.addEventListener("pointerup",M,s),window.addEventListener("pointercancel",L,s)};return r.forEach(_=>{(n.useGlobalTarget?window:_).addEventListener("pointerdown",p,s),I5(_)&&(_.addEventListener("focus",T=>o9(T,s)),!s9(_)&&!_.hasAttribute("tabindex")&&(_.tabIndex=0))}),h}function k5(t){return qN(t)&&"ownerSVGElement"in t}function l9(t){return k5(t)&&t.tagName==="svg"}const pl=t=>!!(t&&t.getVelocity),c9=[...E5,Ro,qm],u9=t=>c9.find(T5(t)),aR=H.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function OP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function h9(...t){return e=>{let n=!1;const r=t.map(s=>{const h=OP(s,e);return!n&&typeof h=="function"&&(n=!0),h});if(n)return()=>{for(let s=0;s<r.length;s++){const h=r[s];typeof h=="function"?h():OP(t[s],null)}}}}function d9(...t){return H.useCallback(h9(...t),t)}class f9 extends H.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=I5(r)&&r.offsetWidth||0,h=this.props.sizeRef.current;h.height=n.offsetHeight||0,h.width=n.offsetWidth||0,h.top=n.offsetTop,h.left=n.offsetLeft,h.right=s-h.width-h.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p9({children:t,isPresent:e,anchorX:n,root:r}){const s=H.useId(),h=H.useRef(null),p=H.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:_}=H.useContext(aR),o=d9(h,t?.ref);return H.useInsertionEffect(()=>{const{width:T,height:I,top:M,left:L,right:F}=p.current;if(e||!h.current||!T||!I)return;const q=n==="left"?`left: ${L}`:`right: ${F}`;h.current.dataset.motionPopId=s;const $=document.createElement("style");_&&($.nonce=_);const X=r??document.head;return X.appendChild($),$.sheet&&$.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${I}px !important;
            ${q}px !important;
            top: ${M}px !important;
          }
        `),()=>{X.contains($)&&X.removeChild($)}},[e]),V.jsx(f9,{isPresent:e,childRef:h,sizeRef:p,children:H.cloneElement(t,{ref:o})})}const m9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:h,mode:p,anchorX:_,root:o})=>{const T=BM(g9),I=H.useId();let M=!0,L=H.useMemo(()=>(M=!1,{id:I,initial:e,isPresent:n,custom:s,onExitComplete:F=>{T.set(F,!0);for(const q of T.values())if(!q)return;r&&r()},register:F=>(T.set(F,!1),()=>T.delete(F))}),[n,T,r]);return h&&M&&(L={...L}),H.useMemo(()=>{T.forEach((F,q)=>T.set(q,!1))},[n]),H.useEffect(()=>{!n&&!T.size&&r&&r()},[n]),p==="popLayout"&&(t=V.jsx(p9,{isPresent:n,anchorX:_,root:o,children:t})),V.jsx(tS.Provider,{value:L,children:t})};function g9(){return new Map}function P5(t=!0){const e=H.useContext(tS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,h=H.useId();H.useEffect(()=>{if(t)return s(h)},[t]);const p=H.useCallback(()=>t&&r&&r(h),[h,r,t]);return!n&&r?[!1,p]:[!0]}const qw=t=>t.key||"";function zP(t){const e=[];return H.Children.forEach(t,n=>{H.isValidElement(n)&&e.push(n)}),e}const y9=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:h="sync",propagate:p=!1,anchorX:_="left",root:o})=>{const[T,I]=P5(p),M=H.useMemo(()=>zP(t),[t]),L=p&&!T?[]:M.map(qw),F=H.useRef(!0),q=H.useRef(M),$=BM(()=>new Map),[X,te]=H.useState(M),[he,ie]=H.useState(M);jN(()=>{F.current=!1,q.current=M;for(let Ee=0;Ee<he.length;Ee++){const ce=qw(he[Ee]);L.includes(ce)?$.delete(ce):$.get(ce)!==!0&&$.set(ce,!1)}},[he,L.length,L.join("-")]);const me=[];if(M!==X){let Ee=[...M];for(let ce=0;ce<he.length;ce++){const ee=he[ce],le=qw(ee);L.includes(le)||(Ee.splice(ce,0,ee),me.push(ee))}return h==="wait"&&me.length&&(Ee=me),ie(zP(Ee)),te(M),null}const{forceRender:ge}=H.useContext(NM);return V.jsx(V.Fragment,{children:he.map(Ee=>{const ce=qw(Ee),ee=p&&!T?!1:M===he||L.includes(ce),le=()=>{if($.has(ce))$.set(ce,!0);else return;let se=!0;$.forEach(_e=>{_e||(se=!1)}),se&&(ge?.(),ie(q.current),p&&I?.(),r&&r())};return V.jsx(m9,{isPresent:ee,initial:!F.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:h,root:o,onExitComplete:ee?void 0:le,anchorX:_,children:Ee},ce)})})},L5=H.createContext({strict:!1}),NP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ev={};for(const t in NP)Ev[t]={isEnabled:e=>NP[t].some(n=>!!e[n])};function _9(t){for(const e in t)Ev[e]={...Ev[e],...t[e]}}const v9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sE(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||v9.has(t)}let O5=t=>!sE(t);function x9(t){typeof t=="function"&&(O5=e=>e.startsWith("on")?!sE(e):t(e))}try{x9(require("@emotion/is-prop-valid").default)}catch{}function b9(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(O5(s)||n===!0&&sE(s)||!e&&!sE(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const nS=H.createContext({});function rS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Eb(t){return typeof t=="string"||Array.isArray(t)}const lR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cR=["initial",...lR];function iS(t){return rS(t.animate)||cR.some(e=>Eb(t[e]))}function z5(t){return!!(iS(t)||t.variants)}function w9(t,e){if(iS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Eb(n)?n:void 0,animate:Eb(r)?r:void 0}}return t.inherit!==!1?e:{}}function T9(t){const{initial:e,animate:n}=w9(t,H.useContext(nS));return H.useMemo(()=>({initial:e,animate:n}),[BP(e),BP(n)])}function BP(t){return Array.isArray(t)?t.join(" "):t}const Sb={};function E9(t){for(const e in t)Sb[e]=t[e],WM(e)&&(Sb[e].isCSSVariable=!0)}function N5(t,{layout:e,layoutId:n}){return Gv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Sb[t]||t==="opacity")}const S9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},C9=Hv.length;function A9(t,e,n){let r="",s=!0;for(let h=0;h<C9;h++){const p=Hv[h],_=t[p];if(_===void 0)continue;let o=!0;if(typeof _=="number"?o=_===(p.startsWith("scale")?1:0):o=parseFloat(_)===0,!o||n){const T=A5(_,iR[p]);if(!o){s=!1;const I=S9[p]||p;r+=`${I}(${T}) `}n&&(e[p]=T)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function uR(t,e,n){const{style:r,vars:s,transformOrigin:h}=t;let p=!1,_=!1;for(const o in e){const T=e[o];if(Gv.has(o)){p=!0;continue}else if(WM(o)){s[o]=T;continue}else{const I=A5(T,iR[o]);o.startsWith("origin")?(_=!0,h[o]=I):r[o]=I}}if(e.transform||(p||n?r.transform=A9(e,t.transform,n):r.transform&&(r.transform="none")),_){const{originX:o="50%",originY:T="50%",originZ:I=0}=h;r.transformOrigin=`${o} ${T} ${I}`}}const hR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function B5(t,e,n){for(const r in e)!pl(e[r])&&!N5(r,n)&&(t[r]=e[r])}function I9({transformTemplate:t},e){return H.useMemo(()=>{const n=hR();return uR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function M9(t,e){const n=t.style||{},r={};return B5(r,n,t),Object.assign(r,I9(t,e)),r}function R9(t,e){const n={},r=M9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const D9={offset:"stroke-dashoffset",array:"stroke-dasharray"},k9={offset:"strokeDashoffset",array:"strokeDasharray"};function P9(t,e,n=1,r=0,s=!0){t.pathLength=1;const h=s?D9:k9;t[h.offset]=yr.transform(-r);const p=yr.transform(e),_=yr.transform(n);t[h.array]=`${p} ${_}`}function F5(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:h=1,pathOffset:p=0,..._},o,T,I){if(uR(t,_,T),o){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:M,style:L}=t;M.transform&&(L.transform=M.transform,delete M.transform),(L.transform||M.transformOrigin)&&(L.transformOrigin=M.transformOrigin??"50% 50%",delete M.transformOrigin),L.transform&&(L.transformBox=I?.transformBox??"fill-box",delete M.transformBox),e!==void 0&&(M.x=e),n!==void 0&&(M.y=n),r!==void 0&&(M.scale=r),s!==void 0&&P9(M,s,h,p,!1)}const V5=()=>({...hR(),attrs:{}}),U5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function L9(t,e,n,r){const s=H.useMemo(()=>{const h=V5();return F5(h,e,U5(r),t.transformTemplate,t.style),{...h.attrs,style:{...h.style}}},[e]);if(t.style){const h={};B5(h,t.style,t),s.style={...h,...s.style}}return s}const O9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dR(t){return typeof t!="string"||t.includes("-")?!1:!!(O9.indexOf(t)>-1||/[A-Z]/u.test(t))}function z9(t,e,n,{latestValues:r},s,h=!1){const _=(dR(t)?L9:R9)(e,r,s,t),o=b9(e,typeof t=="string",h),T=t!==H.Fragment?{...o,..._,ref:n}:{},{children:I}=e,M=H.useMemo(()=>pl(I)?I.get():I,[I]);return H.createElement(t,{...T,children:M})}function FP(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function fR(t,e,n,r){if(typeof e=="function"){const[s,h]=FP(r);e=e(n!==void 0?n:t.custom,s,h)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,h]=FP(r);e=e(n!==void 0?n:t.custom,s,h)}return e}function ST(t){return pl(t)?t.get():t}function N9({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:B9(n,r,s,t),renderState:e()}}function B9(t,e,n,r){const s={},h=r(t,{});for(const L in h)s[L]=ST(h[L]);let{initial:p,animate:_}=t;const o=iS(t),T=z5(t);e&&T&&!o&&t.inherit!==!1&&(p===void 0&&(p=e.initial),_===void 0&&(_=e.animate));let I=n?n.initial===!1:!1;I=I||p===!1;const M=I?_:p;if(M&&typeof M!="boolean"&&!rS(M)){const L=Array.isArray(M)?M:[M];for(let F=0;F<L.length;F++){const q=fR(t,L[F]);if(q){const{transitionEnd:$,transition:X,...te}=q;for(const he in te){let ie=te[he];if(Array.isArray(ie)){const me=I?ie.length-1:0;ie=ie[me]}ie!==null&&(s[he]=ie)}for(const he in $)s[he]=$[he]}}}return s}const j5=t=>(e,n)=>{const r=H.useContext(nS),s=H.useContext(tS),h=()=>N9(t,e,r,s);return n?h():BM(h)};function pR(t,e,n){const{style:r}=t,s={};for(const h in r)(pl(r[h])||e.style&&pl(e.style[h])||N5(h,t)||n?.getValue(h)?.liveStyle!==void 0)&&(s[h]=r[h]);return s}const F9=j5({scrapeMotionValuesFromProps:pR,createRenderState:hR});function $5(t,e,n){const r=pR(t,e,n);for(const s in t)if(pl(t[s])||pl(e[s])){const h=Hv.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[h]=t[s]}return r}const V9=j5({scrapeMotionValuesFromProps:$5,createRenderState:V5}),U9=Symbol.for("motionComponentSymbol");function av(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function j9(t,e,n){return H.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):av(n)&&(n.current=r))},[e])}const mR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$9="framerAppearId",q5="data-"+mR($9),H5=H.createContext({});function q9(t,e,n,r,s){const{visualElement:h}=H.useContext(nS),p=H.useContext(L5),_=H.useContext(tS),o=H.useContext(aR).reducedMotion,T=H.useRef(null);r=r||p.renderer,!T.current&&r&&(T.current=r(t,{visualState:e,parent:h,props:n,presenceContext:_,blockInitialAnimation:_?_.initial===!1:!1,reducedMotionConfig:o}));const I=T.current,M=H.useContext(H5);I&&!I.projection&&s&&(I.type==="html"||I.type==="svg")&&H9(T.current,n,s,M);const L=H.useRef(!1);H.useInsertionEffect(()=>{I&&L.current&&I.update(n,_)});const F=n[q5],q=H.useRef(!!F&&!window.MotionHandoffIsComplete?.(F)&&window.MotionHasOptimisedAnimation?.(F));return jN(()=>{I&&(L.current=!0,window.MotionIsMounted=!0,I.updateFeatures(),I.scheduleRenderMicrotask(),q.current&&I.animationState&&I.animationState.animateChanges())}),H.useEffect(()=>{I&&(!q.current&&I.animationState&&I.animationState.animateChanges(),q.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(F)}),q.current=!1),I.enteringChildren=void 0)}),I}function H9(t,e,n,r){const{layoutId:s,layout:h,drag:p,dragConstraints:_,layoutScroll:o,layoutRoot:T,layoutCrossfade:I}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:G5(t.parent)),t.projection.setOptions({layoutId:s,layout:h,alwaysMeasureLayout:!!p||_&&av(_),visualElement:t,animationType:typeof h=="string"?h:"both",initialPromotionConfig:r,crossfade:I,layoutScroll:o,layoutRoot:T})}function G5(t){if(t)return t.options.allowProjection!==!1?t.projection:G5(t.parent)}function YC(t,{forwardMotionProps:e=!1}={},n,r){n&&_9(n);const s=dR(t)?V9:F9;function h(_,o){let T;const I={...H.useContext(aR),..._,layoutId:G9(_)},{isStatic:M}=I,L=T9(_),F=s(_,M);if(!M&&FM){W9();const q=Y9(I);T=q.MeasureLayout,L.visualElement=q9(t,F,I,r,q.ProjectionNode)}return V.jsxs(nS.Provider,{value:L,children:[T&&L.visualElement?V.jsx(T,{visualElement:L.visualElement,...I}):null,z9(t,_,j9(F,L.visualElement,o),F,M,e)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const p=H.forwardRef(h);return p[U9]=t,p}function G9({layoutId:t}){const e=H.useContext(NM).id;return e&&t!==void 0?e+"-"+t:t}function W9(t,e){H.useContext(L5).strict}function Y9(t){const{drag:e,layout:n}=Ev;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function X9(t,e){if(typeof Proxy>"u")return YC;const n=new Map,r=(h,p)=>YC(h,p,t,e),s=(h,p)=>r(h,p);return new Proxy(s,{get:(h,p)=>p==="create"?r:(n.has(p)||n.set(p,YC(p,void 0,t,e)),n.get(p))})}function W5({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function K9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Z9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function XC(t){return t===void 0||t===1}function hI({scale:t,scaleX:e,scaleY:n}){return!XC(t)||!XC(e)||!XC(n)}function ry(t){return hI(t)||Y5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Y5(t){return VP(t.x)||VP(t.y)}function VP(t){return t&&t!=="0%"}function oE(t,e,n){const r=t-n,s=e*r;return n+s}function UP(t,e,n,r,s){return s!==void 0&&(t=oE(t,s,r)),oE(t,n,r)+e}function dI(t,e=0,n=1,r,s){t.min=UP(t.min,e,n,r,s),t.max=UP(t.max,e,n,r,s)}function X5(t,{x:e,y:n}){dI(t.x,e.translate,e.scale,e.originPoint),dI(t.y,n.translate,n.scale,n.originPoint)}const jP=.999999999999,$P=1.0000000000001;function Q9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let h,p;for(let _=0;_<s;_++){h=n[_],p=h.projectionDelta;const{visualElement:o}=h.options;o&&o.props.style&&o.props.style.display==="contents"||(r&&h.options.layoutScroll&&h.scroll&&h!==h.root&&cv(t,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),p&&(e.x*=p.x.scale,e.y*=p.y.scale,X5(t,p)),r&&ry(h.latestValues)&&cv(t,h.latestValues))}e.x<$P&&e.x>jP&&(e.x=1),e.y<$P&&e.y>jP&&(e.y=1)}function lv(t,e){t.min=t.min+e,t.max=t.max+e}function qP(t,e,n,r,s=.5){const h=js(t.min,t.max,s);dI(t,e,n,h,r)}function cv(t,e){qP(t.x,e.x,e.scaleX,e.scale,e.originX),qP(t.y,e.y,e.scaleY,e.scale,e.originY)}function K5(t,e){return W5(Z9(t.getBoundingClientRect(),e))}function J9(t,e,n){const r=K5(t,n),{scroll:s}=e;return s&&(lv(r.x,s.offset.x),lv(r.y,s.offset.y)),r}const HP=()=>({translate:0,scale:1,origin:0,originPoint:0}),uv=()=>({x:HP(),y:HP()}),GP=()=>({min:0,max:0}),ho=()=>({x:GP(),y:GP()}),fI={current:null},Z5={current:!1};function e2(){if(Z5.current=!0,!!FM)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fI.current=t.matches;t.addEventListener("change",e),e()}else fI.current=!1}const t2=new WeakMap;function n2(t,e,n){for(const r in e){const s=e[r],h=n[r];if(pl(s))t.addValue(r,s);else if(pl(h))t.addValue(r,Tv(s,{owner:t}));else if(h!==s)if(t.hasValue(r)){const p=t.getValue(r);p.liveStyle===!0?p.jump(s):p.hasAnimated||p.set(s)}else{const p=t.getStaticValue(r);t.addValue(r,Tv(p!==void 0?p:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const WP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class r2{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:h,visualState:p},_={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const L=oc.now();this.renderScheduledAt<L&&(this.renderScheduledAt=L,ks.render(this.render,!1,!0))};const{latestValues:o,renderState:T}=p;this.latestValues=o,this.baseTarget={...o},this.initialValues=n.initial?{...o}:{},this.renderState=T,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=_,this.blockInitialAnimation=!!h,this.isControllingVariants=iS(n),this.isVariantNode=z5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:I,...M}=this.scrapeMotionValuesFromProps(n,{},this);for(const L in M){const F=M[L];o[L]!==void 0&&pl(F)&&F.set(o[L])}}mount(e){this.current=e,t2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Z5.current||e2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fI.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),$m(this.notifyUpdate),$m(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gv.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",p=>{this.latestValues[e]=p,this.props.onUpdate&&ks.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),h&&h(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ev){const n=Ev[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const h=this.features[e];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ho()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<WP.length;r++){const s=WP[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const h="on"+s,p=e[h];p&&(this.propEventSubscriptions[s]=this.on(s,p))}this.prevMotionValues=n2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Tv(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($N(r)||HN(r))?r=parseFloat(r):!u9(r)&&qm.test(n)&&(r=C5(e,n)),this.setBaseTarget(e,pl(r)?r.get():r)),pl(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=fR(this.props,n,this.presenceContext?.custom);h&&(r=h[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pl(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new qM),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){sR.render(this.render)}}class Q5 extends r2{constructor(){super(...arguments),this.KeyframeResolver=Q$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pl(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function J5(t,{style:e,vars:n},r,s){const h=t.style;let p;for(p in e)h[p]=e[p];s?.applyProjectionStyles(h,r);for(p in n)h.setProperty(p,n[p])}function i2(t){return window.getComputedStyle(t)}class s2 extends Q5{constructor(){super(...arguments),this.type="html",this.renderInstance=J5}readValueFromInstance(e,n){if(Gv.has(n))return this.projection?.isProjecting?iI(n):y$(e,n);{const r=i2(e),s=(WM(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return K5(e,n)}build(e,n,r){uR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return pR(e,n,r)}}const e4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o2(t,e,n,r){J5(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(e4.has(s)?s:mR(s),e.attrs[s])}class a2 extends Q5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ho}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gv.has(n)){const r=S5(n);return r&&r.default||0}return n=e4.has(n)?n:mR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $5(e,n,r)}build(e,n,r){F5(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){o2(e,n,r,s)}mount(e){this.isSVGTag=U5(e.tagName),super.mount(e)}}const l2=(t,e)=>dR(t)?new a2(e):new s2(e,{allowProjection:t!==H.Fragment});function dv(t,e,n){const r=t.getProps();return fR(r,e,n!==void 0?n:r.custom,t)}const pI=t=>Array.isArray(t);function c2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Tv(n))}function u2(t){return pI(t)?t[t.length-1]||0:t}function h2(t,e){const n=dv(t,e);let{transitionEnd:r={},transition:s={},...h}=n||{};h={...h,...r};for(const p in h){const _=u2(h[p]);c2(t,p,_)}}function d2(t){return!!(pl(t)&&t.add)}function mI(t,e){const n=t.getValue("willChange");if(d2(n))return n.add(e);if(!n&&yp.WillChange){const r=new yp.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function t4(t){return t.props[q5]}const f2=t=>t!==null;function p2(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(f2),h=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[h]}const m2={type:"spring",stiffness:500,damping:25,restSpeed:10},g2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),y2={type:"keyframes",duration:.8},_2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v2=(t,{keyframes:e})=>e.length>2?y2:Gv.has(t)?t.startsWith("scale")?g2(e[1]):m2:_2;function x2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:h,repeatType:p,repeatDelay:_,from:o,elapsed:T,...I}){return!!Object.keys(I).length}const gR=(t,e,n,r={},s,h)=>p=>{const _=rR(r,t)||{},o=_.delay||r.delay||0;let{elapsed:T=0}=r;T=T-$d(o);const I={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),..._,delay:-T,onUpdate:L=>{e.set(L),_.onUpdate&&_.onUpdate(L)},onComplete:()=>{p(),_.onComplete&&_.onComplete()},name:t,motionValue:e,element:h?void 0:s};x2(_)||Object.assign(I,v2(t,I)),I.duration&&(I.duration=$d(I.duration)),I.repeatDelay&&(I.repeatDelay=$d(I.repeatDelay)),I.from!==void 0&&(I.keyframes[0]=I.from);let M=!1;if((I.type===!1||I.duration===0&&!I.repeatDelay)&&(cI(I),I.delay===0&&(M=!0)),(yp.instantAnimations||yp.skipAnimations)&&(M=!0,cI(I),I.delay=0),I.allowFlatten=!_.type&&!_.ease,M&&!h&&e.get()!==void 0){const L=p2(I.keyframes,_);if(L!==void 0){ks.update(()=>{I.onUpdate(L),I.onComplete()});return}}return _.isSync?new tR(I):new V$(I)};function b2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function n4(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:h=t.getDefaultTransition(),transitionEnd:p,..._}=e;r&&(h=r);const o=[],T=s&&t.animationState&&t.animationState.getState()[s];for(const I in _){const M=t.getValue(I,t.latestValues[I]??null),L=_[I];if(L===void 0||T&&b2(T,I))continue;const F={delay:n,...rR(h||{},I)},q=M.get();if(q!==void 0&&!M.isAnimating&&!Array.isArray(L)&&L===q&&!F.velocity)continue;let $=!1;if(window.MotionHandoffAnimation){const te=t4(t);if(te){const he=window.MotionHandoffAnimation(te,I,ks);he!==null&&(F.startTime=he,$=!0)}}mI(t,I),M.start(gR(I,M,L,t.shouldReduceMotion&&w5.has(I)?{type:!1}:F,t,$));const X=M.animation;X&&o.push(X)}return p&&Promise.all(o).then(()=>{ks.update(()=>{p&&h2(t,p)})}),o}function r4(t,e,n,r=0,s=1){const h=Array.from(t).sort((T,I)=>T.sortNodePosition(I)).indexOf(e),p=t.size,_=(p-1)*r;return typeof n=="function"?n(h,p):s===1?h*r:_-h*r}function gI(t,e,n={}){const r=dv(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const h=r?()=>Promise.all(n4(t,r,n)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(o=0)=>{const{delayChildren:T=0,staggerChildren:I,staggerDirection:M}=s;return w2(t,e,o,T,I,M,n)}:()=>Promise.resolve(),{when:_}=s;if(_){const[o,T]=_==="beforeChildren"?[h,p]:[p,h];return o().then(()=>T())}else return Promise.all([h(),p(n.delay)])}function w2(t,e,n=0,r=0,s=0,h=1,p){const _=[];for(const o of t.variantChildren)o.notify("AnimationStart",e),_.push(gI(o,e,{...p,delay:n+(typeof r=="function"?0:r)+r4(t.variantChildren,o,r,s,h)}).then(()=>o.notify("AnimationComplete",e)));return Promise.all(_)}function T2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(h=>gI(t,h,n));r=Promise.all(s)}else if(typeof e=="string")r=gI(t,e,n);else{const s=typeof e=="function"?dv(t,e,n.custom):e;r=Promise.all(n4(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function i4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const E2=cR.length;function s4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?s4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<E2;n++){const r=cR[n],s=t.props[r];(Eb(s)||s===!1)&&(e[r]=s)}return e}const S2=[...lR].reverse(),C2=lR.length;function A2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>T2(t,n,r)))}function I2(t){let e=A2(t),n=YP(),r=!0;const s=o=>(T,I)=>{const M=dv(t,I,o==="exit"?t.presenceContext?.custom:void 0);if(M){const{transition:L,transitionEnd:F,...q}=M;T={...T,...q,...F}}return T};function h(o){e=o(t)}function p(o){const{props:T}=t,I=s4(t.parent)||{},M=[],L=new Set;let F={},q=1/0;for(let X=0;X<C2;X++){const te=S2[X],he=n[te],ie=T[te]!==void 0?T[te]:I[te],me=Eb(ie),ge=te===o?he.isActive:null;ge===!1&&(q=X);let Ee=ie===I[te]&&ie!==T[te]&&me;if(Ee&&r&&t.manuallyAnimateOnMount&&(Ee=!1),he.protectedKeys={...F},!he.isActive&&ge===null||!ie&&!he.prevProp||rS(ie)||typeof ie=="boolean")continue;const ce=M2(he.prevProp,ie);let ee=ce||te===o&&he.isActive&&!Ee&&me||X>q&&me,le=!1;const se=Array.isArray(ie)?ie:[ie];let _e=se.reduce(s(te),{});ge===!1&&(_e={});const{prevResolvedValues:Q={}}=he,de={...Q,..._e},Ve=Xe=>{ee=!0,L.has(Xe)&&(le=!0,L.delete(Xe)),he.needsAnimating[Xe]=!0;const tt=t.getValue(Xe);tt&&(tt.liveStyle=!1)};for(const Xe in de){const tt=_e[Xe],Be=Q[Xe];if(F.hasOwnProperty(Xe))continue;let yt=!1;pI(tt)&&pI(Be)?yt=!i4(tt,Be):yt=tt!==Be,yt?tt!=null?Ve(Xe):L.add(Xe):tt!==void 0&&L.has(Xe)?Ve(Xe):he.protectedKeys[Xe]=!0}he.prevProp=ie,he.prevResolvedValues=_e,he.isActive&&(F={...F,..._e}),r&&t.blockInitialAnimation&&(ee=!1);const Ke=Ee&&ce;ee&&(!Ke||le)&&M.push(...se.map(Xe=>{const tt={type:te};if(typeof Xe=="string"&&r&&!Ke&&t.manuallyAnimateOnMount&&t.parent){const{parent:Be}=t,yt=dv(Be,Xe);if(Be.enteringChildren&&yt){const{delayChildren:Me}=yt.transition||{};tt.delay=r4(Be.enteringChildren,t,Me)}}return{animation:Xe,options:tt}}))}if(L.size){const X={};if(typeof T.initial!="boolean"){const te=dv(t,Array.isArray(T.initial)?T.initial[0]:T.initial);te&&te.transition&&(X.transition=te.transition)}L.forEach(te=>{const he=t.getBaseTarget(te),ie=t.getValue(te);ie&&(ie.liveStyle=!0),X[te]=he??null}),M.push({animation:X})}let $=!!M.length;return r&&(T.initial===!1||T.initial===T.animate)&&!t.manuallyAnimateOnMount&&($=!1),r=!1,$?e(M):Promise.resolve()}function _(o,T){if(n[o].isActive===T)return Promise.resolve();t.variantChildren?.forEach(M=>M.animationState?.setActive(o,T)),n[o].isActive=T;const I=p(o);for(const M in n)n[M].protectedKeys={};return I}return{animateChanges:p,setActive:_,setAnimateFunction:h,getState:()=>n,reset:()=>{n=YP()}}}function M2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!i4(e,t):!1}function Qg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YP(){return{animate:Qg(!0),whileInView:Qg(),whileHover:Qg(),whileTap:Qg(),whileDrag:Qg(),whileFocus:Qg(),exit:Qg()}}class ig{constructor(e){this.isMounted=!1,this.node=e}update(){}}class R2 extends ig{constructor(e){super(e),e.animationState||(e.animationState=I2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let D2=0;class k2 extends ig{constructor(){super(...arguments),this.id=D2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const P2={animation:{Feature:R2},exit:{Feature:k2}};function Cb(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Zb(t){return{point:{x:t.pageX,y:t.pageY}}}const L2=t=>e=>oR(e)&&t(e,Zb(e));function sb(t,e,n,r){return Cb(t,e,L2(n),r)}const o4=1e-4,O2=1-o4,z2=1+o4,a4=.01,N2=0-a4,B2=0+a4;function Nl(t){return t.max-t.min}function F2(t,e,n){return Math.abs(t-e)<=n}function XP(t,e,n,r=.5){t.origin=r,t.originPoint=js(e.min,e.max,t.origin),t.scale=Nl(n)/Nl(e),t.translate=js(n.min,n.max,t.origin)-t.originPoint,(t.scale>=O2&&t.scale<=z2||isNaN(t.scale))&&(t.scale=1),(t.translate>=N2&&t.translate<=B2||isNaN(t.translate))&&(t.translate=0)}function ob(t,e,n,r){XP(t.x,e.x,n.x,r?r.originX:void 0),XP(t.y,e.y,n.y,r?r.originY:void 0)}function KP(t,e,n){t.min=n.min+e.min,t.max=t.min+Nl(e)}function V2(t,e,n){KP(t.x,e.x,n.x),KP(t.y,e.y,n.y)}function ZP(t,e,n){t.min=e.min-n.min,t.max=t.min+Nl(e)}function ab(t,e,n){ZP(t.x,e.x,n.x),ZP(t.y,e.y,n.y)}function wu(t){return[t("x"),t("y")]}const l4=({current:t})=>t?t.ownerDocument.defaultView:null,QP=(t,e)=>Math.abs(t-e);function U2(t,e){const n=QP(t.x,e.x),r=QP(t.y,e.y);return Math.sqrt(n**2+r**2)}class c4{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:h=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=ZC(this.lastMoveEventInfo,this.history),F=this.startEvent!==null,q=U2(L.offset,{x:0,y:0})>=this.distanceThreshold;if(!F&&!q)return;const{point:$}=L,{timestamp:X}=Da;this.history.push({...$,timestamp:X});const{onStart:te,onMove:he}=this.handlers;F||(te&&te(this.lastMoveEvent,L),this.startEvent=this.lastMoveEvent),he&&he(this.lastMoveEvent,L)},this.handlePointerMove=(L,F)=>{this.lastMoveEvent=L,this.lastMoveEventInfo=KC(F,this.transformPagePoint),ks.update(this.updatePoint,!0)},this.handlePointerUp=(L,F)=>{this.end();const{onEnd:q,onSessionEnd:$,resumeAnimation:X}=this.handlers;if(this.dragSnapToOrigin&&X&&X(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const te=ZC(L.type==="pointercancel"?this.lastMoveEventInfo:KC(F,this.transformPagePoint),this.history);this.startEvent&&q&&q(L,te),$&&$(L,te)},!oR(e))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=p,this.contextWindow=s||window;const _=Zb(e),o=KC(_,this.transformPagePoint),{point:T}=o,{timestamp:I}=Da;this.history=[{...T,timestamp:I}];const{onSessionStart:M}=n;M&&M(e,ZC(o,this.history)),this.removeListeners=Yb(sb(this.contextWindow,"pointermove",this.handlePointerMove),sb(this.contextWindow,"pointerup",this.handlePointerUp),sb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$m(this.updatePoint)}}function KC(t,e){return e?{point:e(t.point)}:t}function JP(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ZC({point:t},e){return{point:t,delta:JP(t,u4(e)),offset:JP(t,j2(e)),velocity:$2(e,.1)}}function j2(t){return t[0]}function u4(t){return t[t.length-1]}function $2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=u4(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>$d(e)));)n--;if(!r)return{x:0,y:0};const h=Mu(s.timestamp-r.timestamp);if(h===0)return{x:0,y:0};const p={x:(s.x-r.x)/h,y:(s.y-r.y)/h};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function q2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?js(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?js(n,t,r.max):Math.min(t,n)),t}function eL(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function H2(t,{top:e,left:n,bottom:r,right:s}){return{x:eL(t.x,n,s),y:eL(t.y,e,r)}}function tL(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function G2(t,e){return{x:tL(t.x,e.x),y:tL(t.y,e.y)}}function W2(t,e){let n=.5;const r=Nl(t),s=Nl(e);return s>r?n=bb(e.min,e.max-r,t.min):r>s&&(n=bb(t.min,t.max-s,e.min)),gp(0,1,n)}function Y2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const yI=.35;function X2(t=yI){return t===!1?t=0:t===!0&&(t=yI),{x:nL(t,"left","right"),y:nL(t,"top","bottom")}}function nL(t,e,n){return{min:rL(t,e),max:rL(t,n)}}function rL(t,e){return typeof t=="number"?t:t[e]||0}const K2=new WeakMap;class Z2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ho(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const h=M=>{const{dragSnapToOrigin:L}=this.getProps();L?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zb(M).point)},p=(M,L)=>{const{drag:F,dragPropagation:q,onDragStart:$}=this.getProps();if(F&&!q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n9(F),!this.openDragLock))return;this.latestPointerEvent=M,this.latestPanInfo=L,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wu(te=>{let he=this.getAxisMotionValue(te).get()||0;if(qd.test(he)){const{projection:ie}=this.visualElement;if(ie&&ie.layout){const me=ie.layout.layoutBox[te];me&&(he=Nl(me)*(parseFloat(he)/100))}}this.originPoint[te]=he}),$&&ks.postRender(()=>$(M,L)),mI(this.visualElement,"transform");const{animationState:X}=this.visualElement;X&&X.setActive("whileDrag",!0)},_=(M,L)=>{this.latestPointerEvent=M,this.latestPanInfo=L;const{dragPropagation:F,dragDirectionLock:q,onDirectionLock:$,onDrag:X}=this.getProps();if(!F&&!this.openDragLock)return;const{offset:te}=L;if(q&&this.currentDirection===null){this.currentDirection=Q2(te),this.currentDirection!==null&&$&&$(this.currentDirection);return}this.updateAxis("x",L.point,te),this.updateAxis("y",L.point,te),this.visualElement.render(),X&&X(M,L)},o=(M,L)=>{this.latestPointerEvent=M,this.latestPanInfo=L,this.stop(M,L),this.latestPointerEvent=null,this.latestPanInfo=null},T=()=>wu(M=>this.getAnimationState(M)==="paused"&&this.getAxisMotionValue(M).animation?.play()),{dragSnapToOrigin:I}=this.getProps();this.panSession=new c4(e,{onSessionStart:h,onStart:p,onMove:_,onSessionEnd:o,resumeAnimation:T},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:I,distanceThreshold:r,contextWindow:l4(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!s||!r)return;const{velocity:p}=s;this.startAnimation(p);const{onDragEnd:_}=this.getProps();_&&ks.postRender(()=>_(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Hw(e,s,this.currentDirection))return;const h=this.getAxisMotionValue(e);let p=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(p=q2(p,this.constraints[e],this.elastic[e])),h.set(p)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&av(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=H2(r.layoutBox,e):this.constraints=!1,this.elastic=X2(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wu(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Y2(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!av(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const h=J9(r,s.root,this.visualElement.getTransformPagePoint());let p=G2(s.layout.layoutBox,h);if(n){const _=n(K9(p));this.hasMutatedConstraints=!!_,_&&(p=W5(_))}return p}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:h,dragSnapToOrigin:p,onDragTransitionEnd:_}=this.getProps(),o=this.constraints||{},T=wu(I=>{if(!Hw(I,n,this.currentDirection))return;let M=o&&o[I]||{};p&&(M={min:0,max:0});const L=s?200:1e6,F=s?40:1e7,q={type:"inertia",velocity:r?e[I]:0,bounceStiffness:L,bounceDamping:F,timeConstant:750,restDelta:1,restSpeed:10,...h,...M};return this.startAxisValueAnimation(I,q)});return Promise.all(T).then(_)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return mI(this.visualElement,e),r.start(gR(e,r,0,n,this.visualElement,!1))}stopAnimation(){wu(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wu(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wu(n=>{const{drag:r}=this.getProps();if(!Hw(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,h=this.getAxisMotionValue(n);if(s&&s.layout){const{min:p,max:_}=s.layout.layoutBox[n];h.set(e[n]-js(p,_,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!av(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};wu(p=>{const _=this.getAxisMotionValue(p);if(_&&this.constraints!==!1){const o=_.get();s[p]=W2({min:o,max:o},this.constraints[p])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wu(p=>{if(!Hw(p,e,null))return;const _=this.getAxisMotionValue(p),{min:o,max:T}=this.constraints[p];_.set(js(o,T,s[p]))})}addListeners(){if(!this.visualElement.current)return;K2.set(this.visualElement,this);const e=this.visualElement.current,n=sb(e,"pointerdown",o=>{const{drag:T,dragListener:I=!0}=this.getProps();T&&I&&this.start(o)}),r=()=>{const{dragConstraints:o}=this.getProps();av(o)&&o.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,h=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ks.read(r);const p=Cb(window,"resize",()=>this.scalePositionWithinConstraints()),_=s.addEventListener("didUpdate",(({delta:o,hasLayoutChanged:T})=>{this.isDragging&&T&&(wu(I=>{const M=this.getAxisMotionValue(I);M&&(this.originPoint[I]+=o[I].translate,M.set(M.get()+o[I].translate))}),this.visualElement.render())}));return()=>{p(),n(),h(),_&&_()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:h=!1,dragElastic:p=yI,dragMomentum:_=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:h,dragElastic:p,dragMomentum:_}}}function Hw(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Q2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class J2 extends ig{constructor(e){super(e),this.removeGroupControls=Du,this.removeListeners=Du,this.controls=new Z2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Du}unmount(){this.removeGroupControls(),this.removeListeners()}}const iL=t=>(e,n)=>{t&&ks.postRender(()=>t(e,n))};class eq extends ig{constructor(){super(...arguments),this.removePointerDownListener=Du}onPointerDown(e){this.session=new c4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:l4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:iL(e),onStart:iL(n),onMove:r,onEnd:(h,p)=>{delete this.session,s&&ks.postRender(()=>s(h,p))}}}mount(){this.removePointerDownListener=sb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const CT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ix={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(yr.test(t))t=parseFloat(t);else return t;const n=sL(t,e.target.x),r=sL(t,e.target.y);return`${n}% ${r}%`}},tq={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=qm.parse(t);if(s.length>5)return r;const h=qm.createTransformer(t),p=typeof s[0]!="number"?1:0,_=n.x.scale*e.x,o=n.y.scale*e.y;s[0+p]/=_,s[1+p]/=o;const T=js(_,o,.5);return typeof s[2+p]=="number"&&(s[2+p]/=T),typeof s[3+p]=="number"&&(s[3+p]/=T),h(s)}};let QC=!1;class nq extends H.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:h}=e;E9(rq),h&&(n.group&&n.group.add(h),r&&r.register&&s&&r.register(h),QC&&h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),CT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:h}=this.props,{projection:p}=r;return p&&(p.isPresent=h,QC=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==h?p.willUpdate():this.safeToRemove(),e.isPresent!==h&&(h?p.promote():p.relegate()||ks.postRender(()=>{const _=p.getStack();(!_||!_.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;QC=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function h4(t){const[e,n]=P5(),r=H.useContext(NM);return V.jsx(nq,{...t,layoutGroup:r,switchLayoutGroup:H.useContext(H5),isPresent:e,safeToRemove:n})}const rq={borderRadius:{...Ix,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ix,borderTopRightRadius:Ix,borderBottomLeftRadius:Ix,borderBottomRightRadius:Ix,boxShadow:tq};function iq(t,e,n){const r=pl(t)?t:Tv(t);return r.start(gR("",r,e,n)),r.animation}const sq=(t,e)=>t.depth-e.depth;class oq{constructor(){this.children=[],this.isDirty=!1}add(e){VM(this.children,e),this.isDirty=!0}remove(e){UM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sq),this.isDirty=!1,this.children.forEach(e)}}function aq(t,e){const n=oc.now(),r=({timestamp:s})=>{const h=s-n;h>=e&&($m(r),t(h-e))};return ks.setup(r,!0),()=>$m(r)}const d4=["TopLeft","TopRight","BottomLeft","BottomRight"],lq=d4.length,oL=t=>typeof t=="string"?parseFloat(t):t,aL=t=>typeof t=="number"||yr.test(t);function cq(t,e,n,r,s,h){s?(t.opacity=js(0,n.opacity??1,uq(r)),t.opacityExit=js(e.opacity??1,0,hq(r))):h&&(t.opacity=js(e.opacity??1,n.opacity??1,r));for(let p=0;p<lq;p++){const _=`border${d4[p]}Radius`;let o=lL(e,_),T=lL(n,_);if(o===void 0&&T===void 0)continue;o||(o=0),T||(T=0),o===0||T===0||aL(o)===aL(T)?(t[_]=Math.max(js(oL(o),oL(T),r),0),(qd.test(T)||qd.test(o))&&(t[_]+="%")):t[_]=T}(e.rotate||n.rotate)&&(t.rotate=js(e.rotate||0,n.rotate||0,r))}function lL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uq=f4(0,.5,JN),hq=f4(.5,.95,Du);function f4(t,e,n){return r=>r<t?0:r>e?1:n(bb(t,e,r))}function cL(t,e){t.min=e.min,t.max=e.max}function xu(t,e){cL(t.x,e.x),cL(t.y,e.y)}function uL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function hL(t,e,n,r,s){return t-=e,t=oE(t,1/n,r),s!==void 0&&(t=oE(t,1/s,r)),t}function dq(t,e=0,n=1,r=.5,s,h=t,p=t){if(qd.test(e)&&(e=parseFloat(e),e=js(p.min,p.max,e/100)-p.min),typeof e!="number")return;let _=js(h.min,h.max,r);t===h&&(_-=e),t.min=hL(t.min,e,n,_,s),t.max=hL(t.max,e,n,_,s)}function dL(t,e,[n,r,s],h,p){dq(t,e[n],e[r],e[s],e.scale,h,p)}const fq=["x","scaleX","originX"],pq=["y","scaleY","originY"];function fL(t,e,n,r){dL(t.x,e,fq,n?n.x:void 0,r?r.x:void 0),dL(t.y,e,pq,n?n.y:void 0,r?r.y:void 0)}function pL(t){return t.translate===0&&t.scale===1}function p4(t){return pL(t.x)&&pL(t.y)}function mL(t,e){return t.min===e.min&&t.max===e.max}function mq(t,e){return mL(t.x,e.x)&&mL(t.y,e.y)}function gL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function m4(t,e){return gL(t.x,e.x)&&gL(t.y,e.y)}function yL(t){return Nl(t.x)/Nl(t.y)}function _L(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gq{constructor(){this.members=[]}add(e){VM(this.members,e),e.scheduleRender()}remove(e){if(UM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const h=this.members[s];if(h.isPresent!==!1){r=h;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yq(t,e,n){let r="";const s=t.x.translate/e.x,h=t.y.translate/e.y,p=n?.z||0;if((s||h||p)&&(r=`translate3d(${s}px, ${h}px, ${p}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:T,rotate:I,rotateX:M,rotateY:L,skewX:F,skewY:q}=n;T&&(r=`perspective(${T}px) ${r}`),I&&(r+=`rotate(${I}deg) `),M&&(r+=`rotateX(${M}deg) `),L&&(r+=`rotateY(${L}deg) `),F&&(r+=`skewX(${F}deg) `),q&&(r+=`skewY(${q}deg) `)}const _=t.x.scale*e.x,o=t.y.scale*e.y;return(_!==1||o!==1)&&(r+=`scale(${_}, ${o})`),r||"none"}const JC=["","X","Y","Z"],_q=1e3;let vq=0;function eA(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function g4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=t4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:h}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ks,!(s||h))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&g4(r)}function y4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(p={},_=e?.()){this.id=vq++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wq),this.nodes.forEach(Cq),this.nodes.forEach(Aq),this.nodes.forEach(Tq)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=_?_.root||_:this,this.path=_?[..._.path,_]:[],this.parent=_,this.depth=_?_.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new oq)}addEventListener(p,_){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new qM),this.eventHandlers.get(p).add(_)}notifyListeners(p,..._){const o=this.eventHandlers.get(p);o&&o.notify(..._)}hasListeners(p){return this.eventHandlers.has(p)}mount(p){if(this.instance)return;this.isSVG=k5(p)&&!l9(p),this.instance=p;const{layoutId:_,layout:o,visualElement:T}=this.options;if(T&&!T.current&&T.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(o||_)&&(this.isLayoutDirty=!0),t){let I,M=0;const L=()=>this.root.updateBlockedByResize=!1;ks.read(()=>{M=window.innerWidth}),t(p,()=>{const F=window.innerWidth;F!==M&&(M=F,this.root.updateBlockedByResize=!0,I&&I(),I=aq(L,250),CT.hasAnimatedSinceResize&&(CT.hasAnimatedSinceResize=!1,this.nodes.forEach(bL)))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&T&&(_||o)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:M,hasRelativeLayoutChanged:L,layout:F})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const q=this.options.transition||T.getDefaultTransition()||kq,{onLayoutAnimationStart:$,onLayoutAnimationComplete:X}=T.getProps(),te=!this.targetLayout||!m4(this.targetLayout,F),he=!M&&L;if(this.options.layoutRoot||this.resumeFrom||he||M&&(te||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const ie={...rR(q,"layout"),onPlay:$,onComplete:X};(T.shouldReduceMotion||this.options.layoutRoot)&&(ie.delay=0,ie.type=!1),this.startAnimation(ie),this.setAnimationOrigin(I,he)}else M||bL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=F})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$m(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Iq),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&g4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let I=0;I<this.path.length;I++){const M=this.path[I];M.shouldResetTransform=!0,M.updateScroll("snapshot"),M.options.layoutRoot&&M.willUpdate(!1)}const{layoutId:_,layout:o}=this.options;if(_===void 0&&!o)return;const T=this.getTransformTemplate();this.prevTransformTemplateValue=T?T(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Sq),this.nodes.forEach(xq),this.nodes.forEach(bq)):this.nodes.forEach(xL),this.clearAllSnapshots();const _=oc.now();Da.delta=gp(0,1e3/60,_-Da.timestamp),Da.timestamp=_,Da.isProcessing=!0,jC.update.process(Da),jC.preRender.process(Da),jC.render.process(Da),Da.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Eq),this.sharedNodes.forEach(Mq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ks.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ks.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Nl(this.snapshot.measuredBox.x)&&!Nl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ho(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:_}=this.options;_&&_.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let _=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(_=!1),_&&this.instance){const o=r(this.instance);this.scroll={animationId:this.root.animationId,phase:p,isRoot:o,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:o}}}resetTransform(){if(!s)return;const p=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,_=this.projectionDelta&&!p4(this.projectionDelta),o=this.getTransformTemplate(),T=o?o(this.latestValues,""):void 0,I=T!==this.prevTransformTemplateValue;p&&this.instance&&(_||ry(this.latestValues)||I)&&(s(this.instance,T),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const _=this.measurePageBox();let o=this.removeElementScroll(_);return p&&(o=this.removeTransform(o)),Pq(o),{animationId:this.root.animationId,measuredBox:_,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return ho();const _=p.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Lq))){const{scroll:T}=this.root;T&&(lv(_.x,T.offset.x),lv(_.y,T.offset.y))}return _}removeElementScroll(p){const _=ho();if(xu(_,p),this.scroll?.wasRoot)return _;for(let o=0;o<this.path.length;o++){const T=this.path[o],{scroll:I,options:M}=T;T!==this.root&&I&&M.layoutScroll&&(I.wasRoot&&xu(_,p),lv(_.x,I.offset.x),lv(_.y,I.offset.y))}return _}applyTransform(p,_=!1){const o=ho();xu(o,p);for(let T=0;T<this.path.length;T++){const I=this.path[T];!_&&I.options.layoutScroll&&I.scroll&&I!==I.root&&cv(o,{x:-I.scroll.offset.x,y:-I.scroll.offset.y}),ry(I.latestValues)&&cv(o,I.latestValues)}return ry(this.latestValues)&&cv(o,this.latestValues),o}removeTransform(p){const _=ho();xu(_,p);for(let o=0;o<this.path.length;o++){const T=this.path[o];if(!T.instance||!ry(T.latestValues))continue;hI(T.latestValues)&&T.updateSnapshot();const I=ho(),M=T.measurePageBox();xu(I,M),fL(_,T.latestValues,T.snapshot?T.snapshot.layoutBox:void 0,I)}return ry(this.latestValues)&&fL(_,this.latestValues),_}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Da.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const o=!!this.resumingFrom||this!==_;if(!(p||o&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:I,layoutId:M}=this.options;if(!(!this.layout||!(I||M))){if(this.resolvedRelativeTargetAt=Da.timestamp,!this.targetDelta&&!this.relativeTarget){const L=this.getClosestProjectingParent();L&&L.layout&&this.animationProgress!==1?(this.relativeParent=L,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ho(),this.relativeTargetOrigin=ho(),ab(this.relativeTargetOrigin,this.layout.layoutBox,L.layout.layoutBox),xu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ho(),this.targetWithTransforms=ho()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xu(this.target,this.layout.layoutBox),X5(this.target,this.targetDelta)):xu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const L=this.getClosestProjectingParent();L&&!!L.resumingFrom==!!this.resumingFrom&&!L.options.layoutScroll&&L.target&&this.animationProgress!==1?(this.relativeParent=L,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ho(),this.relativeTargetOrigin=ho(),ab(this.relativeTargetOrigin,this.target,L.target),xu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hI(this.parent.latestValues)||Y5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const p=this.getLead(),_=!!this.resumingFrom||this!==p;let o=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(o=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(o=!1),this.resolvedRelativeTargetAt===Da.timestamp&&(o=!1),o)return;const{layout:T,layoutId:I}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(T||I))return;xu(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,L=this.treeScale.y;Q9(this.layoutCorrected,this.treeScale,this.path,_),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=ho());const{target:F}=p;if(!F){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(uL(this.prevProjectionDelta.x,this.projectionDelta.x),uL(this.prevProjectionDelta.y,this.projectionDelta.y)),ob(this.projectionDelta,this.layoutCorrected,F,this.latestValues),(this.treeScale.x!==M||this.treeScale.y!==L||!_L(this.projectionDelta.x,this.prevProjectionDelta.x)||!_L(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",F))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.visualElement?.scheduleRender(),p){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uv(),this.projectionDelta=uv(),this.projectionDeltaWithTransform=uv()}setAnimationOrigin(p,_=!1){const o=this.snapshot,T=o?o.latestValues:{},I={...this.latestValues},M=uv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!_;const L=ho(),F=o?o.source:void 0,q=this.layout?this.layout.source:void 0,$=F!==q,X=this.getStack(),te=!X||X.members.length<=1,he=!!($&&!te&&this.options.crossfade===!0&&!this.path.some(Dq));this.animationProgress=0;let ie;this.mixTargetDelta=me=>{const ge=me/1e3;wL(M.x,p.x,ge),wL(M.y,p.y,ge),this.setTargetDelta(M),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ab(L,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Rq(this.relativeTarget,this.relativeTargetOrigin,L,ge),ie&&mq(this.relativeTarget,ie)&&(this.isProjectionDirty=!1),ie||(ie=ho()),xu(ie,this.relativeTarget)),$&&(this.animationValues=I,cq(I,T,this.latestValues,ge,he,te)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ge},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&($m(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ks.update(()=>{CT.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Tv(0)),this.currentAnimation=iq(this.motionValue,[0,1e3],{...p,velocity:0,isSync:!0,onUpdate:_=>{this.mixTargetDelta(_),p.onUpdate&&p.onUpdate(_)},onStop:()=>{},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_q),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:_,target:o,layout:T,latestValues:I}=p;if(!(!_||!o||!T)){if(this!==p&&this.layout&&T&&_4(this.options.animationType,this.layout.layoutBox,T.layoutBox)){o=this.target||ho();const M=Nl(this.layout.layoutBox.x);o.x.min=p.target.x.min,o.x.max=o.x.min+M;const L=Nl(this.layout.layoutBox.y);o.y.min=p.target.y.min,o.y.max=o.y.min+L}xu(_,o),cv(_,I),ob(this.projectionDeltaWithTransform,this.layoutCorrected,_,I)}}registerSharedNode(p,_){this.sharedNodes.has(p)||this.sharedNodes.set(p,new gq),this.sharedNodes.get(p).add(_);const T=_.options.initialPromotionConfig;_.promote({transition:T?T.transition:void 0,preserveFollowOpacity:T&&T.shouldPreserveFollowOpacity?T.shouldPreserveFollowOpacity(_):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){const{layoutId:p}=this.options;return p?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:p}=this.options;return p?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:_,preserveFollowOpacity:o}={}){const T=this.getStack();T&&T.promote(this,o),p&&(this.projectionDelta=void 0,this.needsReset=!0),_&&this.setOptions({transition:_})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetSkewAndRotation(){const{visualElement:p}=this.options;if(!p)return;let _=!1;const{latestValues:o}=p;if((o.z||o.rotate||o.rotateX||o.rotateY||o.rotateZ||o.skewX||o.skewY)&&(_=!0),!_)return;const T={};o.z&&eA("z",p,T,this.animationValues);for(let I=0;I<JC.length;I++)eA(`rotate${JC[I]}`,p,T,this.animationValues),eA(`skew${JC[I]}`,p,T,this.animationValues);p.render();for(const I in T)p.setStaticValue(I,T[I]),this.animationValues&&(this.animationValues[I]=T[I]);p.scheduleRender()}applyProjectionStyles(p,_){if(!this.instance||this.isSVG)return;if(!this.isVisible){p.visibility="hidden";return}const o=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,p.visibility="",p.opacity="",p.pointerEvents=ST(_?.pointerEvents)||"",p.transform=o?o(this.latestValues,""):"none";return}const T=this.getLead();if(!this.projectionDelta||!this.layout||!T.target){this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=ST(_?.pointerEvents)||""),this.hasProjected&&!ry(this.latestValues)&&(p.transform=o?o({},""):"none",this.hasProjected=!1);return}p.visibility="";const I=T.animationValues||T.latestValues;this.applyTransformsToTarget();let M=yq(this.projectionDeltaWithTransform,this.treeScale,I);o&&(M=o(I,M)),p.transform=M;const{x:L,y:F}=this.projectionDelta;p.transformOrigin=`${L.origin*100}% ${F.origin*100}% 0`,T.animationValues?p.opacity=T===this?I.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:I.opacityExit:p.opacity=T===this?I.opacity!==void 0?I.opacity:"":I.opacityExit!==void 0?I.opacityExit:0;for(const q in Sb){if(I[q]===void 0)continue;const{correct:$,applyTo:X,isCSSVariable:te}=Sb[q],he=M==="none"?I[q]:$(I[q],T);if(X){const ie=X.length;for(let me=0;me<ie;me++)p[X[me]]=he}else te?this.options.visualElement.renderState.vars[q]=he:p[q]=he}this.options.layoutId&&(p.pointerEvents=T===this?ST(_?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>p.currentAnimation?.stop()),this.root.nodes.forEach(vL),this.root.sharedNodes.clear()}}}function xq(t){t.updateLayout()}function bq(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,h=e.source!==t.layout.source;s==="size"?wu(I=>{const M=h?e.measuredBox[I]:e.layoutBox[I],L=Nl(M);M.min=n[I].min,M.max=M.min+L}):_4(s,e.layoutBox,n)&&wu(I=>{const M=h?e.measuredBox[I]:e.layoutBox[I],L=Nl(n[I]);M.max=M.min+L,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[I].max=t.relativeTarget[I].min+L)});const p=uv();ob(p,n,e.layoutBox);const _=uv();h?ob(_,t.applyTransform(r,!0),e.measuredBox):ob(_,n,e.layoutBox);const o=!p4(p);let T=!1;if(!t.resumeFrom){const I=t.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:M,layout:L}=I;if(M&&L){const F=ho();ab(F,e.layoutBox,M.layoutBox);const q=ho();ab(q,n,L.layoutBox),m4(F,q)||(T=!0),I.options.layoutRoot&&(t.relativeTarget=q,t.relativeTargetOrigin=F,t.relativeParent=I)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:_,layoutDelta:p,hasLayoutChanged:o,hasRelativeLayoutChanged:T})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function wq(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Tq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Eq(t){t.clearSnapshot()}function vL(t){t.clearMeasurements()}function xL(t){t.isLayoutDirty=!1}function Sq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Cq(t){t.resolveTargetDelta()}function Aq(t){t.calcProjection()}function Iq(t){t.resetSkewAndRotation()}function Mq(t){t.removeLeadSnapshot()}function wL(t,e,n){t.translate=js(e.translate,0,n),t.scale=js(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TL(t,e,n,r){t.min=js(e.min,n.min,r),t.max=js(e.max,n.max,r)}function Rq(t,e,n,r){TL(t.x,e.x,n.x,r),TL(t.y,e.y,n.y,r)}function Dq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kq={duration:.45,ease:[.4,0,.1,1]},EL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),SL=EL("applewebkit/")&&!EL("chrome/")?Math.round:Du;function CL(t){t.min=SL(t.min),t.max=SL(t.max)}function Pq(t){CL(t.x),CL(t.y)}function _4(t,e,n){return t==="position"||t==="preserve-aspect"&&!F2(yL(e),yL(n),.2)}function Lq(t){return t!==t.root&&t.scroll?.wasRoot}const Oq=y4({attachResizeListener:(t,e)=>Cb(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tA={current:void 0},v4=y4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tA.current){const t=new Oq({});t.mount(window),t.setOptions({layoutScroll:!0}),tA.current=t}return tA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zq={pan:{Feature:eq},drag:{Feature:J2,ProjectionNode:v4,MeasureLayout:h4}};function AL(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,h=r[s];h&&ks.postRender(()=>h(e,Zb(e)))}class Nq extends ig{mount(){const{current:e}=this.node;e&&(this.unmount=r9(e,(n,r)=>(AL(this.node,r,"Start"),s=>AL(this.node,s,"End"))))}unmount(){}}class Bq extends ig{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yb(Cb(this.node.current,"focus",()=>this.onFocus()),Cb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IL(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),h=r[s];h&&ks.postRender(()=>h(e,Zb(e)))}class Fq extends ig{mount(){const{current:e}=this.node;e&&(this.unmount=a9(e,(n,r)=>(IL(this.node,r,"Start"),(s,{success:h})=>IL(this.node,s,h?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _I=new WeakMap,nA=new WeakMap,Vq=t=>{const e=_I.get(t.target);e&&e(t)},Uq=t=>{t.forEach(Vq)};function jq({root:t,...e}){const n=t||document;nA.has(n)||nA.set(n,{});const r=nA.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Uq,{root:t,...e})),r[s]}function $q(t,e,n){const r=jq(e);return _I.set(t,n),r.observe(t),()=>{_I.delete(t),r.unobserve(t)}}const qq={some:0,all:1};class Hq extends ig{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:h}=e,p={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:qq[s]},_=o=>{const{isIntersecting:T}=o;if(this.isInView===T||(this.isInView=T,h&&!T&&this.hasEnteredView))return;T&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",T);const{onViewportEnter:I,onViewportLeave:M}=this.node.getProps(),L=T?I:M;L&&L(o)};return $q(this.node.current,p,_)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Gq(e,n))&&this.startObserver()}unmount(){}}function Gq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Wq={inView:{Feature:Hq},tap:{Feature:Fq},focus:{Feature:Bq},hover:{Feature:Nq}},Yq={layout:{ProjectionNode:v4,MeasureLayout:h4}},Xq={...P2,...Wq,...zq,...Yq},sg=X9(Xq,l2),Kq=()=>{};var ML={};const x4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Zq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const h=t[n++];e[r++]=String.fromCharCode((s&31)<<6|h&63)}else if(s>239&&s<365){const h=t[n++],p=t[n++],_=t[n++],o=((s&7)<<18|(h&63)<<12|(p&63)<<6|_&63)-65536;e[r++]=String.fromCharCode(55296+(o>>10)),e[r++]=String.fromCharCode(56320+(o&1023))}else{const h=t[n++],p=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(h&63)<<6|p&63)}}return e.join("")},b4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const h=t[s],p=s+1<t.length,_=p?t[s+1]:0,o=s+2<t.length,T=o?t[s+2]:0,I=h>>2,M=(h&3)<<4|_>>4;let L=(_&15)<<2|T>>6,F=T&63;o||(F=64,p||(L=64)),r.push(n[I],n[M],n[L],n[F])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Zq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const h=n[t.charAt(s++)],_=s<t.length?n[t.charAt(s)]:0;++s;const T=s<t.length?n[t.charAt(s)]:64;++s;const M=s<t.length?n[t.charAt(s)]:64;if(++s,h==null||_==null||T==null||M==null)throw new Qq;const L=h<<2|_>>4;if(r.push(L),T!==64){const F=_<<4&240|T>>2;if(r.push(F),M!==64){const q=T<<6&192|M;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Qq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jq=function(t){const e=x4(t);return b4.encodeByteArray(e,!0)},aE=function(t){return Jq(t).replace(/\./g,"")},w4=function(t){try{return b4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const tH=()=>eH().__FIREBASE_DEFAULTS__,nH=()=>{if(typeof process>"u"||typeof ML>"u")return;const t=ML.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&w4(t[1]);return e&&JSON.parse(e)},sS=()=>{try{return Kq()||tH()||nH()||rH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},T4=t=>sS()?.emulatorHosts?.[t],E4=t=>{const e=T4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},S4=()=>sS()?.config,C4=t=>sS()?.[`_${t}`];class iH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function og(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yR(t){return(await fetch(t,{credentials:"include"})).ok}function A4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,h=t.sub||t.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...t};return[aE(JSON.stringify(n)),aE(JSON.stringify(p)),""].join(".")}const lb={};function sH(){const t={prod:[],emulator:[]};for(const e of Object.keys(lb))lb[e]?t.emulator.push(e):t.prod.push(e);return t}function oH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let RL=!1;function _R(t,e){if(typeof window>"u"||typeof document>"u"||!og(window.location.host)||lb[t]===e||lb[t]||RL)return;lb[t]=e;function n(L){return`__firebase__banner__${L}`}const r="__firebase__banner",h=sH().prod.length>0;function p(){const L=document.getElementById(r);L&&L.remove()}function _(L){L.style.display="flex",L.style.background="#7faaf0",L.style.position="fixed",L.style.bottom="5px",L.style.left="5px",L.style.padding=".5em",L.style.borderRadius="5px",L.style.alignItems="center"}function o(L,F){L.setAttribute("width","24"),L.setAttribute("id",F),L.setAttribute("height","24"),L.setAttribute("viewBox","0 0 24 24"),L.setAttribute("fill","none"),L.style.marginLeft="-6px"}function T(){const L=document.createElement("span");return L.style.cursor="pointer",L.style.marginLeft="16px",L.style.fontSize="24px",L.innerHTML=" &times;",L.onclick=()=>{RL=!0,p()},L}function I(L,F){L.setAttribute("id",F),L.innerText="Learn more",L.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",L.setAttribute("target","__blank"),L.style.paddingLeft="5px",L.style.textDecoration="underline"}function M(){const L=oH(r),F=n("text"),q=document.getElementById(F)||document.createElement("span"),$=n("learnmore"),X=document.getElementById($)||document.createElement("a"),te=n("preprendIcon"),he=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(L.created){const ie=L.element;_(ie),I(X,$);const me=T();o(he,te),ie.append(he,q,X,me),document.body.appendChild(ie)}h?(q.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",M):M()}function ml(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ml())}function lH(){const t=sS()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dH(){const t=ml();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fH(){return!lH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pH(){try{return typeof indexedDB=="object"}catch{return!1}}function mH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const gH="FirebaseError";class Lu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gH,Object.setPrototypeOf(this,Lu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qb.prototype.create)}}class Qb{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,h=this.errors[e],p=h?yH(h,r):"Error",_=`${this.serviceName}: ${p} (${s}).`;return new Lu(s,_,r)}}function yH(t,e){return t.replace(_H,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _H=/\{\$([^}]+)}/g;function vH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wy(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const h=t[s],p=e[s];if(DL(h)&&DL(p)){if(!wy(h,p))return!1}else if(h!==p)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function DL(t){return t!==null&&typeof t=="object"}function Jb(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qx(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,h]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(h)}}),e}function Hx(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xH(t,e){const n=new bH(t,e);return n.subscribe.bind(n)}class bH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wH(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rA),s.error===void 0&&(s.error=rA),s.complete===void 0&&(s.complete=rA);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rA(){}function zo(t){return t&&t._delegate?t._delegate:t}class Hm{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const iy="[DEFAULT]";class TH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SH(e))try{this.getOrInitializeService({instanceIdentifier:iy})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:s});r.resolve(h)}catch{}}}}clearInstance(e=iy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iy){return this.instances.has(e)}getOptions(e=iy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[h,p]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(h);r===_&&p.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const h=this.instances.get(r);return h&&e(h,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=iy){return this.component?this.component.multipleInstances?e:iy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EH(t){return t===iy?void 0:t}function SH(t){return t.instantiationMode==="EAGER"}class CH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ci;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ci||(ci={}));const AH={debug:ci.DEBUG,verbose:ci.VERBOSE,info:ci.INFO,warn:ci.WARN,error:ci.ERROR,silent:ci.SILENT},IH=ci.INFO,MH={[ci.DEBUG]:"log",[ci.VERBOSE]:"log",[ci.INFO]:"info",[ci.WARN]:"warn",[ci.ERROR]:"error"},RH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=MH[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vR{constructor(e){this.name=e,this._logLevel=IH,this._logHandler=RH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ci))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ci.DEBUG,...e),this._logHandler(this,ci.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ci.VERBOSE,...e),this._logHandler(this,ci.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ci.INFO,...e),this._logHandler(this,ci.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ci.WARN,...e),this._logHandler(this,ci.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ci.ERROR,...e),this._logHandler(this,ci.ERROR,...e)}}const DH=(t,e)=>e.some(n=>t instanceof n);let kL,PL;function kH(){return kL||(kL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PH(){return PL||(PL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I4=new WeakMap,vI=new WeakMap,M4=new WeakMap,iA=new WeakMap,xR=new WeakMap;function LH(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",h),t.removeEventListener("error",p)},h=()=>{n(Lm(t.result)),s()},p=()=>{r(t.error),s()};t.addEventListener("success",h),t.addEventListener("error",p)});return e.then(n=>{n instanceof IDBCursor&&I4.set(n,t)}).catch(()=>{}),xR.set(e,t),e}function OH(t){if(vI.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",h),t.removeEventListener("error",p),t.removeEventListener("abort",p)},h=()=>{n(),s()},p=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",h),t.addEventListener("error",p),t.addEventListener("abort",p)});vI.set(t,e)}let xI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lm(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zH(t){xI=t(xI)}function NH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sA(this),e,...n);return M4.set(r,e.sort?e.sort():[e]),Lm(r)}:PH().includes(t)?function(...e){return t.apply(sA(this),e),Lm(I4.get(this))}:function(...e){return Lm(t.apply(sA(this),e))}}function BH(t){return typeof t=="function"?NH(t):(t instanceof IDBTransaction&&OH(t),DH(t,kH())?new Proxy(t,xI):t)}function Lm(t){if(t instanceof IDBRequest)return LH(t);if(iA.has(t))return iA.get(t);const e=BH(t);return e!==t&&(iA.set(t,e),xR.set(e,t)),e}const sA=t=>xR.get(t);function FH(t,e,{blocked:n,upgrade:r,blocking:s,terminated:h}={}){const p=indexedDB.open(t,e),_=Lm(p);return r&&p.addEventListener("upgradeneeded",o=>{r(Lm(p.result),o.oldVersion,o.newVersion,Lm(p.transaction),o)}),n&&p.addEventListener("blocked",o=>n(o.oldVersion,o.newVersion,o)),_.then(o=>{h&&o.addEventListener("close",()=>h()),s&&o.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),_}const VH=["get","getKey","getAll","getAllKeys","count"],UH=["put","add","delete","clear"],oA=new Map;function LL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(oA.get(e))return oA.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=UH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VH.includes(n)))return;const h=async function(p,..._){const o=this.transaction(p,s?"readwrite":"readonly");let T=o.store;return r&&(T=T.index(_.shift())),(await Promise.all([T[n](..._),s&&o.done]))[0]};return oA.set(e,h),h}zH(t=>({...t,get:(e,n,r)=>LL(e,n)||t.get(e,n,r),has:(e,n)=>!!LL(e,n)||t.has(e,n)}));class jH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($H(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $H(t){return t.getComponent()?.type==="VERSION"}const bI="@firebase/app",OL="0.14.6";const _p=new vR("@firebase/app"),qH="@firebase/app-compat",HH="@firebase/analytics-compat",GH="@firebase/analytics",WH="@firebase/app-check-compat",YH="@firebase/app-check",XH="@firebase/auth",KH="@firebase/auth-compat",ZH="@firebase/database",QH="@firebase/data-connect",JH="@firebase/database-compat",e7="@firebase/functions",t7="@firebase/functions-compat",n7="@firebase/installations",r7="@firebase/installations-compat",i7="@firebase/messaging",s7="@firebase/messaging-compat",o7="@firebase/performance",a7="@firebase/performance-compat",l7="@firebase/remote-config",c7="@firebase/remote-config-compat",u7="@firebase/storage",h7="@firebase/storage-compat",d7="@firebase/firestore",f7="@firebase/ai",p7="@firebase/firestore-compat",m7="firebase",g7="12.6.0";const wI="[DEFAULT]",y7={[bI]:"fire-core",[qH]:"fire-core-compat",[GH]:"fire-analytics",[HH]:"fire-analytics-compat",[YH]:"fire-app-check",[WH]:"fire-app-check-compat",[XH]:"fire-auth",[KH]:"fire-auth-compat",[ZH]:"fire-rtdb",[QH]:"fire-data-connect",[JH]:"fire-rtdb-compat",[e7]:"fire-fn",[t7]:"fire-fn-compat",[n7]:"fire-iid",[r7]:"fire-iid-compat",[i7]:"fire-fcm",[s7]:"fire-fcm-compat",[o7]:"fire-perf",[a7]:"fire-perf-compat",[l7]:"fire-rc",[c7]:"fire-rc-compat",[u7]:"fire-gcs",[h7]:"fire-gcs-compat",[d7]:"fire-fst",[p7]:"fire-fst-compat",[f7]:"fire-vertex","fire-js":"fire-js",[m7]:"fire-js-all"};const lE=new Map,_7=new Map,TI=new Map;function zL(t,e){try{t.container.addComponent(e)}catch(n){_p.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ty(t){const e=t.name;if(TI.has(e))return _p.debug(`There were multiple attempts to register component ${e}.`),!1;TI.set(e,t);for(const n of lE.values())zL(n,t);for(const n of _7.values())zL(n,t);return!0}function oS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zc(t){return t==null?!1:t.settings!==void 0}const v7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Om=new Qb("app","Firebase",v7);class x7{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Om.create("app-deleted",{appName:this._name})}}const Py=g7;function R4(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:wI,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Om.create("bad-app-name",{appName:String(s)});if(n||(n=S4()),!n)throw Om.create("no-options");const h=lE.get(s);if(h){if(wy(n,h.options)&&wy(r,h.config))return h;throw Om.create("duplicate-app",{appName:s})}const p=new CH(s);for(const o of TI.values())p.addComponent(o);const _=new x7(n,r,p);return lE.set(s,_),_}function bR(t=wI){const e=lE.get(t);if(!e&&t===wI&&S4())return R4();if(!e)throw Om.create("no-app",{appName:t});return e}function Hd(t,e,n){let r=y7[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),h=e.match(/\s|\//);if(s||h){const p=[`Unable to register library "${r}" with version "${e}":`];s&&p.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_p.warn(p.join(" "));return}Ty(new Hm(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const b7="firebase-heartbeat-database",w7=1,Ab="firebase-heartbeat-store";let aA=null;function D4(){return aA||(aA=FH(b7,w7,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ab)}catch(n){console.warn(n)}}}}).catch(t=>{throw Om.create("idb-open",{originalErrorMessage:t.message})})),aA}async function T7(t){try{const n=(await D4()).transaction(Ab),r=await n.objectStore(Ab).get(k4(t));return await n.done,r}catch(e){if(e instanceof Lu)_p.warn(e.message);else{const n=Om.create("idb-get",{originalErrorMessage:e?.message});_p.warn(n.message)}}}async function NL(t,e){try{const r=(await D4()).transaction(Ab,"readwrite");await r.objectStore(Ab).put(e,k4(t)),await r.done}catch(n){if(n instanceof Lu)_p.warn(n.message);else{const r=Om.create("idb-set",{originalErrorMessage:n?.message});_p.warn(r.message)}}}function k4(t){return`${t.name}!${t.options.appId}`}const E7=1024,S7=30;class C7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=BL();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>S7){const s=M7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_p.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=BL(),{heartbeatsToSend:n,unsentEntries:r}=A7(this._heartbeatsCache.heartbeats),s=aE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return _p.warn(e),""}}}function BL(){return new Date().toISOString().substring(0,10)}function A7(t,e=E7){const n=[];let r=t.slice();for(const s of t){const h=n.find(p=>p.agent===s.agent);if(h){if(h.dates.push(s.date),FL(n)>e){h.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),FL(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class I7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pH()?mH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await T7(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NL(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FL(t){return aE(JSON.stringify({version:2,heartbeats:t})).length}function M7(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function R7(t){Ty(new Hm("platform-logger",e=>new jH(e),"PRIVATE")),Ty(new Hm("heartbeat",e=>new C7(e),"PRIVATE")),Hd(bI,OL,t),Hd(bI,OL,"esm2020"),Hd("fire-js","")}R7("");var D7="firebase",k7="12.6.0";Hd(D7,k7,"app");function P4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P7=P4,L4=new Qb("auth","Firebase",P4());const cE=new vR("@firebase/auth");function L7(t,...e){cE.logLevel<=ci.WARN&&cE.warn(`Auth (${Py}): ${t}`,...e)}function AT(t,...e){cE.logLevel<=ci.ERROR&&cE.error(`Auth (${Py}): ${t}`,...e)}function Ih(t,...e){throw wR(t,...e)}function Gd(t,...e){return wR(t,...e)}function O4(t,e,n){const r={...P7(),[e]:n};return new Qb("auth","Firebase",r).create(e,{appName:t.name})}function lp(t){return O4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L4.create(t,...e)}function pr(t,e,...n){if(!t)throw wR(e,...n)}function ip(t){const e="INTERNAL ASSERTION FAILED: "+t;throw AT(e),new Error(e)}function vp(t,e){t||ip(e)}function EI(){return typeof self<"u"&&self.location?.href||""}function O7(){return VL()==="http:"||VL()==="https:"}function VL(){return typeof self<"u"&&self.location?.protocol||null}function z7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O7()||uH()||"connection"in navigator)?navigator.onLine:!0}function N7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class e1{constructor(e,n){this.shortDelay=e,this.longDelay=n,vp(n>e,"Short delay should be less than long delay!"),this.isMobile=aH()||hH()}get(){return z7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function TR(t,e){vp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class z4{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ip("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ip("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ip("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const B7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const F7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],V7=new e1(3e4,6e4);function ag(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function lg(t,e,n,r,s={}){return N4(t,s,async()=>{let h={},p={};r&&(e==="GET"?p=r:h={body:JSON.stringify(r)});const _=Jb({key:t.config.apiKey,...p}).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const T={method:e,headers:o,...h};return cH()||(T.referrerPolicy="no-referrer"),t.emulatorConfig&&og(t.emulatorConfig.host)&&(T.credentials="include"),z4.fetch()(await B4(t,t.config.apiHost,n,_),T)})}async function N4(t,e,n){t._canInitEmulator=!1;const r={...B7,...e};try{const s=new j7(t),h=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw Gw(t,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const _=h.ok?p.errorMessage:p.error.message,[o,T]=_.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gw(t,"credential-already-in-use",p);if(o==="EMAIL_EXISTS")throw Gw(t,"email-already-in-use",p);if(o==="USER_DISABLED")throw Gw(t,"user-disabled",p);const I=r[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw O4(t,I,T);Ih(t,I)}}catch(s){if(s instanceof Lu)throw s;Ih(t,"network-request-failed",{message:String(s)})}}async function t1(t,e,n,r,s={}){const h=await lg(t,e,n,r,s);return"mfaPendingCredential"in h&&Ih(t,"multi-factor-auth-required",{_serverResponse:h}),h}async function B4(t,e,n,r){const s=`${e}${n}?${r}`,h=t,p=h.config.emulator?TR(t.config,s):`${t.config.apiScheme}://${s}`;return F7.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function U7(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gd(this.auth,"network-request-failed")),V7.get())})}}function Gw(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gd(t,e,r);return s.customData._tokenResponse=n,s}function UL(t){return t!==void 0&&t.enterprise!==void 0}class $7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return U7(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q7(t,e){return lg(t,"GET","/v2/recaptchaConfig",ag(t,e))}async function H7(t,e){return lg(t,"POST","/v1/accounts:delete",e)}async function uE(t,e){return lg(t,"POST","/v1/accounts:lookup",e)}function cb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G7(t,e=!1){const n=zo(t),r=await n.getIdToken(e),s=ER(r);pr(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const h=typeof s.firebase=="object"?s.firebase:void 0,p=h?.sign_in_provider;return{claims:s,token:r,authTime:cb(lA(s.auth_time)),issuedAtTime:cb(lA(s.iat)),expirationTime:cb(lA(s.exp)),signInProvider:p||null,signInSecondFactor:h?.sign_in_second_factor||null}}function lA(t){return Number(t)*1e3}function ER(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return AT("JWT malformed, contained fewer than 3 sections"),null;try{const s=w4(n);return s?JSON.parse(s):(AT("Failed to decode base64 JWT payload"),null)}catch(s){return AT("Caught error parsing JWT payload as JSON",s?.toString()),null}}function jL(t){const e=ER(t);return pr(e,"internal-error"),pr(typeof e.exp<"u","internal-error"),pr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ib(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Lu&&W7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function W7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Y7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class SI{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cb(this.lastLoginAt),this.creationTime=cb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hE(t){const e=t.auth,n=await t.getIdToken(),r=await Ib(t,uE(e,{idToken:n}));pr(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const h=s.providerUserInfo?.length?F4(s.providerUserInfo):[],p=K7(t.providerData,h),_=t.isAnonymous,o=!(t.email&&s.passwordHash)&&!p?.length,T=_?o:!1,I={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:p,metadata:new SI(s.createdAt,s.lastLoginAt),isAnonymous:T};Object.assign(t,I)}async function X7(t){const e=zo(t);await hE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function K7(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function F4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Z7(t,e){const n=await N4(t,{},async()=>{const r=Jb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:h}=t.config,p=await B4(t,s,"/v1/token",`key=${h}`),_=await t._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:_,body:r};return t.emulatorConfig&&og(t.emulatorConfig.host)&&(o.credentials="include"),z4.fetch()(p,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Q7(t,e){return lg(t,"POST","/v2/accounts:revokeToken",ag(t,e))}class fv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pr(e.idToken,"internal-error"),pr(typeof e.idToken<"u","internal-error"),pr(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pr(e.length!==0,"internal-error");const n=jL(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:h}=await Z7(e,n);this.updateTokensAndExpiration(r,s,Number(h))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:h}=n,p=new fv;return r&&(pr(typeof r=="string","internal-error",{appName:e}),p.refreshToken=r),s&&(pr(typeof s=="string","internal-error",{appName:e}),p.accessToken=s),h&&(pr(typeof h=="number","internal-error",{appName:e}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fv,this.toJSON())}_performRefresh(){return ip("not implemented")}}function Em(t,e){pr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sh{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Y7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new SI(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ib(this,this.stsTokenManager.getToken(this.auth,e));return pr(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G7(this,e)}reload(){return X7(this)}_assign(e){this!==e&&(pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sh({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hE(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zc(this.auth.app))return Promise.reject(lp(this.auth));const e=await this.getIdToken();return await Ib(this,H7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,h=n.phoneNumber??void 0,p=n.photoURL??void 0,_=n.tenantId??void 0,o=n._redirectEventId??void 0,T=n.createdAt??void 0,I=n.lastLoginAt??void 0,{uid:M,emailVerified:L,isAnonymous:F,providerData:q,stsTokenManager:$}=n;pr(M&&$,e,"internal-error");const X=fv.fromJSON(this.name,$);pr(typeof M=="string",e,"internal-error"),Em(r,e.name),Em(s,e.name),pr(typeof L=="boolean",e,"internal-error"),pr(typeof F=="boolean",e,"internal-error"),Em(h,e.name),Em(p,e.name),Em(_,e.name),Em(o,e.name),Em(T,e.name),Em(I,e.name);const te=new Sh({uid:M,auth:e,email:s,emailVerified:L,displayName:r,isAnonymous:F,photoURL:p,phoneNumber:h,tenantId:_,stsTokenManager:X,createdAt:T,lastLoginAt:I});return q&&Array.isArray(q)&&(te.providerData=q.map(he=>({...he}))),o&&(te._redirectEventId=o),te}static async _fromIdTokenResponse(e,n,r=!1){const s=new fv;s.updateFromServerResponse(n);const h=new Sh({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hE(h),h}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pr(s.localId!==void 0,"internal-error");const h=s.providerUserInfo!==void 0?F4(s.providerUserInfo):[],p=!(s.email&&s.passwordHash)&&!h?.length,_=new fv;_.updateFromIdToken(r);const o=new Sh({uid:s.localId,auth:e,stsTokenManager:_,isAnonymous:p}),T={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new SI(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!h?.length};return Object.assign(o,T),o}}const $L=new Map;function sp(t){vp(t instanceof Function,"Expected a class definition");let e=$L.get(t);return e?(vp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$L.set(t,e),e)}class V4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}V4.type="NONE";const qL=V4;function IT(t,e,n){return`firebase:${t}:${e}:${n}`}class pv{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:h}=this.auth;this.fullUserKey=IT(this.userKey,s.apiKey,h),this.fullPersistenceKey=IT("persistence",s.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uE(this.auth,{idToken:e}).catch(()=>{});return n?Sh._fromGetAccountInfoResponse(this.auth,n,e):null}return Sh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new pv(sp(qL),e,r);const s=(await Promise.all(n.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let h=s[0]||sp(qL);const p=IT(r,e.config.apiKey,e.name);let _=null;for(const T of n)try{const I=await T._get(p);if(I){let M;if(typeof I=="string"){const L=await uE(e,{idToken:I}).catch(()=>{});if(!L)break;M=await Sh._fromGetAccountInfoResponse(e,L,I)}else M=Sh._fromJSON(e,I);T!==h&&(_=M),h=T;break}}catch{}const o=s.filter(T=>T._shouldAllowMigration);return!h._shouldAllowMigration||!o.length?new pv(h,e,r):(h=o[0],_&&await h._set(p,_.toJSON()),await Promise.all(n.map(async T=>{if(T!==h)try{await T._remove(p)}catch{}})),new pv(h,e,r))}}function HL(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G4(e))return"Blackberry";if(W4(e))return"Webos";if(j4(e))return"Safari";if((e.includes("chrome/")||$4(e))&&!e.includes("edge/"))return"Chrome";if(H4(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function U4(t=ml()){return/firefox\//i.test(t)}function j4(t=ml()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $4(t=ml()){return/crios\//i.test(t)}function q4(t=ml()){return/iemobile/i.test(t)}function H4(t=ml()){return/android/i.test(t)}function G4(t=ml()){return/blackberry/i.test(t)}function W4(t=ml()){return/webos/i.test(t)}function SR(t=ml()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function J7(t=ml()){return SR(t)&&!!window.navigator?.standalone}function eG(){return dH()&&document.documentMode===10}function Y4(t=ml()){return SR(t)||H4(t)||W4(t)||G4(t)||/windows phone/i.test(t)||q4(t)}function X4(t,e=[]){let n;switch(t){case"Browser":n=HL(ml());break;case"Worker":n=`${HL(ml())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Py}/${r}`}class tG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=h=>new Promise((p,_)=>{try{const o=e(h);p(o)}catch(o){_(o)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function nG(t,e={}){return lg(t,"GET","/v2/passwordPolicy",ag(t,e))}const rG=6;class iG{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rG,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}class sG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GL(this),this.idTokenSubscription=new GL(this),this.beforeStateQueue=new tG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sp(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pv.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uE(this,{idToken:e}),r=await Sh._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zc(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,p=r?._redirectEventId,_=await this.tryRedirectSignIn(e);(!h||h===p)&&_?.user&&(r=_.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hE(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zc(this.app))return Promise.reject(lp(this));const n=e?zo(e):null;return n&&pr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zc(this.app)?Promise.reject(lp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zc(this.app)?Promise.reject(lp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sp(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nG(this),n=new iG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qb("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Q7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sp(e)||this._popupRedirectResolver;pr(n,this,"argument-error"),this.redirectPersistenceManager=await pv.create(this,[sp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let p=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(pr(_,this,"internal-error"),_.then(()=>{p||h(this.currentUser)}),typeof n=="function"){const o=e.addObserver(n,r,s);return()=>{p=!0,o()}}else{const o=e.addObserver(n);return()=>{p=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(zc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ly(t){return zo(t)}class GL{constructor(e){this.auth=e,this.observer=null,this.addObserver=xH(n=>this.observer=n)}get next(){return pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let aS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oG(t){aS=t}function K4(t){return aS.loadJS(t)}function aG(){return aS.recaptchaEnterpriseScript}function lG(){return aS.gapiScript}function cG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uG{constructor(){this.enterprise=new hG}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hG{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dG="recaptcha-enterprise",Z4="NO_RECAPTCHA";class fG{constructor(e){this.type=dG,this.auth=Ly(e)}async verify(e="verify",n=!1){async function r(h){if(!n){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,_)=>{q7(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const T=new $7(o);return h.tenantId==null?h._agentRecaptchaConfig=T:h._tenantRecaptchaConfigs[h.tenantId]=T,p(T.siteKey)}}).catch(o=>{_(o)})})}function s(h,p,_){const o=window.grecaptcha;UL(o)?o.enterprise.ready(()=>{o.enterprise.execute(h,{action:e}).then(T=>{p(T)}).catch(()=>{p(Z4)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uG().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{r(this.auth).then(_=>{if(!n&&UL(window.grecaptcha))s(_,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let o=aG();o.length!==0&&(o+=_),K4(o).then(()=>{s(_,h,p)}).catch(T=>{p(T)})}}).catch(_=>{p(_)})})}}async function WL(t,e,n,r=!1,s=!1){const h=new fG(t);let p;if(s)p=Z4;else try{p=await h.verify(n)}catch{p=await h.verify(n,!0)}const _={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const o=_.phoneEnrollmentInfo.phoneNumber,T=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:T,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const o=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:o,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return r?Object.assign(_,{captchaResp:p}):Object.assign(_,{captchaResponse:p}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function CI(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await WL(t,e,n,n==="getOobCode");return r(t,h)}else return r(t,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await WL(t,e,n,n==="getOobCode");return r(t,p)}else return Promise.reject(h)})}function pG(t,e){const n=oS(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),h=n.getOptions();if(wy(h,e??{}))return s;Ih(s,"already-initialized")}return n.initialize({options:e})}function mG(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(sp);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gG(t,e,n){const r=Ly(t);pr(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,h=Q4(e),{host:p,port:_}=yG(e),o=_===null?"":`:${_}`,T={url:`${h}//${p}${o}/`},I=Object.freeze({host:p,port:_,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pr(wy(T,r.config.emulator)&&wy(I,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=T,r.emulatorConfig=I,r.settings.appVerificationDisabledForTesting=!0,og(p)?(yR(`${h}//${p}${o}`),_R("Auth",!0)):_G()}function Q4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yG(t){const e=Q4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const h=s[1];return{host:h,port:YL(r.substr(h.length+1))}}else{const[h,p]=r.split(":");return{host:h,port:YL(p)}}}function YL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _G(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class CR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ip("not implemented")}_getIdTokenResponse(e){return ip("not implemented")}_linkToIdToken(e,n){return ip("not implemented")}_getReauthenticationResolver(e){return ip("not implemented")}}async function vG(t,e){return lg(t,"POST","/v1/accounts:signUp",e)}async function xG(t,e){return t1(t,"POST","/v1/accounts:signInWithPassword",ag(t,e))}async function bG(t,e){return t1(t,"POST","/v1/accounts:signInWithEmailLink",ag(t,e))}async function wG(t,e){return t1(t,"POST","/v1/accounts:signInWithEmailLink",ag(t,e))}class Mb extends CR{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Mb(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Mb(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CI(e,n,"signInWithPassword",xG);case"emailLink":return bG(e,{email:this._email,oobCode:this._password});default:Ih(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CI(e,r,"signUpPassword",vG);case"emailLink":return wG(e,{idToken:n,email:this._email,oobCode:this._password});default:Ih(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mv(t,e){return t1(t,"POST","/v1/accounts:signInWithIdp",ag(t,e))}const TG="http://localhost";class Ey extends CR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ey(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ih("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...h}=n;if(!r||!s)return null;const p=new Ey(r,s);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(e){const n=this.buildRequest();return mv(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mv(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mv(e,n)}buildRequest(){const e={requestUri:TG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jb(n)}return e}}function EG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SG(t){const e=qx(Hx(t)).link,n=e?qx(Hx(e)).deep_link_id:null,r=qx(Hx(t)).deep_link_id;return(r?qx(Hx(r)).link:null)||r||n||e||t}class AR{constructor(e){const n=qx(Hx(e)),r=n.apiKey??null,s=n.oobCode??null,h=EG(n.mode??null);pr(r&&s&&h,"argument-error"),this.apiKey=r,this.operation=h,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=SG(e);try{return new AR(n)}catch{return null}}}class Wv{constructor(){this.providerId=Wv.PROVIDER_ID}static credential(e,n){return Mb._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=AR.parseLink(n);return pr(r,"argument-error"),Mb._fromEmailAndCode(e,r.code,r.tenantId)}}Wv.PROVIDER_ID="password";Wv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class J4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n1 extends J4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Am extends n1{constructor(){super("facebook.com")}static credential(e){return Ey._fromParams({providerId:Am.PROVIDER_ID,signInMethod:Am.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Am.credentialFromTaggedObject(e)}static credentialFromError(e){return Am.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Am.credential(e.oauthAccessToken)}catch{return null}}}Am.FACEBOOK_SIGN_IN_METHOD="facebook.com";Am.PROVIDER_ID="facebook.com";class Im extends n1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ey._fromParams({providerId:Im.PROVIDER_ID,signInMethod:Im.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Im.credentialFromTaggedObject(e)}static credentialFromError(e){return Im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Im.credential(n,r)}catch{return null}}}Im.GOOGLE_SIGN_IN_METHOD="google.com";Im.PROVIDER_ID="google.com";class Mm extends n1{constructor(){super("github.com")}static credential(e){return Ey._fromParams({providerId:Mm.PROVIDER_ID,signInMethod:Mm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mm.credentialFromTaggedObject(e)}static credentialFromError(e){return Mm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mm.credential(e.oauthAccessToken)}catch{return null}}}Mm.GITHUB_SIGN_IN_METHOD="github.com";Mm.PROVIDER_ID="github.com";class Rm extends n1{constructor(){super("twitter.com")}static credential(e,n){return Ey._fromParams({providerId:Rm.PROVIDER_ID,signInMethod:Rm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rm.credentialFromTaggedObject(e)}static credentialFromError(e){return Rm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rm.credential(n,r)}catch{return null}}}Rm.TWITTER_SIGN_IN_METHOD="twitter.com";Rm.PROVIDER_ID="twitter.com";async function CG(t,e){return t1(t,"POST","/v1/accounts:signUp",ag(t,e))}class Sy{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const h=await Sh._fromIdTokenResponse(e,r,s),p=XL(r);return new Sy({user:h,providerId:p,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=XL(r);return new Sy({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function XL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class dE extends Lu{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dE.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dE(e,n,r,s)}}function eB(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?dE._fromErrorAndOperation(t,h,e,r):h})}async function AG(t,e,n=!1){const r=await Ib(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sy._forOperation(t,"link",r)}async function IG(t,e,n=!1){const{auth:r}=t;if(zc(r.app))return Promise.reject(lp(r));const s="reauthenticate";try{const h=await Ib(t,eB(r,s,e,t),n);pr(h.idToken,r,"internal-error");const p=ER(h.idToken);pr(p,r,"internal-error");const{sub:_}=p;return pr(t.uid===_,r,"user-mismatch"),Sy._forOperation(t,s,h)}catch(h){throw h?.code==="auth/user-not-found"&&Ih(r,"user-mismatch"),h}}async function tB(t,e,n=!1){if(zc(t.app))return Promise.reject(lp(t));const r="signIn",s=await eB(t,r,e),h=await Sy._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(h.user),h}async function MG(t,e){return tB(Ly(t),e)}async function nB(t){const e=Ly(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RG(t,e,n){if(zc(t.app))return Promise.reject(lp(t));const r=Ly(t),p=await CI(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CG).catch(o=>{throw o.code==="auth/password-does-not-meet-requirements"&&nB(t),o}),_=await Sy._fromIdTokenResponse(r,"signIn",p);return await r._updateCurrentUser(_.user),_}function DG(t,e,n){return zc(t.app)?Promise.reject(lp(t)):MG(zo(t),Wv.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nB(t),r})}function kG(t,e){return zo(t).setPersistence(e)}function PG(t,e,n,r){return zo(t).onIdTokenChanged(e,n,r)}function LG(t,e,n){return zo(t).beforeAuthStateChanged(e,n)}function OG(t,e,n,r){return zo(t).onAuthStateChanged(e,n,r)}function zG(t){return zo(t).signOut()}const fE="__sak";class rB{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fE,"1"),this.storage.removeItem(fE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const NG=1e3,BG=10;class iB extends rB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((p,_,o)=>{this.notifyListeners(p,o)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const p=this.storage.getItem(r);!n&&this.localCache[r]===p||this.notifyListeners(r,p)},h=this.storage.getItem(r);eG()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BG):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},NG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iB.type="LOCAL";const sB=iB;class oB extends rB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oB.type="SESSION";const aB=oB;function FG(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class lS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lS(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:h}=n.data,p=this.handlersMap[s];if(!p?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const _=Array.from(p).map(async T=>T(n.origin,h)),o=await FG(_);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:o})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lS.receivers=[];function IR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class VG{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let h,p;return new Promise((_,o)=>{const T=IR("",20);s.port1.start();const I=setTimeout(()=>{o(new Error("unsupported_event"))},r);p={messageChannel:s,onMessage(M){const L=M;if(L.data.eventId===T)switch(L.data.status){case"ack":clearTimeout(I),h=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),_(L.data.response);break;default:clearTimeout(I),clearTimeout(h),o(new Error("invalid_response"));break}}},this.handlers.add(p),s.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:T,data:n},[s.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}function Wd(){return window}function UG(t){Wd().location.href=t}function lB(){return typeof Wd().WorkerGlobalScope<"u"&&typeof Wd().importScripts=="function"}async function jG(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $G(){return navigator?.serviceWorker?.controller||null}function qG(){return lB()?self:null}const cB="firebaseLocalStorageDb",HG=1,pE="firebaseLocalStorage",uB="fbase_key";class r1{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cS(t,e){return t.transaction([pE],e?"readwrite":"readonly").objectStore(pE)}function GG(){const t=indexedDB.deleteDatabase(cB);return new r1(t).toPromise()}function AI(){const t=indexedDB.open(cB,HG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pE,{keyPath:uB})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pE)?e(r):(r.close(),await GG(),e(await AI()))})})}async function KL(t,e,n){const r=cS(t,!0).put({[uB]:e,value:n});return new r1(r).toPromise()}async function WG(t,e){const n=cS(t,!1).get(e),r=await new r1(n).toPromise();return r===void 0?null:r.value}function ZL(t,e){const n=cS(t,!0).delete(e);return new r1(n).toPromise()}const YG=800,XG=3;class hB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AI(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XG)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lS._getInstance(qG()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await jG(),!this.activeServiceWorker)return;this.sender=new VG(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$G()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AI();return await KL(e,fE,"1"),await ZL(e,fE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>KL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WG(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const h=cS(s,!1).getAll();return new r1(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:h}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(h)&&(this.notifyListeners(s,h),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hB.type="LOCAL";const KG=hB;new e1(3e4,6e4);function ZG(t,e){return e?sp(e):(pr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class MR extends CR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mv(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QG(t){return tB(t.auth,new MR(t),t.bypassAuthState)}function JG(t){const{auth:e,user:n}=t;return pr(n,e,"internal-error"),IG(n,new MR(t),t.bypassAuthState)}async function eW(t){const{auth:e,user:n}=t;return pr(n,e,"internal-error"),AG(n,new MR(t),t.bypassAuthState)}class dB{constructor(e,n,r,s,h=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:h,error:p,type:_}=e;if(p){this.reject(p);return}const o={auth:this.auth,requestUri:n,sessionId:r,tenantId:h||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(o))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QG;case"linkViaPopup":case"linkViaRedirect":return eW;case"reauthViaPopup":case"reauthViaRedirect":return JG;default:Ih(this.auth,"internal-error")}}resolve(e){vp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tW=new e1(2e3,1e4);class hv extends dB{constructor(e,n,r,s,h){super(e,n,s,h),this.provider=r,this.authWindow=null,this.pollId=null,hv.currentPopupAction&&hv.currentPopupAction.cancel(),hv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pr(e,this.auth,"internal-error"),e}async onExecution(){vp(this.filter.length===1,"Popup operations only handle one event");const e=IR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hv.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tW.get())};e()}}hv.currentPopupAction=null;const nW="pendingRedirect",MT=new Map;class rW extends dB{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=MT.get(this.auth._key());if(!e){try{const r=await iW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}MT.set(this.auth._key(),e)}return this.bypassAuthState||MT.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iW(t,e){const n=aW(e),r=oW(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function sW(t,e){MT.set(t._key(),e)}function oW(t){return sp(t._redirectPersistence)}function aW(t){return IT(nW,t.config.apiKey,t.name)}async function lW(t,e,n=!1){if(zc(t.app))return Promise.reject(lp(t));const r=Ly(t),s=ZG(r,e),p=await new rW(r,s,n).execute();return p&&!n&&(delete p.user._redirectEventId,await r._persistUserIfCurrent(p.user),await r._setRedirectUser(null,e)),p}const cW=600*1e3;class uW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fB(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Gd(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cW&&this.cachedEventUids.clear(),this.cachedEventUids.has(QL(e))}saveEventToCache(e){this.cachedEventUids.add(QL(e)),this.lastProcessedEventTime=Date.now()}}function QL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fB({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fB(t);default:return!1}}async function dW(t,e={}){return lg(t,"GET","/v1/projects",e)}const fW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pW=/^https?/;async function mW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dW(t);for(const n of e)try{if(gW(n))return}catch{}Ih(t,"unauthorized-domain")}function gW(t){const e=EI(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const p=new URL(t);return p.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&p.hostname===r}if(!pW.test(n))return!1;if(fW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const yW=new e1(3e4,6e4);function JL(){const t=Wd().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _W(t){return new Promise((e,n)=>{function r(){JL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JL(),n(Gd(t,"network-request-failed"))},timeout:yW.get()})}if(Wd().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wd().gapi?.load)r();else{const s=cG("iframefcb");return Wd()[s]=()=>{gapi.load?r():n(Gd(t,"network-request-failed"))},K4(`${lG()}?onload=${s}`).catch(h=>n(h))}}).catch(e=>{throw RT=null,e})}let RT=null;function vW(t){return RT=RT||_W(t),RT}const xW=new e1(5e3,15e3),bW="__/auth/iframe",wW="emulator/auth/iframe",TW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SW(t){const e=t.config;pr(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?TR(e,wW):`https://${t.config.authDomain}/${bW}`,r={apiKey:e.apiKey,appName:t.name,v:Py},s=EW.get(t.config.apiHost);s&&(r.eid=s);const h=t._getFrameworks();return h.length&&(r.fw=h.join(",")),`${n}?${Jb(r).slice(1)}`}async function CW(t){const e=await vW(t),n=Wd().gapi;return pr(n,t,"internal-error"),e.open({where:document.body,url:SW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TW,dontclear:!0},r=>new Promise(async(s,h)=>{await r.restyle({setHideOnLeave:!1});const p=Gd(t,"network-request-failed"),_=Wd().setTimeout(()=>{h(p)},xW.get());function o(){Wd().clearTimeout(_),s(r)}r.ping(o).then(o,()=>{h(p)})}))}const AW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IW=500,MW=600,RW="_blank",DW="http://localhost";class eO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kW(t,e,n,r=IW,s=MW){const h=Math.max((window.screen.availHeight-s)/2,0).toString(),p=Math.max((window.screen.availWidth-r)/2,0).toString();let _="";const o={...AW,width:r.toString(),height:s.toString(),top:h,left:p},T=ml().toLowerCase();n&&(_=$4(T)?RW:n),U4(T)&&(e=e||DW,o.scrollbars="yes");const I=Object.entries(o).reduce((L,[F,q])=>`${L}${F}=${q},`,"");if(J7(T)&&_!=="_self")return PW(e||"",_),new eO(null);const M=window.open(e||"",_,I);pr(M,t,"popup-blocked");try{M.focus()}catch{}return new eO(M)}function PW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const LW="__/auth/handler",OW="emulator/auth/handler",zW=encodeURIComponent("fac");async function tO(t,e,n,r,s,h){pr(t.config.authDomain,t,"auth-domain-config-required"),pr(t.config.apiKey,t,"invalid-api-key");const p={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Py,eventId:s};if(e instanceof J4){e.setDefaultLanguage(t.languageCode),p.providerId=e.providerId||"",vH(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,M]of Object.entries({}))p[I]=M}if(e instanceof n1){const I=e.getScopes().filter(M=>M!=="");I.length>0&&(p.scopes=I.join(","))}t.tenantId&&(p.tid=t.tenantId);const _=p;for(const I of Object.keys(_))_[I]===void 0&&delete _[I];const o=await t._getAppCheckToken(),T=o?`#${zW}=${encodeURIComponent(o)}`:"";return`${NW(t)}?${Jb(_).slice(1)}${T}`}function NW({config:t}){return t.emulator?TR(t,OW):`https://${t.authDomain}/${LW}`}const cA="webStorageSupport";class BW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aB,this._completeRedirectFn=lW,this._overrideRedirectResult=sW}async _openPopup(e,n,r,s){vp(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const h=await tO(e,n,r,EI(),s);return kW(e,h,IR())}async _openRedirect(e,n,r,s){await this._originValidation(e);const h=await tO(e,n,r,EI(),s);return UG(h),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:h}=this.eventManagers[n];return s?Promise.resolve(s):(vp(h,"If manager is not set, promise should be"),h)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CW(e),r=new uW(e);return n.register("authEvent",s=>(pr(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cA,{type:cA},s=>{const h=s?.[0]?.[cA];h!==void 0&&n(!!h),Ih(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y4()||j4()||SR()}}const FW=BW;var nO="@firebase/auth",rO="1.11.1";class VW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function UW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jW(t){Ty(new Hm("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:p,authDomain:_}=r.options;pr(p&&!p.includes(":"),"invalid-api-key",{appName:r.name});const o={apiKey:p,authDomain:_,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X4(t)},T=new sG(r,s,h,o);return mG(T,n),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ty(new Hm("auth-internal",e=>{const n=Ly(e.getProvider("auth").getImmediate());return(r=>new VW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hd(nO,rO,UW(t)),Hd(nO,rO,"esm2020")}const $W=300,qW=C4("authIdTokenMaxAge")||$W;let iO=null;const HW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qW)return;const s=n?.token;iO!==s&&(iO=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GW(t=bR()){const e=oS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pG(t,{popupRedirectResolver:FW,persistence:[KG,sB,aB]}),r=C4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(r,location.origin);if(location.origin===h.origin){const p=HW(h.toString());LG(n,p,()=>p(n.currentUser)),PG(n,_=>p(_))}}const s=T4("auth");return s&&gG(n,`http://${s}`),n}function WW(){return document.getElementsByTagName("head")?.[0]??document}oG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const h=Gd("internal-error");h.customData=s,n(h)},r.type="text/javascript",r.charset="UTF-8",WW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jW("Browser");var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zm,pB;(function(){var t;function e(ce,ee){function le(){}le.prototype=ee.prototype,ce.F=ee.prototype,ce.prototype=new le,ce.prototype.constructor=ce,ce.D=function(se,_e,Q){for(var de=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)de[Ve-2]=arguments[Ve];return ee.prototype[_e].apply(se,de)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(ce,ee,le){le||(le=0);const se=Array(16);if(typeof ee=="string")for(var _e=0;_e<16;++_e)se[_e]=ee.charCodeAt(le++)|ee.charCodeAt(le++)<<8|ee.charCodeAt(le++)<<16|ee.charCodeAt(le++)<<24;else for(_e=0;_e<16;++_e)se[_e]=ee[le++]|ee[le++]<<8|ee[le++]<<16|ee[le++]<<24;ee=ce.g[0],le=ce.g[1],_e=ce.g[2];let Q=ce.g[3],de;de=ee+(Q^le&(_e^Q))+se[0]+3614090360&4294967295,ee=le+(de<<7&4294967295|de>>>25),de=Q+(_e^ee&(le^_e))+se[1]+3905402710&4294967295,Q=ee+(de<<12&4294967295|de>>>20),de=_e+(le^Q&(ee^le))+se[2]+606105819&4294967295,_e=Q+(de<<17&4294967295|de>>>15),de=le+(ee^_e&(Q^ee))+se[3]+3250441966&4294967295,le=_e+(de<<22&4294967295|de>>>10),de=ee+(Q^le&(_e^Q))+se[4]+4118548399&4294967295,ee=le+(de<<7&4294967295|de>>>25),de=Q+(_e^ee&(le^_e))+se[5]+1200080426&4294967295,Q=ee+(de<<12&4294967295|de>>>20),de=_e+(le^Q&(ee^le))+se[6]+2821735955&4294967295,_e=Q+(de<<17&4294967295|de>>>15),de=le+(ee^_e&(Q^ee))+se[7]+4249261313&4294967295,le=_e+(de<<22&4294967295|de>>>10),de=ee+(Q^le&(_e^Q))+se[8]+1770035416&4294967295,ee=le+(de<<7&4294967295|de>>>25),de=Q+(_e^ee&(le^_e))+se[9]+2336552879&4294967295,Q=ee+(de<<12&4294967295|de>>>20),de=_e+(le^Q&(ee^le))+se[10]+4294925233&4294967295,_e=Q+(de<<17&4294967295|de>>>15),de=le+(ee^_e&(Q^ee))+se[11]+2304563134&4294967295,le=_e+(de<<22&4294967295|de>>>10),de=ee+(Q^le&(_e^Q))+se[12]+1804603682&4294967295,ee=le+(de<<7&4294967295|de>>>25),de=Q+(_e^ee&(le^_e))+se[13]+4254626195&4294967295,Q=ee+(de<<12&4294967295|de>>>20),de=_e+(le^Q&(ee^le))+se[14]+2792965006&4294967295,_e=Q+(de<<17&4294967295|de>>>15),de=le+(ee^_e&(Q^ee))+se[15]+1236535329&4294967295,le=_e+(de<<22&4294967295|de>>>10),de=ee+(_e^Q&(le^_e))+se[1]+4129170786&4294967295,ee=le+(de<<5&4294967295|de>>>27),de=Q+(le^_e&(ee^le))+se[6]+3225465664&4294967295,Q=ee+(de<<9&4294967295|de>>>23),de=_e+(ee^le&(Q^ee))+se[11]+643717713&4294967295,_e=Q+(de<<14&4294967295|de>>>18),de=le+(Q^ee&(_e^Q))+se[0]+3921069994&4294967295,le=_e+(de<<20&4294967295|de>>>12),de=ee+(_e^Q&(le^_e))+se[5]+3593408605&4294967295,ee=le+(de<<5&4294967295|de>>>27),de=Q+(le^_e&(ee^le))+se[10]+38016083&4294967295,Q=ee+(de<<9&4294967295|de>>>23),de=_e+(ee^le&(Q^ee))+se[15]+3634488961&4294967295,_e=Q+(de<<14&4294967295|de>>>18),de=le+(Q^ee&(_e^Q))+se[4]+3889429448&4294967295,le=_e+(de<<20&4294967295|de>>>12),de=ee+(_e^Q&(le^_e))+se[9]+568446438&4294967295,ee=le+(de<<5&4294967295|de>>>27),de=Q+(le^_e&(ee^le))+se[14]+3275163606&4294967295,Q=ee+(de<<9&4294967295|de>>>23),de=_e+(ee^le&(Q^ee))+se[3]+4107603335&4294967295,_e=Q+(de<<14&4294967295|de>>>18),de=le+(Q^ee&(_e^Q))+se[8]+1163531501&4294967295,le=_e+(de<<20&4294967295|de>>>12),de=ee+(_e^Q&(le^_e))+se[13]+2850285829&4294967295,ee=le+(de<<5&4294967295|de>>>27),de=Q+(le^_e&(ee^le))+se[2]+4243563512&4294967295,Q=ee+(de<<9&4294967295|de>>>23),de=_e+(ee^le&(Q^ee))+se[7]+1735328473&4294967295,_e=Q+(de<<14&4294967295|de>>>18),de=le+(Q^ee&(_e^Q))+se[12]+2368359562&4294967295,le=_e+(de<<20&4294967295|de>>>12),de=ee+(le^_e^Q)+se[5]+4294588738&4294967295,ee=le+(de<<4&4294967295|de>>>28),de=Q+(ee^le^_e)+se[8]+2272392833&4294967295,Q=ee+(de<<11&4294967295|de>>>21),de=_e+(Q^ee^le)+se[11]+1839030562&4294967295,_e=Q+(de<<16&4294967295|de>>>16),de=le+(_e^Q^ee)+se[14]+4259657740&4294967295,le=_e+(de<<23&4294967295|de>>>9),de=ee+(le^_e^Q)+se[1]+2763975236&4294967295,ee=le+(de<<4&4294967295|de>>>28),de=Q+(ee^le^_e)+se[4]+1272893353&4294967295,Q=ee+(de<<11&4294967295|de>>>21),de=_e+(Q^ee^le)+se[7]+4139469664&4294967295,_e=Q+(de<<16&4294967295|de>>>16),de=le+(_e^Q^ee)+se[10]+3200236656&4294967295,le=_e+(de<<23&4294967295|de>>>9),de=ee+(le^_e^Q)+se[13]+681279174&4294967295,ee=le+(de<<4&4294967295|de>>>28),de=Q+(ee^le^_e)+se[0]+3936430074&4294967295,Q=ee+(de<<11&4294967295|de>>>21),de=_e+(Q^ee^le)+se[3]+3572445317&4294967295,_e=Q+(de<<16&4294967295|de>>>16),de=le+(_e^Q^ee)+se[6]+76029189&4294967295,le=_e+(de<<23&4294967295|de>>>9),de=ee+(le^_e^Q)+se[9]+3654602809&4294967295,ee=le+(de<<4&4294967295|de>>>28),de=Q+(ee^le^_e)+se[12]+3873151461&4294967295,Q=ee+(de<<11&4294967295|de>>>21),de=_e+(Q^ee^le)+se[15]+530742520&4294967295,_e=Q+(de<<16&4294967295|de>>>16),de=le+(_e^Q^ee)+se[2]+3299628645&4294967295,le=_e+(de<<23&4294967295|de>>>9),de=ee+(_e^(le|~Q))+se[0]+4096336452&4294967295,ee=le+(de<<6&4294967295|de>>>26),de=Q+(le^(ee|~_e))+se[7]+1126891415&4294967295,Q=ee+(de<<10&4294967295|de>>>22),de=_e+(ee^(Q|~le))+se[14]+2878612391&4294967295,_e=Q+(de<<15&4294967295|de>>>17),de=le+(Q^(_e|~ee))+se[5]+4237533241&4294967295,le=_e+(de<<21&4294967295|de>>>11),de=ee+(_e^(le|~Q))+se[12]+1700485571&4294967295,ee=le+(de<<6&4294967295|de>>>26),de=Q+(le^(ee|~_e))+se[3]+2399980690&4294967295,Q=ee+(de<<10&4294967295|de>>>22),de=_e+(ee^(Q|~le))+se[10]+4293915773&4294967295,_e=Q+(de<<15&4294967295|de>>>17),de=le+(Q^(_e|~ee))+se[1]+2240044497&4294967295,le=_e+(de<<21&4294967295|de>>>11),de=ee+(_e^(le|~Q))+se[8]+1873313359&4294967295,ee=le+(de<<6&4294967295|de>>>26),de=Q+(le^(ee|~_e))+se[15]+4264355552&4294967295,Q=ee+(de<<10&4294967295|de>>>22),de=_e+(ee^(Q|~le))+se[6]+2734768916&4294967295,_e=Q+(de<<15&4294967295|de>>>17),de=le+(Q^(_e|~ee))+se[13]+1309151649&4294967295,le=_e+(de<<21&4294967295|de>>>11),de=ee+(_e^(le|~Q))+se[4]+4149444226&4294967295,ee=le+(de<<6&4294967295|de>>>26),de=Q+(le^(ee|~_e))+se[11]+3174756917&4294967295,Q=ee+(de<<10&4294967295|de>>>22),de=_e+(ee^(Q|~le))+se[2]+718787259&4294967295,_e=Q+(de<<15&4294967295|de>>>17),de=le+(Q^(_e|~ee))+se[9]+3951481745&4294967295,ce.g[0]=ce.g[0]+ee&4294967295,ce.g[1]=ce.g[1]+(_e+(de<<21&4294967295|de>>>11))&4294967295,ce.g[2]=ce.g[2]+_e&4294967295,ce.g[3]=ce.g[3]+Q&4294967295}r.prototype.v=function(ce,ee){ee===void 0&&(ee=ce.length);const le=ee-this.blockSize,se=this.C;let _e=this.h,Q=0;for(;Q<ee;){if(_e==0)for(;Q<=le;)s(this,ce,Q),Q+=this.blockSize;if(typeof ce=="string"){for(;Q<ee;)if(se[_e++]=ce.charCodeAt(Q++),_e==this.blockSize){s(this,se),_e=0;break}}else for(;Q<ee;)if(se[_e++]=ce[Q++],_e==this.blockSize){s(this,se),_e=0;break}}this.h=_e,this.o+=ee},r.prototype.A=function(){var ce=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);ce[0]=128;for(var ee=1;ee<ce.length-8;++ee)ce[ee]=0;ee=this.o*8;for(var le=ce.length-8;le<ce.length;++le)ce[le]=ee&255,ee/=256;for(this.v(ce),ce=Array(16),ee=0,le=0;le<4;++le)for(let se=0;se<32;se+=8)ce[ee++]=this.g[le]>>>se&255;return ce};function h(ce,ee){var le=_;return Object.prototype.hasOwnProperty.call(le,ce)?le[ce]:le[ce]=ee(ce)}function p(ce,ee){this.h=ee;const le=[];let se=!0;for(let _e=ce.length-1;_e>=0;_e--){const Q=ce[_e]|0;se&&Q==ee||(le[_e]=Q,se=!1)}this.g=le}var _={};function o(ce){return-128<=ce&&ce<128?h(ce,function(ee){return new p([ee|0],ee<0?-1:0)}):new p([ce|0],ce<0?-1:0)}function T(ce){if(isNaN(ce)||!isFinite(ce))return M;if(ce<0)return X(T(-ce));const ee=[];let le=1;for(let se=0;ce>=le;se++)ee[se]=ce/le|0,le*=4294967296;return new p(ee,0)}function I(ce,ee){if(ce.length==0)throw Error("number format error: empty string");if(ee=ee||10,ee<2||36<ee)throw Error("radix out of range: "+ee);if(ce.charAt(0)=="-")return X(I(ce.substring(1),ee));if(ce.indexOf("-")>=0)throw Error('number format error: interior "-" character');const le=T(Math.pow(ee,8));let se=M;for(let Q=0;Q<ce.length;Q+=8){var _e=Math.min(8,ce.length-Q);const de=parseInt(ce.substring(Q,Q+_e),ee);_e<8?(_e=T(Math.pow(ee,_e)),se=se.j(_e).add(T(de))):(se=se.j(le),se=se.add(T(de)))}return se}var M=o(0),L=o(1),F=o(16777216);t=p.prototype,t.m=function(){if($(this))return-X(this).m();let ce=0,ee=1;for(let le=0;le<this.g.length;le++){const se=this.i(le);ce+=(se>=0?se:4294967296+se)*ee,ee*=4294967296}return ce},t.toString=function(ce){if(ce=ce||10,ce<2||36<ce)throw Error("radix out of range: "+ce);if(q(this))return"0";if($(this))return"-"+X(this).toString(ce);const ee=T(Math.pow(ce,6));var le=this;let se="";for(;;){const _e=me(le,ee).g;le=te(le,_e.j(ee));let Q=((le.g.length>0?le.g[0]:le.h)>>>0).toString(ce);if(le=_e,q(le))return Q+se;for(;Q.length<6;)Q="0"+Q;se=Q+se}},t.i=function(ce){return ce<0?0:ce<this.g.length?this.g[ce]:this.h};function q(ce){if(ce.h!=0)return!1;for(let ee=0;ee<ce.g.length;ee++)if(ce.g[ee]!=0)return!1;return!0}function $(ce){return ce.h==-1}t.l=function(ce){return ce=te(this,ce),$(ce)?-1:q(ce)?0:1};function X(ce){const ee=ce.g.length,le=[];for(let se=0;se<ee;se++)le[se]=~ce.g[se];return new p(le,~ce.h).add(L)}t.abs=function(){return $(this)?X(this):this},t.add=function(ce){const ee=Math.max(this.g.length,ce.g.length),le=[];let se=0;for(let _e=0;_e<=ee;_e++){let Q=se+(this.i(_e)&65535)+(ce.i(_e)&65535),de=(Q>>>16)+(this.i(_e)>>>16)+(ce.i(_e)>>>16);se=de>>>16,Q&=65535,de&=65535,le[_e]=de<<16|Q}return new p(le,le[le.length-1]&-2147483648?-1:0)};function te(ce,ee){return ce.add(X(ee))}t.j=function(ce){if(q(this)||q(ce))return M;if($(this))return $(ce)?X(this).j(X(ce)):X(X(this).j(ce));if($(ce))return X(this.j(X(ce)));if(this.l(F)<0&&ce.l(F)<0)return T(this.m()*ce.m());const ee=this.g.length+ce.g.length,le=[];for(var se=0;se<2*ee;se++)le[se]=0;for(se=0;se<this.g.length;se++)for(let _e=0;_e<ce.g.length;_e++){const Q=this.i(se)>>>16,de=this.i(se)&65535,Ve=ce.i(_e)>>>16,Ke=ce.i(_e)&65535;le[2*se+2*_e]+=de*Ke,he(le,2*se+2*_e),le[2*se+2*_e+1]+=Q*Ke,he(le,2*se+2*_e+1),le[2*se+2*_e+1]+=de*Ve,he(le,2*se+2*_e+1),le[2*se+2*_e+2]+=Q*Ve,he(le,2*se+2*_e+2)}for(ce=0;ce<ee;ce++)le[ce]=le[2*ce+1]<<16|le[2*ce];for(ce=ee;ce<2*ee;ce++)le[ce]=0;return new p(le,0)};function he(ce,ee){for(;(ce[ee]&65535)!=ce[ee];)ce[ee+1]+=ce[ee]>>>16,ce[ee]&=65535,ee++}function ie(ce,ee){this.g=ce,this.h=ee}function me(ce,ee){if(q(ee))throw Error("division by zero");if(q(ce))return new ie(M,M);if($(ce))return ee=me(X(ce),ee),new ie(X(ee.g),X(ee.h));if($(ee))return ee=me(ce,X(ee)),new ie(X(ee.g),ee.h);if(ce.g.length>30){if($(ce)||$(ee))throw Error("slowDivide_ only works with positive integers.");for(var le=L,se=ee;se.l(ce)<=0;)le=ge(le),se=ge(se);var _e=Ee(le,1),Q=Ee(se,1);for(se=Ee(se,2),le=Ee(le,2);!q(se);){var de=Q.add(se);de.l(ce)<=0&&(_e=_e.add(le),Q=de),se=Ee(se,1),le=Ee(le,1)}return ee=te(ce,_e.j(ee)),new ie(_e,ee)}for(_e=M;ce.l(ee)>=0;){for(le=Math.max(1,Math.floor(ce.m()/ee.m())),se=Math.ceil(Math.log(le)/Math.LN2),se=se<=48?1:Math.pow(2,se-48),Q=T(le),de=Q.j(ee);$(de)||de.l(ce)>0;)le-=se,Q=T(le),de=Q.j(ee);q(Q)&&(Q=L),_e=_e.add(Q),ce=te(ce,de)}return new ie(_e,ce)}t.B=function(ce){return me(this,ce).h},t.and=function(ce){const ee=Math.max(this.g.length,ce.g.length),le=[];for(let se=0;se<ee;se++)le[se]=this.i(se)&ce.i(se);return new p(le,this.h&ce.h)},t.or=function(ce){const ee=Math.max(this.g.length,ce.g.length),le=[];for(let se=0;se<ee;se++)le[se]=this.i(se)|ce.i(se);return new p(le,this.h|ce.h)},t.xor=function(ce){const ee=Math.max(this.g.length,ce.g.length),le=[];for(let se=0;se<ee;se++)le[se]=this.i(se)^ce.i(se);return new p(le,this.h^ce.h)};function ge(ce){const ee=ce.g.length+1,le=[];for(let se=0;se<ee;se++)le[se]=ce.i(se)<<1|ce.i(se-1)>>>31;return new p(le,ce.h)}function Ee(ce,ee){const le=ee>>5;ee%=32;const se=ce.g.length-le,_e=[];for(let Q=0;Q<se;Q++)_e[Q]=ee>0?ce.i(Q+le)>>>ee|ce.i(Q+le+1)<<32-ee:ce.i(Q+le);return new p(_e,ce.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pB=r,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=T,p.fromString=I,zm=p}).apply(typeof sO<"u"?sO:typeof self<"u"?self:typeof window<"u"?window:{});var Ww=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mB,Gx,gB,DT,II,yB,_B,vB;(function(){var t,e=Object.defineProperty;function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ww=="object"&&Ww];for(var K=0;K<D.length;++K){var ae=D[K];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var r=n(this);function s(D,K){if(K)e:{var ae=r;D=D.split(".");for(var Ie=0;Ie<D.length-1;Ie++){var dt=D[Ie];if(!(dt in ae))break e;ae=ae[dt]}D=D[D.length-1],Ie=ae[D],K=K(Ie),K!=Ie&&K!=null&&e(ae,D,{configurable:!0,writable:!0,value:K})}}s("Symbol.dispose",function(D){return D||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(D){return D||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(D){return D||function(K){var ae=[],Ie;for(Ie in K)Object.prototype.hasOwnProperty.call(K,Ie)&&ae.push([Ie,K[Ie]]);return ae}});var h=h||{},p=this||self;function _(D){var K=typeof D;return K=="object"&&D!=null||K=="function"}function o(D,K,ae){return D.call.apply(D.bind,arguments)}function T(D,K,ae){return T=o,T.apply(null,arguments)}function I(D,K){var ae=Array.prototype.slice.call(arguments,1);return function(){var Ie=ae.slice();return Ie.push.apply(Ie,arguments),D.apply(this,Ie)}}function M(D,K){function ae(){}ae.prototype=K.prototype,D.Z=K.prototype,D.prototype=new ae,D.prototype.constructor=D,D.Ob=function(Ie,dt,_t){for(var hn=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)hn[gr-2]=arguments[gr];return K.prototype[dt].apply(Ie,hn)}}var L=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?D=>D&&AsyncContext.Snapshot.wrap(D):D=>D;function F(D){const K=D.length;if(K>0){const ae=Array(K);for(let Ie=0;Ie<K;Ie++)ae[Ie]=D[Ie];return ae}return[]}function q(D,K){for(let Ie=1;Ie<arguments.length;Ie++){const dt=arguments[Ie];var ae=typeof dt;if(ae=ae!="object"?ae:dt?Array.isArray(dt)?"array":ae:"null",ae=="array"||ae=="object"&&typeof dt.length=="number"){ae=D.length||0;const _t=dt.length||0;D.length=ae+_t;for(let hn=0;hn<_t;hn++)D[ae+hn]=dt[hn]}else D.push(dt)}}class ${constructor(K,ae){this.i=K,this.j=ae,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function X(D){p.setTimeout(()=>{throw D},0)}function te(){var D=ce;let K=null;return D.g&&(K=D.g,D.g=D.g.next,D.g||(D.h=null),K.next=null),K}class he{constructor(){this.h=this.g=null}add(K,ae){const Ie=ie.get();Ie.set(K,ae),this.h?this.h.next=Ie:this.g=Ie,this.h=Ie}}var ie=new $(()=>new me,D=>D.reset());class me{constructor(){this.next=this.g=this.h=null}set(K,ae){this.h=K,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,Ee=!1,ce=new he,ee=()=>{const D=Promise.resolve(void 0);ge=()=>{D.then(le)}};function le(){for(var D;D=te();){try{D.h.call(D.g)}catch(ae){X(ae)}var K=ie;K.j(D),K.h<100&&(K.h++,D.next=K.g,K.g=D)}Ee=!1}function se(){this.u=this.u,this.C=this.C}se.prototype.u=!1,se.prototype.dispose=function(){this.u||(this.u=!0,this.N())},se.prototype[Symbol.dispose]=function(){this.dispose()},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(D,K){this.type=D,this.g=this.target=K,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Q=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var D=!1,K=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const ae=()=>{};p.addEventListener("test",ae,K),p.removeEventListener("test",ae,K)}catch{}return D})();function de(D){return/^[\s\xa0]*$/.test(D)}function Ve(D,K){_e.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D&&this.init(D,K)}M(Ve,_e),Ve.prototype.init=function(D,K){const ae=this.type=D.type,Ie=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;this.target=D.target||D.srcElement,this.g=K,K=D.relatedTarget,K||(ae=="mouseover"?K=D.fromElement:ae=="mouseout"&&(K=D.toElement)),this.relatedTarget=K,Ie?(this.clientX=Ie.clientX!==void 0?Ie.clientX:Ie.pageX,this.clientY=Ie.clientY!==void 0?Ie.clientY:Ie.pageY,this.screenX=Ie.screenX||0,this.screenY=Ie.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=D.pointerType,this.state=D.state,this.i=D,D.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),Ce=0;function Xe(D,K,ae,Ie,dt){this.listener=D,this.proxy=null,this.src=K,this.type=ae,this.capture=!!Ie,this.ha=dt,this.key=++Ce,this.da=this.fa=!1}function tt(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function Be(D,K,ae){for(const Ie in D)K.call(ae,D[Ie],Ie,D)}function yt(D,K){for(const ae in D)K.call(void 0,D[ae],ae,D)}function Me(D){const K={};for(const ae in D)K[ae]=D[ae];return K}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function At(D,K){let ae,Ie;for(let dt=1;dt<arguments.length;dt++){Ie=arguments[dt];for(ae in Ie)D[ae]=Ie[ae];for(let _t=0;_t<et.length;_t++)ae=et[_t],Object.prototype.hasOwnProperty.call(Ie,ae)&&(D[ae]=Ie[ae])}}function Dt(D){this.src=D,this.g={},this.h=0}Dt.prototype.add=function(D,K,ae,Ie,dt){const _t=D.toString();D=this.g[_t],D||(D=this.g[_t]=[],this.h++);const hn=Kt(D,K,Ie,dt);return hn>-1?(K=D[hn],ae||(K.fa=!1)):(K=new Xe(K,this.src,_t,!!Ie,dt),K.fa=ae,D.push(K)),K};function Gt(D,K){const ae=K.type;if(ae in D.g){var Ie=D.g[ae],dt=Array.prototype.indexOf.call(Ie,K,void 0),_t;(_t=dt>=0)&&Array.prototype.splice.call(Ie,dt,1),_t&&(tt(K),D.g[ae].length==0&&(delete D.g[ae],D.h--))}}function Kt(D,K,ae,Ie){for(let dt=0;dt<D.length;++dt){const _t=D[dt];if(!_t.da&&_t.listener==K&&_t.capture==!!ae&&_t.ha==Ie)return dt}return-1}var dn="closure_lm_"+(Math.random()*1e6|0),Fn={};function An(D,K,ae,Ie,dt){if(Array.isArray(K)){for(let _t=0;_t<K.length;_t++)An(D,K[_t],ae,Ie,dt);return null}return ae=Lr(ae),D&&D[Ke]?D.J(K,ae,_(Ie)?!!Ie.capture:!1,dt):Tn(D,K,ae,!1,Ie,dt)}function Tn(D,K,ae,Ie,dt,_t){if(!K)throw Error("Invalid event type");const hn=_(dt)?!!dt.capture:!!dt;let gr=On(D);if(gr||(D[dn]=gr=new Dt(D)),ae=gr.add(K,ae,Ie,hn,_t),ae.proxy)return ae;if(Ie=Lt(),ae.proxy=Ie,Ie.src=D,Ie.listener=ae,D.addEventListener)Q||(dt=hn),dt===void 0&&(dt=!1),D.addEventListener(K.toString(),Ie,dt);else if(D.attachEvent)D.attachEvent(mn(K.toString()),Ie);else if(D.addListener&&D.removeListener)D.addListener(Ie);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function Lt(){function D(ae){return K.call(D.src,D.listener,ae)}const K=tr;return D}function Ft(D,K,ae,Ie,dt){if(Array.isArray(K))for(var _t=0;_t<K.length;_t++)Ft(D,K[_t],ae,Ie,dt);else Ie=_(Ie)?!!Ie.capture:!!Ie,ae=Lr(ae),D&&D[Ke]?(D=D.i,_t=String(K).toString(),_t in D.g&&(K=D.g[_t],ae=Kt(K,ae,Ie,dt),ae>-1&&(tt(K[ae]),Array.prototype.splice.call(K,ae,1),K.length==0&&(delete D.g[_t],D.h--)))):D&&(D=On(D))&&(K=D.g[K.toString()],D=-1,K&&(D=Kt(K,ae,Ie,dt)),(ae=D>-1?K[D]:null)&&gn(ae))}function gn(D){if(typeof D!="number"&&D&&!D.da){var K=D.src;if(K&&K[Ke])Gt(K.i,D);else{var ae=D.type,Ie=D.proxy;K.removeEventListener?K.removeEventListener(ae,Ie,D.capture):K.detachEvent?K.detachEvent(mn(ae),Ie):K.addListener&&K.removeListener&&K.removeListener(Ie),(ae=On(K))?(Gt(ae,D),ae.h==0&&(ae.src=null,K[dn]=null)):tt(D)}}}function mn(D){return D in Fn?Fn[D]:Fn[D]="on"+D}function tr(D,K){if(D.da)D=!0;else{K=new Ve(K,this);const ae=D.listener,Ie=D.ha||D.src;D.fa&&gn(D),D=ae.call(Ie,K)}return D}function On(D){return D=D[dn],D instanceof Dt?D:null}var jn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lr(D){return typeof D=="function"?D:(D[jn]||(D[jn]=function(K){return D.handleEvent(K)}),D[jn])}function $n(){se.call(this),this.i=new Dt(this),this.M=this,this.G=null}M($n,se),$n.prototype[Ke]=!0,$n.prototype.removeEventListener=function(D,K,ae,Ie){Ft(this,D,K,ae,Ie)};function Vn(D,K){var ae,Ie=D.G;if(Ie)for(ae=[];Ie;Ie=Ie.G)ae.push(Ie);if(D=D.M,Ie=K.type||K,typeof K=="string")K=new _e(K,D);else if(K instanceof _e)K.target=K.target||D;else{var dt=K;K=new _e(Ie,D),At(K,dt)}dt=!0;let _t,hn;if(ae)for(hn=ae.length-1;hn>=0;hn--)_t=K.g=ae[hn],dt=Tr(_t,Ie,!0,K)&&dt;if(_t=K.g=D,dt=Tr(_t,Ie,!0,K)&&dt,dt=Tr(_t,Ie,!1,K)&&dt,ae)for(hn=0;hn<ae.length;hn++)_t=K.g=ae[hn],dt=Tr(_t,Ie,!1,K)&&dt}$n.prototype.N=function(){if($n.Z.N.call(this),this.i){var D=this.i;for(const K in D.g){const ae=D.g[K];for(let Ie=0;Ie<ae.length;Ie++)tt(ae[Ie]);delete D.g[K],D.h--}}this.G=null},$n.prototype.J=function(D,K,ae,Ie){return this.i.add(String(D),K,!1,ae,Ie)},$n.prototype.K=function(D,K,ae,Ie){return this.i.add(String(D),K,!0,ae,Ie)};function Tr(D,K,ae,Ie){if(K=D.i.g[String(K)],!K)return!0;K=K.concat();let dt=!0;for(let _t=0;_t<K.length;++_t){const hn=K[_t];if(hn&&!hn.da&&hn.capture==ae){const gr=hn.listener,ls=hn.ha||hn.src;hn.fa&&Gt(D.i,hn),dt=gr.call(ls,Ie)!==!1&&dt}}return dt&&!Ie.defaultPrevented}function En(D,K){if(typeof D!="function")if(D&&typeof D.handleEvent=="function")D=T(D.handleEvent,D);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:p.setTimeout(D,K||0)}function Hi(D){D.g=En(()=>{D.g=null,D.i&&(D.i=!1,Hi(D))},D.l);const K=D.h;D.h=null,D.m.apply(null,K)}class nr extends se{constructor(K,ae){super(),this.m=K,this.l=ae,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(D){se.call(this),this.h=D,this.g={}}M(on,se);var en=[];function yn(D){Be(D.g,function(K,ae){this.g.hasOwnProperty(ae)&&gn(K)},D),D.g={}}on.prototype.N=function(){on.Z.N.call(this),yn(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bn=p.JSON.stringify,Pn=p.JSON.parse,Bn=class{stringify(D){return p.JSON.stringify(D,void 0)}parse(D){return p.JSON.parse(D,void 0)}};function Zn(){}function vi(){}var Sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Or(){_e.call(this,"d")}M(Or,_e);function vn(){_e.call(this,"c")}M(vn,_e);var Wn={},ri=null;function Ss(){return ri=ri||new $n}Wn.Ia="serverreachability";function Jo(D){_e.call(this,Wn.Ia,D)}M(Jo,_e);function Oe(D){const K=Ss();Vn(K,new Jo(K))}Wn.STAT_EVENT="statevent";function pe(D,K){_e.call(this,Wn.STAT_EVENT,D),this.stat=K}M(pe,_e);function fe(D){const K=Ss();Vn(K,new pe(K,D))}Wn.Ja="timingevent";function ke(D,K){_e.call(this,Wn.Ja,D),this.size=K}M(ke,_e);function Fe(D,K){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){D()},K)}function Ge(){this.g=!0}Ge.prototype.ua=function(){this.g=!1};function nt(D,K,ae,Ie,dt,_t){D.info(function(){if(D.g)if(_t){var hn="",gr=_t.split("&");for(let Hr=0;Hr<gr.length;Hr++){var ls=gr[Hr].split("=");if(ls.length>1){const Gi=ls[0];ls=ls[1];const rr=Gi.split("_");hn=rr.length>=2&&rr[1]=="type"?hn+(Gi+"="+ls+"&"):hn+(Gi+"=redacted&")}}}else hn=null;else hn=_t;return"XMLHTTP REQ ("+Ie+") [attempt "+dt+"]: "+K+`
`+ae+`
`+hn})}function rt(D,K,ae,Ie,dt,_t,hn){D.info(function(){return"XMLHTTP RESP ("+Ie+") [ attempt "+dt+"]: "+K+`
`+ae+`
`+_t+" "+hn})}function Ye(D,K,ae,Ie){D.info(function(){return"XMLHTTP TEXT ("+K+"): "+Yt(D,ae)+(Ie?" "+Ie:"")})}function ut(D,K){D.info(function(){return"TIMEOUT: "+K})}Ge.prototype.info=function(){};function Yt(D,K){if(!D.g)return K;if(!K)return null;try{const _t=JSON.parse(K);if(_t){for(D=0;D<_t.length;D++)if(Array.isArray(_t[D])){var ae=_t[D];if(!(ae.length<2)){var Ie=ae[1];if(Array.isArray(Ie)&&!(Ie.length<1)){var dt=Ie[0];if(dt!="noop"&&dt!="stop"&&dt!="close")for(let hn=1;hn<Ie.length;hn++)Ie[hn]=""}}}}return bn(_t)}catch{return K}}var Qt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$t={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xn;function Jn(){}M(Jn,Zn),Jn.prototype.g=function(){return new XMLHttpRequest},Xn=new Jn;function qn(D){return encodeURIComponent(String(D))}function ir(D){var K=1;D=D.split(":");const ae=[];for(;K>0&&D.length;)ae.push(D.shift()),K--;return D.length&&ae.push(D.join(":")),ae}function er(D,K,ae,Ie){this.j=D,this.i=K,this.l=ae,this.S=Ie||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vr}function Vr(){this.i=null,this.g="",this.h=!1}var Cr={},Kr={};function xi(D,K,ae){D.M=1,D.A=Va(zr(K)),D.u=ae,D.R=!0,No(D,null)}function No(D,K){D.F=Date.now(),Ul(D),D.B=zr(D.A);var ae=D.B,Ie=D.S;Array.isArray(Ie)||(Ie=[String(Ie)]),jl(ae.i,"t",Ie),D.C=0,ae=D.j.L,D.h=new Vr,D.g=Vh(D.j,ae?K:null,!D.u),D.P>0&&(D.O=new nr(T(D.Y,D,D.g),D.P)),K=D.V,ae=D.g,Ie=D.ba;var dt="readystatechange";Array.isArray(dt)||(dt&&(en[0]=dt.toString()),dt=en);for(let _t=0;_t<dt.length;_t++){const hn=An(ae,dt[_t],Ie||K.handleEvent,!1,K.h||K);if(!hn)break;K.g[hn.key]=hn}K=D.J?Me(D.J):{},D.u?(D.v||(D.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.B,D.v,D.u,K)):(D.v="GET",D.g.ea(D.B,D.v,null,K)),Oe(),nt(D.i,D.v,D.B,D.l,D.S,D.u)}er.prototype.ba=function(D){D=D.target;const K=this.O;K&&va(D)==3?K.j():this.Y(D)},er.prototype.Y=function(D){try{if(D==this.g)e:{const gr=va(this.g),ls=this.g.ya(),Hr=this.g.ca();if(!(gr<3)&&(gr!=3||this.g&&(this.h.h||this.g.la()||es(this.g)))){this.K||gr!=4||ls==7||(ls==8||Hr<=0?Oe(3):Oe(2)),_r(this);var K=this.g.ca();this.X=K;var ae=Cs(this);if(this.o=K==200,rt(this.i,this.v,this.B,this.l,this.S,gr,K),this.o){if(this.U&&!this.L){t:{if(this.g){var Ie,dt=this.g;if((Ie=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(Ie)){var _t=Ie;break t}}_t=null}if(D=_t)Ye(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Na(this,D);else{this.o=!1,this.m=3,fe(12),io(this),ea(this);break e}}if(this.R){D=!0;let Gi;for(;!this.K&&this.C<ae.length;)if(Gi=lc(this,ae),Gi==Kr){gr==4&&(this.m=4,fe(14),D=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(Gi==Cr){this.m=4,fe(15),Ye(this.i,this.l,ae,"[Invalid Chunk]"),D=!1;break}else Ye(this.i,this.l,Gi,null),Na(this,Gi);if(Hs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gr!=4||ae.length!=0||this.h.h||(this.m=1,fe(16),D=!1),this.o=this.o&&D,!D)Ye(this.i,this.l,ae,"[Invalid Chunked Response]"),io(this),ea(this);else if(ae.length>0&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.aa&&!hn.P&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),fc(hn),hn.P=!0,fe(11))}}else Ye(this.i,this.l,ae,null),Na(this,ae);gr==4&&io(this),this.o&&!this.K&&(gr==4?Bh(this.j,this):(this.o=!1,Ul(this)))}else yo(this.g),K==400&&ae.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),io(this),ea(this)}}}catch{}finally{}};function Cs(D){if(!Hs(D))return D.g.la();const K=es(D.g);if(K==="")return"";let ae="";const Ie=K.length,dt=va(D.g)==4;if(!D.h.i){if(typeof TextDecoder>"u")return io(D),ea(D),"";D.h.i=new p.TextDecoder}for(let _t=0;_t<Ie;_t++)D.h.h=!0,ae+=D.h.i.decode(K[_t],{stream:!(dt&&_t==Ie-1)});return K.length=0,D.h.g+=ae,D.C=0,D.h.g}function Hs(D){return D.g?D.v=="GET"&&D.M!=2&&D.j.Aa:!1}function lc(D,K){var ae=D.C,Ie=K.indexOf(`
`,ae);return Ie==-1?Kr:(ae=Number(K.substring(ae,Ie)),isNaN(ae)?Cr:(Ie+=1,Ie+ae>K.length?Kr:(K=K.slice(Ie,Ie+ae),D.C=Ie+ae,K)))}er.prototype.cancel=function(){this.K=!0,io(this)};function Ul(D){D.T=Date.now()+D.H,Nu(D,D.H)}function Nu(D,K){if(D.D!=null)throw Error("WatchDog timer not null");D.D=Fe(T(D.aa,D),K)}function _r(D){D.D&&(p.clearTimeout(D.D),D.D=null)}er.prototype.aa=function(){this.D=null;const D=Date.now();D-this.T>=0?(ut(this.i,this.B),this.M!=2&&(Oe(),fe(17)),io(this),this.m=2,ea(this)):Nu(this,this.T-D)};function ea(D){D.j.I==0||D.K||Bh(D.j,D)}function io(D){_r(D);var K=D.O;K&&typeof K.dispose=="function"&&K.dispose(),D.O=null,yn(D.V),D.g&&(K=D.g,D.g=null,K.abort(),K.dispose())}function Na(D,K){try{var ae=D.j;if(ae.I!=0&&(ae.g==D||Fa(ae.h,D))){if(!D.L&&Fa(ae.h,D)&&ae.I==3){try{var Ie=ae.Ba.g.parse(K)}catch{Ie=null}if(Array.isArray(Ie)&&Ie.length==3){var dt=Ie;if(dt[0]==0){e:if(!ae.v){if(ae.g)if(ae.g.F+3e3<D.F)pc(ae),ba(ae);else break e;qa(ae),fe(18)}}else ae.xa=dt[1],0<ae.xa-ae.K&&dt[2]<37500&&ae.F&&ae.A==0&&!ae.C&&(ae.C=Fe(T(ae.Va,ae),6e3));Ba(ae.h)<=1&&ae.ta&&(ae.ta=void 0)}else Uo(ae,11)}else if((D.L||ae.g==D)&&pc(ae),!de(K))for(dt=ae.Ba.g.parse(K),K=0;K<dt.length;K++){let Hr=dt[K];const Gi=Hr[0];if(!(Gi<=ae.K))if(ae.K=Gi,Hr=Hr[1],ae.I==2)if(Hr[0]=="c"){ae.M=Hr[1],ae.ba=Hr[2];const rr=Hr[3];rr!=null&&(ae.ka=rr,ae.j.info("VER="+ae.ka));const sa=Hr[4];sa!=null&&(ae.za=sa,ae.j.info("SVER="+ae.za));const Ga=Hr[5];Ga!=null&&typeof Ga=="number"&&Ga>0&&(Ie=1.5*Ga,ae.O=Ie,ae.j.info("backChannelRequestTimeoutMs_="+Ie)),Ie=ae;const Ta=D.g;if(Ta){const Xc=Ta.g?Ta.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var _t=Ie.h;_t.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(_t.j=_t.l,_t.g=new Set,_t.h&&(yl(_t,_t.h),_t.h=null))}if(Ie.G){const Wa=Ta.g?Ta.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(Ie.wa=Wa,mi(Ie.J,Ie.G,Wa))}}ae.I=3,ae.l&&ae.l.ra(),ae.aa&&(ae.T=Date.now()-D.F,ae.j.info("Handshake RTT: "+ae.T+"ms")),Ie=ae;var hn=D;if(Ie.na=Ap(Ie,Ie.L?Ie.ba:null,Ie.W),hn.L){ga(Ie.h,hn);var gr=hn,ls=Ie.O;ls&&(gr.H=ls),gr.D&&(_r(gr),Ul(gr)),Ie.g=hn}else Uu(Ie);ae.i.length>0&&Ua(ae)}else Hr[0]!="stop"&&Hr[0]!="close"||Uo(ae,7);else ae.I==3&&(Hr[0]=="stop"||Hr[0]=="close"?Hr[0]=="stop"?Uo(ae,7):Vu(ae):Hr[0]!="noop"&&ae.l&&ae.l.qa(Hr),ae.A=0)}}Oe(4)}catch{}}var hs=class{constructor(D,K){this.g=D,this.map=K}};function ta(D){this.l=D||10,p.PerformanceNavigationTiming?(D=p.performance.getEntriesByType("navigation"),D=D.length>0&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ma(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function Ba(D){return D.h?1:D.g?D.g.size:0}function Fa(D,K){return D.h?D.h==K:D.g?D.g.has(K):!1}function yl(D,K){D.g?D.g.add(K):D.h=K}function ga(D,K){D.h&&D.h==K?D.h=null:D.g&&D.g.has(K)&&D.g.delete(K)}ta.prototype.cancel=function(){if(this.i=cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function cc(D){if(D.h!=null)return D.i.concat(D.h.G);if(D.g!=null&&D.g.size!==0){let K=D.i;for(const ae of D.g.values())K=K.concat(ae.G);return K}return F(D.i)}var xt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function na(D,K){if(D){D=D.split("&");for(let ae=0;ae<D.length;ae++){const Ie=D[ae].indexOf("=");let dt,_t=null;Ie>=0?(dt=D[ae].substring(0,Ie),_t=D[ae].substring(Ie+1)):dt=D[ae],K(dt,_t?decodeURIComponent(_t.replace(/\+/g," ")):"")}}}function Zr(D){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;D instanceof Zr?(this.l=D.l,zs(this,D.j),this.o=D.o,this.g=D.g,so(this,D.u),this.h=D.h,Bu(this,Hc(D.i)),this.m=D.m):D&&(K=String(D).match(xt))?(this.l=!1,zs(this,K[1]||"",!0),this.o=nn(K[2]||""),this.g=nn(K[3]||"",!0),so(this,K[4]),this.h=nn(K[5]||"",!0),Bu(this,K[6]||"",!0),this.m=nn(K[7]||"")):(this.l=!1,this.i=new ia(null,this.l))}Zr.prototype.toString=function(){const D=[];var K=this.j;K&&D.push(sr(K,Gs,!0),":");var ae=this.g;return(ae||K=="file")&&(D.push("//"),(K=this.o)&&D.push(sr(K,Gs,!0),"@"),D.push(qn(ae).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.u,ae!=null&&D.push(":",String(ae))),(ae=this.h)&&(this.g&&ae.charAt(0)!="/"&&D.push("/"),D.push(sr(ae,ae.charAt(0)=="/"?or:ra,!0))),(ae=this.i.toString())&&D.push("?",ae),(ae=this.m)&&D.push("#",sr(ae,qc)),D.join("")},Zr.prototype.resolve=function(D){const K=zr(this);let ae=!!D.j;ae?zs(K,D.j):ae=!!D.o,ae?K.o=D.o:ae=!!D.g,ae?K.g=D.g:ae=D.u!=null;var Ie=D.h;if(ae)so(K,D.u);else if(ae=!!D.h){if(Ie.charAt(0)!="/")if(this.g&&!this.h)Ie="/"+Ie;else{var dt=K.h.lastIndexOf("/");dt!=-1&&(Ie=K.h.slice(0,dt+1)+Ie)}if(dt=Ie,dt==".."||dt==".")Ie="";else if(dt.indexOf("./")!=-1||dt.indexOf("/.")!=-1){Ie=dt.lastIndexOf("/",0)==0,dt=dt.split("/");const _t=[];for(let hn=0;hn<dt.length;){const gr=dt[hn++];gr=="."?Ie&&hn==dt.length&&_t.push(""):gr==".."?((_t.length>1||_t.length==1&&_t[0]!="")&&_t.pop(),Ie&&hn==dt.length&&_t.push("")):(_t.push(gr),Ie=!0)}Ie=_t.join("/")}else Ie=dt}return ae?K.h=Ie:ae=D.i.toString()!=="",ae?Bu(K,Hc(D.i)):ae=!!D.m,ae&&(K.m=D.m),K};function zr(D){return new Zr(D)}function zs(D,K,ae){D.j=ae?nn(K,!0):K,D.j&&(D.j=D.j.replace(/:$/,""))}function so(D,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);D.u=K}else D.u=null}function Bu(D,K,ae){K instanceof ia?(D.i=K,Fu(D.i,D.l)):(ae||(K=sr(K,As)),D.i=new ia(K,D.l))}function mi(D,K,ae){D.i.set(K,ae)}function Va(D){return mi(D,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),D}function nn(D,K){return D?K?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function sr(D,K,ae){return typeof D=="string"?(D=encodeURI(D).replace(K,Hn),ae&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Hn(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var Gs=/[#\/\?@]/g,ra=/[#\?:]/g,or=/[#\?]/g,As=/[#\?@]/g,qc=/#/g;function ia(D,K){this.h=this.g=null,this.i=D||null,this.j=!!K}function Ji(D){D.g||(D.g=new Map,D.h=0,D.i&&na(D.i,function(K,ae){D.add(decodeURIComponent(K.replace(/\+/g," ")),ae)}))}t=ia.prototype,t.add=function(D,K){Ji(this),this.i=null,D=$l(this,D);let ae=this.g.get(D);return ae||this.g.set(D,ae=[]),ae.push(K),this.h+=1,this};function bi(D,K){Ji(D),K=$l(D,K),D.g.has(K)&&(D.i=null,D.h-=D.g.get(K).length,D.g.delete(K))}function Nh(D,K){return Ji(D),K=$l(D,K),D.g.has(K)}t.forEach=function(D,K){Ji(this),this.g.forEach(function(ae,Ie){ae.forEach(function(dt){D.call(K,dt,Ie,this)},this)},this)};function ya(D,K){Ji(D);let ae=[];if(typeof K=="string")Nh(D,K)&&(ae=ae.concat(D.g.get($l(D,K))));else for(D=Array.from(D.g.values()),K=0;K<D.length;K++)ae=ae.concat(D[K]);return ae}t.set=function(D,K){return Ji(this),this.i=null,D=$l(this,D),Nh(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[K]),this.h+=1,this},t.get=function(D,K){return D?(D=ya(this,D),D.length>0?String(D[0]):K):K};function jl(D,K,ae){bi(D,K),ae.length>0&&(D.i=null,D.g.set($l(D,K),F(ae)),D.h+=ae.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],K=Array.from(this.g.keys());for(let Ie=0;Ie<K.length;Ie++){var ae=K[Ie];const dt=qn(ae);ae=ya(this,ae);for(let _t=0;_t<ae.length;_t++){let hn=dt;ae[_t]!==""&&(hn+="="+qn(ae[_t])),D.push(hn)}}return this.i=D.join("&")};function Hc(D){const K=new ia;return K.i=D.i,D.g&&(K.g=new Map(D.g),K.h=D.h),K}function $l(D,K){return K=String(K),D.j&&(K=K.toLowerCase()),K}function Fu(D,K){K&&!D.j&&(Ji(D),D.i=null,D.g.forEach(function(ae,Ie){const dt=Ie.toLowerCase();Ie!=dt&&(bi(this,Ie),jl(this,dt,ae))},D)),D.j=K}function Bo(D,K){const ae=new Ge;if(p.Image){const Ie=new Image;Ie.onload=I(Fo,ae,"TestLoadImage: loaded",!0,K,Ie),Ie.onerror=I(Fo,ae,"TestLoadImage: error",!1,K,Ie),Ie.onabort=I(Fo,ae,"TestLoadImage: abort",!1,K,Ie),Ie.ontimeout=I(Fo,ae,"TestLoadImage: timeout",!1,K,Ie),p.setTimeout(function(){Ie.ontimeout&&Ie.ontimeout()},1e4),Ie.src=D}else K(!1)}function uc(D,K){const ae=new Ge,Ie=new AbortController,dt=setTimeout(()=>{Ie.abort(),Fo(ae,"TestPingServer: timeout",!1,K)},1e4);fetch(D,{signal:Ie.signal}).then(_t=>{clearTimeout(dt),_t.ok?Fo(ae,"TestPingServer: ok",!0,K):Fo(ae,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(dt),Fo(ae,"TestPingServer: error",!1,K)})}function Fo(D,K,ae,Ie,dt){try{dt&&(dt.onload=null,dt.onerror=null,dt.onabort=null,dt.ontimeout=null),Ie(ae)}catch{}}function _a(){this.g=new Bn}function ds(D){this.i=D.Sb||null,this.h=D.ab||!1}M(ds,Zn),ds.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(D,K){$n.call(this),this.H=D,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}M(Ii,$n),t=Ii.prototype,t.open=function(D,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=D,this.D=K,this.readyState=1,as(this)},t.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};D&&(K.body=D),(this.H||p).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ql(this)),this.readyState=0},t.Pa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gc(this)}else D.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gc(D){D.j.read().then(D.Ma.bind(D)).catch(D.ga.bind(D))}t.Ma=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var K=D.value?D.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!D.done}))&&(this.response=this.responseText+=K)}D.done?ql(this):as(this),this.readyState==3&&Gc(this)}},t.Oa=function(D){this.g&&(this.response=this.responseText=D,ql(this))},t.Na=function(D){this.g&&(this.response=D,ql(this))},t.ga=function(){this.g&&ql(this)};function ql(D){D.readyState=4,D.l=null,D.j=null,D.B=null,as(D)}t.setRequestHeader=function(D,K){this.A.append(D,K)},t.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],K=this.h.entries();for(var ae=K.next();!ae.done;)ae=ae.value,D.push(ae[0]+": "+ae[1]),ae=K.next();return D.join(`\r
`)};function as(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function fs(D){let K="";return Be(D,function(ae,Ie){K+=Ie,K+=":",K+=ae,K+=`\r
`}),K}function Wc(D,K,ae){e:{for(Ie in ae){var Ie=!1;break e}Ie=!0}Ie||(ae=fs(ae),typeof D=="string"?ae!=null&&qn(ae):mi(D,K,ae))}function ii(D){$n.call(this),this.headers=new Map,this.L=D||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}M(ii,$n);var si=/^https?$/i,hc=["POST","PUT"];t=ii.prototype,t.Fa=function(D){this.H=D},t.ea=function(D,K,ae,Ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);K=K?K.toUpperCase():"GET",this.D=D,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xn.g(),this.g.onreadystatechange=L(T(this.Ca,this));try{this.B=!0,this.g.open(K,String(D),!0),this.B=!1}catch(_t){dc(this,_t);return}if(D=ae||"",ae=new Map(this.headers),Ie)if(Object.getPrototypeOf(Ie)===Object.prototype)for(var dt in Ie)ae.set(dt,Ie[dt]);else if(typeof Ie.keys=="function"&&typeof Ie.get=="function")for(const _t of Ie.keys())ae.set(_t,Ie.get(_t));else throw Error("Unknown input type for opt_headers: "+String(Ie));Ie=Array.from(ae.keys()).find(_t=>_t.toLowerCase()=="content-type"),dt=p.FormData&&D instanceof p.FormData,!(Array.prototype.indexOf.call(hc,K,void 0)>=0)||Ie||dt||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_t,hn]of ae)this.g.setRequestHeader(_t,hn);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(D),this.v=!1}catch(_t){dc(this,_t)}};function dc(D,K){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=K,D.o=5,_l(D),vl(D)}function _l(D){D.A||(D.A=!0,Vn(D,"complete"),Vn(D,"error"))}t.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=D||7,Vn(this,"complete"),Vn(this,"abort"),vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vl(this,!0)),ii.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ps(this):this.Xa())},t.Xa=function(){ps(this)};function ps(D){if(D.h&&typeof h<"u"){if(D.v&&va(D)==4)setTimeout(D.Ca.bind(D),0);else if(Vn(D,"readystatechange"),va(D)==4){D.h=!1;try{const _t=D.ca();e:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break e;default:K=!1}var ae;if(!(ae=K)){var Ie;if(Ie=_t===0){let hn=String(D.D).match(xt)[1]||null;!hn&&p.self&&p.self.location&&(hn=p.self.location.protocol.slice(0,-1)),Ie=!si.test(hn?hn.toLowerCase():"")}ae=Ie}if(ae)Vn(D,"complete"),Vn(D,"success");else{D.o=6;try{var dt=va(D)>2?D.g.statusText:""}catch{dt=""}D.l=dt+" ["+D.ca()+"]",_l(D)}}finally{vl(D)}}}}function vl(D,K){if(D.g){D.m&&(clearTimeout(D.m),D.m=null);const ae=D.g;D.g=null,K||Vn(D,"ready");try{ae.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function va(D){return D.g?D.g.readyState:0}t.ca=function(){try{return va(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(D){if(this.g){var K=this.g.responseText;return D&&K.indexOf(D)==0&&(K=K.substring(D.length)),Pn(K)}};function es(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.F){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function yo(D){const K={};D=(D.g&&va(D)>=2&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ie=0;Ie<D.length;Ie++){if(de(D[Ie]))continue;var ae=ir(D[Ie]);const dt=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const _t=K[dt]||[];K[dt]=_t,_t.push(ae)}yt(K,function(Ie){return Ie.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(D,K,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[D]||K}function Yc(D){this.za=0,this.i=[],this.j=new Ge,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xa("failFast",!1,D),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xa("baseRetryDelayMs",5e3,D),this.Za=xa("retryDelaySeedMs",1e4,D),this.Ta=xa("forwardChannelMaxRetries",2,D),this.va=xa("forwardChannelRequestTimeoutMs",2e4,D),this.ma=D&&D.xmlHttpFactory||void 0,this.Ua=D&&D.Rb||void 0,this.Aa=D&&D.useFetchStreams||!1,this.O=void 0,this.L=D&&D.supportsCrossDomainXhr||!1,this.M="",this.h=new ta(D&&D.concurrentRequestLimit),this.Ba=new _a,this.S=D&&D.fastHandshake||!1,this.R=D&&D.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=D&&D.Pb||!1,D&&D.ua&&this.j.ua(),D&&D.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&D&&D.detectBufferingProxy||!1,this.ia=void 0,D&&D.longPollingTimeout&&D.longPollingTimeout>0&&(this.ia=D.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Yc.prototype,t.ka=8,t.I=1,t.connect=function(D,K,ae,Ie){fe(0),this.W=D,this.H=K||{},ae&&Ie!==void 0&&(this.H.OSID=ae,this.H.OAID=Ie),this.F=this.X,this.J=Ap(this,null,this.W),Ua(this)};function Vu(D){if(Vo(D),D.I==3){var K=D.V++,ae=zr(D.J);if(mi(ae,"SID",D.M),mi(ae,"RID",K),mi(ae,"TYPE","terminate"),xl(D,ae),K=new er(D,D.j,K),K.M=2,K.A=Va(zr(ae)),ae=!1,p.navigator&&p.navigator.sendBeacon)try{ae=p.navigator.sendBeacon(K.A.toString(),"")}catch{}!ae&&p.Image&&(new Image().src=K.A,ae=!0),ae||(K.g=Vh(K.j,null),K.g.ea(K.A)),K.F=Date.now(),Ul(K)}Nr(D)}function ba(D){D.g&&(fc(D),D.g.cancel(),D.g=null)}function Vo(D){ba(D),D.v&&(p.clearTimeout(D.v),D.v=null),pc(D),D.h.cancel(),D.m&&(typeof D.m=="number"&&p.clearTimeout(D.m),D.m=null)}function Ua(D){if(!ma(D.h)&&!D.m){D.m=!0;var K=D.Ea;ge||ee(),Ee||(ge(),Ee=!0),ce.add(K,D),D.D=0}}function ja(D,K){return Ba(D.h)>=D.h.j-(D.m?1:0)?!1:D.m?(D.i=K.G.concat(D.i),!0):D.I==1||D.I==2||D.D>=(D.Sa?0:D.Ta)?!1:(D.m=Fe(T(D.Ea,D,K),Fh(D,D.D)),D.D++,!0)}t.Ea=function(D){if(this.m)if(this.m=null,this.I==1){if(!D){this.V=Math.floor(Math.random()*1e5),D=this.V++;const dt=new er(this,this.j,D);let _t=this.o;if(this.U&&(_t?(_t=Me(_t),At(_t,this.U)):_t=this.U),this.u!==null||this.R||(dt.J=_t,_t=null),this.S)e:{for(var K=0,ae=0;ae<this.i.length;ae++){t:{var Ie=this.i[ae];if("__data__"in Ie.map&&(Ie=Ie.map.__data__,typeof Ie=="string")){Ie=Ie.length;break t}Ie=void 0}if(Ie===void 0)break;if(K+=Ie,K>4096){K=ae;break e}if(K===4096||ae===this.i.length-1){K=ae+1;break e}}K=1e3}else K=1e3;K=$a(this,dt,K),ae=zr(this.J),mi(ae,"RID",D),mi(ae,"CVER",22),this.G&&mi(ae,"X-HTTP-Session-Id",this.G),xl(this,ae),_t&&(this.R?K="headers="+qn(fs(_t))+"&"+K:this.u&&Wc(ae,this.u,_t)),yl(this.h,dt),this.Ra&&mi(ae,"TYPE","init"),this.S?(mi(ae,"$req",K),mi(ae,"SID","null"),dt.U=!0,xi(dt,ae,null)):xi(dt,ae,K),this.I=2}}else this.I==3&&(D?wa(this,D):this.i.length==0||ma(this.h)||wa(this))};function wa(D,K){var ae;K?ae=K.l:ae=D.V++;const Ie=zr(D.J);mi(Ie,"SID",D.M),mi(Ie,"RID",ae),mi(Ie,"AID",D.K),xl(D,Ie),D.u&&D.o&&Wc(Ie,D.u,D.o),ae=new er(D,D.j,ae,D.D+1),D.u===null&&(ae.J=D.o),K&&(D.i=K.G.concat(D.i)),K=$a(D,ae,1e3),ae.H=Math.round(D.va*.5)+Math.round(D.va*.5*Math.random()),yl(D.h,ae),xi(ae,Ie,K)}function xl(D,K){D.H&&Be(D.H,function(ae,Ie){mi(K,Ie,ae)}),D.l&&Be({},function(ae,Ie){mi(K,Ie,ae)})}function $a(D,K,ae){ae=Math.min(D.i.length,ae);const Ie=D.l?T(D.l.Ka,D.l,D):null;e:{var dt=D.i;let gr=-1;for(;;){const ls=["count="+ae];gr==-1?ae>0?(gr=dt[0].g,ls.push("ofs="+gr)):gr=0:ls.push("ofs="+gr);let Hr=!0;for(let Gi=0;Gi<ae;Gi++){var _t=dt[Gi].g;const rr=dt[Gi].map;if(_t-=gr,_t<0)gr=Math.max(0,dt[Gi].g-100),Hr=!1;else try{_t="req"+_t+"_"||"";try{var hn=rr instanceof Map?rr:Object.entries(rr);for(const[sa,Ga]of hn){let Ta=Ga;_(Ga)&&(Ta=bn(Ga)),ls.push(_t+sa+"="+encodeURIComponent(Ta))}}catch(sa){throw ls.push(_t+"type="+encodeURIComponent("_badmap")),sa}}catch{Ie&&Ie(rr)}}if(Hr){hn=ls.join("&");break e}}hn=void 0}return D=D.i.splice(0,ae),K.G=D,hn}function Uu(D){if(!D.g&&!D.v){D.Y=1;var K=D.Da;ge||ee(),Ee||(ge(),Ee=!0),ce.add(K,D),D.A=0}}function qa(D){return D.g||D.v||D.A>=3?!1:(D.Y++,D.v=Fe(T(D.Da,D),Fh(D,D.A)),D.A++,!0)}t.Da=function(){if(this.v=null,uf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var D=4*this.T;this.j.info("BP detection timer enabled: "+D),this.B=Fe(T(this.Wa,this),D)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),ba(this),uf(this))};function fc(D){D.B!=null&&(p.clearTimeout(D.B),D.B=null)}function uf(D){D.g=new er(D,D.j,"rpc",D.Y),D.u===null&&(D.g.J=D.o),D.g.P=0;var K=zr(D.na);mi(K,"RID","rpc"),mi(K,"SID",D.M),mi(K,"AID",D.K),mi(K,"CI",D.F?"0":"1"),!D.F&&D.ia&&mi(K,"TO",D.ia),mi(K,"TYPE","xmlhttp"),xl(D,K),D.u&&D.o&&Wc(K,D.u,D.o),D.O&&(D.g.H=D.O);var ae=D.g;D=D.ba,ae.M=1,ae.A=Va(zr(K)),ae.u=null,ae.R=!0,No(ae,D)}t.Va=function(){this.C!=null&&(this.C=null,ba(this),qa(this),fe(19))};function pc(D){D.C!=null&&(p.clearTimeout(D.C),D.C=null)}function Bh(D,K){var ae=null;if(D.g==K){pc(D),fc(D),D.g=null;var Ie=2}else if(Fa(D.h,K))ae=K.G,ga(D.h,K),Ie=1;else return;if(D.I!=0){if(K.o)if(Ie==1){ae=K.u?K.u.length:0,K=Date.now()-K.F;var dt=D.D;Ie=Ss(),Vn(Ie,new ke(Ie,ae)),Ua(D)}else Uu(D);else if(dt=K.m,dt==3||dt==0&&K.X>0||!(Ie==1&&ja(D,K)||Ie==2&&qa(D)))switch(ae&&ae.length>0&&(K=D.h,K.i=K.i.concat(ae)),dt){case 1:Uo(D,5);break;case 4:Uo(D,10);break;case 3:Uo(D,6);break;default:Uo(D,2)}}}function Fh(D,K){let ae=D.Qa+Math.floor(Math.random()*D.Za);return D.isActive()||(ae*=2),ae*K}function Uo(D,K){if(D.j.info("Error code "+K),K==2){var ae=T(D.bb,D),Ie=D.Ua;const dt=!Ie;Ie=new Zr(Ie||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||zs(Ie,"https"),Va(Ie),dt?Bo(Ie.toString(),ae):uc(Ie.toString(),ae)}else fe(2);D.I=0,D.l&&D.l.pa(K),Nr(D),Vo(D)}t.bb=function(D){D?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Nr(D){if(D.I=0,D.ja=[],D.l){const K=cc(D.h);(K.length!=0||D.i.length!=0)&&(q(D.ja,K),q(D.ja,D.i),D.h.i.length=0,F(D.i),D.i.length=0),D.l.oa()}}function Ap(D,K,ae){var Ie=ae instanceof Zr?zr(ae):new Zr(ae);if(Ie.g!="")K&&(Ie.g=K+"."+Ie.g),so(Ie,Ie.u);else{var dt=p.location;Ie=dt.protocol,K=K?K+"."+dt.hostname:dt.hostname,dt=+dt.port;const _t=new Zr(null);Ie&&zs(_t,Ie),K&&(_t.g=K),dt&&so(_t,dt),ae&&(_t.h=ae),Ie=_t}return ae=D.G,K=D.wa,ae&&K&&mi(Ie,ae,K),mi(Ie,"VER",D.ka),xl(D,Ie),Ie}function Vh(D,K,ae){if(K&&!D.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=D.Aa&&!D.ma?new ii(new ds({ab:ae})):new ii(D.ma),K.Fa(D.L),K}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hf(){}t=hf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hl(){}Hl.prototype.g=function(D,K){return new _o(D,K)};function _o(D,K){$n.call(this),this.g=new Yc(K),this.l=D,this.h=K&&K.messageUrlParams||null,D=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(D?D["X-WebChannel-Content-Type"]=K.messageContentType:D={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(D?D["X-WebChannel-Client-Profile"]=K.sa:D={"X-WebChannel-Client-Profile":K.sa}),this.g.U=D,(D=K&&K.Qb)&&!de(D)&&(this.g.u=D),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!de(K)&&(this.g.G=K,D=this.h,D!==null&&K in D&&(D=this.h,K in D&&delete D[K])),this.j=new Ha(this)}M(_o,$n),_o.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_o.prototype.close=function(){Vu(this.g)},_o.prototype.o=function(D){var K=this.g;if(typeof D=="string"){var ae={};ae.__data__=D,D=ae}else this.v&&(ae={},ae.__data__=bn(D),D=ae);K.i.push(new hs(K.Ya++,D)),K.I==3&&Ua(K)},_o.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,_o.Z.N.call(this)};function Uh(D){Or.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var K=D.__sm__;if(K){e:{for(const ae in K){D=ae;break e}D=void 0}(this.i=D)&&(D=this.i,K=K!==null&&D in K?K[D]:void 0),this.data=K}else this.data=D}M(Uh,Or);function mc(){vn.call(this),this.status=1}M(mc,vn);function Ha(D){this.g=D}M(Ha,hf),Ha.prototype.ra=function(){Vn(this.g,"a")},Ha.prototype.qa=function(D){Vn(this.g,new Uh(D))},Ha.prototype.pa=function(D){Vn(this.g,new mc)},Ha.prototype.oa=function(){Vn(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,_o.prototype.send=_o.prototype.o,_o.prototype.open=_o.prototype.m,_o.prototype.close=_o.prototype.close,vB=function(){return new Hl},_B=function(){return Ss()},yB=Wn,II={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qt.NO_ERROR=0,Qt.TIMEOUT=8,Qt.HTTP_ERROR=6,DT=Qt,$t.COMPLETE="complete",gB=$t,vi.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",$n.prototype.listen=$n.prototype.J,Gx=vi,ii.prototype.listenOnce=ii.prototype.K,ii.prototype.getLastError=ii.prototype.Ha,ii.prototype.getLastErrorCode=ii.prototype.ya,ii.prototype.getStatus=ii.prototype.ca,ii.prototype.getResponseJson=ii.prototype.La,ii.prototype.getResponseText=ii.prototype.la,ii.prototype.send=ii.prototype.ea,ii.prototype.setWithCredentials=ii.prototype.Fa,mB=ii}).apply(typeof Ww<"u"?Ww:typeof self<"u"?self:typeof window<"u"?window:{});const oO="@firebase/firestore",aO="4.9.2";class hl{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hl.UNAUTHENTICATED=new hl(null),hl.GOOGLE_CREDENTIALS=new hl("google-credentials-uid"),hl.FIRST_PARTY=new hl("first-party-uid"),hl.MOCK_USER=new hl("mock-user");let Yv="12.3.0";const Cy=new vR("@firebase/firestore");function J_(){return Cy.logLevel}function Dn(t,...e){if(Cy.logLevel<=ci.DEBUG){const n=e.map(RR);Cy.debug(`Firestore (${Yv}): ${t}`,...n)}}function xp(t,...e){if(Cy.logLevel<=ci.ERROR){const n=e.map(RR);Cy.error(`Firestore (${Yv}): ${t}`,...n)}}function Sv(t,...e){if(Cy.logLevel<=ci.WARN){const n=e.map(RR);Cy.warn(`Firestore (${Yv}): ${t}`,...n)}}function RR(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function mr(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xB(t,r,n)}function xB(t,e,n){let r=`FIRESTORE (${Yv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xp(r),new Error(r)}function Qi(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||xB(e,s,r)}function Mr(t,e){return t}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mn extends Lu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cp{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class bB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(hl.UNAUTHENTICATED)))}shutdown(){}}class XW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KW{constructor(e){this.t=e,this.currentUser=hl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qi(this.o===void 0,42304);let r=this.i;const s=o=>this.i!==r?(r=this.i,n(o)):Promise.resolve();let h=new cp;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new cp,e.enqueueRetryable((()=>s(this.currentUser)))};const p=()=>{const o=h;e.enqueueRetryable((async()=>{await o.promise,await s(this.currentUser)}))},_=o=>{Dn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((o=>_(o))),setTimeout((()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?_(o):(Dn("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new cp)}}),0),p()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Dn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string",31837,{l:r}),new bB(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qi(e===null||typeof e=="string",2055,{h:e}),new hl(e)}}class ZW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(hl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class lO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qi(this.o===void 0,3512);const r=h=>{h.error!=null&&Dn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,Dn("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>r(h)))};const s=h=>{Dn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>s(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?s(h):Dn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new lO(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qi(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lO(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function eY(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class DR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=eY(40);for(let h=0;h<s.length;++h)r.length<20&&s[h]<n&&(r+=e.charAt(s[h]%62))}return r}}function ui(t,e){return t<e?-1:t>e?1:0}function MI(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),h=e.charAt(r);if(s!==h)return uA(s)===uA(h)?ui(s,h):uA(s)?1:-1}return ui(t.length,e.length)}const tY=55296,nY=57343;function uA(t){const e=t.charCodeAt(0);return e>=tY&&e<=nY}function Cv(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const cO="__name__";class Dd{constructor(e,n,r){n===void 0?n=0:n>e.length&&mr(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&mr(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dd?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const h=Dd.compareSegments(e.get(s),n.get(s));if(h!==0)return h}return ui(e.length,n.length)}static compareSegments(e,n){const r=Dd.isNumericId(e),s=Dd.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Dd.extractNumericId(e).compare(Dd.extractNumericId(n)):MI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zm.fromString(e.substring(4,e.length-2))}}class xs extends Dd{construct(e,n,r){return new xs(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Mn(Ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new xs(n)}static emptyPath(){return new xs([])}}const rY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class La extends Dd{construct(e,n,r){return new La(e,n,r)}static isValidIdentifier(e){return rY.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),La.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cO}static keyField(){return new La([cO])}static fromServerFormat(e){const n=[];let r="",s=0;const h=()=>{if(r.length===0)throw new Mn(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let p=!1;for(;s<e.length;){const _=e[s];if(_==="\\"){if(s+1===e.length)throw new Mn(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[s+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new Mn(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=o,s+=2}else _==="`"?(p=!p,s++):_!=="."||p?(r+=_,s++):(h(),s++)}if(h(),p)throw new Mn(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new La(n)}static emptyPath(){return new La([])}}class Qn{constructor(e){this.path=e}static fromPath(e){return new Qn(xs.fromString(e))}static fromName(e){return new Qn(xs.fromString(e).popFirst(5))}static empty(){return new Qn(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qn(new xs(e.slice()))}}function wB(t,e,n){if(!n)throw new Mn(Ht.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iY(t,e,n,r){if(e===!0&&r===!0)throw new Mn(Ht.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uO(t){if(!Qn.isDocumentKey(t))throw new Mn(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hO(t){if(Qn.isDocumentKey(t))throw new Mn(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uS(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mr(12329,{type:typeof t})}function Gm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Mn(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uS(t);throw new Mn(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Po(t,e){const n={typeString:t};return e&&(n.value=e),n}function i1(t,e){if(!TB(t))throw new Mn(Ht.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,h="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const p=t[r];if(s&&typeof p!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(h!==void 0&&p!==h.value){n=`Expected '${r}' field to equal '${h.value}'`;break}}if(n)throw new Mn(Ht.INVALID_ARGUMENT,n);return!0}const dO=-62135596800,fO=1e6;class Es{static now(){return Es.fromMillis(Date.now())}static fromDate(e){return Es.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fO);return new Es(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Mn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mn(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dO)throw new Mn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mn(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fO}_compareTo(e){return this.seconds===e.seconds?ui(this.nanoseconds,e.nanoseconds):ui(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Es._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(i1(e,Es._jsonSchema))return new Es(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Es._jsonSchemaVersion="firestore/timestamp/1.0",Es._jsonSchema={type:Po("string",Es._jsonSchemaVersion),seconds:Po("number"),nanoseconds:Po("number")};class Er{static fromTimestamp(e){return new Er(e)}static min(){return new Er(new Es(0,0))}static max(){return new Er(new Es(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Rb=-1;function sY(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Er.fromTimestamp(r===1e9?new Es(n+1,0):new Es(n,r));return new Wm(s,Qn.empty(),e)}function oY(t){return new Wm(t.readTime,t.key,Rb)}class Wm{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wm(Er.min(),Qn.empty(),Rb)}static max(){return new Wm(Er.max(),Qn.empty(),Rb)}}function aY(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Qn.comparator(t.documentKey,e.documentKey),n!==0?n:ui(t.largestBatchId,e.largestBatchId))}const lY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Xv(t){if(t.code!==Ht.FAILED_PRECONDITION||t.message!==lY)throw t;Dn("LocalStore","Unexpectedly lost primary lease")}class Wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Wt(((r,s)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(r,s)},this.catchCallback=h=>{this.wrapFailure(n,h).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Wt?n:Wt.resolve(n)}catch(n){return Wt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Wt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Wt.reject(n)}static resolve(e){return new Wt(((n,r)=>{n(e)}))}static reject(e){return new Wt(((n,r)=>{r(e)}))}static waitFor(e){return new Wt(((n,r)=>{let s=0,h=0,p=!1;e.forEach((_=>{++s,_.next((()=>{++h,p&&h===s&&n()}),(o=>r(o)))})),p=!0,h===s&&n()}))}static or(e){let n=Wt.resolve(!1);for(const r of e)n=n.next((s=>s?Wt.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,h)=>{r.push(n.call(this,s,h))})),this.waitFor(r)}static mapArray(e,n){return new Wt(((r,s)=>{const h=e.length,p=new Array(h);let _=0;for(let o=0;o<h;o++){const T=o;n(e[T]).next((I=>{p[T]=I,++_,_===h&&r(p)}),(I=>s(I)))}}))}static doWhile(e,n){return new Wt(((r,s)=>{const h=()=>{e()===!0?n().next((()=>{h()}),s):r()};h()}))}}function uY(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kv(t){return t.name==="IndexedDbTransactionError"}class hS{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hS.ce=-1;const kR=-1;function dS(t){return t==null}function mE(t){return t===0&&1/t==-1/0}function hY(t){return typeof t=="number"&&Number.isInteger(t)&&!mE(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const EB="";function dY(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pO(e)),e=fY(t.get(n),e);return pO(e)}function fY(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const h=t.charAt(s);switch(h){case"\0":n+="";break;case EB:n+="";break;default:n+=h}}return n}function pO(t){return t+EB+""}function mO(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oy(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qs{constructor(e,n){this.comparator=e,this.root=n||ka.EMPTY}insert(e,n){return new qs(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ka.BLACK,null,null))}remove(e){return new qs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ka.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yw(this.root,e,this.comparator,!0)}}class Yw{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=n?r(e.key,n):1,n&&s&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ka{constructor(e,n,r,s,h){this.key=e,this.value=n,this.color=r??ka.RED,this.left=s??ka.EMPTY,this.right=h??ka.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,h){return new ka(e??this.key,n??this.value,r??this.color,s??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const h=r(e,s.key);return s=h<0?s.copy(null,null,null,s.left.insert(e,n,r),null):h===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ka.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ka.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ka.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ka.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mr(27949);return e+(this.isRed()?0:1)}}ka.EMPTY=null,ka.RED=!0,ka.BLACK=!1;ka.EMPTY=new class{constructor(){this.size=0}get key(){throw mr(57766)}get value(){throw mr(16141)}get color(){throw mr(16727)}get left(){throw mr(29726)}get right(){throw mr(36894)}copy(e,n,r,s,h){return this}insert(e,n,r){return new ka(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qo{constructor(e){this.comparator=e,this.data=new qs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gO(this.data.getIterator())}getIteratorFrom(e){return new gO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,h=r.getNext().key;if(this.comparator(s,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qo(this.comparator);return n.data=e,n}}class gO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ch{constructor(e){this.fields=e,e.sort(La.comparator)}static empty(){return new Ch([])}unionWith(e){let n=new Qo(La.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ch(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cv(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class CB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Oa{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new CB("Invalid base64 string: "+h):h}})(e);return new Oa(n)}static fromUint8Array(e){const n=(function(s){let h="";for(let p=0;p<s.length;++p)h+=String.fromCharCode(s[p]);return h})(e);return new Oa(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ui(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Oa.EMPTY_BYTE_STRING=new Oa("");const pY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ym(t){if(Qi(!!t,39018),typeof t=="string"){let e=0;const n=pY.exec(t);if(Qi(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fo(t.seconds),nanos:fo(t.nanos)}}function fo(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xm(t){return typeof t=="string"?Oa.fromBase64String(t):Oa.fromUint8Array(t)}const AB="server_timestamp",IB="__type__",MB="__previous_value__",RB="__local_write_time__";function PR(t){return(t?.mapValue?.fields||{})[IB]?.stringValue===AB}function fS(t){const e=t.mapValue.fields[MB];return PR(e)?fS(e):e}function Db(t){const e=Ym(t.mapValue.fields[RB].timestampValue);return new Es(e.seconds,e.nanos)}class mY{constructor(e,n,r,s,h,p,_,o,T,I){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.longPollingOptions=o,this.useFetchStreams=T,this.isUsingEmulator=I}}const gE="(default)";class kb{constructor(e,n){this.projectId=e,this.database=n||gE}static empty(){return new kb("","")}get isDefaultDatabase(){return this.database===gE}isEqual(e){return e instanceof kb&&e.projectId===this.projectId&&e.database===this.database}}const DB="__type__",gY="__max__",Xw={mapValue:{}},kB="__vector__",yE="value";function Km(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?PR(t)?4:_Y(t)?9007199254740991:yY(t)?10:11:mr(28295,{value:t})}function rf(t,e){if(t===e)return!0;const n=Km(t);if(n!==Km(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Db(t).isEqual(Db(e));case 3:return(function(s,h){if(typeof s.timestampValue=="string"&&typeof h.timestampValue=="string"&&s.timestampValue.length===h.timestampValue.length)return s.timestampValue===h.timestampValue;const p=Ym(s.timestampValue),_=Ym(h.timestampValue);return p.seconds===_.seconds&&p.nanos===_.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,h){return Xm(s.bytesValue).isEqual(Xm(h.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,h){return fo(s.geoPointValue.latitude)===fo(h.geoPointValue.latitude)&&fo(s.geoPointValue.longitude)===fo(h.geoPointValue.longitude)})(t,e);case 2:return(function(s,h){if("integerValue"in s&&"integerValue"in h)return fo(s.integerValue)===fo(h.integerValue);if("doubleValue"in s&&"doubleValue"in h){const p=fo(s.doubleValue),_=fo(h.doubleValue);return p===_?mE(p)===mE(_):isNaN(p)&&isNaN(_)}return!1})(t,e);case 9:return Cv(t.arrayValue.values||[],e.arrayValue.values||[],rf);case 10:case 11:return(function(s,h){const p=s.mapValue.fields||{},_=h.mapValue.fields||{};if(mO(p)!==mO(_))return!1;for(const o in p)if(p.hasOwnProperty(o)&&(_[o]===void 0||!rf(p[o],_[o])))return!1;return!0})(t,e);default:return mr(52216,{left:t})}}function Pb(t,e){return(t.values||[]).find((n=>rf(n,e)))!==void 0}function Av(t,e){if(t===e)return 0;const n=Km(t),r=Km(e);if(n!==r)return ui(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ui(t.booleanValue,e.booleanValue);case 2:return(function(h,p){const _=fo(h.integerValue||h.doubleValue),o=fo(p.integerValue||p.doubleValue);return _<o?-1:_>o?1:_===o?0:isNaN(_)?isNaN(o)?0:-1:1})(t,e);case 3:return yO(t.timestampValue,e.timestampValue);case 4:return yO(Db(t),Db(e));case 5:return MI(t.stringValue,e.stringValue);case 6:return(function(h,p){const _=Xm(h),o=Xm(p);return _.compareTo(o)})(t.bytesValue,e.bytesValue);case 7:return(function(h,p){const _=h.split("/"),o=p.split("/");for(let T=0;T<_.length&&T<o.length;T++){const I=ui(_[T],o[T]);if(I!==0)return I}return ui(_.length,o.length)})(t.referenceValue,e.referenceValue);case 8:return(function(h,p){const _=ui(fo(h.latitude),fo(p.latitude));return _!==0?_:ui(fo(h.longitude),fo(p.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _O(t.arrayValue,e.arrayValue);case 10:return(function(h,p){const _=h.fields||{},o=p.fields||{},T=_[yE]?.arrayValue,I=o[yE]?.arrayValue,M=ui(T?.values?.length||0,I?.values?.length||0);return M!==0?M:_O(T,I)})(t.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Xw.mapValue&&p===Xw.mapValue)return 0;if(h===Xw.mapValue)return 1;if(p===Xw.mapValue)return-1;const _=h.fields||{},o=Object.keys(_),T=p.fields||{},I=Object.keys(T);o.sort(),I.sort();for(let M=0;M<o.length&&M<I.length;++M){const L=MI(o[M],I[M]);if(L!==0)return L;const F=Av(_[o[M]],T[I[M]]);if(F!==0)return F}return ui(o.length,I.length)})(t.mapValue,e.mapValue);default:throw mr(23264,{he:n})}}function yO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ui(t,e);const n=Ym(t),r=Ym(e),s=ui(n.seconds,r.seconds);return s!==0?s:ui(n.nanos,r.nanos)}function _O(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const h=Av(n[s],r[s]);if(h)return h}return ui(n.length,r.length)}function Iv(t){return RI(t)}function RI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ym(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Xm(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Qn.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const h of n.values||[])s?s=!1:r+=",",r+=RI(h);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",h=!0;for(const p of r)h?h=!1:s+=",",s+=`${p}:${RI(n.fields[p])}`;return s+"}"})(t.mapValue):mr(61005,{value:t})}function kT(t){switch(Km(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fS(t);return e?16+kT(e):16;case 5:return 2*t.stringValue.length;case 6:return Xm(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,h)=>s+kT(h)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Oy(r.fields,((h,p)=>{s+=h.length+kT(p)})),s})(t.mapValue);default:throw mr(13486,{value:t})}}function vO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function DI(t){return!!t&&"integerValue"in t}function LR(t){return!!t&&"arrayValue"in t}function xO(t){return!!t&&"nullValue"in t}function bO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function PT(t){return!!t&&"mapValue"in t}function yY(t){return(t?.mapValue?.fields||{})[DB]?.stringValue===kB}function ub(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Oy(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ub(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ub(t.arrayValue.values[n]);return e}return{...t}}function _Y(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gY}class Au{constructor(e){this.value=e}static empty(){return new Au({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!PT(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ub(n)}setAll(e){let n=La.emptyPath(),r={},s=[];e.forEach(((p,_)=>{if(!n.isImmediateParentOf(_)){const o=this.getFieldsMap(n);this.applyChanges(o,r,s),r={},s=[],n=_.popLast()}p?r[_.lastSegment()]=ub(p):s.push(_.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,r,s)}delete(e){const n=this.field(e.popLast());PT(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rf(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];PT(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Oy(n,((s,h)=>e[s]=h));for(const s of r)delete e[s]}clone(){return new Au(ub(this.value))}}function PB(t){const e=[];return Oy(t.fields,((n,r)=>{const s=new La([n]);if(PT(r)){const h=PB(r.mapValue).fields;if(h.length===0)e.push(s);else for(const p of h)e.push(s.child(p))}else e.push(s)})),new Ch(e)}class dl{constructor(e,n,r,s,h,p,_){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=h,this.data=p,this.documentState=_}static newInvalidDocument(e){return new dl(e,0,Er.min(),Er.min(),Er.min(),Au.empty(),0)}static newFoundDocument(e,n,r,s){return new dl(e,1,n,Er.min(),r,s,0)}static newNoDocument(e,n){return new dl(e,2,n,Er.min(),Er.min(),Au.empty(),0)}static newUnknownDocument(e,n){return new dl(e,3,n,Er.min(),Er.min(),Au.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Er.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Au.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Au.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _E{constructor(e,n){this.position=e,this.inclusive=n}}function wO(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const h=e[s],p=t.position[s];if(h.field.isKeyField()?r=Qn.comparator(Qn.fromName(p.referenceValue),n.key):r=Av(p,n.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function TO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rf(t.position[n],e.position[n]))return!1;return!0}class vE{constructor(e,n="asc"){this.field=e,this.dir=n}}function vY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class LB{}class ko extends LB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new bY(e,n,r):n==="array-contains"?new EY(e,r):n==="in"?new SY(e,r):n==="not-in"?new CY(e,r):n==="array-contains-any"?new AY(e,r):new ko(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wY(e,r):new TY(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Av(n,this.value)):n!==null&&Km(this.value)===Km(n)&&this.matchesComparison(Av(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mh extends LB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Mh(e,n)}matches(e){return OB(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OB(t){return t.op==="and"}function zB(t){return xY(t)&&OB(t)}function xY(t){for(const e of t.filters)if(e instanceof Mh)return!1;return!0}function kI(t){if(t instanceof ko)return t.field.canonicalString()+t.op.toString()+Iv(t.value);if(zB(t))return t.filters.map((e=>kI(e))).join(",");{const e=t.filters.map((n=>kI(n))).join(",");return`${t.op}(${e})`}}function NB(t,e){return t instanceof ko?(function(r,s){return s instanceof ko&&r.op===s.op&&r.field.isEqual(s.field)&&rf(r.value,s.value)})(t,e):t instanceof Mh?(function(r,s){return s instanceof Mh&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((h,p,_)=>h&&NB(p,s.filters[_])),!0):!1})(t,e):void mr(19439)}function BB(t){return t instanceof ko?(function(n){return`${n.field.canonicalString()} ${n.op} ${Iv(n.value)}`})(t):t instanceof Mh?(function(n){return n.op.toString()+" {"+n.getFilters().map(BB).join(" ,")+"}"})(t):"Filter"}class bY extends ko{constructor(e,n,r){super(e,n,r),this.key=Qn.fromName(r.referenceValue)}matches(e){const n=Qn.comparator(e.key,this.key);return this.matchesComparison(n)}}class wY extends ko{constructor(e,n){super(e,"in",n),this.keys=FB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class TY extends ko{constructor(e,n){super(e,"not-in",n),this.keys=FB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function FB(t,e){return(e.arrayValue?.values||[]).map((n=>Qn.fromName(n.referenceValue)))}class EY extends ko{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return LR(n)&&Pb(n.arrayValue,this.value)}}class SY extends ko{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pb(this.value.arrayValue,n)}}class CY extends ko{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pb(this.value.arrayValue,n)}}class AY extends ko{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!LR(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Pb(this.value.arrayValue,r)))}}class IY{constructor(e,n=null,r=[],s=[],h=null,p=null,_=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=h,this.startAt=p,this.endAt=_,this.Te=null}}function EO(t,e=null,n=[],r=[],s=null,h=null,p=null){return new IY(t,e,n,r,s,h,p)}function OR(t){const e=Mr(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>kI(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),dS(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Iv(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Iv(r))).join(",")),e.Te=n}return e.Te}function zR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vY(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TO(t.startAt,e.startAt)&&TO(t.endAt,e.endAt)}function PI(t){return Qn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class s1{constructor(e,n=null,r=[],s=[],h=null,p="F",_=null,o=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=h,this.limitType=p,this.startAt=_,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MY(t,e,n,r,s,h,p,_){return new s1(t,e,n,r,s,h,p,_)}function NR(t){return new s1(t)}function SO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VB(t){return t.collectionGroup!==null}function hb(t){const e=Mr(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),n.add(h.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let _=new Qo(La.comparator);return p.filters.forEach((o=>{o.getFlattenedFilters().forEach((T=>{T.isInequality()&&(_=_.add(T.field))}))})),_})(e).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new vE(h,r))})),n.has(La.keyField().canonicalString())||e.Ie.push(new vE(La.keyField(),r))}return e.Ie}function Yd(t){const e=Mr(t);return e.Ee||(e.Ee=RY(e,hb(t))),e.Ee}function RY(t,e){if(t.limitType==="F")return EO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const h=s.dir==="desc"?"asc":"desc";return new vE(s.field,h)}));const n=t.endAt?new _E(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _E(t.startAt.position,t.startAt.inclusive):null;return EO(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function LI(t,e){const n=t.filters.concat([e]);return new s1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function OI(t,e,n){return new s1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pS(t,e){return zR(Yd(t),Yd(e))&&t.limitType===e.limitType}function UB(t){return`${OR(Yd(t))}|lt:${t.limitType}`}function ev(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>BB(s))).join(", ")}]`),dS(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Iv(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Iv(s))).join(",")),`Target(${r})`})(Yd(t))}; limitType=${t.limitType})`}function mS(t,e){return e.isFoundDocument()&&(function(r,s){const h=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Qn.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(t,e)&&(function(r,s){for(const h of hb(r))if(!h.field.isKeyField()&&s.data.field(h.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const h of r.filters)if(!h.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(p,_,o){const T=wO(p,_,o);return p.inclusive?T<=0:T<0})(r.startAt,hb(r),s)||r.endAt&&!(function(p,_,o){const T=wO(p,_,o);return p.inclusive?T>=0:T>0})(r.endAt,hb(r),s))})(t,e)}function DY(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jB(t){return(e,n)=>{let r=!1;for(const s of hb(t)){const h=kY(s,e,n);if(h!==0)return h;r=r||s.field.isKeyField()}return 0}}function kY(t,e,n){const r=t.field.isKeyField()?Qn.comparator(e.key,n.key):(function(h,p,_){const o=p.data.field(h),T=_.data.field(h);return o!==null&&T!==null?Av(o,T):mr(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mr(19790,{direction:t.dir})}}class zy{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,h]of r)if(this.equalsFn(s,e))return h}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let h=0;h<s.length;h++)if(this.equalsFn(s[h][0],e))return void(s[h]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Oy(this.inner,((n,r)=>{for(const[s,h]of r)e(s,h)}))}isEmpty(){return SB(this.inner)}size(){return this.innerSize}}const PY=new qs(Qn.comparator);function bp(){return PY}const $B=new qs(Qn.comparator);function Wx(...t){let e=$B;for(const n of t)e=e.insert(n.key,n);return e}function qB(t){let e=$B;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function hy(){return db()}function HB(){return db()}function db(){return new zy((t=>t.toString()),((t,e)=>t.isEqual(e)))}const LY=new qs(Qn.comparator),OY=new Qo(Qn.comparator);function hi(...t){let e=OY;for(const n of t)e=e.add(n);return e}const zY=new Qo(ui);function NY(){return zY}function BR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mE(e)?"-0":e}}function GB(t){return{integerValue:""+t}}function BY(t,e){return hY(e)?GB(e):BR(t,e)}class gS{constructor(){this._=void 0}}function FY(t,e,n){return t instanceof Lb?(function(s,h){const p={fields:{[IB]:{stringValue:AB},[RB]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return h&&PR(h)&&(h=fS(h)),h&&(p.fields[MB]=h),{mapValue:p}})(n,e):t instanceof Ob?YB(t,e):t instanceof zb?XB(t,e):(function(s,h){const p=WB(s,h),_=CO(p)+CO(s.Ae);return DI(p)&&DI(s.Ae)?GB(_):BR(s.serializer,_)})(t,e)}function VY(t,e,n){return t instanceof Ob?YB(t,e):t instanceof zb?XB(t,e):n}function WB(t,e){return t instanceof xE?(function(r){return DI(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(e)?e:{integerValue:0}:null}class Lb extends gS{}class Ob extends gS{constructor(e){super(),this.elements=e}}function YB(t,e){const n=KB(e);for(const r of t.elements)n.some((s=>rf(s,r)))||n.push(r);return{arrayValue:{values:n}}}class zb extends gS{constructor(e){super(),this.elements=e}}function XB(t,e){let n=KB(e);for(const r of t.elements)n=n.filter((s=>!rf(s,r)));return{arrayValue:{values:n}}}class xE extends gS{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function CO(t){return fo(t.integerValue||t.doubleValue)}function KB(t){return LR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class UY{constructor(e,n){this.field=e,this.transform=n}}function jY(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ob&&s instanceof Ob||r instanceof zb&&s instanceof zb?Cv(r.elements,s.elements,rf):r instanceof xE&&s instanceof xE?rf(r.Ae,s.Ae):r instanceof Lb&&s instanceof Lb})(t.transform,e.transform)}class $Y{constructor(e,n){this.version=e,this.transformResults=n}}class Xd{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xd}static exists(e){return new Xd(void 0,e)}static updateTime(e){return new Xd(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function LT(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yS{}function ZB(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FR(t.key,Xd.none()):new o1(t.key,t.data,Xd.none());{const n=t.data,r=Au.empty();let s=new Qo(La.comparator);for(let h of e.fields)if(!s.has(h)){let p=n.field(h);p===null&&h.length>1&&(h=h.popLast(),p=n.field(h)),p===null?r.delete(h):r.set(h,p),s=s.add(h)}return new Ny(t.key,r,new Ch(s.toArray()),Xd.none())}}function qY(t,e,n){t instanceof o1?(function(s,h,p){const _=s.value.clone(),o=IO(s.fieldTransforms,h,p.transformResults);_.setAll(o),h.convertToFoundDocument(p.version,_).setHasCommittedMutations()})(t,e,n):t instanceof Ny?(function(s,h,p){if(!LT(s.precondition,h))return void h.convertToUnknownDocument(p.version);const _=IO(s.fieldTransforms,h,p.transformResults),o=h.data;o.setAll(QB(s)),o.setAll(_),h.convertToFoundDocument(p.version,o).setHasCommittedMutations()})(t,e,n):(function(s,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,n)}function fb(t,e,n,r){return t instanceof o1?(function(h,p,_,o){if(!LT(h.precondition,p))return _;const T=h.value.clone(),I=MO(h.fieldTransforms,o,p);return T.setAll(I),p.convertToFoundDocument(p.version,T).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ny?(function(h,p,_,o){if(!LT(h.precondition,p))return _;const T=MO(h.fieldTransforms,o,p),I=p.data;return I.setAll(QB(h)),I.setAll(T),p.convertToFoundDocument(p.version,I).setHasLocalMutations(),_===null?null:_.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((M=>M.field)))})(t,e,n,r):(function(h,p,_){return LT(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):_})(t,e,n)}function HY(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),h=WB(r.transform,s||null);h!=null&&(n===null&&(n=Au.empty()),n.set(r.field,h))}return n||null}function AO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Cv(r,s,((h,p)=>jY(h,p)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class o1 extends yS{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ny extends yS{constructor(e,n,r,s,h=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function QB(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function IO(t,e,n){const r=new Map;Qi(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const h=t[s],p=h.transform,_=e.data.field(h.field);r.set(h.field,VY(p,_,n[s]))}return r}function MO(t,e,n){const r=new Map;for(const s of t){const h=s.transform,p=n.data.field(s.field);r.set(s.field,FY(h,p,e))}return r}class FR extends yS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GY extends yS{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class WY{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const h=this.mutations[s];h.key.isEqual(e.key)&&qY(h,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fb(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fb(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HB();return this.mutations.forEach((s=>{const h=e.get(s.key),p=h.overlayedDocument;let _=this.applyToLocalView(p,h.mutatedFields);_=n.has(s.key)?null:_;const o=ZB(p,_);o!==null&&r.set(s.key,o),p.isValidDocument()||p.convertToNoDocument(Er.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),hi())}isEqual(e){return this.batchId===e.batchId&&Cv(this.mutations,e.mutations,((n,r)=>AO(n,r)))&&Cv(this.baseMutations,e.baseMutations,((n,r)=>AO(n,r)))}}class VR{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Qi(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return LY})();const h=e.mutations;for(let p=0;p<h.length;p++)s=s.insert(h[p].key,r[p].version);return new VR(e,n,r,s)}}class YY{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XY{constructor(e,n){this.count=e,this.unchangedNames=n}}var Mo,_i;function KY(t){switch(t){case Ht.OK:return mr(64938);case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0;default:return mr(15467,{code:t})}}function JB(t){if(t===void 0)return xp("GRPC error has no .code"),Ht.UNKNOWN;switch(t){case Mo.OK:return Ht.OK;case Mo.CANCELLED:return Ht.CANCELLED;case Mo.UNKNOWN:return Ht.UNKNOWN;case Mo.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case Mo.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case Mo.INTERNAL:return Ht.INTERNAL;case Mo.UNAVAILABLE:return Ht.UNAVAILABLE;case Mo.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case Mo.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case Mo.NOT_FOUND:return Ht.NOT_FOUND;case Mo.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case Mo.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case Mo.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case Mo.ABORTED:return Ht.ABORTED;case Mo.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case Mo.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case Mo.DATA_LOSS:return Ht.DATA_LOSS;default:return mr(39323,{code:t})}}(_i=Mo||(Mo={}))[_i.OK=0]="OK",_i[_i.CANCELLED=1]="CANCELLED",_i[_i.UNKNOWN=2]="UNKNOWN",_i[_i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_i[_i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_i[_i.NOT_FOUND=5]="NOT_FOUND",_i[_i.ALREADY_EXISTS=6]="ALREADY_EXISTS",_i[_i.PERMISSION_DENIED=7]="PERMISSION_DENIED",_i[_i.UNAUTHENTICATED=16]="UNAUTHENTICATED",_i[_i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_i[_i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_i[_i.ABORTED=10]="ABORTED",_i[_i.OUT_OF_RANGE=11]="OUT_OF_RANGE",_i[_i.UNIMPLEMENTED=12]="UNIMPLEMENTED",_i[_i.INTERNAL=13]="INTERNAL",_i[_i.UNAVAILABLE=14]="UNAVAILABLE",_i[_i.DATA_LOSS=15]="DATA_LOSS";function ZY(){return new TextEncoder}const QY=new zm([4294967295,4294967295],0);function RO(t){const e=ZY().encode(t),n=new pB;return n.update(e),new Uint8Array(n.digest())}function DO(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new zm([n,r],0),new zm([s,h],0)]}class UR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yx(`Invalid padding: ${n}`);if(r<0)throw new Yx(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yx(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yx(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zm.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zm.fromNumber(r)));return s.compare(QY)===1&&(s=new zm([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=RO(e),[r,s]=DO(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(r,s,h);if(!this.we(p))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new UR(h,s,n);return r.forEach((_=>p.insert(_))),p}insert(e){if(this.ge===0)return;const n=RO(e),[r,s]=DO(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(r,s,h);this.Se(p)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yx extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _S{constructor(e,n,r,s,h){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,a1.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _S(Er.min(),s,new qs(ui),bp(),hi())}}class a1{constructor(e,n,r,s,h){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new a1(r,n,hi(),hi(),hi())}}class OT{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class eF{constructor(e,n){this.targetId=e,this.Ce=n}}class tF{constructor(e,n,r=Oa.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class kO{constructor(){this.ve=0,this.Fe=PO(),this.Me=Oa.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=hi(),n=hi(),r=hi();return this.Fe.forEach(((s,h)=>{switch(h){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:mr(38017,{changeType:h})}})),new a1(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=PO()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JY{constructor(e){this.Ge=e,this.ze=new Map,this.je=bp(),this.Je=Kw(),this.He=Kw(),this.Ye=new qs(ui)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:mr(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const h=s.target;if(PI(h))if(r===0){const p=new Qn(h.path);this.et(n,p,dl.newNoDocument(p,Er.min()))}else Qi(r===1,20013,{expectedCount:r});else{const p=this._t(n);if(p!==r){const _=this.ut(e),o=_?this.ct(_,e,p):1;if(o!==0){this.it(n);const T=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,T)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:h=0}=n;let p,_;try{p=Xm(r).toUint8Array()}catch(o){if(o instanceof CB)return Sv("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{_=new UR(p,s,h)}catch(o){return Sv(o instanceof Yx?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return _.ge===0?null:_}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((h=>{const p=this.Ge.ht(),_=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(_)||(this.et(n,h,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((h,p)=>{const _=this.ot(p);if(_){if(h.current&&PI(_.target)){const o=new Qn(_.target.path);this.It(o).has(p)||this.Et(p,o)||this.et(p,o,dl.newNoDocument(o,e))}h.Be&&(n.set(p,h.ke()),h.qe())}}));let r=hi();this.He.forEach(((h,p)=>{let _=!0;p.forEachWhile((o=>{const T=this.ot(o);return!T||T.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(r=r.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const s=new _S(e,n,this.Ye,this.je,r);return this.je=bp(),this.Je=Kw(),this.He=Kw(),this.Ye=new qs(ui),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new kO,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Qo(ui),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Qo(ui),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Dn("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kO),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kw(){return new qs(Qn.comparator)}function PO(){return new qs(Qn.comparator)}const eX={asc:"ASCENDING",desc:"DESCENDING"},tX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nX={and:"AND",or:"OR"};class rX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zI(t,e){return t.useProto3Json||dS(e)?e:{value:e}}function bE(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iX(t,e){return bE(t,e.toTimestamp())}function Kd(t){return Qi(!!t,49232),Er.fromTimestamp((function(n){const r=Ym(n);return new Es(r.seconds,r.nanos)})(t))}function jR(t,e){return NI(t,e).canonicalString()}function NI(t,e){const n=(function(s){return new xs(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function rF(t){const e=xs.fromString(t);return Qi(lF(e),10190,{key:e.toString()}),e}function BI(t,e){return jR(t.databaseId,e.path)}function hA(t,e){const n=rF(e);if(n.get(1)!==t.databaseId.projectId)throw new Mn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Mn(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Qn(sF(n))}function iF(t,e){return jR(t.databaseId,e)}function sX(t){const e=rF(t);return e.length===4?xs.emptyPath():sF(e)}function FI(t){return new xs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sF(t){return Qi(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function LO(t,e,n){return{name:BI(t,e),fields:n.value.mapValue.fields}}function oX(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:mr(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],h=(function(T,I){return T.useProto3Json?(Qi(I===void 0||typeof I=="string",58123),Oa.fromBase64String(I||"")):(Qi(I===void 0||I instanceof Buffer||I instanceof Uint8Array,16193),Oa.fromUint8Array(I||new Uint8Array))})(t,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&(function(T){const I=T.code===void 0?Ht.UNKNOWN:JB(T.code);return new Mn(I,T.message||"")})(p);n=new tF(r,s,h,_||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=hA(t,r.document.name),h=Kd(r.document.updateTime),p=r.document.createTime?Kd(r.document.createTime):Er.min(),_=new Au({mapValue:{fields:r.document.fields}}),o=dl.newFoundDocument(s,h,p,_),T=r.targetIds||[],I=r.removedTargetIds||[];n=new OT(T,I,o.key,o)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=hA(t,r.document),h=r.readTime?Kd(r.readTime):Er.min(),p=dl.newNoDocument(s,h),_=r.removedTargetIds||[];n=new OT([],_,p.key,p)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=hA(t,r.document),h=r.removedTargetIds||[];n=new OT([],h,s,null)}else{if(!("filter"in e))return mr(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:h}=r,p=new XY(s,h),_=r.targetId;n=new eF(_,p)}}return n}function aX(t,e){let n;if(e instanceof o1)n={update:LO(t,e.key,e.value)};else if(e instanceof FR)n={delete:BI(t,e.key)};else if(e instanceof Ny)n={update:LO(t,e.key,e.data),updateMask:gX(e.fieldMask)};else{if(!(e instanceof GY))return mr(16599,{Vt:e.type});n={verify:BI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(h,p){const _=p.transform;if(_ instanceof Lb)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Ob)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof zb)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof xE)return{fieldPath:p.field.canonicalString(),increment:_.Ae};throw mr(20930,{transform:p.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,h){return h.updateTime!==void 0?{updateTime:iX(s,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:mr(27497)})(t,e.precondition)),n}function lX(t,e){return t&&t.length>0?(Qi(e!==void 0,14353),t.map((n=>(function(s,h){let p=s.updateTime?Kd(s.updateTime):Kd(h);return p.isEqual(Er.min())&&(p=Kd(h)),new $Y(p,s.transformResults||[])})(n,e)))):[]}function cX(t,e){return{documents:[iF(t,e.path)]}}function uX(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iF(t,s);const h=(function(T){if(T.length!==0)return aF(Mh.create(T,"and"))})(e.filters);h&&(n.structuredQuery.where=h);const p=(function(T){if(T.length!==0)return T.map((I=>(function(L){return{field:tv(L.field),direction:fX(L.dir)}})(I)))})(e.orderBy);p&&(n.structuredQuery.orderBy=p);const _=zI(t,e.limit);return _!==null&&(n.structuredQuery.limit=_),e.startAt&&(n.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:n,parent:s}}function hX(t){let e=sX(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Qi(r===1,65062);const I=n.from[0];I.allDescendants?s=I.collectionId:e=e.child(I.collectionId)}let h=[];n.where&&(h=(function(M){const L=oF(M);return L instanceof Mh&&zB(L)?L.getFilters():[L]})(n.where));let p=[];n.orderBy&&(p=(function(M){return M.map((L=>(function(q){return new vE(nv(q.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(L)))})(n.orderBy));let _=null;n.limit&&(_=(function(M){let L;return L=typeof M=="object"?M.value:M,dS(L)?null:L})(n.limit));let o=null;n.startAt&&(o=(function(M){const L=!!M.before,F=M.values||[];return new _E(F,L)})(n.startAt));let T=null;return n.endAt&&(T=(function(M){const L=!M.before,F=M.values||[];return new _E(F,L)})(n.endAt)),MY(e,s,p,h,_,"F",o,T)}function dX(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mr(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oF(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nv(n.unaryFilter.field);return ko.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nv(n.unaryFilter.field);return ko.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=nv(n.unaryFilter.field);return ko.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=nv(n.unaryFilter.field);return ko.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mr(61313);default:return mr(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ko.create(nv(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mr(58110);default:return mr(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Mh.create(n.compositeFilter.filters.map((r=>oF(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return mr(1026)}})(n.compositeFilter.op))})(t):mr(30097,{filter:t})}function fX(t){return eX[t]}function pX(t){return tX[t]}function mX(t){return nX[t]}function tv(t){return{fieldPath:t.canonicalString()}}function nv(t){return La.fromServerFormat(t.fieldPath)}function aF(t){return t instanceof ko?(function(n){if(n.op==="=="){if(bO(n.value))return{unaryFilter:{field:tv(n.field),op:"IS_NAN"}};if(xO(n.value))return{unaryFilter:{field:tv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bO(n.value))return{unaryFilter:{field:tv(n.field),op:"IS_NOT_NAN"}};if(xO(n.value))return{unaryFilter:{field:tv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tv(n.field),op:pX(n.op),value:n.value}}})(t):t instanceof Mh?(function(n){const r=n.getFilters().map((s=>aF(s)));return r.length===1?r[0]:{compositeFilter:{op:mX(n.op),filters:r}}})(t):mr(54877,{filter:t})}function gX(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function lF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class km{constructor(e,n,r,s,h=Er.min(),p=Er.min(),_=Oa.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_,this.expectedCount=o}withSequenceNumber(e){return new km(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new km(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new km(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new km(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yX{constructor(e){this.yt=e}}function _X(t){const e=hX({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?OI(e,e.limit,"L"):e}class vX{constructor(){this.Cn=new xX}addToCollectionParentIndex(e,n){return this.Cn.add(n),Wt.resolve()}getCollectionParents(e,n){return Wt.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Wt.resolve()}deleteFieldIndex(e,n){return Wt.resolve()}deleteAllFieldIndexes(e){return Wt.resolve()}createTargetIndexes(e,n){return Wt.resolve()}getDocumentsMatchingTarget(e,n){return Wt.resolve(null)}getIndexType(e,n){return Wt.resolve(0)}getFieldIndexes(e,n){return Wt.resolve([])}getNextCollectionGroupToUpdate(e){return Wt.resolve(null)}getMinOffset(e,n){return Wt.resolve(Wm.min())}getMinOffsetFromCollectionGroup(e,n){return Wt.resolve(Wm.min())}updateCollectionGroup(e,n,r){return Wt.resolve()}updateIndexEntries(e,n){return Wt.resolve()}}class xX{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Qo(xs.comparator),h=!s.has(r);return this.index[n]=s.add(r),h}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Qo(xs.comparator)).toArray()}}const OO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cF=41943040;class sc{static withCacheSize(e){return new sc(e,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}sc.DEFAULT_COLLECTION_PERCENTILE=10,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sc.DEFAULT=new sc(cF,sc.DEFAULT_COLLECTION_PERCENTILE,sc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sc.DISABLED=new sc(-1,0,0);class Mv{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mv(0)}static cr(){return new Mv(-1)}}const zO="LruGarbageCollector",bX=1048576;function NO([t,e],[n,r]){const s=ui(t,n);return s===0?ui(e,r):s}class wX{constructor(e){this.Ir=e,this.buffer=new Qo(NO),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();NO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TX{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Dn(zO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kv(n)?Dn(zO,"Ignoring IndexedDB error during garbage collection: ",n):await Xv(n)}await this.Vr(3e5)}))}}class EX{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Wt.resolve(hS.ce);const r=new wX(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Dn("LruGarbageCollector","Garbage collection skipped; disabled"),Wt.resolve(OO)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Dn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OO):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,h,p,_,o,T;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((M=>(M>this.params.maximumSequenceNumbersToCollect?(Dn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),s=this.params.maximumSequenceNumbersToCollect):s=M,p=Date.now(),this.nthSequenceNumber(e,s)))).next((M=>(r=M,_=Date.now(),this.removeTargets(e,r,n)))).next((M=>(h=M,o=Date.now(),this.removeOrphanedDocuments(e,r)))).next((M=>(T=Date.now(),J_()<=ci.DEBUG&&Dn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-I}ms
	Determined least recently used ${s} in `+(_-p)+`ms
	Removed ${h} targets in `+(o-_)+`ms
	Removed ${M} documents in `+(T-o)+`ms
Total Duration: ${T-I}ms`),Wt.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:h,documentsRemoved:M}))))}}function SX(t,e){return new EX(t,e)}class CX{constructor(){this.changes=new zy((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dl.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Wt.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AX{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class IX{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&fb(r.mutation,s,Ch.empty(),Es.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,hi()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=hi()){const s=hy();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((h=>{let p=Wx();return h.forEach(((_,o)=>{p=p.insert(_,o.overlayedDocument)})),p}))))}getOverlayedDocuments(e,n){const r=hy();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,hi())))}populateOverlays(e,n,r){const s=[];return r.forEach((h=>{n.has(h)||s.push(h)})),this.documentOverlayCache.getOverlays(e,s).next((h=>{h.forEach(((p,_)=>{n.set(p,_)}))}))}computeViews(e,n,r,s){let h=bp();const p=db(),_=(function(){return db()})();return n.forEach(((o,T)=>{const I=r.get(T.key);s.has(T.key)&&(I===void 0||I.mutation instanceof Ny)?h=h.insert(T.key,T):I!==void 0?(p.set(T.key,I.mutation.getFieldMask()),fb(I.mutation,T,I.mutation.getFieldMask(),Es.now())):p.set(T.key,Ch.empty())})),this.recalculateAndSaveOverlays(e,h).next((o=>(o.forEach(((T,I)=>p.set(T,I))),n.forEach(((T,I)=>_.set(T,new AX(I,p.get(T)??null)))),_)))}recalculateAndSaveOverlays(e,n){const r=db();let s=new qs(((p,_)=>p-_)),h=hi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((p=>{for(const _ of p)_.keys().forEach((o=>{const T=n.get(o);if(T===null)return;let I=r.get(o)||Ch.empty();I=_.applyToLocalView(T,I),r.set(o,I);const M=(s.get(_.batchId)||hi()).add(o);s=s.insert(_.batchId,M)}))})).next((()=>{const p=[],_=s.getReverseIterator();for(;_.hasNext();){const o=_.getNext(),T=o.key,I=o.value,M=HB();I.forEach((L=>{if(!h.has(L)){const F=ZB(n.get(L),r.get(L));F!==null&&M.set(L,F),h=h.add(L)}})),p.push(this.documentOverlayCache.saveOverlays(e,T,M))}return Wt.waitFor(p)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(p){return Qn.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((h=>{const p=s-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-h.size):Wt.resolve(hy());let _=Rb,o=h;return p.next((T=>Wt.forEach(T,((I,M)=>(_<M.largestBatchId&&(_=M.largestBatchId),h.get(I)?Wt.resolve():this.remoteDocumentCache.getEntry(e,I).next((L=>{o=o.insert(I,L)}))))).next((()=>this.populateOverlays(e,T,h))).next((()=>this.computeViews(e,o,T,hi()))).next((I=>({batchId:_,changes:qB(I)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qn(n)).next((r=>{let s=Wx();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const h=n.collectionGroup;let p=Wx();return this.indexManager.getCollectionParents(e,h).next((_=>Wt.forEach(_,(o=>{const T=(function(M,L){return new s1(L,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)})(n,o.child(h));return this.getDocumentsMatchingCollectionQuery(e,T,r,s).next((I=>{I.forEach(((M,L)=>{p=p.insert(M,L)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let h;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,h,s)))).next((p=>{h.forEach(((o,T)=>{const I=T.getKey();p.get(I)===null&&(p=p.insert(I,dl.newInvalidDocument(I)))}));let _=Wx();return p.forEach(((o,T)=>{const I=h.get(o);I!==void 0&&fb(I.mutation,T,Ch.empty(),Es.now()),mS(n,T)&&(_=_.insert(o,T))})),_}))}}class MX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Wt.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Kd(s.createTime)}})(n)),Wt.resolve()}getNamedQuery(e,n){return Wt.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:_X(s.bundledQuery),readTime:Kd(s.readTime)}})(n)),Wt.resolve()}}class RX{constructor(){this.overlays=new qs(Qn.comparator),this.qr=new Map}getOverlay(e,n){return Wt.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hy();return Wt.forEach(n,(s=>this.getOverlay(e,s).next((h=>{h!==null&&r.set(s,h)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,h)=>{this.St(e,n,h)})),Wt.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(r)),Wt.resolve()}getOverlaysForCollection(e,n,r){const s=hy(),h=n.length+1,p=new Qn(n.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const o=_.getNext().value,T=o.getKey();if(!n.isPrefixOf(T.path))break;T.path.length===h&&o.largestBatchId>r&&s.set(o.getKey(),o)}return Wt.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let h=new qs(((T,I)=>T-I));const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===n&&T.largestBatchId>r){let I=h.get(T.largestBatchId);I===null&&(I=hy(),h=h.insert(T.largestBatchId,I)),I.set(T.getKey(),T)}}const _=hy(),o=h.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((T,I)=>_.set(T,I))),!(_.size()>=s)););return Wt.resolve(_)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const p=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,p)}this.overlays=this.overlays.insert(r.key,new YY(n,r));let h=this.qr.get(n);h===void 0&&(h=hi(),this.qr.set(n,h)),this.qr.set(n,h.add(r.key))}}class DX{constructor(){this.sessionToken=Oa.EMPTY_BYTE_STRING}getSessionToken(e){return Wt.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Wt.resolve()}}class $R{constructor(){this.Qr=new Qo(ha.$r),this.Ur=new Qo(ha.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ha(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ha(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Qn(new xs([])),r=new ha(n,e),s=new ha(n,e+1),h=[];return this.Ur.forEachInRange([r,s],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qn(new xs([])),r=new ha(n,e),s=new ha(n,e+1);let h=hi();return this.Ur.forEachInRange([r,s],(p=>{h=h.add(p.key)})),h}containsKey(e){const n=new ha(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ha{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qn.comparator(e.key,n.key)||ui(e.Yr,n.Yr)}static Kr(e,n){return ui(e.Yr,n.Yr)||Qn.comparator(e.key,n.key)}}class kX{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qo(ha.$r)}checkEmpty(e){return Wt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new WY(h,n,r,s);this.mutationQueue.push(p);for(const _ of s)this.Zr=this.Zr.add(new ha(_.key,h)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return Wt.resolve(p)}lookupMutationBatch(e,n){return Wt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),h=s<0?0:s;return Wt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Wt.resolve(this.mutationQueue.length===0?kR:this.tr-1)}getAllMutationBatches(e){return Wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ha(n,0),s=new ha(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,s],(p=>{const _=this.Xr(p.Yr);h.push(_)})),Wt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qo(ui);return n.forEach((s=>{const h=new ha(s,0),p=new ha(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(_=>{r=r.add(_.Yr)}))})),Wt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let h=r;Qn.isDocumentKey(h)||(h=h.child(""));const p=new ha(new Qn(h),0);let _=new Qo(ui);return this.Zr.forEachWhile((o=>{const T=o.key.path;return!!r.isPrefixOf(T)&&(T.length===s&&(_=_.add(o.Yr)),!0)}),p),Wt.resolve(this.ti(_))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Qi(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Wt.forEach(n.mutations,(s=>{const h=new ha(s.key,n.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ha(n,0),s=this.Zr.firstAfterOrEqual(r);return Wt.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Wt.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class PX{constructor(e){this.ri=e,this.docs=(function(){return new qs(Qn.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),h=s?s.size:0,p=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Wt.resolve(r?r.document.mutableCopy():dl.newInvalidDocument(n))}getEntries(e,n){let r=bp();return n.forEach((s=>{const h=this.docs.get(s);r=r.insert(s,h?h.document.mutableCopy():dl.newInvalidDocument(s))})),Wt.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let h=bp();const p=n.path,_=new Qn(p.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(_);for(;o.hasNext();){const{key:T,value:{document:I}}=o.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||aY(oY(I),r)<=0||(s.has(I.key)||mS(n,I))&&(h=h.insert(I.key,I.mutableCopy()))}return Wt.resolve(h)}getAllFromCollectionGroup(e,n,r,s){mr(9500)}ii(e,n){return Wt.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new LX(this)}getSize(e){return Wt.resolve(this.size)}}class LX extends CX{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),Wt.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class OX{constructor(e){this.persistence=e,this.si=new zy((n=>OR(n)),zR),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.oi=0,this._i=new $R,this.targetCount=0,this.ai=Mv.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),Wt.resolve()}getLastRemoteSnapshotVersion(e){return Wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Wt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Wt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Wt.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Mv(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Wt.resolve()}updateTargetData(e,n){return this.Pr(n),Wt.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Wt.resolve()}removeTargets(e,n,r){let s=0;const h=[];return this.si.forEach(((p,_)=>{_.sequenceNumber<=n&&r.get(_.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,_.targetId)),s++)})),Wt.waitFor(h).next((()=>s))}getTargetCount(e){return Wt.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Wt.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Wt.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,h=[];return s&&n.forEach((p=>{h.push(s.markPotentiallyOrphaned(e,p))})),Wt.waitFor(h)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Wt.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Wt.resolve(r)}containsKey(e,n){return Wt.resolve(this._i.containsKey(n))}}class uF{constructor(e,n){this.ui={},this.overlays={},this.ci=new hS(0),this.li=!1,this.li=!0,this.hi=new DX,this.referenceDelegate=e(this),this.Pi=new OX(this),this.indexManager=new vX,this.remoteDocumentCache=(function(s){return new PX(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yX(n),this.Ii=new MX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RX,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kX(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Dn("MemoryPersistence","Starting transaction:",e);const s=new zX(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((h=>this.referenceDelegate.di(s).next((()=>h)))).toPromise().then((h=>(s.raiseOnCommittedEvent(),h)))}Ai(e,n){return Wt.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class zX extends cY{constructor(e){super(),this.currentSequenceNumber=e}}class qR{constructor(e){this.persistence=e,this.Ri=new $R,this.Vi=null}static mi(e){return new qR(e)}get fi(){if(this.Vi)return this.Vi;throw mr(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Wt.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Wt.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Wt.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((h=>this.fi.add(h.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wt.forEach(this.fi,(r=>{const s=Qn.fromPath(r);return this.gi(e,s).next((h=>{h||n.removeEntry(s,Er.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Wt.or([()=>Wt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class wE{constructor(e,n){this.persistence=e,this.pi=new zy((r=>dY(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=SX(this,n)}static mi(e,n){return new wE(e,n)}Ei(){}di(e){return Wt.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Wt.forEach(this.pi,((r,s)=>this.br(e,r,s).next((h=>h?Wt.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),h=s.newChangeBuffer();return s.ii(e,(p=>this.br(e,p,n).next((_=>{_||(r++,h.removeEntry(p,Er.min()))})))).next((()=>h.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Wt.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Wt.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Wt.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Wt.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kT(e.data.value)),n}br(e,n,r){return Wt.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Wt.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class HR{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=hi(),s=hi();for(const h of n.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:s=s.add(h.doc.key)}return new HR(e,n.fromCache,r,s)}}class NX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BX{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fH()?8:uY(ml())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const h={result:null};return this.ys(e,n).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,n,s,r).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new NX;return this.Ss(e,n,p).next((_=>{if(h.result=_,this.Vs)return this.bs(e,n,p,_.size)}))})).next((()=>h.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(J_()<=ci.DEBUG&&Dn("QueryEngine","SDK will not create cache indexes for query:",ev(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Wt.resolve()):(J_()<=ci.DEBUG&&Dn("QueryEngine","Query:",ev(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(J_()<=ci.DEBUG&&Dn("QueryEngine","The SDK decides to create cache indexes for query:",ev(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yd(n))):Wt.resolve())}ys(e,n){if(SO(n))return Wt.resolve(null);let r=Yd(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=OI(n,null,"F"),r=Yd(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((h=>{const p=hi(...h);return this.ps.getDocuments(e,p).next((_=>this.indexManager.getMinOffset(e,r).next((o=>{const T=this.Ds(n,_);return this.Cs(n,T,p,o.readTime)?this.ys(e,OI(n,null,"F")):this.vs(e,T,n,o)}))))})))))}ws(e,n,r,s){return SO(n)||s.isEqual(Er.min())?Wt.resolve(null):this.ps.getDocuments(e,r).next((h=>{const p=this.Ds(n,h);return this.Cs(n,p,r,s)?Wt.resolve(null):(J_()<=ci.DEBUG&&Dn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ev(n)),this.vs(e,p,n,sY(s,Rb)).next((_=>_)))}))}Ds(e,n){let r=new Qo(jB(e));return n.forEach(((s,h)=>{mS(e,h)&&(r=r.add(h))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const h=e.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(s)>0)}Ss(e,n,r){return J_()<=ci.DEBUG&&Dn("QueryEngine","Using full collection scan to execute query:",ev(n)),this.ps.getDocumentsMatchingQuery(e,n,Wm.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((h=>(n.forEach((p=>{h=h.insert(p.key,p)})),h)))}}const GR="LocalStore",FX=3e8;class VX{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qs(ui),this.xs=new zy((h=>OR(h)),zR),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IX(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function UX(t,e,n,r){return new VX(t,e,n,r)}async function hF(t,e){const n=Mr(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((h=>(s=h,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((h=>{const p=[],_=[];let o=hi();for(const T of s){p.push(T.batchId);for(const I of T.mutations)o=o.add(I.key)}for(const T of h){_.push(T.batchId);for(const I of T.mutations)o=o.add(I.key)}return n.localDocuments.getDocuments(r,o).next((T=>({Ls:T,removedBatchIds:p,addedBatchIds:_})))}))}))}function jX(t,e){const n=Mr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(_,o,T,I){const M=T.batch,L=M.keys();let F=Wt.resolve();return L.forEach((q=>{F=F.next((()=>I.getEntry(o,q))).next(($=>{const X=T.docVersions.get(q);Qi(X!==null,48541),$.version.compareTo(X)<0&&(M.applyToRemoteDocument($,T),$.isValidDocument()&&($.setReadTime(T.commitVersion),I.addEntry($)))}))})),F.next((()=>_.mutationQueue.removeMutationBatch(o,M)))})(n,r,e,h).next((()=>h.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(_){let o=hi();for(let T=0;T<_.mutationResults.length;++T)_.mutationResults[T].transformResults.length>0&&(o=o.add(_.batch.mutations[T].key));return o})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function dF(t){const e=Mr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function $X(t,e){const n=Mr(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const _=[];e.targetChanges.forEach(((I,M)=>{const L=s.get(M);if(!L)return;_.push(n.Pi.removeMatchingKeys(h,I.removedDocuments,M).next((()=>n.Pi.addMatchingKeys(h,I.addedDocuments,M))));let F=L.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(M)!==null?F=F.withResumeToken(Oa.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):I.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(I.resumeToken,r)),s=s.insert(M,F),(function($,X,te){return $.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=FX?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(L,F,I)&&_.push(n.Pi.updateTargetData(h,F))}));let o=bp(),T=hi();if(e.documentUpdates.forEach((I=>{e.resolvedLimboDocuments.has(I)&&_.push(n.persistence.referenceDelegate.updateLimboDocument(h,I))})),_.push(qX(h,p,e.documentUpdates).next((I=>{o=I.ks,T=I.qs}))),!r.isEqual(Er.min())){const I=n.Pi.getLastRemoteSnapshotVersion(h).next((M=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r)));_.push(I)}return Wt.waitFor(_).next((()=>p.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,o,T))).next((()=>o))})).then((h=>(n.Ms=s,h)))}function qX(t,e,n){let r=hi(),s=hi();return n.forEach((h=>r=r.add(h))),e.getEntries(t,r).next((h=>{let p=bp();return n.forEach(((_,o)=>{const T=h.get(_);o.isFoundDocument()!==T.isFoundDocument()&&(s=s.add(_)),o.isNoDocument()&&o.version.isEqual(Er.min())?(e.removeEntry(_,o.readTime),p=p.insert(_,o)):!T.isValidDocument()||o.version.compareTo(T.version)>0||o.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(o),p=p.insert(_,o)):Dn(GR,"Ignoring outdated watch update for ",_,". Current version:",T.version," Watch version:",o.version)})),{ks:p,qs:s}}))}function HX(t,e){const n=Mr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=kR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function GX(t,e){const n=Mr(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((h=>h?(s=h,Wt.resolve(s)):n.Pi.allocateTargetId(r).next((p=>(s=new km(e,p,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function VI(t,e,n){const r=Mr(t),s=r.Ms.get(e),h=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",h,(p=>r.persistence.referenceDelegate.removeTarget(p,s)))}catch(p){if(!Kv(p))throw p;Dn(GR,`Failed to update sequence numbers for target ${e}: ${p}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function BO(t,e,n){const r=Mr(t);let s=Er.min(),h=hi();return r.persistence.runTransaction("Execute query","readwrite",(p=>(function(o,T,I){const M=Mr(o),L=M.xs.get(I);return L!==void 0?Wt.resolve(M.Ms.get(L)):M.Pi.getTargetData(T,I)})(r,p,Yd(e)).next((_=>{if(_)return s=_.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(p,_.targetId).next((o=>{h=o}))})).next((()=>r.Fs.getDocumentsMatchingQuery(p,e,n?s:Er.min(),n?h:hi()))).next((_=>(WX(r,DY(e),_),{documents:_,Qs:h})))))}function WX(t,e,n){let r=t.Os.get(e)||Er.min();n.forEach(((s,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),t.Os.set(e,r)}class FO{constructor(){this.activeTargetIds=NY()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YX{constructor(){this.Mo=new FO,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new FO,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XX{Oo(e){}shutdown(){}}const VO="ConnectivityMonitor";class UO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Dn(VO,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Dn(VO,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zw=null;function UI(){return Zw===null?Zw=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zw++,"0x"+Zw.toString(16)}const dA="RestConnection",KX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZX{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===gE?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,h){const p=UI(),_=this.zo(e,n.toUriEncodedString());Dn(dA,`Sending RPC '${e}' ${p}:`,_,r);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,s,h);const{host:T}=new URL(_),I=og(T);return this.Jo(e,_,o,r,I).then((M=>(Dn(dA,`Received RPC '${e}' ${p}: `,M),M)),(M=>{throw Sv(dA,`RPC '${e}' ${p} failed with error: `,M,"url: ",_,"request:",r),M}))}Ho(e,n,r,s,h,p){return this.Go(e,n,r,s,h)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yv})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,h)=>e[h]=s)),r&&r.headers.forEach(((s,h)=>e[h]=s))}zo(e,n){const r=KX[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class QX{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cl="WebChannelConnection";class JX extends ZX{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,h){const p=UI();return new Promise(((_,o)=>{const T=new mB;T.setWithCredentials(!0),T.listenOnce(gB.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case DT.NO_ERROR:const M=T.getResponseJson();Dn(cl,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(M)),_(M);break;case DT.TIMEOUT:Dn(cl,`RPC '${e}' ${p} timed out`),o(new Mn(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case DT.HTTP_ERROR:const L=T.getStatus();if(Dn(cl,`RPC '${e}' ${p} failed with status:`,L,"response text:",T.getResponseText()),L>0){let F=T.getResponseJson();Array.isArray(F)&&(F=F[0]);const q=F?.error;if(q&&q.status&&q.message){const $=(function(te){const he=te.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(he)>=0?he:Ht.UNKNOWN})(q.status);o(new Mn($,q.message))}else o(new Mn(Ht.UNKNOWN,"Server responded with status "+T.getStatus()))}else o(new Mn(Ht.UNAVAILABLE,"Connection failed."));break;default:mr(9055,{l_:e,streamId:p,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Dn(cl,`RPC '${e}' ${p} completed.`)}}));const I=JSON.stringify(s);Dn(cl,`RPC '${e}' ${p} sending request:`,s),T.send(n,"POST",I,r,15)}))}T_(e,n,r){const s=UI(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=vB(),_=_B(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(o.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,n,r),o.encodeInitMessageHeaders=!0;const I=h.join("");Dn(cl,`Creating RPC '${e}' stream ${s}: ${I}`,o);const M=p.createWebChannel(I,o);this.I_(M);let L=!1,F=!1;const q=new QX({Yo:X=>{F?Dn(cl,`Not sending because RPC '${e}' stream ${s} is closed:`,X):(L||(Dn(cl,`Opening RPC '${e}' stream ${s} transport.`),M.open(),L=!0),Dn(cl,`RPC '${e}' stream ${s} sending:`,X),M.send(X))},Zo:()=>M.close()}),$=(X,te,he)=>{X.listen(te,(ie=>{try{he(ie)}catch(me){setTimeout((()=>{throw me}),0)}}))};return $(M,Gx.EventType.OPEN,(()=>{F||(Dn(cl,`RPC '${e}' stream ${s} transport opened.`),q.o_())})),$(M,Gx.EventType.CLOSE,(()=>{F||(F=!0,Dn(cl,`RPC '${e}' stream ${s} transport closed`),q.a_(),this.E_(M))})),$(M,Gx.EventType.ERROR,(X=>{F||(F=!0,Sv(cl,`RPC '${e}' stream ${s} transport errored. Name:`,X.name,"Message:",X.message),q.a_(new Mn(Ht.UNAVAILABLE,"The operation could not be completed")))})),$(M,Gx.EventType.MESSAGE,(X=>{if(!F){const te=X.data[0];Qi(!!te,16349);const he=te,ie=he?.error||he[0]?.error;if(ie){Dn(cl,`RPC '${e}' stream ${s} received error:`,ie);const me=ie.status;let ge=(function(ee){const le=Mo[ee];if(le!==void 0)return JB(le)})(me),Ee=ie.message;ge===void 0&&(ge=Ht.INTERNAL,Ee="Unknown error status: "+me+" with message "+ie.message),F=!0,q.a_(new Mn(ge,Ee)),M.close()}else Dn(cl,`RPC '${e}' stream ${s} received:`,te),q.u_(te)}})),$(_,yB.STAT_EVENT,(X=>{X.stat===II.PROXY?Dn(cl,`RPC '${e}' stream ${s} detected buffering proxy`):X.stat===II.NOPROXY&&Dn(cl,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function fA(){return typeof document<"u"?document:null}function vS(t){return new rX(t,!0)}class fF{constructor(e,n,r=1e3,s=1.5,h=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Dn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const jO="PersistentStream";class pF{constructor(e,n,r,s,h,p,_,o){this.Mi=e,this.S_=r,this.b_=s,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fF(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ht.RESOURCE_EXHAUSTED?(xp(n.toString()),xp("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Mn(Ht.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Dn(jO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Dn(jO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eK extends pF{constructor(e,n,r,s,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,p),this.serializer=h}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oX(this.serializer,e),r=(function(h){if(!("targetChange"in h))return Er.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?Er.min():p.readTime?Kd(p.readTime):Er.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=FI(this.serializer),n.addTarget=(function(h,p){let _;const o=p.target;if(_=PI(o)?{documents:cX(h,o)}:{query:uX(h,o).ft},_.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){_.resumeToken=nF(h,p.resumeToken);const T=zI(h,p.expectedCount);T!==null&&(_.expectedCount=T)}else if(p.snapshotVersion.compareTo(Er.min())>0){_.readTime=bE(h,p.snapshotVersion.toTimestamp());const T=zI(h,p.expectedCount);T!==null&&(_.expectedCount=T)}return _})(this.serializer,e);const r=dX(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=FI(this.serializer),n.removeTarget=e,this.q_(n)}}class tK extends pF{constructor(e,n,r,s,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qi(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lX(e.writeResults,e.commitTime),r=Kd(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=FI(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>aX(this.serializer,r)))};this.q_(n)}}class nK{}class rK extends nK{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Mn(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,NI(n,r),s,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Mn(Ht.UNKNOWN,h.toString())}))}Ho(e,n,r,s,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,_])=>this.connection.Ho(e,NI(n,r),s,p,_,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Mn(Ht.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xp(n),this.aa=!1):Dn("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ay="RemoteStore";class sK{constructor(e,n,r,s,h){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{r.enqueueAndForget((async()=>{By(this)&&(Dn(Ay,"Restarting streams for network reachability change."),await(async function(o){const T=Mr(o);T.Ea.add(4),await l1(T),T.Ra.set("Unknown"),T.Ea.delete(4),await xS(T)})(this))}))})),this.Ra=new iK(r,s)}}async function xS(t){if(By(t))for(const e of t.da)await e(!0)}async function l1(t){for(const e of t.da)await e(!1)}function mF(t,e){const n=Mr(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),KR(n)?XR(n):Zv(n).O_()&&YR(n,e))}function WR(t,e){const n=Mr(t),r=Zv(n);n.Ia.delete(e),r.O_()&&gF(n,e),n.Ia.size===0&&(r.O_()?r.L_():By(n)&&n.Ra.set("Unknown"))}function YR(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Er.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zv(t).Y_(e)}function gF(t,e){t.Va.Ue(e),Zv(t).Z_(e)}function XR(t){t.Va=new JY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zv(t).start(),t.Ra.ua()}function KR(t){return By(t)&&!Zv(t).x_()&&t.Ia.size>0}function By(t){return Mr(t).Ea.size===0}function yF(t){t.Va=void 0}async function oK(t){t.Ra.set("Online")}async function aK(t){t.Ia.forEach(((e,n)=>{YR(t,e)}))}async function lK(t,e){yF(t),KR(t)?(t.Ra.ha(e),XR(t)):t.Ra.set("Unknown")}async function cK(t,e,n){if(t.Ra.set("Online"),e instanceof tF&&e.state===2&&e.cause)try{await(async function(s,h){const p=h.cause;for(const _ of h.targetIds)s.Ia.has(_)&&(await s.remoteSyncer.rejectListen(_,p),s.Ia.delete(_),s.Va.removeTarget(_))})(t,e)}catch(r){Dn(Ay,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await TE(t,r)}else if(e instanceof OT?t.Va.Ze(e):e instanceof eF?t.Va.st(e):t.Va.tt(e),!n.isEqual(Er.min()))try{const r=await dF(t.localStore);n.compareTo(r)>=0&&await(function(h,p){const _=h.Va.Tt(p);return _.targetChanges.forEach(((o,T)=>{if(o.resumeToken.approximateByteSize()>0){const I=h.Ia.get(T);I&&h.Ia.set(T,I.withResumeToken(o.resumeToken,p))}})),_.targetMismatches.forEach(((o,T)=>{const I=h.Ia.get(o);if(!I)return;h.Ia.set(o,I.withResumeToken(Oa.EMPTY_BYTE_STRING,I.snapshotVersion)),gF(h,o);const M=new km(I.target,o,T,I.sequenceNumber);YR(h,M)})),h.remoteSyncer.applyRemoteEvent(_)})(t,n)}catch(r){Dn(Ay,"Failed to raise snapshot:",r),await TE(t,r)}}async function TE(t,e,n){if(!Kv(e))throw e;t.Ea.add(1),await l1(t),t.Ra.set("Offline"),n||(n=()=>dF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Dn(Ay,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xS(t)}))}function _F(t,e){return e().catch((n=>TE(t,n,e)))}async function bS(t){const e=Mr(t),n=Zm(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kR;for(;uK(e);)try{const s=await HX(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hK(e,s)}catch(s){await TE(e,s)}vF(e)&&xF(e)}function uK(t){return By(t)&&t.Ta.length<10}function hK(t,e){t.Ta.push(e);const n=Zm(t);n.O_()&&n.X_&&n.ea(e.mutations)}function vF(t){return By(t)&&!Zm(t).x_()&&t.Ta.length>0}function xF(t){Zm(t).start()}async function dK(t){Zm(t).ra()}async function fK(t){const e=Zm(t);for(const n of t.Ta)e.ea(n.mutations)}async function pK(t,e,n){const r=t.Ta.shift(),s=VR.from(r,e,n);await _F(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await bS(t)}async function mK(t,e){e&&Zm(t).X_&&await(async function(r,s){if((function(p){return KY(p)&&p!==Ht.ABORTED})(s.code)){const h=r.Ta.shift();Zm(r).B_(),await _F(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,s))),await bS(r)}})(t,e),vF(t)&&xF(t)}async function $O(t,e){const n=Mr(t);n.asyncQueue.verifyOperationInProgress(),Dn(Ay,"RemoteStore received new credentials");const r=By(n);n.Ea.add(3),await l1(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xS(n)}async function gK(t,e){const n=Mr(t);e?(n.Ea.delete(2),await xS(n)):e||(n.Ea.add(2),await l1(n),n.Ra.set("Unknown"))}function Zv(t){return t.ma||(t.ma=(function(n,r,s){const h=Mr(n);return h.sa(),new eK(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,s)})(t.datastore,t.asyncQueue,{Xo:oK.bind(null,t),t_:aK.bind(null,t),r_:lK.bind(null,t),H_:cK.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),KR(t)?XR(t):t.Ra.set("Unknown")):(await t.ma.stop(),yF(t))}))),t.ma}function Zm(t){return t.fa||(t.fa=(function(n,r,s){const h=Mr(n);return h.sa(),new tK(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dK.bind(null,t),r_:mK.bind(null,t),ta:fK.bind(null,t),na:pK.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await bS(t)):(await t.fa.stop(),t.Ta.length>0&&(Dn(Ay,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ZR{constructor(e,n,r,s,h){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=h,this.deferred=new cp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,h){const p=Date.now()+r,_=new ZR(e,n,p,s,h);return _.start(r),_}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mn(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function QR(t,e){if(xp("AsyncQueue",`${e}: ${t}`),Kv(t))return new Mn(Ht.UNAVAILABLE,`${e}: ${t}`);throw t}class gv{static emptySet(e){return new gv(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Qn.comparator(n.key,r.key):(n,r)=>Qn.comparator(n.key,r.key),this.keyedMap=Wx(),this.sortedSet=new qs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gv)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,h=r.getNext().key;if(!s.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class qO{constructor(){this.ga=new qs(Qn.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):mr(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Rv{constructor(e,n,r,s,h,p,_,o,T){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=o,this.hasCachedResults=T}static fromInitialDocuments(e,n,r,s,h){const p=[];return n.forEach((_=>{p.push({type:0,doc:_})})),new Rv(e,n,gv.emptySet(n),p,r,s,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class yK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _K{constructor(){this.queries=HO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Mr(n),h=s.queries;s.queries=HO(),h.forEach(((p,_)=>{for(const o of _.Sa)o.onError(r)}))})(this,new Mn(Ht.ABORTED,"Firestore shutting down"))}}function HO(){return new zy((t=>UB(t)),pS)}async function bF(t,e){const n=Mr(t);let r=3;const s=e.query;let h=n.queries.get(s);h?!h.ba()&&e.Da()&&(r=2):(h=new yK,r=e.Da()?0:1);try{switch(r){case 0:h.wa=await n.onListen(s,!0);break;case 1:h.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(p){const _=QR(p,`Initialization of query '${ev(e.query)}' failed`);return void e.onError(_)}n.queries.set(s,h),h.Sa.push(e),e.va(n.onlineState),h.wa&&e.Fa(h.wa)&&JR(n)}async function wF(t,e){const n=Mr(t),r=e.query;let s=3;const h=n.queries.get(r);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?s=e.Da()?0:1:!h.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vK(t,e){const n=Mr(t);let r=!1;for(const s of e){const h=s.query,p=n.queries.get(h);if(p){for(const _ of p.Sa)_.Fa(s)&&(r=!0);p.wa=s}}r&&JR(n)}function xK(t,e,n){const r=Mr(t),s=r.queries.get(e);if(s)for(const h of s.Sa)h.onError(n);r.queries.delete(e)}function JR(t){t.Ca.forEach((e=>{e.next()}))}var jI,GO;(GO=jI||(jI={})).Ma="default",GO.Cache="cache";class TF{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Rv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jI.Cache}}class EF{constructor(e){this.key=e}}class SF{constructor(e){this.key=e}}class bK{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=hi(),this.mutatedKeys=hi(),this.eu=jB(e),this.tu=new gv(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new qO,s=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,p=s,_=!1;const o=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,T=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((I,M)=>{const L=s.get(I),F=mS(this.query,M)?M:null,q=!!L&&this.mutatedKeys.has(L.key),$=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let X=!1;L&&F?L.data.isEqual(F.data)?q!==$&&(r.track({type:3,doc:F}),X=!0):this.su(L,F)||(r.track({type:2,doc:F}),X=!0,(o&&this.eu(F,o)>0||T&&this.eu(F,T)<0)&&(_=!0)):!L&&F?(r.track({type:0,doc:F}),X=!0):L&&!F&&(r.track({type:1,doc:L}),X=!0,(o||T)&&(_=!0)),X&&(F?(p=p.add(F),h=$?h.add(I):h.delete(I)):(p=p.delete(I),h=h.delete(I)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const I=this.query.limitType==="F"?p.last():p.first();p=p.delete(I.key),h=h.delete(I.key),r.track({type:1,doc:I})}return{tu:p,iu:r,Cs:_,mutatedKeys:h}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((I,M)=>(function(F,q){const $=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mr(20277,{Rt:X})}};return $(F)-$(q)})(I.type,M.type)||this.eu(I.doc,M.doc))),this.ou(r),s=s??!1;const _=n&&!s?this._u():[],o=this.Xa.size===0&&this.current&&!s?1:0,T=o!==this.Za;return this.Za=o,p.length!==0||T?{snapshot:new Rv(this.query,e.tu,h,p,e.mutatedKeys,o===0,T,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=hi(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new SF(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new EF(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=hi();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const eD="SyncEngine";class wK{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TK{constructor(e){this.key=e,this.hu=!1}}class EK{constructor(e,n,r,s,h,p){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new zy((_=>UB(_)),pS),this.Iu=new Map,this.Eu=new Set,this.du=new qs(Qn.comparator),this.Au=new Map,this.Ru=new $R,this.Vu={},this.mu=new Map,this.fu=Mv.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SK(t,e,n=!0){const r=DF(t);let s;const h=r.Tu.get(e);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),s=h.view.lu()):s=await CF(r,e,n,!0),s}async function CK(t,e){const n=DF(t);await CF(n,e,!0,!1)}async function CF(t,e,n,r){const s=await GX(t.localStore,Yd(e)),h=s.targetId,p=t.sharedClientState.addLocalQueryTarget(h,n);let _;return r&&(_=await AK(t,e,h,p==="current",s.resumeToken)),t.isPrimaryClient&&n&&mF(t.remoteStore,s),_}async function AK(t,e,n,r,s){t.pu=(M,L,F)=>(async function($,X,te,he){let ie=X.view.ru(te);ie.Cs&&(ie=await BO($.localStore,X.query,!1).then((({documents:ce})=>X.view.ru(ce,ie))));const me=he&&he.targetChanges.get(X.targetId),ge=he&&he.targetMismatches.get(X.targetId)!=null,Ee=X.view.applyChanges(ie,$.isPrimaryClient,me,ge);return YO($,X.targetId,Ee.au),Ee.snapshot})(t,M,L,F);const h=await BO(t.localStore,e,!0),p=new bK(e,h.Qs),_=p.ru(h.documents),o=a1.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),T=p.applyChanges(_,t.isPrimaryClient,o);YO(t,n,T.au);const I=new wK(e,n,p);return t.Tu.set(e,I),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),T.snapshot}async function IK(t,e,n){const r=Mr(t),s=r.Tu.get(e),h=r.Iu.get(s.targetId);if(h.length>1)return r.Iu.set(s.targetId,h.filter((p=>!pS(p,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await VI(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&WR(r.remoteStore,s.targetId),$I(r,s.targetId)})).catch(Xv)):($I(r,s.targetId),await VI(r.localStore,s.targetId,!0))}async function MK(t,e){const n=Mr(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),WR(n.remoteStore,r.targetId))}async function RK(t,e,n){const r=NK(t);try{const s=await(function(p,_){const o=Mr(p),T=Es.now(),I=_.reduce(((F,q)=>F.add(q.key)),hi());let M,L;return o.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let q=bp(),$=hi();return o.Ns.getEntries(F,I).next((X=>{q=X,q.forEach(((te,he)=>{he.isValidDocument()||($=$.add(te))}))})).next((()=>o.localDocuments.getOverlayedDocuments(F,q))).next((X=>{M=X;const te=[];for(const he of _){const ie=HY(he,M.get(he.key).overlayedDocument);ie!=null&&te.push(new Ny(he.key,ie,PB(ie.value.mapValue),Xd.exists(!0)))}return o.mutationQueue.addMutationBatch(F,T,te,_)})).next((X=>{L=X;const te=X.applyToLocalDocumentSet(M,$);return o.documentOverlayCache.saveOverlays(F,X.batchId,te)}))})).then((()=>({batchId:L.batchId,changes:qB(M)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(p,_,o){let T=p.Vu[p.currentUser.toKey()];T||(T=new qs(ui)),T=T.insert(_,o),p.Vu[p.currentUser.toKey()]=T})(r,s.batchId,n),await c1(r,s.changes),await bS(r.remoteStore)}catch(s){const h=QR(s,"Failed to persist write");n.reject(h)}}async function AF(t,e){const n=Mr(t);try{const r=await $X(n.localStore,e);e.targetChanges.forEach(((s,h)=>{const p=n.Au.get(h);p&&(Qi(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?p.hu=!0:s.modifiedDocuments.size>0?Qi(p.hu,14607):s.removedDocuments.size>0&&(Qi(p.hu,42227),p.hu=!1))})),await c1(n,r,e)}catch(r){await Xv(r)}}function WO(t,e,n){const r=Mr(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((h,p)=>{const _=p.view.va(e);_.snapshot&&s.push(_.snapshot)})),(function(p,_){const o=Mr(p);o.onlineState=_;let T=!1;o.queries.forEach(((I,M)=>{for(const L of M.Sa)L.va(_)&&(T=!0)})),T&&JR(o)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function DK(t,e,n){const r=Mr(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),h=s&&s.key;if(h){let p=new qs(Qn.comparator);p=p.insert(h,dl.newNoDocument(h,Er.min()));const _=hi().add(h),o=new _S(Er.min(),new Map,new qs(ui),p,_);await AF(r,o),r.du=r.du.remove(h),r.Au.delete(e),tD(r)}else await VI(r.localStore,e,!1).then((()=>$I(r,e,n))).catch(Xv)}async function kK(t,e){const n=Mr(t),r=e.batch.batchId;try{const s=await jX(n.localStore,e);MF(n,r,null),IF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await c1(n,s)}catch(s){await Xv(s)}}async function PK(t,e,n){const r=Mr(t);try{const s=await(function(p,_){const o=Mr(p);return o.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let I;return o.mutationQueue.lookupMutationBatch(T,_).next((M=>(Qi(M!==null,37113),I=M.keys(),o.mutationQueue.removeMutationBatch(T,M)))).next((()=>o.mutationQueue.performConsistencyCheck(T))).next((()=>o.documentOverlayCache.removeOverlaysForBatchId(T,I,_))).next((()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,I))).next((()=>o.localDocuments.getDocuments(T,I)))}))})(r.localStore,e);MF(r,e,n),IF(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await c1(r,s)}catch(s){await Xv(s)}}function IF(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function MF(t,e,n){const r=Mr(t);let s=r.Vu[r.currentUser.toKey()];if(s){const h=s.get(e);h&&(n?h.reject(n):h.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function $I(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||RF(t,r)}))}function RF(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(WR(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tD(t))}function YO(t,e,n){for(const r of n)r instanceof EF?(t.Ru.addReference(r.key,e),LK(t,r)):r instanceof SF?(Dn(eD,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||RF(t,r.key)):mr(19791,{wu:r})}function LK(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Dn(eD,"New document in limbo: "+n),t.Eu.add(r),tD(t))}function tD(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Qn(xs.fromString(e)),r=t.fu.next();t.Au.set(r,new TK(n)),t.du=t.du.insert(n,r),mF(t.remoteStore,new km(Yd(NR(n.path)),r,"TargetPurposeLimboResolution",hS.ce))}}async function c1(t,e,n){const r=Mr(t),s=[],h=[],p=[];r.Tu.isEmpty()||(r.Tu.forEach(((_,o)=>{p.push(r.pu(o,e,n).then((T=>{if((T||n)&&r.isPrimaryClient){const I=T?!T.fromCache:n?.targetChanges.get(o.targetId)?.current;r.sharedClientState.updateQueryState(o.targetId,I?"current":"not-current")}if(T){s.push(T);const I=HR.As(o.targetId,T);h.push(I)}})))})),await Promise.all(p),r.Pu.H_(s),await(async function(o,T){const I=Mr(o);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",(M=>Wt.forEach(T,(L=>Wt.forEach(L.Es,(F=>I.persistence.referenceDelegate.addReference(M,L.targetId,F))).next((()=>Wt.forEach(L.ds,(F=>I.persistence.referenceDelegate.removeReference(M,L.targetId,F)))))))))}catch(M){if(!Kv(M))throw M;Dn(GR,"Failed to update sequence numbers: "+M)}for(const M of T){const L=M.targetId;if(!M.fromCache){const F=I.Ms.get(L),q=F.snapshotVersion,$=F.withLastLimboFreeSnapshotVersion(q);I.Ms=I.Ms.insert(L,$)}}})(r.localStore,h))}async function OK(t,e){const n=Mr(t);if(!n.currentUser.isEqual(e)){Dn(eD,"User change. New user:",e.toKey());const r=await hF(n.localStore,e);n.currentUser=e,(function(h,p){h.mu.forEach((_=>{_.forEach((o=>{o.reject(new Mn(Ht.CANCELLED,p))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await c1(n,r.Ls)}}function zK(t,e){const n=Mr(t),r=n.Au.get(e);if(r&&r.hu)return hi().add(r.key);{let s=hi();const h=n.Iu.get(e);if(!h)return s;for(const p of h){const _=n.Tu.get(p);s=s.unionWith(_.view.nu)}return s}}function DF(t){const e=Mr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DK.bind(null,e),e.Pu.H_=vK.bind(null,e.eventManager),e.Pu.yu=xK.bind(null,e.eventManager),e}function NK(t){const e=Mr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PK.bind(null,e),e}class EE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vS(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UX(this.persistence,new BX,e.initialUser,this.serializer)}Cu(e){return new uF(qR.mi,this.serializer)}Du(e){return new YX}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}EE.provider={build:()=>new EE};class BK extends EE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qi(this.persistence.referenceDelegate instanceof wE,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TX(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?sc.withCacheSize(this.cacheSizeBytes):sc.DEFAULT;return new uF((r=>wE.mi(r,n)),this.serializer)}}class qI{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OK.bind(null,this.syncEngine),await gK(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _K})()}createDatastore(e){const n=vS(e.databaseInfo.databaseId),r=(function(h){return new JX(h)})(e.databaseInfo);return(function(h,p,_,o){return new rK(h,p,_,o)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,h,p,_){return new sK(r,s,h,p,_)})(this.localStore,this.datastore,e.asyncQueue,(n=>WO(this.syncEngine,n,0)),(function(){return UO.v()?new UO:new XX})())}createSyncEngine(e,n){return(function(s,h,p,_,o,T,I){const M=new EK(s,h,p,_,o,T);return I&&(M.gu=!0),M})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Mr(n);Dn(Ay,"RemoteStore shutting down."),r.Ea.add(5),await l1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}qI.provider={build:()=>new qI};class kF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xp("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Qm="FirestoreClient";class FK{constructor(e,n,r,s,h){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=hl.UNAUTHENTICATED,this.clientId=DR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async p=>{Dn(Qm,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(r,(p=>(Dn(Qm,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=QR(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function pA(t,e){t.asyncQueue.verifyOperationInProgress(),Dn(Qm,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await hF(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function XO(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VK(t);Dn(Qm,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>$O(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>$O(e.remoteStore,s))),t._onlineComponents=e}async function VK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Dn(Qm,"Using user provided OfflineComponentProvider");try{await pA(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Ht.FAILED_PRECONDITION||s.code===Ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Sv("Error using user provided cache. Falling back to memory cache: "+n),await pA(t,new EE)}}else Dn(Qm,"Using default OfflineComponentProvider"),await pA(t,new BK(void 0));return t._offlineComponents}async function PF(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Dn(Qm,"Using user provided OnlineComponentProvider"),await XO(t,t._uninitializedComponentsProvider._online)):(Dn(Qm,"Using default OnlineComponentProvider"),await XO(t,new qI))),t._onlineComponents}function UK(t){return PF(t).then((e=>e.syncEngine))}async function LF(t){const e=await PF(t),n=e.eventManager;return n.onListen=SK.bind(null,e.syncEngine),n.onUnlisten=IK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MK.bind(null,e.syncEngine),n}function jK(t,e,n={}){const r=new cp;return t.asyncQueue.enqueueAndForget((async()=>(function(h,p,_,o,T){const I=new kF({next:L=>{I.Nu(),p.enqueueAndForget((()=>wF(h,M)));const F=L.docs.has(_);!F&&L.fromCache?T.reject(new Mn(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&L.fromCache&&o&&o.source==="server"?T.reject(new Mn(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(L)},error:L=>T.reject(L)}),M=new TF(NR(_.path),I,{includeMetadataChanges:!0,qa:!0});return bF(h,M)})(await LF(t),t.asyncQueue,e,n,r))),r.promise}function $K(t,e,n={}){const r=new cp;return t.asyncQueue.enqueueAndForget((async()=>(function(h,p,_,o,T){const I=new kF({next:L=>{I.Nu(),p.enqueueAndForget((()=>wF(h,M))),L.fromCache&&o.source==="server"?T.reject(new Mn(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(L)},error:L=>T.reject(L)}),M=new TF(_,I,{includeMetadataChanges:!0,qa:!0});return bF(h,M)})(await LF(t),t.asyncQueue,e,n,r))),r.promise}function OF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const KO=new Map;const zF="firestore.googleapis.com",ZO=!0;class QO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Mn(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zF,this.ssl=ZO}else this.host=e.host,this.ssl=e.ssl??ZO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bX)throw new Mn(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OF(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Mn(Ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Mn(Ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Mn(Ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wS{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mn(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Mn(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new YW;switch(r.type){case"firstParty":return new QW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Mn(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=KO.get(n);r&&(Dn("ComponentProvider","Removing Datastore"),KO.delete(n),r.terminate())})(this),Promise.resolve()}}function qK(t,e,n,r={}){t=Gm(t,wS);const s=og(e),h=t._getSettings(),p={...h,emulatorOptions:t._getEmulatorOptions()},_=`${e}:${n}`;s&&(yR(`https://${_}`),_R("Firestore",!0)),h.host!==zF&&h.host!==_&&Sv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const o={...h,host:_,ssl:s,emulatorOptions:r};if(!wy(o,p)&&(t._setSettings(o),r.mockUserToken)){let T,I;if(typeof r.mockUserToken=="string")T=r.mockUserToken,I=hl.MOCK_USER;else{T=A4(r.mockUserToken,t._app?.options.projectId);const M=r.mockUserToken.sub||r.mockUserToken.user_id;if(!M)throw new Mn(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new hl(M)}t._authCredentials=new XW(new bB(T,I))}}class Qv{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qv(this.firestore,e,this._query)}}class Lo{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lo(this.firestore,e,this._key)}toJSON(){return{type:Lo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(i1(n,Lo._jsonSchema))return new Lo(e,r||null,new Qn(xs.fromString(n.referencePath)))}}Lo._jsonSchemaVersion="firestore/documentReference/1.0",Lo._jsonSchema={type:Po("string",Lo._jsonSchemaVersion),referencePath:Po("string")};class Nm extends Qv{constructor(e,n,r){super(e,n,NR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lo(this.firestore,null,new Qn(e))}withConverter(e){return new Nm(this.firestore,e,this._path)}}function u1(t,e,...n){if(t=zo(t),wB("collection","path",e),t instanceof wS){const r=xs.fromString(e,...n);return hO(r),new Nm(t,null,r)}{if(!(t instanceof Lo||t instanceof Nm))throw new Mn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xs.fromString(e,...n));return hO(r),new Nm(t.firestore,null,r)}}function $c(t,e,...n){if(t=zo(t),arguments.length===1&&(e=DR.newId()),wB("doc","path",e),t instanceof wS){const r=xs.fromString(e,...n);return uO(r),new Lo(t,null,new Qn(r))}{if(!(t instanceof Lo||t instanceof Nm))throw new Mn(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xs.fromString(e,...n));return uO(r),new Lo(t.firestore,t instanceof Nm?t.converter:null,new Qn(r))}}const JO="AsyncQueue";class e3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fF(this,"async_queue_retry"),this._c=()=>{const r=fA();r&&Dn(JO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fA();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fA();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new cp;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Kv(e))throw e;Dn(JO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,xp("INTERNAL UNHANDLED ERROR: ",t3(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ZR.createAndSchedule(this,e,n,r,(h=>this.hc(h)));return this.tc.push(s),s}uc(){this.nc&&mr(47125,{Pc:t3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function t3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class h1 extends wS{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new e3,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new e3(e),this._firestoreClient=void 0,await e}}}function HK(t,e){const n=typeof t=="object"?t:bR(),r=typeof t=="string"?t:gE,s=oS(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const h=E4("firestore");h&&qK(s,...h)}return s}function nD(t){if(t._terminated)throw new Mn(Ht.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GK(t),t._firestoreClient}function GK(t){const e=t._freezeSettings(),n=(function(s,h,p,_){return new mY(s,h,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,OF(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const h=s?._online.build();return{_offline:s?._offline.build(h),_online:h}})(t._componentsProvider))}class Iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Iu(Oa.fromBase64String(e))}catch(n){throw new Mn(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Iu(Oa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Iu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(i1(e,Iu._jsonSchema))return Iu.fromBase64String(e.bytes)}}Iu._jsonSchemaVersion="firestore/bytes/1.0",Iu._jsonSchema={type:Po("string",Iu._jsonSchemaVersion),bytes:Po("string")};class rD{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Mn(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new La(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iD{constructor(e){this._methodName=e}}class Zd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Mn(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Mn(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ui(this._lat,e._lat)||ui(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zd._jsonSchemaVersion}}static fromJSON(e){if(i1(e,Zd._jsonSchema))return new Zd(e.latitude,e.longitude)}}Zd._jsonSchemaVersion="firestore/geoPoint/1.0",Zd._jsonSchema={type:Po("string",Zd._jsonSchemaVersion),latitude:Po("number"),longitude:Po("number")};class Qd{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==s[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(i1(e,Qd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Qd(e.vectorValues);throw new Mn(Ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qd._jsonSchemaVersion="firestore/vectorValue/1.0",Qd._jsonSchema={type:Po("string",Qd._jsonSchemaVersion),vectorValues:Po("object")};const WK=/^__.*__$/;class YK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ny(e,this.data,this.fieldMask,n,this.fieldTransforms):new o1(e,this.data,n,this.fieldTransforms)}}function NF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mr(40011,{Ac:t})}}class sD{constructor(e,n,r,s,h,p){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sD({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return SE(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NF(this.Ac)&&WK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vS(e)}Cc(e,n,r,s=!1){return new sD({Ac:e,methodName:n,Dc:r,path:La.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BF(t){const e=t._freezeSettings(),n=vS(t._databaseId);return new XK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KK(t,e,n,r,s,h={}){const p=t.Cc(h.merge||h.mergeFields?2:0,e,n,s);UF("Data must be an object, but it was:",p,r);const _=FF(r,p);let o,T;if(h.merge)o=new Ch(p.fieldMask),T=p.fieldTransforms;else if(h.mergeFields){const I=[];for(const M of h.mergeFields){const L=QK(e,M,n);if(!p.contains(L))throw new Mn(Ht.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);eZ(I,L)||I.push(L)}o=new Ch(I),T=p.fieldTransforms.filter((M=>o.covers(M.field)))}else o=null,T=p.fieldTransforms;return new YK(new Au(_),o,T)}class oD extends iD{_toFieldTransform(e){return new UY(e.path,new Lb)}isEqual(e){return e instanceof oD}}function ZK(t,e,n,r=!1){return aD(n,t.Cc(r?4:3,e))}function aD(t,e){if(VF(t=zo(t)))return UF("Unsupported field value:",e,t),FF(t,e);if(t instanceof iD)return(function(r,s){if(!NF(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(s);h&&s.fieldTransforms.push(h)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const h=[];let p=0;for(const _ of r){let o=aD(_,s.wc(p));o==null&&(o={nullValue:"NULL_VALUE"}),h.push(o),p++}return{arrayValue:{values:h}}})(t,e)}return(function(r,s){if((r=zo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BY(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=Es.fromDate(r);return{timestampValue:bE(s.serializer,h)}}if(r instanceof Es){const h=new Es(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bE(s.serializer,h)}}if(r instanceof Zd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Iu)return{bytesValue:nF(s.serializer,r._byteString)};if(r instanceof Lo){const h=s.databaseId,p=r.firestore._databaseId;if(!p.isEqual(h))throw s.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:jR(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Qd)return(function(p,_){return{mapValue:{fields:{[DB]:{stringValue:kB},[yE]:{arrayValue:{values:p.toArray().map((T=>{if(typeof T!="number")throw _.Sc("VectorValues must only contain numeric values.");return BR(_.serializer,T)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${uS(r)}`)})(t,e)}function FF(t,e){const n={};return SB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oy(t,((r,s)=>{const h=aD(s,e.mc(r));h!=null&&(n[r]=h)})),{mapValue:{fields:n}}}function VF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Es||t instanceof Zd||t instanceof Iu||t instanceof Lo||t instanceof iD||t instanceof Qd)}function UF(t,e,n){if(!VF(n)||!TB(n)){const r=uS(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function QK(t,e,n){if((e=zo(e))instanceof rD)return e._internalPath;if(typeof e=="string")return jF(t,e);throw SE("Field path arguments must be of type string or ",t,!1,void 0,n)}const JK=new RegExp("[~\\*/\\[\\]]");function jF(t,e,n){if(e.search(JK)>=0)throw SE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rD(...e.split("."))._internalPath}catch{throw SE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function SE(t,e,n,r,s){const h=r&&!r.isEmpty(),p=s!==void 0;let _=`Function ${e}() called with invalid data`;n&&(_+=" (via `toFirestore()`)"),_+=". ";let o="";return(h||p)&&(o+=" (found",h&&(o+=` in field ${r}`),p&&(o+=` in document ${s}`),o+=")"),new Mn(Ht.INVALID_ARGUMENT,_+t+o)}function eZ(t,e){return t.some((n=>n.isEqual(e)))}class $F{constructor(e,n,r,s,h){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Lo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lD("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tZ extends $F{data(){return super.data()}}function lD(t,e){return typeof e=="string"?jF(t,e):e instanceof rD?e._internalPath:e._delegate._internalPath}function nZ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Mn(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cD{}class rZ extends cD{}function TS(t,e,...n){let r=[];e instanceof cD&&r.push(e),r=r.concat(n),(function(h){const p=h.filter((o=>o instanceof uD)).length,_=h.filter((o=>o instanceof ES)).length;if(p>1||p>0&&_>0)throw new Mn(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class ES extends rZ{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ES(e,n,r)}_apply(e){const n=this._parse(e);return qF(e._query,n),new Qv(e.firestore,e.converter,LI(e._query,n))}_parse(e){const n=BF(e.firestore);return(function(h,p,_,o,T,I,M){let L;if(T.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new Mn(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){r3(M,I);const q=[];for(const $ of M)q.push(n3(o,h,$));L={arrayValue:{values:q}}}else L=n3(o,h,M)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||r3(M,I),L=ZK(_,p,M,I==="in"||I==="not-in");return ko.create(T,I,L)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Nb(t,e,n){const r=e,s=lD("where",t);return ES._create(s,r,n)}class uD extends cD{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uD(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Mh.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,h){let p=s;const _=h.getFlattenedFilters();for(const o of _)qF(p,o),p=LI(p,o)})(e._query,n),new Qv(e.firestore,e.converter,LI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function n3(t,e,n){if(typeof(n=zo(n))=="string"){if(n==="")throw new Mn(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VB(e)&&n.indexOf("/")!==-1)throw new Mn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xs.fromString(n));if(!Qn.isDocumentKey(r))throw new Mn(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vO(t,new Qn(r))}if(n instanceof Lo)return vO(t,n._key);throw new Mn(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uS(n)}.`)}function r3(t,e){if(!Array.isArray(t)||t.length===0)throw new Mn(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qF(t,e){const n=(function(s,h){for(const p of s)for(const _ of p.getFlattenedFilters())if(h.indexOf(_.op)>=0)return _.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Mn(Ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Mn(Ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iZ{convertValue(e,n="none"){switch(Km(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mr(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Oy(e,((s,h)=>{r[s]=this.convertValue(h,n)})),r}convertVectorValue(e){const n=e.fields?.[yE].arrayValue?.values?.map((r=>fo(r.doubleValue)));return new Qd(n)}convertGeoPoint(e){return new Zd(fo(e.latitude),fo(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Db(e));default:return null}}convertTimestamp(e){const n=Ym(e);return new Es(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xs.fromString(e);Qi(lF(r),9688,{name:e});const s=new kb(r.get(1),r.get(3)),h=new Qn(r.popFirst(5));return s.isEqual(n)||xp(`Document ${h} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function sZ(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xx{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _y extends $F{constructor(e,n,r,s,h,p){super(e,n,r,s,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mn(Ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_y._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_y._jsonSchemaVersion="firestore/documentSnapshot/1.0",_y._jsonSchema={type:Po("string",_y._jsonSchemaVersion),bundleSource:Po("string","DocumentSnapshot"),bundleName:Po("string"),bundle:Po("string")};class zT extends _y{data(e={}){return super.data(e)}}class yv{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xx(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new zT(this._firestore,this._userDataWriter,r.key,r,new Xx(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Mn(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,h){if(s._snapshot.oldDocs.isEmpty()){let p=0;return s._snapshot.docChanges.map((_=>{const o=new zT(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Xx(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter);return _.doc,{type:"added",doc:o,oldIndex:-1,newIndex:p++}}))}{let p=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((_=>h||_.type!==3)).map((_=>{const o=new zT(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Xx(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter);let T=-1,I=-1;return _.type!==0&&(T=p.indexOf(_.doc.key),p=p.delete(_.doc.key)),_.type!==1&&(p=p.add(_.doc),I=p.indexOf(_.doc.key)),{type:oZ(_.type),doc:o,oldIndex:T,newIndex:I}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mn(Ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yv._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=DR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),s.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mr(61501,{type:t})}}function Fy(t){t=Gm(t,Lo);const e=Gm(t.firestore,h1);return jK(nD(e),t._key).then((n=>aZ(e,t,n)))}yv._jsonSchemaVersion="firestore/querySnapshot/1.0",yv._jsonSchema={type:Po("string",yv._jsonSchemaVersion),bundleSource:Po("string","QuerySnapshot"),bundleName:Po("string"),bundle:Po("string")};class HF extends iZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lo(this.firestore,null,n)}}function d1(t){t=Gm(t,Qv);const e=Gm(t.firestore,h1),n=nD(e),r=new HF(e);return nZ(t._query),$K(n,t._query).then((s=>new yv(e,r,t,s)))}function Dv(t,e,n){t=Gm(t,Lo);const r=Gm(t.firestore,h1),s=sZ(t.converter,e,n);return GF(r,[KK(BF(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xd.none())])}function NT(t){return GF(Gm(t.firestore,h1),[new FR(t._key,Xd.none())])}function GF(t,e){return(function(r,s){const h=new cp;return r.asyncQueue.enqueueAndForget((async()=>RK(await UK(r),s,h))),h.promise})(nD(t),e)}function aZ(t,e,n){const r=n.docs.get(e._key),s=new HF(t);return new _y(t,s,e._key,r,new Xx(n.hasPendingWrites,n.fromCache),e.converter)}function Jm(){return new oD("serverTimestamp")}(function(e,n=!0){(function(s){Yv=s})(Py),Ty(new Hm("firestore",((r,{instanceIdentifier:s,options:h})=>{const p=r.getProvider("app").getImmediate(),_=new h1(new KW(r.getProvider("auth-internal")),new JW(p,r.getProvider("app-check-internal")),(function(T,I){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new Mn(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kb(T.options.projectId,I)})(p,s),p);return h={useFetchStreams:n,...h},_._setSettings(h),_}),"PUBLIC").setMultipleInstances(!0)),Hd(oO,aO,e),Hd(oO,aO,"esm2020")})();const WF="firebasestorage.googleapis.com",YF="storageBucket",lZ=120*1e3,cZ=600*1e3;class ro extends Lu{constructor(e,n,r=0){super(mA(e),`Firebase Storage: ${n} (${mA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ro.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var to;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(to||(to={}));function mA(t){return"storage/"+t}function hD(){const t="An unknown error occurred, please check the error payload for server response.";return new ro(to.UNKNOWN,t)}function uZ(t){return new ro(to.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function hZ(t){return new ro(to.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dZ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ro(to.UNAUTHENTICATED,t)}function fZ(){return new ro(to.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pZ(t){return new ro(to.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mZ(){return new ro(to.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gZ(){return new ro(to.CANCELED,"User canceled the upload/download.")}function yZ(t){return new ro(to.INVALID_URL,"Invalid URL '"+t+"'.")}function _Z(t){return new ro(to.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vZ(){return new ro(to.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YF+"' property when initializing the app?")}function xZ(){return new ro(to.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bZ(){return new ro(to.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wZ(t){return new ro(to.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function HI(t){return new ro(to.INVALID_ARGUMENT,t)}function XF(){return new ro(to.APP_DELETED,"The Firebase app was deleted.")}function TZ(t){return new ro(to.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pb(t,e){return new ro(to.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Mx(t){throw new ro(to.INTERNAL_ERROR,"Internal error: "+t)}class Fc{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Fc.makeFromUrl(e,n)}catch{return new Fc(e,"")}if(r.path==="")return r;throw _Z(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function h(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}const p="(/(.*))?$",_=new RegExp("^gs://"+s+p,"i"),o={bucket:1,path:3};function T(me){me.path_=decodeURIComponent(me.path)}const I="v[A-Za-z0-9_]+",M=n.replace(/[.]/g,"\\."),L="(/([^?#]*).*)?$",F=new RegExp(`^https?://${M}/${I}/b/${s}/o${L}`,"i"),q={bucket:1,path:3},$=n===WF?"(?:storage.googleapis.com|storage.cloud.google.com)":n,X="([^?#]*)",te=new RegExp(`^https?://${$}/${s}/${X}`,"i"),ie=[{regex:_,indices:o,postModify:h},{regex:F,indices:q,postModify:T},{regex:te,indices:{bucket:1,path:2},postModify:T}];for(let me=0;me<ie.length;me++){const ge=ie[me],Ee=ge.regex.exec(e);if(Ee){const ce=Ee[ge.indices.bucket];let ee=Ee[ge.indices.path];ee||(ee=""),r=new Fc(ce,ee),ge.postModify(r);break}}if(r==null)throw yZ(e);return r}}class EZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function SZ(t,e,n){let r=1,s=null,h=null,p=!1,_=0;function o(){return _===2}let T=!1;function I(...X){T||(T=!0,e.apply(null,X))}function M(X){s=setTimeout(()=>{s=null,t(F,o())},X)}function L(){h&&clearTimeout(h)}function F(X,...te){if(T){L();return}if(X){L(),I.call(null,X,...te);return}if(o()||p){L(),I.call(null,X,...te);return}r<64&&(r*=2);let ie;_===1?(_=2,ie=0):ie=(r+Math.random())*1e3,M(ie)}let q=!1;function $(X){q||(q=!0,L(),!T&&(s!==null?(X||(_=2),clearTimeout(s),M(0)):X||(_=1)))}return M(0),h=setTimeout(()=>{p=!0,$(!0)},n),$}function CZ(t){t(!1)}function AZ(t){return t!==void 0}function IZ(t){return typeof t=="object"&&!Array.isArray(t)}function dD(t){return typeof t=="string"||t instanceof String}function i3(t){return fD()&&t instanceof Blob}function fD(){return typeof Blob<"u"}function s3(t,e,n,r){if(r<e)throw HI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw HI(`Invalid value for '${t}'. Expected ${n} or less.`)}function pD(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function KF(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var vy;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vy||(vy={}));function MZ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,h=e.indexOf(t)!==-1;return n||s||h}class RZ{constructor(e,n,r,s,h,p,_,o,T,I,M,L=!0,F=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=h,this.additionalRetryCodes_=p,this.callback_=_,this.errorCallback_=o,this.timeout_=T,this.progressCallback_=I,this.connectionFactory_=M,this.retry=L,this.isUsingEmulator=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,$)=>{this.resolve_=q,this.reject_=$,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qw(!1,null,!0));return}const h=this.connectionFactory_();this.pendingConnection_=h;const p=_=>{const o=_.loaded,T=_.lengthComputable?_.total:-1;this.progressCallback_!==null&&this.progressCallback_(o,T)};this.progressCallback_!==null&&h.addUploadProgressListener(p),h.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&h.removeUploadProgressListener(p),this.pendingConnection_=null;const _=h.getErrorCode()===vy.NO_ERROR,o=h.getStatus();if(!_||MZ(o,this.additionalRetryCodes_)&&this.retry){const I=h.getErrorCode()===vy.ABORT;r(!1,new Qw(!1,null,I));return}const T=this.successCodes_.indexOf(o)!==-1;r(!0,new Qw(T,h))})},n=(r,s)=>{const h=this.resolve_,p=this.reject_,_=s.connection;if(s.wasSuccessCode)try{const o=this.callback_(_,_.getResponse());AZ(o)?h(o):h()}catch(o){p(o)}else if(_!==null){const o=hD();o.serverResponse=_.getErrorText(),this.errorCallback_?p(this.errorCallback_(_,o)):p(o)}else if(s.canceled){const o=this.appDelete_?XF():gZ();p(o)}else{const o=mZ();p(o)}};this.canceled_?n(!1,new Qw(!1,null,!0)):this.backoffId_=SZ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qw{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DZ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kZ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LZ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OZ(t,e,n,r,s,h,p=!0,_=!1){const o=KF(t.urlParams),T=t.url+o,I=Object.assign({},t.headers);return PZ(I,e),DZ(I,n),kZ(I,h),LZ(I,r),new RZ(T,t.method,I,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,p,_)}function zZ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NZ(...t){const e=zZ();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(fD())return new Blob(t);throw new ro(to.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BZ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function FZ(t){if(typeof atob>"u")throw wZ("base-64");return atob(t)}const Vd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gA{constructor(e,n){this.data=e,this.contentType=n||null}}function VZ(t,e){switch(t){case Vd.RAW:return new gA(ZF(e));case Vd.BASE64:case Vd.BASE64URL:return new gA(QF(t,e));case Vd.DATA_URL:return new gA(jZ(e),$Z(e))}throw hD()}function ZF(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const h=r,p=t.charCodeAt(++n);r=65536|(h&1023)<<10|p&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function UZ(t){let e;try{e=decodeURIComponent(t)}catch{throw pb(Vd.DATA_URL,"Malformed data URL.")}return ZF(e)}function QF(t,e){switch(t){case Vd.BASE64:{const s=e.indexOf("-")!==-1,h=e.indexOf("_")!==-1;if(s||h)throw pb(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Vd.BASE64URL:{const s=e.indexOf("+")!==-1,h=e.indexOf("/")!==-1;if(s||h)throw pb(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FZ(e)}catch(s){throw s.message.includes("polyfill")?s:pb(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class JF{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pb(Vd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=qZ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jZ(t){const e=new JF(t);return e.base64?QF(Vd.BASE64,e.rest):UZ(e.rest)}function $Z(t){return new JF(t).contentType}function qZ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Dm{constructor(e,n){let r=0,s="";i3(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(i3(this.data_)){const r=this.data_,s=BZ(r,e,n);return s===null?null:new Dm(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Dm(r,!0)}}static getBlob(...e){if(fD()){const n=e.map(r=>r instanceof Dm?r.data_:r);return new Dm(NZ.apply(null,n))}else{const n=e.map(p=>dD(p)?VZ(Vd.RAW,p).data:p.data_);let r=0;n.forEach(p=>{r+=p.byteLength});const s=new Uint8Array(r);let h=0;return n.forEach(p=>{for(let _=0;_<p.length;_++)s[h++]=p[_]}),new Dm(s,!0)}}uploadData(){return this.data_}}function eV(t){let e;try{e=JSON.parse(t)}catch{return null}return IZ(e)?e:null}function HZ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GZ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function WZ(t,e){return e}class Ol{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||WZ}}let Jw=null;function YZ(t){return!dD(t)||t.length<2?t:tV(t)}function nV(){if(Jw)return Jw;const t=[];t.push(new Ol("bucket")),t.push(new Ol("generation")),t.push(new Ol("metageneration")),t.push(new Ol("name","fullPath",!0));function e(h,p){return YZ(p)}const n=new Ol("name");n.xform=e,t.push(n);function r(h,p){return p!==void 0?Number(p):p}const s=new Ol("size");return s.xform=r,t.push(s),t.push(new Ol("timeCreated")),t.push(new Ol("updated")),t.push(new Ol("md5Hash",null,!0)),t.push(new Ol("cacheControl",null,!0)),t.push(new Ol("contentDisposition",null,!0)),t.push(new Ol("contentEncoding",null,!0)),t.push(new Ol("contentLanguage",null,!0)),t.push(new Ol("contentType",null,!0)),t.push(new Ol("metadata","customMetadata",!0)),Jw=t,Jw}function XZ(t,e){function n(){const r=t.bucket,s=t.fullPath,h=new Fc(r,s);return e._makeStorageReference(h)}Object.defineProperty(t,"ref",{get:n})}function KZ(t,e,n){const r={};r.type="file";const s=n.length;for(let h=0;h<s;h++){const p=n[h];r[p.local]=p.xform(r,e[p.server])}return XZ(r,t),r}function rV(t,e,n){const r=eV(e);return r===null?null:KZ(t,r,n)}function ZZ(t,e,n,r){const s=eV(e);if(s===null||!dD(s.downloadTokens))return null;const h=s.downloadTokens;if(h.length===0)return null;const p=encodeURIComponent;return h.split(",").map(T=>{const I=t.bucket,M=t.fullPath,L="/b/"+p(I)+"/o/"+p(M),F=pD(L,n,r),q=KF({alt:"media",token:T});return F+q})[0]}function QZ(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const h=e[s];h.writable&&(n[h.server]=t[h.local])}return JSON.stringify(n)}class iV{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function sV(t){if(!t)throw hD()}function JZ(t,e){function n(r,s){const h=rV(t,s,e);return sV(h!==null),h}return n}function eQ(t,e){function n(r,s){const h=rV(t,s,e);return sV(h!==null),ZZ(h,s,t.host,t._protocol)}return n}function oV(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=fZ():s=dZ():n.getStatus()===402?s=hZ(t.bucket):n.getStatus()===403?s=pZ(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function tQ(t){const e=oV(t);function n(r,s){let h=e(r,s);return r.getStatus()===404&&(h=uZ(t.path)),h.serverResponse=s.serverResponse,h}return n}function nQ(t,e,n){const r=e.fullServerUrl(),s=pD(r,t.host,t._protocol),h="GET",p=t.maxOperationRetryTime,_=new iV(s,h,eQ(t,n),p);return _.errorHandler=tQ(e),_}function rQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function iQ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=rQ(null,e)),r}function sQ(t,e,n,r,s){const h=e.bucketOnlyServerUrl(),p={"X-Goog-Upload-Protocol":"multipart"};function _(){let ie="";for(let me=0;me<2;me++)ie=ie+Math.random().toString().slice(2);return ie}const o=_();p["Content-Type"]="multipart/related; boundary="+o;const T=iQ(e,r,s),I=QZ(T,n),M="--"+o+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+I+`\r
--`+o+`\r
Content-Type: `+T.contentType+`\r
\r
`,L=`\r
--`+o+"--",F=Dm.getBlob(M,r,L);if(F===null)throw xZ();const q={name:T.fullPath},$=pD(h,t.host,t._protocol),X="POST",te=t.maxUploadRetryTime,he=new iV($,X,JZ(t,n),te);return he.urlParams=q,he.headers=p,he.body=F.uploadData(),he.errorHandler=oV(e),he}class oQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vy.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vy.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vy.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,h){if(this.sent_)throw Mx("cannot .send() more than once");if(og(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),h!==void 0)for(const p in h)h.hasOwnProperty(p)&&this.xhr_.setRequestHeader(p,h[p].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mx("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aQ extends oQ{initXhr(){this.xhr_.responseType="text"}}function aV(){return new aQ}class Iy{constructor(e,n){this._service=e,n instanceof Fc?this._location=n:this._location=Fc.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Iy(e,n)}get root(){const e=new Fc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tV(this._location.path)}get storage(){return this._service}get parent(){const e=HZ(this._location.path);if(e===null)return null;const n=new Fc(this._location.bucket,e);return new Iy(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TZ(e)}}function lQ(t,e,n){t._throwIfRoot("uploadBytes");const r=sQ(t.storage,t._location,nV(),new Dm(e,!0),n);return t.storage.makeRequestWithTokens(r,aV).then(s=>({metadata:s,ref:t}))}function cQ(t){t._throwIfRoot("getDownloadURL");const e=nQ(t.storage,t._location,nV());return t.storage.makeRequestWithTokens(e,aV).then(n=>{if(n===null)throw bZ();return n})}function uQ(t,e){const n=GZ(t._location.path,e),r=new Fc(t._location.bucket,n);return new Iy(t.storage,r)}function hQ(t){return/^[A-Za-z]+:\/\//.test(t)}function dQ(t,e){return new Iy(t,e)}function lV(t,e){if(t instanceof mD){const n=t;if(n._bucket==null)throw vZ();const r=new Iy(n,n._bucket);return e!=null?lV(r,e):r}else return e!==void 0?uQ(t,e):t}function fQ(t,e){if(e&&hQ(e)){if(t instanceof mD)return dQ(t,e);throw HI("To use ref(service, url), the first argument must be a Storage instance.")}else return lV(t,e)}function o3(t,e){const n=e?.[YF];return n==null?null:Fc.makeFromBucketSpec(n,t)}function pQ(t,e,n,r={}){t.host=`${e}:${n}`;const s=og(e);s&&(yR(`https://${t.host}/b`),_R("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:h}=r;h&&(t._overrideAuthToken=typeof h=="string"?h:A4(h,t.app.options.projectId))}class mD{constructor(e,n,r,s,h,p=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=h,this._isUsingEmulator=p,this._bucket=null,this._host=WF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lZ,this._maxUploadRetryTime=cZ,this._requests=new Set,s!=null?this._bucket=Fc.makeFromBucketSpec(s,this._host):this._bucket=o3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fc.makeFromBucketSpec(this._url,e):this._bucket=o3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Iy(this,e)}_makeRequest(e,n,r,s,h=!0){if(this._deleted)return new EZ(XF());{const p=OZ(e,this._appId,r,s,n,this._firebaseVersion,h,this._isUsingEmulator);return this._requests.add(p),p.getPromise().then(()=>this._requests.delete(p),()=>this._requests.delete(p)),p}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const a3="@firebase/storage",l3="0.14.0";const cV="storage";function mQ(t,e,n){return t=zo(t),lQ(t,e,n)}function gQ(t){return t=zo(t),cQ(t)}function yQ(t,e){return t=zo(t),fQ(t,e)}function _Q(t=bR(),e){t=zo(t);const r=oS(t,cV).getImmediate({identifier:e}),s=E4("storage");return s&&vQ(r,...s),r}function vQ(t,e,n,r={}){pQ(t,e,n,r)}function xQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new mD(n,r,s,e,Py)}function bQ(){Ty(new Hm(cV,xQ,"PUBLIC").setMultipleInstances(!0)),Hd(a3,l3,""),Hd(a3,l3,"esm2020")}bQ();const wQ={apiKey:"AIzaSyCw4uyaxTqyqptlRFhIx4_EmaWiW0RNE5A",authDomain:"madhacks-31fc9.firebaseapp.com",projectId:"madhacks-31fc9",storageBucket:"madhacks-31fc9.firebasestorage.app",messagingSenderId:"188144649286",appId:"1:188144649286:web:1fa1eecddf1e2d010bf647"},gD=R4(wQ),f1=GW(gD);kG(f1,sB).catch(console.error);const fa=HK(gD),TQ=_Q(gD);function EQ(t,e){return RG(f1,t,e)}function SQ(t,e){return DG(f1,t,e)}function CQ(){return zG(f1)}function AQ(t){return OG(f1,e=>{const n=e??null;n?document.cookie=`sessionUid=${n.uid};path=/;max-age=604800`:document.cookie="sessionUid=;path=/;max-age=0",t(n)})}const Sp=H.createContext({user:null,loading:!0});function IQ({children:t}){const[e,n]=H.useState(null),[r,s]=H.useState(!0);return H.useEffect(()=>{const h=AQ(p=>{n(p),s(!1)});return()=>h()},[]),r?V.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, sans-serif"},children:"Loading session"}):V.jsx(Sp.Provider,{value:{user:e,loading:r},children:t})}const Bb={black:"#000",white:"#fff"},q_={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},H_={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},G_={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},W_={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Y_={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Rx={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},MQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function wp(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const Jd="$$material";function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(null,arguments)}function RQ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function DQ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var kQ=(function(){function t(n){var r=this;this._insertTag=function(s){var h;r.tags.length===0?r.insertionPoint?h=r.insertionPoint.nextSibling:r.prepend?h=r.container.firstChild:h=r.before:h=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,h),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(DQ(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var h=RQ(s);try{h.insertRule(r,h.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t})(),ul="-ms-",AE="-moz-",ji="-webkit-",uV="comm",yD="rule",_D="decl",PQ="@import",hV="@keyframes",LQ="@layer",OQ=Math.abs,SS=String.fromCharCode,zQ=Object.assign;function NQ(t,e){return Pa(t,0)^45?(((e<<2^Pa(t,0))<<2^Pa(t,1))<<2^Pa(t,2))<<2^Pa(t,3):0}function dV(t){return t.trim()}function BQ(t,e){return(t=e.exec(t))?t[0]:t}function $i(t,e,n){return t.replace(e,n)}function GI(t,e){return t.indexOf(e)}function Pa(t,e){return t.charCodeAt(e)|0}function Fb(t,e,n){return t.slice(e,n)}function Pd(t){return t.length}function vD(t){return t.length}function eT(t,e){return e.push(t),t}function FQ(t,e){return t.map(e).join("")}var CS=1,kv=1,fV=0,ac=0,Do=0,Jv="";function AS(t,e,n,r,s,h,p){return{value:t,root:e,parent:n,type:r,props:s,children:h,line:CS,column:kv,length:p,return:""}}function Dx(t,e){return zQ(AS("",null,null,"",null,null,0),t,{length:-t.length},e)}function VQ(){return Do}function UQ(){return Do=ac>0?Pa(Jv,--ac):0,kv--,Do===10&&(kv=1,CS--),Do}function Vc(){return Do=ac<fV?Pa(Jv,ac++):0,kv++,Do===10&&(kv=1,CS++),Do}function ef(){return Pa(Jv,ac)}function BT(){return ac}function p1(t,e){return Fb(Jv,t,e)}function Vb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function pV(t){return CS=kv=1,fV=Pd(Jv=t),ac=0,[]}function mV(t){return Jv="",t}function FT(t){return dV(p1(ac-1,WI(t===91?t+2:t===40?t+1:t)))}function jQ(t){for(;(Do=ef())&&Do<33;)Vc();return Vb(t)>2||Vb(Do)>3?"":" "}function $Q(t,e){for(;--e&&Vc()&&!(Do<48||Do>102||Do>57&&Do<65||Do>70&&Do<97););return p1(t,BT()+(e<6&&ef()==32&&Vc()==32))}function WI(t){for(;Vc();)switch(Do){case t:return ac;case 34:case 39:t!==34&&t!==39&&WI(Do);break;case 40:t===41&&WI(t);break;case 92:Vc();break}return ac}function qQ(t,e){for(;Vc()&&t+Do!==57;)if(t+Do===84&&ef()===47)break;return"/*"+p1(e,ac-1)+"*"+SS(t===47?t:Vc())}function HQ(t){for(;!Vb(ef());)Vc();return p1(t,ac)}function GQ(t){return mV(VT("",null,null,null,[""],t=pV(t),0,[0],t))}function VT(t,e,n,r,s,h,p,_,o){for(var T=0,I=0,M=p,L=0,F=0,q=0,$=1,X=1,te=1,he=0,ie="",me=s,ge=h,Ee=r,ce=ie;X;)switch(q=he,he=Vc()){case 40:if(q!=108&&Pa(ce,M-1)==58){GI(ce+=$i(FT(he),"&","&\f"),"&\f")!=-1&&(te=-1);break}case 34:case 39:case 91:ce+=FT(he);break;case 9:case 10:case 13:case 32:ce+=jQ(q);break;case 92:ce+=$Q(BT()-1,7);continue;case 47:switch(ef()){case 42:case 47:eT(WQ(qQ(Vc(),BT()),e,n),o);break;default:ce+="/"}break;case 123*$:_[T++]=Pd(ce)*te;case 125*$:case 59:case 0:switch(he){case 0:case 125:X=0;case 59+I:te==-1&&(ce=$i(ce,/\f/g,"")),F>0&&Pd(ce)-M&&eT(F>32?u3(ce+";",r,n,M-1):u3($i(ce," ","")+";",r,n,M-2),o);break;case 59:ce+=";";default:if(eT(Ee=c3(ce,e,n,T,I,s,_,ie,me=[],ge=[],M),h),he===123)if(I===0)VT(ce,e,Ee,Ee,me,h,M,_,ge);else switch(L===99&&Pa(ce,3)===110?100:L){case 100:case 108:case 109:case 115:VT(t,Ee,Ee,r&&eT(c3(t,Ee,Ee,0,0,s,_,ie,s,me=[],M),ge),s,ge,M,_,r?me:ge);break;default:VT(ce,Ee,Ee,Ee,[""],ge,0,_,ge)}}T=I=F=0,$=te=1,ie=ce="",M=p;break;case 58:M=1+Pd(ce),F=q;default:if($<1){if(he==123)--$;else if(he==125&&$++==0&&UQ()==125)continue}switch(ce+=SS(he),he*$){case 38:te=I>0?1:(ce+="\f",-1);break;case 44:_[T++]=(Pd(ce)-1)*te,te=1;break;case 64:ef()===45&&(ce+=FT(Vc())),L=ef(),I=M=Pd(ie=ce+=HQ(BT())),he++;break;case 45:q===45&&Pd(ce)==2&&($=0)}}return h}function c3(t,e,n,r,s,h,p,_,o,T,I){for(var M=s-1,L=s===0?h:[""],F=vD(L),q=0,$=0,X=0;q<r;++q)for(var te=0,he=Fb(t,M+1,M=OQ($=p[q])),ie=t;te<F;++te)(ie=dV($>0?L[te]+" "+he:$i(he,/&\f/g,L[te])))&&(o[X++]=ie);return AS(t,e,n,s===0?yD:_,o,T,I)}function WQ(t,e,n){return AS(t,e,n,uV,SS(VQ()),Fb(t,2,-2),0)}function u3(t,e,n,r){return AS(t,e,n,_D,Fb(t,0,r),Fb(t,r+1,-1),r)}function _v(t,e){for(var n="",r=vD(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function YQ(t,e,n,r){switch(t.type){case LQ:if(t.children.length)break;case PQ:case _D:return t.return=t.return||t.value;case uV:return"";case hV:return t.return=t.value+"{"+_v(t.children,r)+"}";case yD:t.value=t.props.join(",")}return Pd(n=_v(t.children,r))?t.return=t.value+"{"+n+"}":""}function XQ(t){var e=vD(t);return function(n,r,s,h){for(var p="",_=0;_<e;_++)p+=t[_](n,r,s,h)||"";return p}}function KQ(t){return function(e){e.root||(e=e.return)&&t(e)}}function gV(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var ZQ=function(e,n,r){for(var s=0,h=0;s=h,h=ef(),s===38&&h===12&&(n[r]=1),!Vb(h);)Vc();return p1(e,ac)},QQ=function(e,n){var r=-1,s=44;do switch(Vb(s)){case 0:s===38&&ef()===12&&(n[r]=1),e[r]+=ZQ(ac-1,n,r);break;case 2:e[r]+=FT(s);break;case 4:if(s===44){e[++r]=ef()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=SS(s)}while(s=Vc());return e},JQ=function(e,n){return mV(QQ(pV(e),n))},h3=new WeakMap,eJ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!h3.get(r))&&!s){h3.set(e,!0);for(var h=[],p=JQ(n,h),_=r.props,o=0,T=0;o<p.length;o++)for(var I=0;I<_.length;I++,T++)e.props[T]=h[o]?p[o].replace(/&\f/g,_[I]):_[I]+" "+p[o]}}},tJ=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function yV(t,e){switch(NQ(t,e)){case 5103:return ji+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ji+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ji+t+AE+t+ul+t+t;case 6828:case 4268:return ji+t+ul+t+t;case 6165:return ji+t+ul+"flex-"+t+t;case 5187:return ji+t+$i(t,/(\w+).+(:[^]+)/,ji+"box-$1$2"+ul+"flex-$1$2")+t;case 5443:return ji+t+ul+"flex-item-"+$i(t,/flex-|-self/,"")+t;case 4675:return ji+t+ul+"flex-line-pack"+$i(t,/align-content|flex-|-self/,"")+t;case 5548:return ji+t+ul+$i(t,"shrink","negative")+t;case 5292:return ji+t+ul+$i(t,"basis","preferred-size")+t;case 6060:return ji+"box-"+$i(t,"-grow","")+ji+t+ul+$i(t,"grow","positive")+t;case 4554:return ji+$i(t,/([^-])(transform)/g,"$1"+ji+"$2")+t;case 6187:return $i($i($i(t,/(zoom-|grab)/,ji+"$1"),/(image-set)/,ji+"$1"),t,"")+t;case 5495:case 3959:return $i(t,/(image-set\([^]*)/,ji+"$1$`$1");case 4968:return $i($i(t,/(.+:)(flex-)?(.*)/,ji+"box-pack:$3"+ul+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ji+t+t;case 4095:case 3583:case 4068:case 2532:return $i(t,/(.+)-inline(.+)/,ji+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pd(t)-1-e>6)switch(Pa(t,e+1)){case 109:if(Pa(t,e+4)!==45)break;case 102:return $i(t,/(.+:)(.+)-([^]+)/,"$1"+ji+"$2-$3$1"+AE+(Pa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~GI(t,"stretch")?yV($i(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Pa(t,e+1)!==115)break;case 6444:switch(Pa(t,Pd(t)-3-(~GI(t,"!important")&&10))){case 107:return $i(t,":",":"+ji)+t;case 101:return $i(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ji+(Pa(t,14)===45?"inline-":"")+"box$3$1"+ji+"$2$3$1"+ul+"$2box$3")+t}break;case 5936:switch(Pa(t,e+11)){case 114:return ji+t+ul+$i(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ji+t+ul+$i(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ji+t+ul+$i(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ji+t+ul+t+t}return t}var nJ=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case _D:e.return=yV(e.value,e.length);break;case hV:return _v([Dx(e,{value:$i(e.value,"@","@"+ji)})],s);case yD:if(e.length)return FQ(e.props,function(h){switch(BQ(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _v([Dx(e,{props:[$i(h,/:(read-\w+)/,":"+AE+"$1")]})],s);case"::placeholder":return _v([Dx(e,{props:[$i(h,/:(plac\w+)/,":"+ji+"input-$1")]}),Dx(e,{props:[$i(h,/:(plac\w+)/,":"+AE+"$1")]}),Dx(e,{props:[$i(h,/:(plac\w+)/,ul+"input-$1")]})],s)}return""})}},rJ=[nJ],iJ=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function($){var X=$.getAttribute("data-emotion");X.indexOf(" ")!==-1&&(document.head.appendChild($),$.setAttribute("data-s",""))})}var s=e.stylisPlugins||rJ,h={},p,_=[];p=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function($){for(var X=$.getAttribute("data-emotion").split(" "),te=1;te<X.length;te++)h[X[te]]=!0;_.push($)});var o,T=[eJ,tJ];{var I,M=[YQ,KQ(function($){I.insert($)})],L=XQ(T.concat(s,M)),F=function(X){return _v(GQ(X),L)};o=function(X,te,he,ie){I=he,F(X?X+"{"+te.styles+"}":te.styles),ie&&(q.inserted[te.name]=!0)}}var q={key:n,sheet:new kQ({key:n,container:p,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:h,registered:{},insert:o};return q.sheet.hydrate(_),q},yA={exports:{}},Ki={};var d3;function sJ(){if(d3)return Ki;d3=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,h=t?Symbol.for("react.profiler"):60114,p=t?Symbol.for("react.provider"):60109,_=t?Symbol.for("react.context"):60110,o=t?Symbol.for("react.async_mode"):60111,T=t?Symbol.for("react.concurrent_mode"):60111,I=t?Symbol.for("react.forward_ref"):60112,M=t?Symbol.for("react.suspense"):60113,L=t?Symbol.for("react.suspense_list"):60120,F=t?Symbol.for("react.memo"):60115,q=t?Symbol.for("react.lazy"):60116,$=t?Symbol.for("react.block"):60121,X=t?Symbol.for("react.fundamental"):60117,te=t?Symbol.for("react.responder"):60118,he=t?Symbol.for("react.scope"):60119;function ie(ge){if(typeof ge=="object"&&ge!==null){var Ee=ge.$$typeof;switch(Ee){case e:switch(ge=ge.type,ge){case o:case T:case r:case h:case s:case M:return ge;default:switch(ge=ge&&ge.$$typeof,ge){case _:case I:case q:case F:case p:return ge;default:return Ee}}case n:return Ee}}}function me(ge){return ie(ge)===T}return Ki.AsyncMode=o,Ki.ConcurrentMode=T,Ki.ContextConsumer=_,Ki.ContextProvider=p,Ki.Element=e,Ki.ForwardRef=I,Ki.Fragment=r,Ki.Lazy=q,Ki.Memo=F,Ki.Portal=n,Ki.Profiler=h,Ki.StrictMode=s,Ki.Suspense=M,Ki.isAsyncMode=function(ge){return me(ge)||ie(ge)===o},Ki.isConcurrentMode=me,Ki.isContextConsumer=function(ge){return ie(ge)===_},Ki.isContextProvider=function(ge){return ie(ge)===p},Ki.isElement=function(ge){return typeof ge=="object"&&ge!==null&&ge.$$typeof===e},Ki.isForwardRef=function(ge){return ie(ge)===I},Ki.isFragment=function(ge){return ie(ge)===r},Ki.isLazy=function(ge){return ie(ge)===q},Ki.isMemo=function(ge){return ie(ge)===F},Ki.isPortal=function(ge){return ie(ge)===n},Ki.isProfiler=function(ge){return ie(ge)===h},Ki.isStrictMode=function(ge){return ie(ge)===s},Ki.isSuspense=function(ge){return ie(ge)===M},Ki.isValidElementType=function(ge){return typeof ge=="string"||typeof ge=="function"||ge===r||ge===T||ge===h||ge===s||ge===M||ge===L||typeof ge=="object"&&ge!==null&&(ge.$$typeof===q||ge.$$typeof===F||ge.$$typeof===p||ge.$$typeof===_||ge.$$typeof===I||ge.$$typeof===X||ge.$$typeof===te||ge.$$typeof===he||ge.$$typeof===$)},Ki.typeOf=ie,Ki}var f3;function oJ(){return f3||(f3=1,yA.exports=sJ()),yA.exports}var _A,p3;function aJ(){if(p3)return _A;p3=1;var t=oJ(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},h={};h[t.ForwardRef]=r,h[t.Memo]=s;function p(q){return t.isMemo(q)?s:h[q.$$typeof]||e}var _=Object.defineProperty,o=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,M=Object.getPrototypeOf,L=Object.prototype;function F(q,$,X){if(typeof $!="string"){if(L){var te=M($);te&&te!==L&&F(q,te,X)}var he=o($);T&&(he=he.concat(T($)));for(var ie=p(q),me=p($),ge=0;ge<he.length;++ge){var Ee=he[ge];if(!n[Ee]&&!(X&&X[Ee])&&!(me&&me[Ee])&&!(ie&&ie[Ee])){var ce=I($,Ee);try{_(q,Ee,ce)}catch{}}}}return q}return _A=F,_A}aJ();var lJ=!0;function _V(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var xD=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||lJ===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},bD=function(e,n,r){xD(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var h=n;do e.insert(n===h?"."+s:"",h,e.sheet,!0),h=h.next;while(h!==void 0)}};function cJ(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var uJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hJ=/[A-Z]|^ms/g,dJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,vV=function(e){return e.charCodeAt(1)===45},m3=function(e){return e!=null&&typeof e!="boolean"},vA=gV(function(t){return vV(t)?t:t.replace(hJ,"-$&").toLowerCase()}),g3=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(dJ,function(r,s,h){return Ld={name:s,styles:h,next:Ld},s})}return uJ[e]!==1&&!vV(e)&&typeof n=="number"&&n!==0?n+"px":n};function Ub(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return Ld={name:s.name,styles:s.styles,next:Ld},s.name;var h=n;if(h.styles!==void 0){var p=h.next;if(p!==void 0)for(;p!==void 0;)Ld={name:p.name,styles:p.styles,next:Ld},p=p.next;var _=h.styles+";";return _}return fJ(t,e,n)}case"function":{if(t!==void 0){var o=Ld,T=n(t);return Ld=o,Ub(t,e,T)}break}}var I=n;if(e==null)return I;var M=e[I];return M!==void 0?M:I}function fJ(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Ub(t,e,n[s])+";";else for(var h in n){var p=n[h];if(typeof p!="object"){var _=p;e!=null&&e[_]!==void 0?r+=h+"{"+e[_]+"}":m3(_)&&(r+=vA(h)+":"+g3(h,_)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&(e==null||e[p[0]]===void 0))for(var o=0;o<p.length;o++)m3(p[o])&&(r+=vA(h)+":"+g3(h,p[o])+";");else{var T=Ub(t,e,p);switch(h){case"animation":case"animationName":{r+=vA(h)+":"+T+";";break}default:r+=h+"{"+T+"}"}}}return r}var y3=/label:\s*([^\s;{]+)\s*(;|$)/g,Ld;function m1(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";Ld=void 0;var h=t[0];if(h==null||h.raw===void 0)r=!1,s+=Ub(n,e,h);else{var p=h;s+=p[0]}for(var _=1;_<t.length;_++)if(s+=Ub(n,e,t[_]),r){var o=h;s+=o[_]}y3.lastIndex=0;for(var T="",I;(I=y3.exec(s))!==null;)T+="-"+I[1];var M=cJ(s)+T;return{name:M,styles:s,next:Ld}}var pJ=function(e){return e()},xV=vb.useInsertionEffect?vb.useInsertionEffect:!1,bV=xV||pJ,_3=xV||H.useLayoutEffect,wV=H.createContext(typeof HTMLElement<"u"?iJ({key:"css"}):null);wV.Provider;var wD=function(e){return H.forwardRef(function(n,r){var s=H.useContext(wV);return e(n,s,r)})},g1=H.createContext({}),TD={}.hasOwnProperty,YI="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mJ=function(e,n){var r={};for(var s in n)TD.call(n,s)&&(r[s]=n[s]);return r[YI]=e,r},gJ=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return xD(n,r,s),bV(function(){return bD(n,r,s)}),null},yJ=wD(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[YI],h=[r],p="";typeof t.className=="string"?p=_V(e.registered,h,t.className):t.className!=null&&(p=t.className+" ");var _=m1(h,void 0,H.useContext(g1));p+=e.key+"-"+_.name;var o={};for(var T in t)TD.call(t,T)&&T!=="css"&&T!==YI&&(o[T]=t[T]);return o.className=p,n&&(o.ref=n),H.createElement(H.Fragment,null,H.createElement(gJ,{cache:e,serialized:_,isStringTag:typeof s=="string"}),H.createElement(s,o))}),_J=yJ,v3=function(e,n){var r=arguments;if(n==null||!TD.call(n,"css"))return H.createElement.apply(void 0,r);var s=r.length,h=new Array(s);h[0]=_J,h[1]=mJ(e,n);for(var p=2;p<s;p++)h[p]=r[p];return H.createElement.apply(null,h)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(v3||(v3={}));var vJ=wD(function(t,e){var n=t.styles,r=m1([n],void 0,H.useContext(g1)),s=H.useRef();return _3(function(){var h=e.key+"-global",p=new e.sheet.constructor({key:h,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),_=!1,o=document.querySelector('style[data-emotion="'+h+" "+r.name+'"]');return e.sheet.tags.length&&(p.before=e.sheet.tags[0]),o!==null&&(_=!0,o.setAttribute("data-emotion",h),p.hydrate([o])),s.current=[p,_],function(){p.flush()}},[e]),_3(function(){var h=s.current,p=h[0],_=h[1];if(_){h[1]=!1;return}if(r.next!==void 0&&bD(e,r.next,!0),p.tags.length){var o=p.tags[p.tags.length-1].nextElementSibling;p.before=o,p.flush()}e.insert("",r,p,!1)},[e,r.name]),null});function ED(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m1(e)}function Ou(){var t=ED.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var xJ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,bJ=gV(function(t){return xJ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),wJ=bJ,TJ=function(e){return e!=="theme"},x3=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?wJ:TJ},b3=function(e,n,r){var s;if(n){var h=n.shouldForwardProp;s=e.__emotion_forwardProp&&h?function(p){return e.__emotion_forwardProp(p)&&h(p)}:h}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},EJ=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return xD(n,r,s),bV(function(){return bD(n,r,s)}),null},SJ=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,h,p;n!==void 0&&(h=n.label,p=n.target);var _=b3(e,n,r),o=_||x3(s),T=!o("as");return function(){var I=arguments,M=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(h!==void 0&&M.push("label:"+h+";"),I[0]==null||I[0].raw===void 0)M.push.apply(M,I);else{var L=I[0];M.push(L[0]);for(var F=I.length,q=1;q<F;q++)M.push(I[q],L[q])}var $=wD(function(X,te,he){var ie=T&&X.as||s,me="",ge=[],Ee=X;if(X.theme==null){Ee={};for(var ce in X)Ee[ce]=X[ce];Ee.theme=H.useContext(g1)}typeof X.className=="string"?me=_V(te.registered,ge,X.className):X.className!=null&&(me=X.className+" ");var ee=m1(M.concat(ge),te.registered,Ee);me+=te.key+"-"+ee.name,p!==void 0&&(me+=" "+p);var le=T&&_===void 0?x3(ie):o,se={};for(var _e in X)T&&_e==="as"||le(_e)&&(se[_e]=X[_e]);return se.className=me,he&&(se.ref=he),H.createElement(H.Fragment,null,H.createElement(EJ,{cache:te,serialized:ee,isStringTag:typeof ie=="string"}),H.createElement(ie,se))});return $.displayName=h!==void 0?h:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",$.defaultProps=e.defaultProps,$.__emotion_real=$,$.__emotion_base=s,$.__emotion_styles=M,$.__emotion_forwardProp=_,Object.defineProperty($,"toString",{value:function(){return"."+p}}),$.withComponent=function(X,te){var he=t(X,CE({},n,te,{shouldForwardProp:b3($,te,!0)}));return he.apply(void 0,M)},$}},CJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],XI=SJ.bind(null);CJ.forEach(function(t){XI[t]=XI(t)});function AJ(t){return t==null||Object.keys(t).length===0}function TV(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?s=>e(AJ(s)?n:s):e;return V.jsx(vJ,{styles:r})}function EV(t,e){return XI(t,e)}function IJ(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const w3=[];function Bm(t){return w3[0]=t,m1(w3)}var xA={exports:{}},us={};var T3;function MJ(){if(T3)return us;T3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),o=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),L=Symbol.for("react.view_transition"),F=Symbol.for("react.client.reference");function q($){if(typeof $=="object"&&$!==null){var X=$.$$typeof;switch(X){case t:switch($=$.type,$){case n:case s:case r:case o:case T:case L:return $;default:switch($=$&&$.$$typeof,$){case p:case _:case M:case I:return $;case h:return $;default:return X}}case e:return X}}}return us.ContextConsumer=h,us.ContextProvider=p,us.Element=t,us.ForwardRef=_,us.Fragment=n,us.Lazy=M,us.Memo=I,us.Portal=e,us.Profiler=s,us.StrictMode=r,us.Suspense=o,us.SuspenseList=T,us.isContextConsumer=function($){return q($)===h},us.isContextProvider=function($){return q($)===p},us.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===t},us.isForwardRef=function($){return q($)===_},us.isFragment=function($){return q($)===n},us.isLazy=function($){return q($)===M},us.isMemo=function($){return q($)===I},us.isPortal=function($){return q($)===e},us.isProfiler=function($){return q($)===s},us.isStrictMode=function($){return q($)===r},us.isSuspense=function($){return q($)===o},us.isSuspenseList=function($){return q($)===T},us.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===n||$===s||$===r||$===o||$===T||typeof $=="object"&&$!==null&&($.$$typeof===M||$.$$typeof===I||$.$$typeof===p||$.$$typeof===h||$.$$typeof===_||$.$$typeof===F||$.getModuleId!==void 0)},us.typeOf=q,us}var E3;function RJ(){return E3||(E3=1,xA.exports=MJ()),xA.exports}var SV=RJ();function zd(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function CV(t){if(H.isValidElement(t)||SV.isValidElementType(t)||!zd(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=CV(t[n])}),e}function da(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return zd(t)&&zd(e)&&Object.keys(e).forEach(s=>{H.isValidElement(e[s])||SV.isValidElementType(e[s])?r[s]=e[s]:zd(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&zd(t[s])?r[s]=da(t[s],e[s],n):n.clone?r[s]=zd(e[s])?CV(e[s]):e[s]:r[s]=e[s]}),r}const DJ=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function kJ(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,h=DJ(e),p=Object.keys(h);function _(L){return`@media (min-width:${typeof e[L]=="number"?e[L]:L}${n})`}function o(L){return`@media (max-width:${(typeof e[L]=="number"?e[L]:L)-r/100}${n})`}function T(L,F){const q=p.indexOf(F);return`@media (min-width:${typeof e[L]=="number"?e[L]:L}${n}) and (max-width:${(q!==-1&&typeof e[p[q]]=="number"?e[p[q]]:F)-r/100}${n})`}function I(L){return p.indexOf(L)+1<p.length?T(L,p[p.indexOf(L)+1]):_(L)}function M(L){const F=p.indexOf(L);return F===0?_(p[1]):F===p.length-1?o(p[F]):T(L,p[p.indexOf(L)+1]).replace("@media","@media not all and")}return{keys:p,values:h,up:_,down:o,between:T,only:I,not:M,unit:n,...s}}function S3(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{const h=/min-width:\s*([0-9.]+)/;return+(r.match(h)?.[1]||0)-+(s.match(h)?.[1]||0)});return n.length?n.reduce((r,s)=>{const h=e[s];return delete r[s],r[s]=h,r},{...e}):e}function PJ(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function LJ(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,h=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(h)}function OJ(t){const e=(h,p)=>h.replace("@media",p?`@container ${p}`:"@container");function n(h,p){h.up=(..._)=>e(t.breakpoints.up(..._),p),h.down=(..._)=>e(t.breakpoints.down(..._),p),h.between=(..._)=>e(t.breakpoints.between(..._),p),h.only=(..._)=>e(t.breakpoints.only(..._),p),h.not=(..._)=>{const o=e(t.breakpoints.not(..._),p);return o.includes("not all and")?o.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):o}}const r={},s=h=>(n(r,h),r);return n(s),{...t,containerQueries:s}}const zJ={borderRadius:4};function mb(t,e){return e?da(t,e,{clone:!1}):t}const IS={xs:0,sm:600,md:900,lg:1200,xl:1536},C3={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${IS[t]}px)`},NJ={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:IS[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Rh(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const h=r.breakpoints||C3;return e.reduce((p,_,o)=>(p[h.up(h.keys[o])]=n(e[o]),p),{})}if(typeof e=="object"){const h=r.breakpoints||C3;return Object.keys(e).reduce((p,_)=>{if(PJ(h.keys,_)){const o=LJ(r.containerQueries?r:NJ,_);o&&(p[o]=n(e[_],_))}else if(Object.keys(h.values||IS).includes(_)){const o=h.up(_);p[o]=n(e[_],_)}else{const o=_;p[o]=e[o]}return p},{})}return n(e)}function AV(t={}){return t.keys?.reduce((n,r)=>{const s=t.up(r);return n[s]={},n},{})||{}}function KI(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function BJ(t,...e){const n=AV(t),r=[n,...e].reduce((s,h)=>da(s,h),{});return KI(Object.keys(n),r)}function FJ(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((s,h)=>{h<t.length&&(n[s]=!0)}):r.forEach(s=>{t[s]!=null&&(n[s]=!0)}),n}function bA({values:t,breakpoints:e,base:n}){const r=n||FJ(t,e),s=Object.keys(r);if(s.length===0)return t;let h;return s.reduce((p,_,o)=>(Array.isArray(t)?(p[_]=t[o]!=null?t[o]:t[h],h=o):typeof t=="object"?(p[_]=t[_]!=null?t[_]:t[h],h=_):p[_]=t,p),{})}function tn(t){if(typeof t!="string")throw new Error(wp(7));return t.charAt(0).toUpperCase()+t.slice(1)}function MS(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,h)=>s&&s[h]?s[h]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function IE(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=MS(t,n)||r,e&&(s=e(s,r,t)),s}function go(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,h=p=>{if(p[e]==null)return null;const _=p[e],o=p.theme,T=MS(o,r)||{};return Rh(p,_,M=>{let L=IE(T,s,M);return M===L&&typeof M=="string"&&(L=IE(T,s,`${e}${M==="default"?"":tn(M)}`,M)),n===!1?L:{[n]:L}})};return h.propTypes={},h.filterProps=[e],h}function VJ(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const UJ={m:"margin",p:"padding"},jJ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},A3={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$J=VJ(t=>{if(t.length>2)if(A3[t])t=A3[t];else return[t];const[e,n]=t.split(""),r=UJ[e],s=jJ[n]||"";return Array.isArray(s)?s.map(h=>r+h):[r+s]}),SD=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],CD=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...SD,...CD];function y1(t,e,n,r){const s=MS(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?h=>typeof h=="string"?h:typeof s=="string"?s.startsWith("var(")&&h===0?0:s.startsWith("var(")&&h===1?s:`calc(${h} * ${s})`:s*h:Array.isArray(s)?h=>{if(typeof h=="string")return h;const p=Math.abs(h),_=s[p];return h>=0?_:typeof _=="number"?-_:typeof _=="string"&&_.startsWith("var(")?`calc(-1 * ${_})`:`-${_}`}:typeof s=="function"?s:()=>{}}function RS(t){return y1(t,"spacing",8)}function My(t,e){return typeof e=="string"||e==null?e:t(e)}function qJ(t,e){return n=>t.reduce((r,s)=>(r[s]=My(e,n),r),{})}function HJ(t,e,n,r){if(!e.includes(n))return null;const s=$J(n),h=qJ(s,r),p=t[n];return Rh(t,p,h)}function IV(t,e){const n=RS(t.theme);return Object.keys(t).map(r=>HJ(t,e,r,n)).reduce(mb,{})}function Ks(t){return IV(t,SD)}Ks.propTypes={};Ks.filterProps=SD;function Zs(t){return IV(t,CD)}Zs.propTypes={};Zs.filterProps=CD;function MV(t=8,e=RS({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(h=>{const p=e(h);return typeof p=="number"?`${p}px`:p}).join(" ");return n.mui=!0,n}function DS(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(h=>{r[h]=s}),r),{}),n=r=>Object.keys(r).reduce((s,h)=>e[h]?mb(s,e[h](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function Eu(t){return typeof t!="number"?t:`${t}px solid`}function zu(t,e){return go({prop:t,themeKey:"borders",transform:e})}const GJ=zu("border",Eu),WJ=zu("borderTop",Eu),YJ=zu("borderRight",Eu),XJ=zu("borderBottom",Eu),KJ=zu("borderLeft",Eu),ZJ=zu("borderColor"),QJ=zu("borderTopColor"),JJ=zu("borderRightColor"),eee=zu("borderBottomColor"),tee=zu("borderLeftColor"),nee=zu("outline",Eu),ree=zu("outlineColor"),kS=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=y1(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:My(e,r)});return Rh(t,t.borderRadius,n)}return null};kS.propTypes={};kS.filterProps=["borderRadius"];DS(GJ,WJ,YJ,XJ,KJ,ZJ,QJ,JJ,eee,tee,kS,nee,ree);const PS=t=>{if(t.gap!==void 0&&t.gap!==null){const e=y1(t.theme,"spacing",8),n=r=>({gap:My(e,r)});return Rh(t,t.gap,n)}return null};PS.propTypes={};PS.filterProps=["gap"];const LS=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=y1(t.theme,"spacing",8),n=r=>({columnGap:My(e,r)});return Rh(t,t.columnGap,n)}return null};LS.propTypes={};LS.filterProps=["columnGap"];const OS=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=y1(t.theme,"spacing",8),n=r=>({rowGap:My(e,r)});return Rh(t,t.rowGap,n)}return null};OS.propTypes={};OS.filterProps=["rowGap"];const iee=go({prop:"gridColumn"}),see=go({prop:"gridRow"}),oee=go({prop:"gridAutoFlow"}),aee=go({prop:"gridAutoColumns"}),lee=go({prop:"gridAutoRows"}),cee=go({prop:"gridTemplateColumns"}),uee=go({prop:"gridTemplateRows"}),hee=go({prop:"gridTemplateAreas"}),dee=go({prop:"gridArea"});DS(PS,LS,OS,iee,see,oee,aee,lee,cee,uee,hee,dee);function vv(t,e){return e==="grey"?e:t}const fee=go({prop:"color",themeKey:"palette",transform:vv}),pee=go({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:vv}),mee=go({prop:"backgroundColor",themeKey:"palette",transform:vv});DS(fee,pee,mee);function Nc(t){return t<=1&&t!==0?`${t*100}%`:t}const gee=go({prop:"width",transform:Nc}),AD=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||IS[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Nc(n)}};return Rh(t,t.maxWidth,e)}return null};AD.filterProps=["maxWidth"];const yee=go({prop:"minWidth",transform:Nc}),_ee=go({prop:"height",transform:Nc}),vee=go({prop:"maxHeight",transform:Nc}),xee=go({prop:"minHeight",transform:Nc});go({prop:"size",cssProperty:"width",transform:Nc});go({prop:"size",cssProperty:"height",transform:Nc});const bee=go({prop:"boxSizing"});DS(gee,AD,yee,_ee,vee,xee,bee);const _1={border:{themeKey:"borders",transform:Eu},borderTop:{themeKey:"borders",transform:Eu},borderRight:{themeKey:"borders",transform:Eu},borderBottom:{themeKey:"borders",transform:Eu},borderLeft:{themeKey:"borders",transform:Eu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Eu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:kS},color:{themeKey:"palette",transform:vv},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:vv},backgroundColor:{themeKey:"palette",transform:vv},p:{style:Zs},pt:{style:Zs},pr:{style:Zs},pb:{style:Zs},pl:{style:Zs},px:{style:Zs},py:{style:Zs},padding:{style:Zs},paddingTop:{style:Zs},paddingRight:{style:Zs},paddingBottom:{style:Zs},paddingLeft:{style:Zs},paddingX:{style:Zs},paddingY:{style:Zs},paddingInline:{style:Zs},paddingInlineStart:{style:Zs},paddingInlineEnd:{style:Zs},paddingBlock:{style:Zs},paddingBlockStart:{style:Zs},paddingBlockEnd:{style:Zs},m:{style:Ks},mt:{style:Ks},mr:{style:Ks},mb:{style:Ks},ml:{style:Ks},mx:{style:Ks},my:{style:Ks},margin:{style:Ks},marginTop:{style:Ks},marginRight:{style:Ks},marginBottom:{style:Ks},marginLeft:{style:Ks},marginX:{style:Ks},marginY:{style:Ks},marginInline:{style:Ks},marginInlineStart:{style:Ks},marginInlineEnd:{style:Ks},marginBlock:{style:Ks},marginBlockStart:{style:Ks},marginBlockEnd:{style:Ks},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:PS},rowGap:{style:OS},columnGap:{style:LS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Nc},maxWidth:{style:AD},minWidth:{transform:Nc},height:{transform:Nc},maxHeight:{transform:Nc},minHeight:{transform:Nc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function wee(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Tee(t,e){return typeof t=="function"?t(e):t}function Eee(){function t(n,r,s,h){const p={[n]:r,theme:s},_=h[n];if(!_)return{[n]:r};const{cssProperty:o=n,themeKey:T,transform:I,style:M}=_;if(r==null)return null;if(T==="typography"&&r==="inherit")return{[n]:r};const L=MS(s,T)||{};return M?M(p):Rh(p,r,q=>{let $=IE(L,I,q);return q===$&&typeof q=="string"&&($=IE(L,I,`${n}${q==="default"?"":tn(q)}`,q)),o===!1?$:{[o]:$}})}function e(n){const{sx:r,theme:s={},nested:h}=n||{};if(!r)return null;const p=s.unstable_sxConfig??_1;function _(o){let T=o;if(typeof o=="function")T=o(s);else if(typeof o!="object")return o;if(!T)return null;const I=AV(s.breakpoints),M=Object.keys(I);let L=I;return Object.keys(T).forEach(F=>{const q=Tee(T[F],s);if(q!=null)if(typeof q=="object")if(p[F])L=mb(L,t(F,q,s,p));else{const $=Rh({theme:s},q,X=>({[F]:X}));wee($,q)?L[F]=e({sx:q,theme:s,nested:!0}):L=mb(L,$)}else L=mb(L,t(F,q,s,p))}),!h&&s.modularCssLayers?{"@layer sx":S3(s,KI(M,L))}:S3(s,KI(M,L))}return Array.isArray(r)?r.map(_):_(r)}return e}const eg=Eee();eg.filterProps=["sx"];function See(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function v1(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:h={},...p}=t,_=kJ(n),o=MV(s);let T=da({breakpoints:_,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:o,shape:{...zJ,...h}},p);return T=OJ(T),T.applyStyles=See,T=e.reduce((I,M)=>da(I,M),T),T.unstable_sxConfig={..._1,...p?.unstable_sxConfig},T.unstable_sx=function(M){return eg({sx:M,theme:this})},T}function Cee(t){return Object.keys(t).length===0}function ID(t=null){const e=H.useContext(g1);return!e||Cee(e)?t:e}const Aee=v1();function zS(t=Aee){return ID(t)}function wA(t){const e=Bm(t);return t!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):t}function RV({styles:t,themeId:e,defaultTheme:n={}}){const r=zS(n),s=e&&r[e]||r;let h=typeof t=="function"?t(s):t;return s.modularCssLayers&&(Array.isArray(h)?h=h.map(p=>wA(typeof p=="function"?p(s):p)):h=wA(h)),V.jsx(TV,{styles:h})}const Iee=t=>{const e={systemProps:{},otherProps:{}},n=t?.theme?.unstable_sxConfig??_1;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function MD(t){const{sx:e,...n}=t,{systemProps:r,otherProps:s}=Iee(n);let h;return Array.isArray(e)?h=[r,...e]:typeof e=="function"?h=(...p)=>{const _=e(...p);return zd(_)?{...r,..._}:r}:h={...r,...e},{...s,sx:h}}const I3=t=>t,Mee=()=>{let t=I3;return{configure(e){t=e},generate(e){return t(e)},reset(){t=I3}}},DV=Mee();function kV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=kV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function pn(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=kV(t))&&(r&&(r+=" "),r+=e);return r}function Ree(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=t,h=EV("div",{shouldForwardProp:_=>_!=="theme"&&_!=="sx"&&_!=="as"})(eg);return H.forwardRef(function(o,T){const I=zS(n),{className:M,component:L="div",...F}=MD(o);return V.jsx(h,{as:L,ref:T,className:pn(M,s?s(r):r),theme:e&&I[e]||I,...F})})}const Dee={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function br(t,e,n="Mui"){const r=Dee[e];return r?`${n}-${r}`:`${DV.generate(t)}-${e}`}function vr(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=br(t,s,n)}),r}function PV(t){const{variants:e,...n}=t,r={variants:e,style:Bm(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=Bm(s.style))}),r}const kee=v1();function TA(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function dy(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function Pee(t){return t?(e,n)=>n[t]:null}function Lee(t,e,n){t.theme=zee(t.theme)?n:t.theme[e]||t.theme}function UT(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(s=>UT(t,s,n));if(Array.isArray(r?.variants)){let s;if(r.isProcessed)s=n?dy(r.style,n):r.style;else{const{variants:h,...p}=r;s=n?dy(Bm(p),n):p}return LV(t,r.variants,[s],n)}return r?.isProcessed?n?dy(Bm(r.style),n):r.style:n?dy(Bm(r),n):r}function LV(t,e,n=[],r=void 0){let s;e:for(let h=0;h<e.length;h+=1){const p=e[h];if(typeof p.props=="function"){if(s??={...t,...t.ownerState,ownerState:t.ownerState},!p.props(s))continue}else for(const _ in p.props)if(t[_]!==p.props[_]&&t.ownerState?.[_]!==p.props[_])continue e;typeof p.style=="function"?(s??={...t,...t.ownerState,ownerState:t.ownerState},n.push(r?dy(Bm(p.style(s)),r):p.style(s))):n.push(r?dy(Bm(p.style),r):p.style)}return n}function OV(t={}){const{themeId:e,defaultTheme:n=kee,rootShouldForwardProp:r=TA,slotShouldForwardProp:s=TA}=t;function h(_){Lee(_,e,n)}return(_,o={})=>{IJ(_,Ee=>Ee.filter(ce=>ce!==eg));const{name:T,slot:I,skipVariantsResolver:M,skipSx:L,overridesResolver:F=Pee(Bee(I)),...q}=o,$=T&&T.startsWith("Mui")||I?"components":"custom",X=M!==void 0?M:I&&I!=="Root"&&I!=="root"||!1,te=L||!1;let he=TA;I==="Root"||I==="root"?he=r:I?he=s:Nee(_)&&(he=void 0);const ie=EV(_,{shouldForwardProp:he,label:Oee(),...q}),me=Ee=>{if(Ee.__emotion_real===Ee)return Ee;if(typeof Ee=="function")return function(ee){return UT(ee,Ee,ee.theme.modularCssLayers?$:void 0)};if(zd(Ee)){const ce=PV(Ee);return function(le){return ce.variants?UT(le,ce,le.theme.modularCssLayers?$:void 0):le.theme.modularCssLayers?dy(ce.style,$):ce.style}}return Ee},ge=(...Ee)=>{const ce=[],ee=Ee.map(me),le=[];if(ce.push(h),T&&F&&le.push(function(de){const Ke=de.theme.components?.[T]?.styleOverrides;if(!Ke)return null;const Ce={};for(const Xe in Ke)Ce[Xe]=UT(de,Ke[Xe],de.theme.modularCssLayers?"theme":void 0);return F(de,Ce)}),T&&!X&&le.push(function(de){const Ke=de.theme?.components?.[T]?.variants;return Ke?LV(de,Ke,[],de.theme.modularCssLayers?"theme":void 0):null}),te||le.push(eg),Array.isArray(ee[0])){const Q=ee.shift(),de=new Array(ce.length).fill(""),Ve=new Array(le.length).fill("");let Ke;Ke=[...de,...Q,...Ve],Ke.raw=[...de,...Q.raw,...Ve],ce.unshift(Ke)}const se=[...ce,...ee,...le],_e=ie(...se);return _.muiName&&(_e.muiName=_.muiName),_e};return ie.withConfig&&(ge.withConfig=ie.withConfig),ge}}function Oee(t,e){return void 0}function zee(t){for(const e in t)return!1;return!0}function Nee(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Bee(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const zV=OV();function jb(t,e,n=!1){const r={...e};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const h=s;if(h==="components"||h==="slots")r[h]={...t[h],...r[h]};else if(h==="componentsProps"||h==="slotProps"){const p=t[h],_=e[h];if(!_)r[h]=p||{};else if(!p)r[h]=_;else{r[h]={..._};for(const o in p)if(Object.prototype.hasOwnProperty.call(p,o)){const T=o;r[h][T]=jb(p[T],_[T],n)}}}else h==="className"&&n&&e.className?r.className=pn(t?.className,e?.className):h==="style"&&n&&e.style?r.style={...t?.style,...e?.style}:r[h]===void 0&&(r[h]=t[h])}return r}function Fee(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:jb(e.components[n].defaultProps,r)}function NV({props:t,name:e,defaultTheme:n,themeId:r}){let s=zS(n);return r&&(s=s[r]||s),Fee({theme:s,name:e,props:t})}const Dh=typeof window<"u"?H.useLayoutEffect:H.useEffect;function rv(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function RD(t,e=0,n=1){return rv(t,e,n)}function Vee(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function tg(t){if(t.type)return t;if(t.charAt(0)==="#")return tg(Vee(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(wp(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(wp(10,s))}else r=r.split(",");return r=r.map(h=>parseFloat(h)),{type:n,values:r,colorSpace:s}}const Uee=t=>{const e=tg(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Kx=(t,e)=>{try{return Uee(t)}catch{return t}};function NS(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,h)=>h<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function BV(t){t=tg(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,h=r*Math.min(s,1-s),p=(T,I=(T+n/30)%12)=>s-h*Math.max(Math.min(I-3,9-I,1),-1);let _="rgb";const o=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return t.type==="hsla"&&(_+="a",o.push(e[3])),NS({type:_,values:o})}function ZI(t){t=tg(t);let e=t.type==="hsl"||t.type==="hsla"?tg(BV(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function jee(t,e){const n=ZI(t),r=ZI(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ME(t,e){return t=tg(t),e=RD(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,NS(t)}function Jg(t,e,n){try{return ME(t,e)}catch{return t}}function BS(t,e){if(t=tg(t),e=RD(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return NS(t)}function ns(t,e,n){try{return BS(t,e)}catch{return t}}function FS(t,e){if(t=tg(t),e=RD(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return NS(t)}function rs(t,e,n){try{return FS(t,e)}catch{return t}}function $ee(t,e=.15){return ZI(t)>.5?BS(t,e):FS(t,e)}function tT(t,e,n){try{return $ee(t,e)}catch{return t}}const FV=H.createContext(null);function DD(){return H.useContext(FV)}const qee=typeof Symbol=="function"&&Symbol.for,Hee=qee?Symbol.for("mui.nested"):"__THEME_NESTED__";function Gee(t,e){return typeof e=="function"?e(t):{...t,...e}}function Wee(t){const{children:e,theme:n}=t,r=DD(),s=H.useMemo(()=>{const h=r===null?{...n}:Gee(r,n);return h!=null&&(h[Hee]=r!==null),h},[n,r]);return V.jsx(FV.Provider,{value:s,children:e})}const VV=H.createContext();function Yee({value:t,...e}){return V.jsx(VV.Provider,{value:t??!0,...e})}const UV=()=>H.useContext(VV)??!1,jV=H.createContext(void 0);function Xee({value:t,children:e}){return V.jsx(jV.Provider,{value:t,children:e})}function Kee(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?jb(s.defaultProps,r,e.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?jb(s,r,e.components.mergeClassNameAndStyle):r}function Zee({props:t,name:e}){const n=H.useContext(jV);return Kee({props:t,name:e,theme:{components:n}})}let M3=0;function Qee(t){const[e,n]=H.useState(t),r=t||e;return H.useEffect(()=>{e==null&&(M3+=1,n(`mui-${M3}`))},[e]),r}const Jee={...vb},R3=Jee.useId;function Vy(t){if(R3!==void 0){const e=R3();return t??e}return Qee(t)}function ete(t){const e=ID(),n=Vy()||"",{modularCssLayers:r}=t;let s="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||e!==null?s="":typeof r=="string"?s=r.replace(/mui(?!\.)/g,s):s=`@layer ${s};`,Dh(()=>{const h=document.querySelector("head");if(!h)return;const p=h.firstChild;if(s){if(p&&p.hasAttribute?.("data-mui-layer-order")&&p.getAttribute("data-mui-layer-order")===n)return;const _=document.createElement("style");_.setAttribute("data-mui-layer-order",n),_.textContent=s,h.prepend(_)}else h.querySelector(`style[data-mui-layer-order="${n}"]`)?.remove()},[s,n]),s?V.jsx(RV,{styles:s}):null}const D3={};function k3(t,e,n,r=!1){return H.useMemo(()=>{const s=t&&e[t]||e;if(typeof n=="function"){const h=n(s),p=t?{...e,[t]:h}:h;return r?()=>p:p}return t?{...e,[t]:n}:{...e,...n}},[t,e,n,r])}function $V(t){const{children:e,theme:n,themeId:r}=t,s=ID(D3),h=DD()||D3,p=k3(r,s,n),_=k3(r,h,n,!0),o=(r?p[r]:p).direction==="rtl",T=ete(p);return V.jsx(Wee,{theme:_,children:V.jsx(g1.Provider,{value:p,children:V.jsx(Yee,{value:o,children:V.jsxs(Xee,{value:r?p[r].components:p.components,children:[T,e]})})})})}const P3={theme:void 0};function tte(t){let e,n;return function(s){let h=e;return(h===void 0||s.theme!==n)&&(P3.theme=s.theme,h=PV(t(P3)),e=h,n=s.theme),h}}const kD="mode",PD="color-scheme",nte="data-color-scheme";function rte(t){const{defaultMode:e="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:s=kD,colorSchemeStorageKey:h=PD,attribute:p=nte,colorSchemeNode:_="document.documentElement",nonce:o}=t||{};let T="",I=p;if(p==="class"&&(I=".%s"),p==="data"&&(I="[data-%s]"),I.startsWith(".")){const L=I.substring(1);T+=`${_}.classList.remove('${L}'.replace('%s', light), '${L}'.replace('%s', dark));
      ${_}.classList.add('${L}'.replace('%s', colorScheme));`}const M=I.match(/\[([^[\]]+)\]/);if(M){const[L,F]=M[1].split("=");F||(T+=`${_}.removeAttribute('${L}'.replace('%s', light));
      ${_}.removeAttribute('${L}'.replace('%s', dark));`),T+=`
      ${_}.setAttribute('${L}'.replace('%s', colorScheme), ${F?`${F}.replace('%s', colorScheme)`:'""'});`}else T+=`${_}.setAttribute('${I}', colorScheme);`;return V.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?o:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${e}';
  const dark = localStorage.getItem('${h}-dark') || '${r}';
  const light = localStorage.getItem('${h}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${T}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function ite(){}const ste=({key:t,storageWindow:e})=>(!e&&typeof window<"u"&&(e=window),{get(n){if(typeof window>"u")return;if(!e)return n;let r;try{r=e.localStorage.getItem(t)}catch{}return r||n},set:n=>{if(e)try{e.localStorage.setItem(t,n)}catch{}},subscribe:n=>{if(!e)return ite;const r=s=>{const h=s.newValue;s.key===t&&n(h)};return e.addEventListener("storage",r),()=>{e.removeEventListener("storage",r)}}});function EA(){}function L3(t){if(typeof window<"u"&&typeof window.matchMedia=="function"&&t==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function qV(t,e){if(t.mode==="light"||t.mode==="system"&&t.systemMode==="light")return e("light");if(t.mode==="dark"||t.mode==="system"&&t.systemMode==="dark")return e("dark")}function ote(t){return qV(t,e=>{if(e==="light")return t.lightColorScheme;if(e==="dark")return t.darkColorScheme})}function ate(t){const{defaultMode:e="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:s=[],modeStorageKey:h=kD,colorSchemeStorageKey:p=PD,storageWindow:_=typeof window>"u"?void 0:window,storageManager:o=ste,noSsr:T=!1}=t,I=s.join(","),M=s.length>1,L=H.useMemo(()=>o?.({key:h,storageWindow:_}),[o,h,_]),F=H.useMemo(()=>o?.({key:`${p}-light`,storageWindow:_}),[o,p,_]),q=H.useMemo(()=>o?.({key:`${p}-dark`,storageWindow:_}),[o,p,_]),[$,X]=H.useState(()=>{const ee=L?.get(e)||e,le=F?.get(n)||n,se=q?.get(r)||r;return{mode:ee,systemMode:L3(ee),lightColorScheme:le,darkColorScheme:se}}),[te,he]=H.useState(T||!M);H.useEffect(()=>{he(!0)},[]);const ie=ote($),me=H.useCallback(ee=>{X(le=>{if(ee===le.mode)return le;const se=ee??e;return L?.set(se),{...le,mode:se,systemMode:L3(se)}})},[L,e]),ge=H.useCallback(ee=>{ee?typeof ee=="string"?ee&&!I.includes(ee)?console.error(`\`${ee}\` does not exist in \`theme.colorSchemes\`.`):X(le=>{const se={...le};return qV(le,_e=>{_e==="light"&&(F?.set(ee),se.lightColorScheme=ee),_e==="dark"&&(q?.set(ee),se.darkColorScheme=ee)}),se}):X(le=>{const se={...le},_e=ee.light===null?n:ee.light,Q=ee.dark===null?r:ee.dark;return _e&&(I.includes(_e)?(se.lightColorScheme=_e,F?.set(_e)):console.error(`\`${_e}\` does not exist in \`theme.colorSchemes\`.`)),Q&&(I.includes(Q)?(se.darkColorScheme=Q,q?.set(Q)):console.error(`\`${Q}\` does not exist in \`theme.colorSchemes\`.`)),se}):X(le=>(F?.set(n),q?.set(r),{...le,lightColorScheme:n,darkColorScheme:r}))},[I,F,q,n,r]),Ee=H.useCallback(ee=>{$.mode==="system"&&X(le=>{const se=ee?.matches?"dark":"light";return le.systemMode===se?le:{...le,systemMode:se}})},[$.mode]),ce=H.useRef(Ee);return ce.current=Ee,H.useEffect(()=>{if(typeof window.matchMedia!="function"||!M)return;const ee=(...se)=>ce.current(...se),le=window.matchMedia("(prefers-color-scheme: dark)");return le.addListener(ee),ee(le),()=>{le.removeListener(ee)}},[M]),H.useEffect(()=>{if(M){const ee=L?.subscribe(_e=>{(!_e||["light","dark","system"].includes(_e))&&me(_e||e)})||EA,le=F?.subscribe(_e=>{(!_e||I.match(_e))&&ge({light:_e})})||EA,se=q?.subscribe(_e=>{(!_e||I.match(_e))&&ge({dark:_e})})||EA;return()=>{ee(),le(),se()}}},[ge,me,I,e,_,M,L,F,q]),{...$,mode:te?$.mode:void 0,systemMode:te?$.systemMode:void 0,colorScheme:te?ie:void 0,setMode:me,setColorScheme:ge}}const lte="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function cte(t){const{themeId:e,theme:n={},modeStorageKey:r=kD,colorSchemeStorageKey:s=PD,disableTransitionOnChange:h=!1,defaultColorScheme:p,resolveTheme:_}=t,o={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},T=H.createContext(void 0),I=()=>H.useContext(T)||o,M={},L={};function F(te){const{children:he,theme:ie,modeStorageKey:me=r,colorSchemeStorageKey:ge=s,disableTransitionOnChange:Ee=h,storageManager:ce,storageWindow:ee=typeof window>"u"?void 0:window,documentNode:le=typeof document>"u"?void 0:document,colorSchemeNode:se=typeof document>"u"?void 0:document.documentElement,disableNestedContext:_e=!1,disableStyleSheetGeneration:Q=!1,defaultMode:de="system",forceThemeRerender:Ve=!1,noSsr:Ke}=te,Ce=H.useRef(!1),Xe=DD(),tt=H.useContext(T),Be=!!tt&&!_e,yt=H.useMemo(()=>ie||(typeof n=="function"?n():n),[ie]),Me=yt[e],et=Me||yt,{colorSchemes:At=M,components:Dt=L,cssVarPrefix:Gt}=et,Kt=Object.keys(At).filter(en=>!!At[en]).join(","),dn=H.useMemo(()=>Kt.split(","),[Kt]),Fn=typeof p=="string"?p:p.light,An=typeof p=="string"?p:p.dark,Tn=At[Fn]&&At[An]?de:At[et.defaultColorScheme]?.palette?.mode||et.palette?.mode,{mode:Lt,setMode:Ft,systemMode:gn,lightColorScheme:mn,darkColorScheme:tr,colorScheme:On,setColorScheme:jn}=ate({supportedColorSchemes:dn,defaultLightColorScheme:Fn,defaultDarkColorScheme:An,modeStorageKey:me,colorSchemeStorageKey:ge,defaultMode:Tn,storageManager:ce,storageWindow:ee,noSsr:Ke});let Lr=Lt,$n=On;Be&&(Lr=tt.mode,$n=tt.colorScheme);let Vn=$n||et.defaultColorScheme;et.vars&&!Ve&&(Vn=et.defaultColorScheme);const Tr=H.useMemo(()=>{const en=et.generateThemeVars?.()||et.vars,yn={...et,components:Dt,colorSchemes:At,cssVarPrefix:Gt,vars:en};if(typeof yn.generateSpacing=="function"&&(yn.spacing=yn.generateSpacing()),Vn){const bn=At[Vn];bn&&typeof bn=="object"&&Object.keys(bn).forEach(Pn=>{bn[Pn]&&typeof bn[Pn]=="object"?yn[Pn]={...yn[Pn],...bn[Pn]}:yn[Pn]=bn[Pn]})}return _?_(yn):yn},[et,Vn,Dt,At,Gt]),En=et.colorSchemeSelector;Dh(()=>{if($n&&se&&En&&En!=="media"){const en=En;let yn=En;if(en==="class"&&(yn=".%s"),en==="data"&&(yn="[data-%s]"),en?.startsWith("data-")&&!en.includes("%s")&&(yn=`[${en}="%s"]`),yn.startsWith("."))se.classList.remove(...dn.map(bn=>yn.substring(1).replace("%s",bn))),se.classList.add(yn.substring(1).replace("%s",$n));else{const bn=yn.replace("%s",$n).match(/\[([^\]]+)\]/);if(bn){const[Pn,Bn]=bn[1].split("=");Bn||dn.forEach(Zn=>{se.removeAttribute(Pn.replace($n,Zn))}),se.setAttribute(Pn,Bn?Bn.replace(/"|'/g,""):"")}else se.setAttribute(yn,$n)}}},[$n,En,se,dn]),H.useEffect(()=>{let en;if(Ee&&Ce.current&&le){const yn=le.createElement("style");yn.appendChild(le.createTextNode(lte)),le.head.appendChild(yn),window.getComputedStyle(le.body),en=setTimeout(()=>{le.head.removeChild(yn)},1)}return()=>{clearTimeout(en)}},[$n,Ee,le]),H.useEffect(()=>(Ce.current=!0,()=>{Ce.current=!1}),[]);const Hi=H.useMemo(()=>({allColorSchemes:dn,colorScheme:$n,darkColorScheme:tr,lightColorScheme:mn,mode:Lr,setColorScheme:jn,setMode:Ft,systemMode:gn}),[dn,$n,tr,mn,Lr,jn,Ft,gn,Tr.colorSchemeSelector]);let nr=!0;(Q||et.cssVariables===!1||Be&&Xe?.cssVarPrefix===Gt)&&(nr=!1);const on=V.jsxs(H.Fragment,{children:[V.jsx($V,{themeId:Me?e:void 0,theme:Tr,children:he}),nr&&V.jsx(TV,{styles:Tr.generateStyleSheets?.()||[]})]});return Be?on:V.jsx(T.Provider,{value:Hi,children:on})}const q=typeof p=="string"?p:p.light,$=typeof p=="string"?p:p.dark;return{CssVarsProvider:F,useColorScheme:I,getInitColorSchemeScript:te=>rte({colorSchemeStorageKey:s,defaultLightColorScheme:q,defaultDarkColorScheme:$,modeStorageKey:r,...te})}}function ute(t=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${t?`${t}-`:""}${r}${e(...s)})`}const O3=(t,e,n,r=[])=>{let s=t;e.forEach((h,p)=>{p===e.length-1?Array.isArray(s)?s[Number(h)]=n:s&&typeof s=="object"&&(s[h]=n):s&&typeof s=="object"&&(s[h]||(s[h]=r.includes(h)?[]:{}),s=s[h])})},hte=(t,e,n)=>{function r(s,h=[],p=[]){Object.entries(s).forEach(([_,o])=>{(!n||n&&!n([...h,_]))&&o!=null&&(typeof o=="object"&&Object.keys(o).length>0?r(o,[...h,_],Array.isArray(o)?[...p,_]:p):e([...h,_],o,p))})}r(t)},dte=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function SA(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},h={},p={};return hte(t,(_,o,T)=>{if((typeof o=="string"||typeof o=="number")&&(!r||!r(_,o))){const I=`--${n?`${n}-`:""}${_.join("-")}`,M=dte(_,o);Object.assign(s,{[I]:M}),O3(h,_,`var(${I})`,T),O3(p,_,`var(${I}, ${M})`,T)}},_=>_[0]==="vars"),{css:s,vars:h,varsWithDefaults:p}}function fte(t,e={}){const{getSelector:n=te,disableCssColorScheme:r,colorSchemeSelector:s,enableContrastVars:h}=e,{colorSchemes:p={},components:_,defaultColorScheme:o="light",...T}=t,{vars:I,css:M,varsWithDefaults:L}=SA(T,e);let F=L;const q={},{[o]:$,...X}=p;if(Object.entries(X||{}).forEach(([me,ge])=>{const{vars:Ee,css:ce,varsWithDefaults:ee}=SA(ge,e);F=da(F,ee),q[me]={css:ce,vars:Ee}}),$){const{css:me,vars:ge,varsWithDefaults:Ee}=SA($,e);F=da(F,Ee),q[o]={css:me,vars:ge}}function te(me,ge){let Ee=s;if(s==="class"&&(Ee=".%s"),s==="data"&&(Ee="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(Ee=`[${s}="%s"]`),me){if(Ee==="media")return t.defaultColorScheme===me?":root":{[`@media (prefers-color-scheme: ${p[me]?.palette?.mode||me})`]:{":root":ge}};if(Ee)return t.defaultColorScheme===me?`:root, ${Ee.replace("%s",String(me))}`:Ee.replace("%s",String(me))}return":root"}return{vars:F,generateThemeVars:()=>{let me={...I};return Object.entries(q).forEach(([,{vars:ge}])=>{me=da(me,ge)}),me},generateStyleSheets:()=>{const me=[],ge=t.defaultColorScheme||"light";function Ee(le,se){Object.keys(se).length&&me.push(typeof le=="string"?{[le]:{...se}}:le)}Ee(n(void 0,{...M}),M);const{[ge]:ce,...ee}=q;if(ce){const{css:le}=ce,se=p[ge]?.palette?.mode,_e=!r&&se?{colorScheme:se,...le}:{...le};Ee(n(ge,{..._e}),_e)}return Object.entries(ee).forEach(([le,{css:se}])=>{const _e=p[le]?.palette?.mode,Q=!r&&_e?{colorScheme:_e,...se}:{...se};Ee(n(le,{...Q}),Q)}),h&&me.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),me}}}function pte(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function wr(t,e,n=void 0){const r={};for(const s in t){const h=t[s];let p="",_=!0;for(let o=0;o<h.length;o+=1){const T=h[o];T&&(p+=(_===!0?"":" ")+e(T),_=!1,n&&n[T]&&(p+=" "+n[T]))}r[s]=p}return r}const mte=v1(),gte=zV("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${tn(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),yte=t=>NV({props:t,name:"MuiContainer",defaultTheme:mte}),_te=(t,e)=>{const n=o=>br(e,o),{classes:r,fixed:s,disableGutters:h,maxWidth:p}=t,_={root:["root",p&&`maxWidth${tn(String(p))}`,s&&"fixed",h&&"disableGutters"]};return wr(_,n,r)};function vte(t={}){const{createStyledComponent:e=gte,useThemeProps:n=yte,componentName:r="MuiContainer"}=t,s=e(({theme:p,ownerState:_})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!_.disableGutters&&{paddingLeft:p.spacing(2),paddingRight:p.spacing(2),[p.breakpoints.up("sm")]:{paddingLeft:p.spacing(3),paddingRight:p.spacing(3)}}}),({theme:p,ownerState:_})=>_.fixed&&Object.keys(p.breakpoints.values).reduce((o,T)=>{const I=T,M=p.breakpoints.values[I];return M!==0&&(o[p.breakpoints.up(I)]={maxWidth:`${M}${p.breakpoints.unit}`}),o},{}),({theme:p,ownerState:_})=>({..._.maxWidth==="xs"&&{[p.breakpoints.up("xs")]:{maxWidth:Math.max(p.breakpoints.values.xs,444)}},..._.maxWidth&&_.maxWidth!=="xs"&&{[p.breakpoints.up(_.maxWidth)]:{maxWidth:`${p.breakpoints.values[_.maxWidth]}${p.breakpoints.unit}`}}}));return H.forwardRef(function(_,o){const T=n(_),{className:I,component:M="div",disableGutters:L=!1,fixed:F=!1,maxWidth:q="lg",classes:$,...X}=T,te={...T,component:M,disableGutters:L,fixed:F,maxWidth:q},he=_te(te,r);return V.jsx(s,{as:M,ownerState:te,className:pn(he.root,I),ref:o,...X})})}function CA(t,e){return H.isValidElement(t)&&e.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const xte=v1(),bte=zV("div",{name:"MuiStack",slot:"Root"});function wte(t){return NV({props:t,name:"MuiStack",defaultTheme:xte})}function Tte(t,e){const n=H.Children.toArray(t).filter(Boolean);return n.reduce((r,s,h)=>(r.push(s),h<n.length-1&&r.push(H.cloneElement(e,{key:`separator-${h}`})),r),[])}const Ete=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Ste=({ownerState:t,theme:e})=>{let n={display:"flex",flexDirection:"column",...Rh({theme:e},bA({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(t.spacing){const r=RS(e),s=Object.keys(e.breakpoints.values).reduce((o,T)=>((typeof t.spacing=="object"&&t.spacing[T]!=null||typeof t.direction=="object"&&t.direction[T]!=null)&&(o[T]=!0),o),{}),h=bA({values:t.direction,base:s}),p=bA({values:t.spacing,base:s});typeof h=="object"&&Object.keys(h).forEach((o,T,I)=>{if(!h[o]){const L=T>0?h[I[T-1]]:"column";h[o]=L}}),n=da(n,Rh({theme:e},p,(o,T)=>t.useFlexGap?{gap:My(r,o)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Ete(T?h[T]:t.direction)}`]:My(r,o)}}))}return n=BJ(e.breakpoints,n),n};function Cte(t={}){const{createStyledComponent:e=bte,useThemeProps:n=wte,componentName:r="MuiStack"}=t,s=()=>wr({root:["root"]},o=>br(r,o),{}),h=e(Ste);return H.forwardRef(function(o,T){const I=n(o),M=MD(I),{component:L="div",direction:F="column",spacing:q=0,divider:$,children:X,className:te,useFlexGap:he=!1,...ie}=M,me={direction:F,spacing:q,useFlexGap:he},ge=s();return V.jsx(h,{as:L,ownerState:me,ref:T,className:pn(ge.root,te),...ie,children:$?Tte(X,$):X})})}function HV(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Bb.white,default:Bb.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GV=HV();function WV(){return{text:{primary:Bb.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Bb.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const QI=WV();function z3(t,e,n,r){const s=r.light||r,h=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=FS(t.main,s):e==="dark"&&(t.dark=BS(t.main,h)))}function N3(t,e,n,r,s){const h=s.light||s,p=s.dark||s*1.5;e[n]||(e.hasOwnProperty(r)?e[n]=e[r]:n==="light"?e.light=`color-mix(in ${t}, ${e.main}, #fff ${(h*100).toFixed(0)}%)`:n==="dark"&&(e.dark=`color-mix(in ${t}, ${e.main}, #000 ${(p*100).toFixed(0)}%)`))}function Ate(t="light"){return t==="dark"?{main:G_[200],light:G_[50],dark:G_[400]}:{main:G_[700],light:G_[400],dark:G_[800]}}function Ite(t="light"){return t==="dark"?{main:H_[200],light:H_[50],dark:H_[400]}:{main:H_[500],light:H_[300],dark:H_[700]}}function Mte(t="light"){return t==="dark"?{main:q_[500],light:q_[300],dark:q_[700]}:{main:q_[700],light:q_[400],dark:q_[800]}}function Rte(t="light"){return t==="dark"?{main:W_[400],light:W_[300],dark:W_[700]}:{main:W_[700],light:W_[500],dark:W_[900]}}function Dte(t="light"){return t==="dark"?{main:Y_[400],light:Y_[300],dark:Y_[700]}:{main:Y_[800],light:Y_[500],dark:Y_[900]}}function kte(t="light"){return t==="dark"?{main:Rx[400],light:Rx[300],dark:Rx[700]}:{main:"#ed6c02",light:Rx[500],dark:Rx[900]}}function Pte(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function LD(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,colorSpace:s,...h}=t,p=t.primary||Ate(e),_=t.secondary||Ite(e),o=t.error||Mte(e),T=t.info||Rte(e),I=t.success||Dte(e),M=t.warning||kte(e);function L(X){return s?Pte(X):jee(X,QI.text.primary)>=n?QI.text.primary:GV.text.primary}const F=({color:X,name:te,mainShade:he=500,lightShade:ie=300,darkShade:me=700})=>{if(X={...X},!X.main&&X[he]&&(X.main=X[he]),!X.hasOwnProperty("main"))throw new Error(wp(11,te?` (${te})`:"",he));if(typeof X.main!="string")throw new Error(wp(12,te?` (${te})`:"",JSON.stringify(X.main)));return s?(N3(s,X,"light",ie,r),N3(s,X,"dark",me,r)):(z3(X,"light",ie,r),z3(X,"dark",me,r)),X.contrastText||(X.contrastText=L(X.main)),X};let q;return e==="light"?q=HV():e==="dark"&&(q=WV()),da({common:{...Bb},mode:e,primary:F({color:p,name:"primary"}),secondary:F({color:_,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:F({color:o,name:"error"}),warning:F({color:M,name:"warning"}),info:F({color:T,name:"info"}),success:F({color:I,name:"success"}),grey:MQ,contrastThreshold:n,getContrastText:L,augmentColor:F,tonalOffset:r,...q},h)}function Lte(t){const e={};return Object.entries(t).forEach(r=>{const[s,h]=r;typeof h=="object"&&(e[s]=`${h.fontStyle?`${h.fontStyle} `:""}${h.fontVariant?`${h.fontVariant} `:""}${h.fontWeight?`${h.fontWeight} `:""}${h.fontStretch?`${h.fontStretch} `:""}${h.fontSize||""}${h.lineHeight?`/${h.lineHeight} `:""}${h.fontFamily||""}`)}),e}function Ote(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function zte(t){return Math.round(t*1e5)/1e5}const B3={textTransform:"uppercase"},F3='"Roboto", "Helvetica", "Arial", sans-serif';function YV(t,e){const{fontFamily:n=F3,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:h=400,fontWeightMedium:p=500,fontWeightBold:_=700,htmlFontSize:o=16,allVariants:T,pxToRem:I,...M}=typeof e=="function"?e(t):e,L=r/14,F=I||(X=>`${X/o*L}rem`),q=(X,te,he,ie,me)=>({fontFamily:n,fontWeight:X,fontSize:F(te),lineHeight:he,...n===F3?{letterSpacing:`${zte(ie/te)}em`}:{},...me,...T}),$={h1:q(s,96,1.167,-1.5),h2:q(s,60,1.2,-.5),h3:q(h,48,1.167,0),h4:q(h,34,1.235,.25),h5:q(h,24,1.334,0),h6:q(p,20,1.6,.15),subtitle1:q(h,16,1.75,.15),subtitle2:q(p,14,1.57,.1),body1:q(h,16,1.5,.15),body2:q(h,14,1.43,.15),button:q(p,14,1.75,.4,B3),caption:q(h,12,1.66,.4),overline:q(h,12,2.66,1,B3),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return da({htmlFontSize:o,pxToRem:F,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:h,fontWeightMedium:p,fontWeightBold:_,...$},M,{clone:!1})}const Nte=.2,Bte=.14,Fte=.12;function Ds(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Nte})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Bte})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Fte})`].join(",")}const Vte=["none",Ds(0,2,1,-1,0,1,1,0,0,1,3,0),Ds(0,3,1,-2,0,2,2,0,0,1,5,0),Ds(0,3,3,-2,0,3,4,0,0,1,8,0),Ds(0,2,4,-1,0,4,5,0,0,1,10,0),Ds(0,3,5,-1,0,5,8,0,0,1,14,0),Ds(0,3,5,-1,0,6,10,0,0,1,18,0),Ds(0,4,5,-2,0,7,10,1,0,2,16,1),Ds(0,5,5,-3,0,8,10,1,0,3,14,2),Ds(0,5,6,-3,0,9,12,1,0,3,16,2),Ds(0,6,6,-3,0,10,14,1,0,4,18,3),Ds(0,6,7,-4,0,11,15,1,0,4,20,3),Ds(0,7,8,-4,0,12,17,2,0,5,22,4),Ds(0,7,8,-4,0,13,19,2,0,5,24,4),Ds(0,7,9,-4,0,14,21,2,0,5,26,4),Ds(0,8,9,-5,0,15,22,2,0,6,28,5),Ds(0,8,10,-5,0,16,24,2,0,6,30,5),Ds(0,8,11,-5,0,17,26,2,0,6,32,5),Ds(0,9,11,-5,0,18,28,2,0,7,34,6),Ds(0,9,12,-6,0,19,29,2,0,7,36,6),Ds(0,10,13,-6,0,20,31,3,0,8,38,7),Ds(0,10,13,-6,0,21,33,3,0,8,40,7),Ds(0,10,14,-6,0,22,35,3,0,8,42,7),Ds(0,11,14,-7,0,23,36,3,0,9,44,8),Ds(0,11,15,-7,0,24,38,3,0,9,46,8)],Ute={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},jte={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function V3(t){return`${Math.round(t)}ms`}function $te(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function qte(t){const e={...Ute,...t.easing},n={...jte,...t.duration};return{getAutoHeightDuration:$te,create:(s=["all"],h={})=>{const{duration:p=n.standard,easing:_=e.easeInOut,delay:o=0,...T}=h;return(Array.isArray(s)?s:[s]).map(I=>`${I} ${typeof p=="string"?p:V3(p)} ${_} ${typeof o=="string"?o:V3(o)}`).join(",")},...t,easing:e,duration:n}}const Hte={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Gte(t){return zd(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function XV(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let h=0;h<s.length;h++){const[p,_]=s[h];!Gte(_)||p.startsWith("unstable_")?delete r[p]:zd(_)&&(r[p]={..._},n(r[p]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function U3(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const Wte=t=>{if(!Number.isNaN(+t))return+t;const e=t.match(/\d*\.?\d+/g);if(!e)return 0;let n=0;for(let r=0;r<e.length;r+=1)n+=+e[r];return n};function Yte(t){Object.assign(t,{alpha(e,n){const r=this||t;return r.colorSpace?`oklch(from ${e} l c h / ${typeof n=="string"?`calc(${n})`:n})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:ME(e,Wte(n))},lighten(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${U3(n)})`:FS(e,n)},darken(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${U3(n)})`:BS(e,n)}})}function JI(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:h={},transitions:p={},typography:_={},shape:o,colorSpace:T,...I}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(wp(20));const M=LD({...h,colorSpace:T}),L=v1(t);let F=da(L,{mixins:Ote(L.breakpoints,r),palette:M,shadows:Vte.slice(),typography:YV(M,_),transitions:qte(p),zIndex:{...Hte}});return F=da(F,I),F=e.reduce((q,$)=>da(q,$),F),F.unstable_sxConfig={..._1,...I?.unstable_sxConfig},F.unstable_sx=function($){return eg({sx:$,theme:this})},F.toRuntimeSource=XV,Yte(F),F}function eM(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Xte=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=eM(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function KV(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function ZV(t){return t==="dark"?Xte:[]}function Kte(t){const{palette:e={mode:"light"},opacity:n,overlays:r,colorSpace:s,...h}=t,p=LD({...e,colorSpace:s});return{palette:p,opacity:{...KV(p.mode),...n},overlays:r||ZV(p.mode),...h}}function Zte(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Qte=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Jte=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let h=s;if(s==="class"&&(h=".%s"),s==="data"&&(h="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(h=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const p={};return Qte(t.cssVarPrefix).forEach(_=>{p[_]=n[_],delete n[_]}),h==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:p}}:h?{[h.replace("%s",e)]:p,[`${r}, ${h.replace("%s",e)}`]:n}:{[r]:{...n,...p}}}if(h&&h!=="media")return`${r}, ${h.replace("%s",String(e))}`}else if(e){if(h==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(h)return h.replace("%s",String(e))}return r};function ene(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Ot(t,e,n){!t[e]&&n&&(t[e]=n)}function Zx(t){return typeof t!="string"||!t.startsWith("hsl")?t:BV(t)}function tp(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Kx(Zx(t[e])))}function tne(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Md=t=>{try{return t()}catch{}},nne=(t="mui")=>ute(t);function AA(t,e,n,r,s){if(!n)return;n=n===!0?{}:n;const h=s==="dark"?"dark":"light";if(!r){e[s]=Kte({...n,palette:{mode:h,...n?.palette},colorSpace:t});return}const{palette:p,..._}=JI({...r,palette:{mode:h,...n?.palette},colorSpace:t});return e[s]={...n,palette:p,opacity:{...KV(h),...n?.opacity},overlays:n?.overlays||ZV(h)},_}function rne(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:h="mui",nativeColor:p=!1,shouldSkipGeneratingVar:_=Zte,colorSchemeSelector:o=n.light&&n.dark?"media":void 0,rootSelector:T=":root",...I}=t,M=Object.keys(n)[0],L=r||(n.light&&M!=="light"?"light":M),F=nne(h),{[L]:q,light:$,dark:X,...te}=n,he={...te};let ie=q;if((L==="dark"&&!("dark"in n)||L==="light"&&!("light"in n))&&(ie=!0),!ie)throw new Error(wp(21,L));let me;p&&(me="oklch");const ge=AA(me,he,ie,I,L);$&&!he.light&&AA(me,he,$,void 0,"light"),X&&!he.dark&&AA(me,he,X,void 0,"dark");let Ee={defaultColorScheme:L,...ge,cssVarPrefix:h,colorSchemeSelector:o,rootSelector:T,getCssVar:F,colorSchemes:he,font:{...Lte(ge.typography),...ge.font},spacing:tne(I.spacing)};Object.keys(Ee.colorSchemes).forEach(_e=>{const Q=Ee.colorSchemes[_e].palette,de=Ke=>{const Ce=Ke.split("-"),Xe=Ce[1],tt=Ce[2];return F(Ke,Q[Xe][tt])};Q.mode==="light"&&(Ot(Q.common,"background","#fff"),Ot(Q.common,"onBackground","#000")),Q.mode==="dark"&&(Ot(Q.common,"background","#000"),Ot(Q.common,"onBackground","#fff"));function Ve(Ke,Ce,Xe){if(me){let tt;return Ke===Jg&&(tt=`transparent ${((1-Xe)*100).toFixed(0)}%`),Ke===ns&&(tt=`#000 ${(Xe*100).toFixed(0)}%`),Ke===rs&&(tt=`#fff ${(Xe*100).toFixed(0)}%`),`color-mix(in ${me}, ${Ce}, ${tt})`}return Ke(Ce,Xe)}if(ene(Q,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Q.mode==="light"){Ot(Q.Alert,"errorColor",Ve(ns,Q.error.light,.6)),Ot(Q.Alert,"infoColor",Ve(ns,Q.info.light,.6)),Ot(Q.Alert,"successColor",Ve(ns,Q.success.light,.6)),Ot(Q.Alert,"warningColor",Ve(ns,Q.warning.light,.6)),Ot(Q.Alert,"errorFilledBg",de("palette-error-main")),Ot(Q.Alert,"infoFilledBg",de("palette-info-main")),Ot(Q.Alert,"successFilledBg",de("palette-success-main")),Ot(Q.Alert,"warningFilledBg",de("palette-warning-main")),Ot(Q.Alert,"errorFilledColor",Md(()=>Q.getContrastText(Q.error.main))),Ot(Q.Alert,"infoFilledColor",Md(()=>Q.getContrastText(Q.info.main))),Ot(Q.Alert,"successFilledColor",Md(()=>Q.getContrastText(Q.success.main))),Ot(Q.Alert,"warningFilledColor",Md(()=>Q.getContrastText(Q.warning.main))),Ot(Q.Alert,"errorStandardBg",Ve(rs,Q.error.light,.9)),Ot(Q.Alert,"infoStandardBg",Ve(rs,Q.info.light,.9)),Ot(Q.Alert,"successStandardBg",Ve(rs,Q.success.light,.9)),Ot(Q.Alert,"warningStandardBg",Ve(rs,Q.warning.light,.9)),Ot(Q.Alert,"errorIconColor",de("palette-error-main")),Ot(Q.Alert,"infoIconColor",de("palette-info-main")),Ot(Q.Alert,"successIconColor",de("palette-success-main")),Ot(Q.Alert,"warningIconColor",de("palette-warning-main")),Ot(Q.AppBar,"defaultBg",de("palette-grey-100")),Ot(Q.Avatar,"defaultBg",de("palette-grey-400")),Ot(Q.Button,"inheritContainedBg",de("palette-grey-300")),Ot(Q.Button,"inheritContainedHoverBg",de("palette-grey-A100")),Ot(Q.Chip,"defaultBorder",de("palette-grey-400")),Ot(Q.Chip,"defaultAvatarColor",de("palette-grey-700")),Ot(Q.Chip,"defaultIconColor",de("palette-grey-700")),Ot(Q.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ot(Q.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ot(Q.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ot(Q.LinearProgress,"primaryBg",Ve(rs,Q.primary.main,.62)),Ot(Q.LinearProgress,"secondaryBg",Ve(rs,Q.secondary.main,.62)),Ot(Q.LinearProgress,"errorBg",Ve(rs,Q.error.main,.62)),Ot(Q.LinearProgress,"infoBg",Ve(rs,Q.info.main,.62)),Ot(Q.LinearProgress,"successBg",Ve(rs,Q.success.main,.62)),Ot(Q.LinearProgress,"warningBg",Ve(rs,Q.warning.main,.62)),Ot(Q.Skeleton,"bg",me?Ve(Jg,Q.text.primary,.11):`rgba(${de("palette-text-primaryChannel")} / 0.11)`),Ot(Q.Slider,"primaryTrack",Ve(rs,Q.primary.main,.62)),Ot(Q.Slider,"secondaryTrack",Ve(rs,Q.secondary.main,.62)),Ot(Q.Slider,"errorTrack",Ve(rs,Q.error.main,.62)),Ot(Q.Slider,"infoTrack",Ve(rs,Q.info.main,.62)),Ot(Q.Slider,"successTrack",Ve(rs,Q.success.main,.62)),Ot(Q.Slider,"warningTrack",Ve(rs,Q.warning.main,.62));const Ke=me?Ve(ns,Q.background.default,.6825):tT(Q.background.default,.8);Ot(Q.SnackbarContent,"bg",Ke),Ot(Q.SnackbarContent,"color",Md(()=>me?QI.text.primary:Q.getContrastText(Ke))),Ot(Q.SpeedDialAction,"fabHoverBg",tT(Q.background.paper,.15)),Ot(Q.StepConnector,"border",de("palette-grey-400")),Ot(Q.StepContent,"border",de("palette-grey-400")),Ot(Q.Switch,"defaultColor",de("palette-common-white")),Ot(Q.Switch,"defaultDisabledColor",de("palette-grey-100")),Ot(Q.Switch,"primaryDisabledColor",Ve(rs,Q.primary.main,.62)),Ot(Q.Switch,"secondaryDisabledColor",Ve(rs,Q.secondary.main,.62)),Ot(Q.Switch,"errorDisabledColor",Ve(rs,Q.error.main,.62)),Ot(Q.Switch,"infoDisabledColor",Ve(rs,Q.info.main,.62)),Ot(Q.Switch,"successDisabledColor",Ve(rs,Q.success.main,.62)),Ot(Q.Switch,"warningDisabledColor",Ve(rs,Q.warning.main,.62)),Ot(Q.TableCell,"border",Ve(rs,Ve(Jg,Q.divider,1),.88)),Ot(Q.Tooltip,"bg",Ve(Jg,Q.grey[700],.92))}if(Q.mode==="dark"){Ot(Q.Alert,"errorColor",Ve(rs,Q.error.light,.6)),Ot(Q.Alert,"infoColor",Ve(rs,Q.info.light,.6)),Ot(Q.Alert,"successColor",Ve(rs,Q.success.light,.6)),Ot(Q.Alert,"warningColor",Ve(rs,Q.warning.light,.6)),Ot(Q.Alert,"errorFilledBg",de("palette-error-dark")),Ot(Q.Alert,"infoFilledBg",de("palette-info-dark")),Ot(Q.Alert,"successFilledBg",de("palette-success-dark")),Ot(Q.Alert,"warningFilledBg",de("palette-warning-dark")),Ot(Q.Alert,"errorFilledColor",Md(()=>Q.getContrastText(Q.error.dark))),Ot(Q.Alert,"infoFilledColor",Md(()=>Q.getContrastText(Q.info.dark))),Ot(Q.Alert,"successFilledColor",Md(()=>Q.getContrastText(Q.success.dark))),Ot(Q.Alert,"warningFilledColor",Md(()=>Q.getContrastText(Q.warning.dark))),Ot(Q.Alert,"errorStandardBg",Ve(ns,Q.error.light,.9)),Ot(Q.Alert,"infoStandardBg",Ve(ns,Q.info.light,.9)),Ot(Q.Alert,"successStandardBg",Ve(ns,Q.success.light,.9)),Ot(Q.Alert,"warningStandardBg",Ve(ns,Q.warning.light,.9)),Ot(Q.Alert,"errorIconColor",de("palette-error-main")),Ot(Q.Alert,"infoIconColor",de("palette-info-main")),Ot(Q.Alert,"successIconColor",de("palette-success-main")),Ot(Q.Alert,"warningIconColor",de("palette-warning-main")),Ot(Q.AppBar,"defaultBg",de("palette-grey-900")),Ot(Q.AppBar,"darkBg",de("palette-background-paper")),Ot(Q.AppBar,"darkColor",de("palette-text-primary")),Ot(Q.Avatar,"defaultBg",de("palette-grey-600")),Ot(Q.Button,"inheritContainedBg",de("palette-grey-800")),Ot(Q.Button,"inheritContainedHoverBg",de("palette-grey-700")),Ot(Q.Chip,"defaultBorder",de("palette-grey-700")),Ot(Q.Chip,"defaultAvatarColor",de("palette-grey-300")),Ot(Q.Chip,"defaultIconColor",de("palette-grey-300")),Ot(Q.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ot(Q.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ot(Q.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ot(Q.LinearProgress,"primaryBg",Ve(ns,Q.primary.main,.5)),Ot(Q.LinearProgress,"secondaryBg",Ve(ns,Q.secondary.main,.5)),Ot(Q.LinearProgress,"errorBg",Ve(ns,Q.error.main,.5)),Ot(Q.LinearProgress,"infoBg",Ve(ns,Q.info.main,.5)),Ot(Q.LinearProgress,"successBg",Ve(ns,Q.success.main,.5)),Ot(Q.LinearProgress,"warningBg",Ve(ns,Q.warning.main,.5)),Ot(Q.Skeleton,"bg",me?Ve(Jg,Q.text.primary,.13):`rgba(${de("palette-text-primaryChannel")} / 0.13)`),Ot(Q.Slider,"primaryTrack",Ve(ns,Q.primary.main,.5)),Ot(Q.Slider,"secondaryTrack",Ve(ns,Q.secondary.main,.5)),Ot(Q.Slider,"errorTrack",Ve(ns,Q.error.main,.5)),Ot(Q.Slider,"infoTrack",Ve(ns,Q.info.main,.5)),Ot(Q.Slider,"successTrack",Ve(ns,Q.success.main,.5)),Ot(Q.Slider,"warningTrack",Ve(ns,Q.warning.main,.5));const Ke=me?Ve(rs,Q.background.default,.985):tT(Q.background.default,.98);Ot(Q.SnackbarContent,"bg",Ke),Ot(Q.SnackbarContent,"color",Md(()=>me?GV.text.primary:Q.getContrastText(Ke))),Ot(Q.SpeedDialAction,"fabHoverBg",tT(Q.background.paper,.15)),Ot(Q.StepConnector,"border",de("palette-grey-600")),Ot(Q.StepContent,"border",de("palette-grey-600")),Ot(Q.Switch,"defaultColor",de("palette-grey-300")),Ot(Q.Switch,"defaultDisabledColor",de("palette-grey-600")),Ot(Q.Switch,"primaryDisabledColor",Ve(ns,Q.primary.main,.55)),Ot(Q.Switch,"secondaryDisabledColor",Ve(ns,Q.secondary.main,.55)),Ot(Q.Switch,"errorDisabledColor",Ve(ns,Q.error.main,.55)),Ot(Q.Switch,"infoDisabledColor",Ve(ns,Q.info.main,.55)),Ot(Q.Switch,"successDisabledColor",Ve(ns,Q.success.main,.55)),Ot(Q.Switch,"warningDisabledColor",Ve(ns,Q.warning.main,.55)),Ot(Q.TableCell,"border",Ve(ns,Ve(Jg,Q.divider,1),.68)),Ot(Q.Tooltip,"bg",Ve(Jg,Q.grey[700],.92))}tp(Q.background,"default"),tp(Q.background,"paper"),tp(Q.common,"background"),tp(Q.common,"onBackground"),tp(Q,"divider"),Object.keys(Q).forEach(Ke=>{const Ce=Q[Ke];Ke!=="tonalOffset"&&Ce&&typeof Ce=="object"&&(Ce.main&&Ot(Q[Ke],"mainChannel",Kx(Zx(Ce.main))),Ce.light&&Ot(Q[Ke],"lightChannel",Kx(Zx(Ce.light))),Ce.dark&&Ot(Q[Ke],"darkChannel",Kx(Zx(Ce.dark))),Ce.contrastText&&Ot(Q[Ke],"contrastTextChannel",Kx(Zx(Ce.contrastText))),Ke==="text"&&(tp(Q[Ke],"primary"),tp(Q[Ke],"secondary")),Ke==="action"&&(Ce.active&&tp(Q[Ke],"active"),Ce.selected&&tp(Q[Ke],"selected")))})}),Ee=e.reduce((_e,Q)=>da(_e,Q),Ee);const ce={prefix:h,disableCssColorScheme:s,shouldSkipGeneratingVar:_,getSelector:Jte(Ee),enableContrastVars:p},{vars:ee,generateThemeVars:le,generateStyleSheets:se}=fte(Ee,ce);return Ee.vars=ee,Object.entries(Ee.colorSchemes[Ee.defaultColorScheme]).forEach(([_e,Q])=>{Ee[_e]=Q}),Ee.generateThemeVars=le,Ee.generateStyleSheets=se,Ee.generateSpacing=function(){return MV(I.spacing,RS(this))},Ee.getColorSchemeSelector=pte(o),Ee.spacing=Ee.generateSpacing(),Ee.shouldSkipGeneratingVar=_,Ee.unstable_sxConfig={..._1,...I?.unstable_sxConfig},Ee.unstable_sx=function(Q){return eg({sx:Q,theme:this})},Ee.toRuntimeSource=XV,Ee}function j3(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:LD({...n===!0?{}:n.palette,mode:e})})}function VS(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:h=n?.mode,...p}=t,_=h||"light",o=s?.[_],T={...s,...n?{[_]:{...typeof o!="boolean"&&o,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return JI(t,...e);let I=n;"palette"in t||T[_]&&(T[_]!==!0?I=T[_].palette:_==="dark"&&(I={mode:"dark"}));const M=JI({...t,palette:I},...e);return M.defaultColorScheme=_,M.colorSchemes=T,M.palette.mode==="light"&&(M.colorSchemes.light={...T.light!==!0&&T.light,palette:M.palette},j3(M,"dark",T.dark)),M.palette.mode==="dark"&&(M.colorSchemes.dark={...T.dark!==!0&&T.dark,palette:M.palette},j3(M,"light",T.light)),M}return!n&&!("light"in T)&&_==="light"&&(T.light=!0),rne({...p,colorSchemes:T,defaultColorScheme:_,...typeof r!="boolean"&&r},...e)}const OD=VS();function Uy(){const t=zS(OD);return t[Jd]||t}function US(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const gl=t=>US(t)&&t!=="classes",sn=OV({themeId:Jd,defaultTheme:OD,rootShouldForwardProp:gl});function ine({theme:t,...e}){const n=Jd in t?t[Jd]:void 0;return V.jsx($V,{...e,themeId:n?Jd:void 0,theme:n||t})}const nT={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:sne}=cte({themeId:Jd,theme:()=>VS({cssVariables:!0}),colorSchemeStorageKey:nT.colorSchemeStorageKey,modeStorageKey:nT.modeStorageKey,defaultColorScheme:{light:nT.defaultLightColorScheme,dark:nT.defaultDarkColorScheme},resolveTheme:t=>{const e={...t,typography:YV(t.palette,t.typography)};return e.unstable_sx=function(r){return eg({sx:r,theme:this})},e}}),one=sne;function ane({theme:t,...e}){const n=H.useMemo(()=>{if(typeof t=="function")return t;const r=Jd in t?t[Jd]:t;return"colorSchemes"in r?null:"vars"in r?t:{...t,vars:null}},[t]);return n?V.jsx(ine,{theme:n,...e}):V.jsx(one,{theme:t,...e})}function tM(...t){return t.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function lne(t){return V.jsx(RV,{...t,defaultTheme:OD,themeId:Jd})}function zD(t){return function(n){return V.jsx(lne,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function cne(){return MD}const Ir=tte;function Rr(t){return Zee(t)}function une(t){return br("MuiSvgIcon",t)}vr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const hne=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${tn(e)}`,`fontSize${tn(n)}`]};return wr(s,une,r)},dne=sn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${tn(n.color)}`],e[`fontSize${tn(n.fontSize)}`]]}})(Ir(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(t.vars??t).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),nM=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiSvgIcon"}),{children:s,className:h,color:p="inherit",component:_="svg",fontSize:o="medium",htmlColor:T,inheritViewBox:I=!1,titleAccess:M,viewBox:L="0 0 24 24",...F}=r,q=H.isValidElement(s)&&s.type==="svg",$={...r,color:p,component:_,fontSize:o,instanceFontSize:e.fontSize,inheritViewBox:I,viewBox:L,hasSvgAsChild:q},X={};I||(X.viewBox=L);const te=hne($);return V.jsxs(dne,{as:_,className:pn(te.root,h),focusable:"false",color:T,"aria-hidden":M?void 0:!0,role:M?"img":void 0,ref:n,...X,...F,...q&&s.props,ownerState:$,children:[q?s.props.children:s,M?V.jsx("title",{children:M}):null]})});nM.muiName="SvgIcon";function Os(t,e){function n(r,s){return V.jsx(nM,{"data-testid":void 0,ref:s,...r,children:t})}return n.muiName=nM.muiName,H.memo(H.forwardRef(n))}function QV(t,e=166){let n;function r(...s){const h=()=>{t.apply(this,s)};clearTimeout(n),n=setTimeout(h,e)}return r.clear=()=>{clearTimeout(n)},r}function Fl(t){return t&&t.ownerDocument||document}function Tp(t){return Fl(t).defaultView||window}function $3(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function $b(t){const{controlled:e,default:n,name:r,state:s="value"}=t,{current:h}=H.useRef(e!==void 0),[p,_]=H.useState(n),o=h?e:p,T=H.useCallback(I=>{h||_(I)},[]);return[o,T]}function tf(t){const e=H.useRef(t);return Dh(()=>{e.current=t}),H.useRef((...n)=>(0,e.current)(...n)).current}function pa(...t){const e=H.useRef(void 0),n=H.useCallback(r=>{const s=t.map(h=>{if(h==null)return null;if(typeof h=="function"){const p=h,_=p(r);return typeof _=="function"?_:()=>{p(null)}}return h.current=r,()=>{h.current=null}});return()=>{s.forEach(h=>h?.())}},t);return H.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function fne(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function pne(t,e){if(!t)return e;function n(p,_){const o={};return Object.keys(_).forEach(T=>{fne(T,_[T])&&typeof p[T]=="function"&&(o[T]=(...I)=>{p[T](...I),_[T](...I)})}),o}if(typeof t=="function"||typeof e=="function")return p=>{const _=typeof e=="function"?e(p):e,o=typeof t=="function"?t({...p,..._}):t,T=pn(p?.className,_?.className,o?.className),I=n(o,_);return{..._,...o,...I,...!!T&&{className:T},..._?.style&&o?.style&&{style:{..._.style,...o.style}},..._?.sx&&o?.sx&&{sx:[...Array.isArray(_.sx)?_.sx:[_.sx],...Array.isArray(o.sx)?o.sx:[o.sx]]}}};const r=e,s=n(t,r),h=pn(r?.className,t?.className);return{...e,...t,...s,...!!h&&{className:h},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function JV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rM(t,e){return rM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rM(t,e)}function e6(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rM(t,e)}const q3={disabled:!1},RE=Ct.createContext(null);var mne=function(e){return e.scrollTop},Qx="unmounted",sy="exited",oy="entering",iv="entered",iM="exiting",af=(function(t){e6(e,t);function e(r,s){var h;h=t.call(this,r,s)||this;var p=s,_=p&&!p.isMounting?r.enter:r.appear,o;return h.appearStatus=null,r.in?_?(o=sy,h.appearStatus=oy):o=iv:r.unmountOnExit||r.mountOnEnter?o=Qx:o=sy,h.state={status:o},h.nextCallback=null,h}e.getDerivedStateFromProps=function(s,h){var p=s.in;return p&&h.status===Qx?{status:sy}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var h=null;if(s!==this.props){var p=this.state.status;this.props.in?p!==oy&&p!==iv&&(h=oy):(p===oy||p===iv)&&(h=iM)}this.updateStatus(!1,h)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,h,p,_;return h=p=_=s,s!=null&&typeof s!="number"&&(h=s.exit,p=s.enter,_=s.appear!==void 0?s.appear:p),{exit:h,enter:p,appear:_}},n.updateStatus=function(s,h){if(s===void 0&&(s=!1),h!==null)if(this.cancelNextCallback(),h===oy){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:jx.findDOMNode(this);p&&mne(p)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===sy&&this.setState({status:Qx})},n.performEnter=function(s){var h=this,p=this.props.enter,_=this.context?this.context.isMounting:s,o=this.props.nodeRef?[_]:[jx.findDOMNode(this),_],T=o[0],I=o[1],M=this.getTimeouts(),L=_?M.appear:M.enter;if(!s&&!p||q3.disabled){this.safeSetState({status:iv},function(){h.props.onEntered(T)});return}this.props.onEnter(T,I),this.safeSetState({status:oy},function(){h.props.onEntering(T,I),h.onTransitionEnd(L,function(){h.safeSetState({status:iv},function(){h.props.onEntered(T,I)})})})},n.performExit=function(){var s=this,h=this.props.exit,p=this.getTimeouts(),_=this.props.nodeRef?void 0:jx.findDOMNode(this);if(!h||q3.disabled){this.safeSetState({status:sy},function(){s.props.onExited(_)});return}this.props.onExit(_),this.safeSetState({status:iM},function(){s.props.onExiting(_),s.onTransitionEnd(p.exit,function(){s.safeSetState({status:sy},function(){s.props.onExited(_)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,h){h=this.setNextCallback(h),this.setState(s,h)},n.setNextCallback=function(s){var h=this,p=!0;return this.nextCallback=function(_){p&&(p=!1,h.nextCallback=null,s(_))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},n.onTransitionEnd=function(s,h){this.setNextCallback(h);var p=this.props.nodeRef?this.props.nodeRef.current:jx.findDOMNode(this),_=s==null&&!this.props.addEndListener;if(!p||_){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],T=o[0],I=o[1];this.props.addEndListener(T,I)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Qx)return null;var h=this.props,p=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var _=JV(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ct.createElement(RE.Provider,{value:null},typeof p=="function"?p(s,_):Ct.cloneElement(Ct.Children.only(p),_))},e})(Ct.Component);af.contextType=RE;af.propTypes={};function X_(){}af.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:X_,onEntering:X_,onEntered:X_,onExit:X_,onExiting:X_,onExited:X_};af.UNMOUNTED=Qx;af.EXITED=sy;af.ENTERING=oy;af.ENTERED=iv;af.EXITING=iM;function gne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ND(t,e){var n=function(h){return e&&H.isValidElement(h)?e(h):h},r=Object.create(null);return t&&H.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function yne(t,e){t=t||{},e=e||{};function n(I){return I in e?e[I]:t[I]}var r=Object.create(null),s=[];for(var h in t)h in e?s.length&&(r[h]=s,s=[]):s.push(h);var p,_={};for(var o in e){if(r[o])for(p=0;p<r[o].length;p++){var T=r[o][p];_[r[o][p]]=n(T)}_[o]=n(o)}for(p=0;p<s.length;p++)_[s[p]]=n(s[p]);return _}function fy(t,e,n){return n[e]!=null?n[e]:t.props[e]}function _ne(t,e){return ND(t.children,function(n){return H.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:fy(n,"appear",t),enter:fy(n,"enter",t),exit:fy(n,"exit",t)})})}function vne(t,e,n){var r=ND(t.children),s=yne(e,r);return Object.keys(s).forEach(function(h){var p=s[h];if(H.isValidElement(p)){var _=h in e,o=h in r,T=e[h],I=H.isValidElement(T)&&!T.props.in;o&&(!_||I)?s[h]=H.cloneElement(p,{onExited:n.bind(null,p),in:!0,exit:fy(p,"exit",t),enter:fy(p,"enter",t)}):!o&&_&&!I?s[h]=H.cloneElement(p,{in:!1}):o&&_&&H.isValidElement(T)&&(s[h]=H.cloneElement(p,{onExited:n.bind(null,p),in:T.props.in,exit:fy(p,"exit",t),enter:fy(p,"enter",t)}))}}),s}var xne=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},bne={component:"div",childFactory:function(e){return e}},BD=(function(t){e6(e,t);function e(r,s){var h;h=t.call(this,r,s)||this;var p=h.handleExited.bind(gne(h));return h.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},h}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,h){var p=h.children,_=h.handleExited,o=h.firstRender;return{children:o?_ne(s,_):vne(s,p,_),firstRender:!1}},n.handleExited=function(s,h){var p=ND(this.props.children);s.key in p||(s.props.onExited&&s.props.onExited(h),this.mounted&&this.setState(function(_){var o=CE({},_.children);return delete o[s.key],{children:o}}))},n.render=function(){var s=this.props,h=s.component,p=s.childFactory,_=JV(s,["component","childFactory"]),o=this.state.contextValue,T=xne(this.state.children).map(p);return delete _.appear,delete _.enter,delete _.exit,h===null?Ct.createElement(RE.Provider,{value:o},T):Ct.createElement(RE.Provider,{value:o},Ct.createElement(h,_,T))},e})(Ct.Component);BD.propTypes={};BD.defaultProps=bne;const H3={};function t6(t,e){const n=H.useRef(H3);return n.current===H3&&(n.current=t(e)),n}const wne=[];function Tne(t){H.useEffect(t,wne)}class FD{static create(){return new FD}currentId=null;start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function n6(){const t=t6(FD.create).current;return Tne(t.disposeEffect),t}const r6=t=>t.scrollTop;function DE(t,e){const{timeout:n,easing:r,style:s={}}=t;return{duration:s.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function Fm(t){return typeof t=="string"}function i6(t,e,n){return t===void 0||Fm(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function s6(t,e,n){return typeof t=="function"?t(e,n):t}function gb(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function G3(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function o6(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:h}=t;if(!e){const F=pn(n?.className,h,s?.className,r?.className),q={...n?.style,...s?.style,...r?.style},$={...n,...s,...r};return F.length>0&&($.className=F),Object.keys(q).length>0&&($.style=q),{props:$,internalRef:void 0}}const p=gb({...s,...r}),_=G3(r),o=G3(s),T=e(p),I=pn(T?.className,n?.className,h,s?.className,r?.className),M={...T?.style,...n?.style,...s?.style,...r?.style},L={...T,...n,...o,..._};return I.length>0&&(L.className=I),Object.keys(M).length>0&&(L.style=M),{props:L,internalRef:T.ref}}function di(t,e){const{className:n,elementType:r,ownerState:s,externalForwardedProps:h,internalForwardedProps:p,shouldForwardComponentProp:_=!1,...o}=e,{component:T,slots:I={[t]:void 0},slotProps:M={[t]:void 0},...L}=h,F=I[t]||r,q=s6(M[t],s),{props:{component:$,...X},internalRef:te}=o6({className:n,...o,externalForwardedProps:t==="root"?L:void 0,externalSlotProps:q}),he=pa(te,q?.ref,e.ref),ie=t==="root"?$||T:$,me=i6(F,{...t==="root"&&!T&&!I[t]&&p,...t!=="root"&&!I[t]&&p,...X,...ie&&!_&&{as:ie},...ie&&_&&{component:ie},ref:he},s);return[F,me]}function Ene(t){return br("MuiPaper",t)}vr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Sne=t=>{const{square:e,elevation:n,variant:r,classes:s}=t,h={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return wr(h,Ene,s)},Cne=sn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(Ir(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Vl=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiPaper"}),s=Uy(),{className:h,component:p="div",elevation:_=1,square:o=!1,variant:T="elevation",...I}=r,M={...r,component:p,elevation:_,square:o,variant:T},L=Sne(M);return V.jsx(Cne,{as:p,ownerState:M,className:pn(L.root,h),ref:n,...I,style:{...T==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[_],...s.vars&&{"--Paper-overlay":s.vars.overlays?.[_]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ME("#fff",eM(_))}, ${ME("#fff",eM(_))})`}},...I.style}})});function kE(t){try{return t.matches(":focus-visible")}catch{}return!1}class PE{static create(){return new PE}static use(){const e=t6(PE.create).current,[n,r]=H.useState(!1);return e.shouldMount=n,e.setShouldMount=r,H.useEffect(e.mountEffect,[n]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Ine(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function Ane(){return PE.use()}function Ine(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n}function Mne(t){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:h,rippleSize:p,in:_,onExited:o,timeout:T}=t,[I,M]=H.useState(!1),L=pn(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),F={width:p,height:p,top:-(p/2)+h,left:-(p/2)+s},q=pn(n.child,I&&n.childLeaving,r&&n.childPulsate);return!_&&!I&&M(!0),H.useEffect(()=>{if(!_&&o!=null){const $=setTimeout(o,T);return()=>{clearTimeout($)}}},[o,_,T]),V.jsx("span",{className:L,style:F,children:V.jsx("span",{className:q})})}const Tu=vr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),sM=550,Rne=80,Dne=Ou`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,kne=Ou`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Pne=Ou`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Lne=sn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),One=sn(Mne,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Tu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Dne};
    animation-duration: ${sM}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Tu.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Tu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Tu.childLeaving} {
    opacity: 0;
    animation-name: ${kne};
    animation-duration: ${sM}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Tu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Pne};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,zne=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:h={},className:p,..._}=r,[o,T]=H.useState([]),I=H.useRef(0),M=H.useRef(null);H.useEffect(()=>{M.current&&(M.current(),M.current=null)},[o]);const L=H.useRef(!1),F=n6(),q=H.useRef(null),$=H.useRef(null),X=H.useCallback(me=>{const{pulsate:ge,rippleX:Ee,rippleY:ce,rippleSize:ee,cb:le}=me;T(se=>[...se,V.jsx(One,{classes:{ripple:pn(h.ripple,Tu.ripple),rippleVisible:pn(h.rippleVisible,Tu.rippleVisible),ripplePulsate:pn(h.ripplePulsate,Tu.ripplePulsate),child:pn(h.child,Tu.child),childLeaving:pn(h.childLeaving,Tu.childLeaving),childPulsate:pn(h.childPulsate,Tu.childPulsate)},timeout:sM,pulsate:ge,rippleX:Ee,rippleY:ce,rippleSize:ee},I.current)]),I.current+=1,M.current=le},[h]),te=H.useCallback((me={},ge={},Ee=()=>{})=>{const{pulsate:ce=!1,center:ee=s||ge.pulsate,fakeElement:le=!1}=ge;if(me?.type==="mousedown"&&L.current){L.current=!1;return}me?.type==="touchstart"&&(L.current=!0);const se=le?null:$.current,_e=se?se.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Q,de,Ve;if(ee||me===void 0||me.clientX===0&&me.clientY===0||!me.clientX&&!me.touches)Q=Math.round(_e.width/2),de=Math.round(_e.height/2);else{const{clientX:Ke,clientY:Ce}=me.touches&&me.touches.length>0?me.touches[0]:me;Q=Math.round(Ke-_e.left),de=Math.round(Ce-_e.top)}if(ee)Ve=Math.sqrt((2*_e.width**2+_e.height**2)/3),Ve%2===0&&(Ve+=1);else{const Ke=Math.max(Math.abs((se?se.clientWidth:0)-Q),Q)*2+2,Ce=Math.max(Math.abs((se?se.clientHeight:0)-de),de)*2+2;Ve=Math.sqrt(Ke**2+Ce**2)}me?.touches?q.current===null&&(q.current=()=>{X({pulsate:ce,rippleX:Q,rippleY:de,rippleSize:Ve,cb:Ee})},F.start(Rne,()=>{q.current&&(q.current(),q.current=null)})):X({pulsate:ce,rippleX:Q,rippleY:de,rippleSize:Ve,cb:Ee})},[s,X,F]),he=H.useCallback(()=>{te({},{pulsate:!0})},[te]),ie=H.useCallback((me,ge)=>{if(F.clear(),me?.type==="touchend"&&q.current){q.current(),q.current=null,F.start(0,()=>{ie(me,ge)});return}q.current=null,T(Ee=>Ee.length>0?Ee.slice(1):Ee),M.current=ge},[F]);return H.useImperativeHandle(n,()=>({pulsate:he,start:te,stop:ie}),[he,te,ie]),V.jsx(Lne,{className:pn(Tu.root,h.root,p),ref:$,..._,children:V.jsx(BD,{component:null,exit:!0,children:o})})});function Nne(t){return br("MuiButtonBase",t)}const Bne=vr("MuiButtonBase",["root","disabled","focusVisible"]),Fne=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=t,p=wr({root:["root",e&&"disabled",n&&"focusVisible"]},Nne,s);return n&&r&&(p.root+=` ${r}`),p},Vne=sn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Bne.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ry=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:h=!1,children:p,className:_,component:o="button",disabled:T=!1,disableRipple:I=!1,disableTouchRipple:M=!1,focusRipple:L=!1,focusVisibleClassName:F,LinkComponent:q="a",onBlur:$,onClick:X,onContextMenu:te,onDragLeave:he,onFocus:ie,onFocusVisible:me,onKeyDown:ge,onKeyUp:Ee,onMouseDown:ce,onMouseLeave:ee,onMouseUp:le,onTouchEnd:se,onTouchMove:_e,onTouchStart:Q,tabIndex:de=0,TouchRippleProps:Ve,touchRippleRef:Ke,type:Ce,...Xe}=r,tt=H.useRef(null),Be=Ane(),yt=pa(Be.ref,Ke),[Me,et]=H.useState(!1);T&&Me&&et(!1),H.useImperativeHandle(s,()=>({focusVisible:()=>{et(!0),tt.current.focus()}}),[]);const At=Be.shouldMount&&!I&&!T;H.useEffect(()=>{Me&&L&&!I&&Be.pulsate()},[I,L,Me,Be]);const Dt=np(Be,"start",ce,M),Gt=np(Be,"stop",te,M),Kt=np(Be,"stop",he,M),dn=np(Be,"stop",le,M),Fn=np(Be,"stop",En=>{Me&&En.preventDefault(),ee&&ee(En)},M),An=np(Be,"start",Q,M),Tn=np(Be,"stop",se,M),Lt=np(Be,"stop",_e,M),Ft=np(Be,"stop",En=>{kE(En.target)||et(!1),$&&$(En)},!1),gn=tf(En=>{tt.current||(tt.current=En.currentTarget),kE(En.target)&&(et(!0),me&&me(En)),ie&&ie(En)}),mn=()=>{const En=tt.current;return o&&o!=="button"&&!(En.tagName==="A"&&En.href)},tr=tf(En=>{L&&!En.repeat&&Me&&En.key===" "&&Be.stop(En,()=>{Be.start(En)}),En.target===En.currentTarget&&mn()&&En.key===" "&&En.preventDefault(),ge&&ge(En),En.target===En.currentTarget&&mn()&&En.key==="Enter"&&!T&&(En.preventDefault(),X&&X(En))}),On=tf(En=>{L&&En.key===" "&&Me&&!En.defaultPrevented&&Be.stop(En,()=>{Be.pulsate(En)}),Ee&&Ee(En),X&&En.target===En.currentTarget&&mn()&&En.key===" "&&!En.defaultPrevented&&X(En)});let jn=o;jn==="button"&&(Xe.href||Xe.to)&&(jn=q);const Lr={};jn==="button"?(Lr.type=Ce===void 0?"button":Ce,Lr.disabled=T):(!Xe.href&&!Xe.to&&(Lr.role="button"),T&&(Lr["aria-disabled"]=T));const $n=pa(n,tt),Vn={...r,centerRipple:h,component:o,disabled:T,disableRipple:I,disableTouchRipple:M,focusRipple:L,tabIndex:de,focusVisible:Me},Tr=Fne(Vn);return V.jsxs(Vne,{as:jn,className:pn(Tr.root,_),ownerState:Vn,onBlur:Ft,onClick:X,onContextMenu:Gt,onFocus:gn,onKeyDown:tr,onKeyUp:On,onMouseDown:Dt,onMouseLeave:Fn,onMouseUp:dn,onDragLeave:Kt,onTouchEnd:Tn,onTouchMove:Lt,onTouchStart:An,ref:$n,tabIndex:T?-1:de,type:Ce,...Lr,...Xe,children:[p,At?V.jsx(zne,{ref:yt,center:h,...Ve}):null]})});function np(t,e,n,r=!1){return tf(s=>(n&&n(s),r||t[e](s),!0))}function Une(t){return typeof t.main=="string"}function jne(t,e=[]){if(!Une(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Zo(t=[]){return([,e])=>e&&jne(e,t)}function $ne(t){return br("MuiCircularProgress",t)}vr("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const wh=44,oM=Ou`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,aM=Ou`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,qne=typeof oM!="string"?ED`
        animation: ${oM} 1.4s linear infinite;
      `:null,Hne=typeof aM!="string"?ED`
        animation: ${aM} 1.4s ease-in-out infinite;
      `:null,Gne=t=>{const{classes:e,variant:n,color:r,disableShrink:s}=t,h={root:["root",n,`color${tn(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${tn(n)}`,s&&"circleDisableShrink"]};return wr(h,$ne,e)},Wne=sn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${tn(n.color)}`]]}})(Ir(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:qne||{animation:`${oM} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),Yne=sn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Xne=sn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${tn(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(Ir(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Hne||{animation:`${aM} 1.4s ease-in-out infinite`}}]}))),Kne=sn("circle",{name:"MuiCircularProgress",slot:"Track"})(Ir(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),a6=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiCircularProgress"}),{className:s,color:h="primary",disableShrink:p=!1,enableTrackSlot:_=!1,size:o=40,style:T,thickness:I=3.6,value:M=0,variant:L="indeterminate",...F}=r,q={...r,color:h,disableShrink:p,size:o,thickness:I,value:M,variant:L,enableTrackSlot:_},$=Gne(q),X={},te={},he={};if(L==="determinate"){const ie=2*Math.PI*((wh-I)/2);X.strokeDasharray=ie.toFixed(3),he["aria-valuenow"]=Math.round(M),X.strokeDashoffset=`${((100-M)/100*ie).toFixed(3)}px`,te.transform="rotate(-90deg)"}return V.jsx(Wne,{className:pn($.root,s),style:{width:o,height:o,...te,...T},ownerState:q,ref:n,role:"progressbar",...he,...F,children:V.jsxs(Yne,{className:$.svg,ownerState:q,viewBox:`${wh/2} ${wh/2} ${wh} ${wh}`,children:[_?V.jsx(Kne,{className:$.track,ownerState:q,cx:wh,cy:wh,r:(wh-I)/2,fill:"none",strokeWidth:I,"aria-hidden":"true"}):null,V.jsx(Xne,{className:$.circle,style:X,ownerState:q,cx:wh,cy:wh,r:(wh-I)/2,fill:"none",strokeWidth:I})]})})});function Zne(t){return br("MuiIconButton",t)}const W3=vr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Qne=t=>{const{classes:e,disabled:n,color:r,edge:s,size:h,loading:p}=t,_={root:["root",p&&"loading",n&&"disabled",r!=="default"&&`color${tn(r)}`,s&&`edge${tn(s)}`,`size${tn(h)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return wr(_,Zne,e)},Jne=sn(Ry,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${tn(n.color)}`],n.edge&&e[`edge${tn(n.edge)}`],e[`size${tn(n.size)}`]]}})(Ir(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Ir(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${W3.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${W3.loading}`]:{color:"transparent"}}))),ere=sn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),VD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiIconButton"}),{edge:s=!1,children:h,className:p,color:_="default",disabled:o=!1,disableFocusRipple:T=!1,size:I="medium",id:M,loading:L=null,loadingIndicator:F,...q}=r,$=Vy(M),X=F??V.jsx(a6,{"aria-labelledby":$,color:"inherit",size:16}),te={...r,edge:s,color:_,disabled:o,disableFocusRipple:T,loading:L,loadingIndicator:X,size:I},he=Qne(te);return V.jsxs(Jne,{id:L?$:M,className:pn(he.root,p),centerRipple:!0,focusRipple:!T,disabled:o||L,ref:n,...q,ownerState:te,children:[typeof L=="boolean"&&V.jsx("span",{className:he.loadingWrapper,style:{display:"contents"},children:V.jsx(ere,{className:he.loadingIndicator,ownerState:te,children:L&&X})}),h]})});function tre(t){return br("MuiTypography",t)}const Y3=vr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),nre={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},rre=cne(),ire=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:s,variant:h,classes:p}=t,_={root:["root",h,t.align!=="inherit"&&`align${tn(e)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return wr(_,tre,p)},sre=sn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${tn(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(Ir(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${tn(e)}`},style:{color:(t.vars||t).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),X3={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Jt=H.forwardRef(function(e,n){const{color:r,...s}=Rr({props:e,name:"MuiTypography"}),h=!nre[r],p=rre({...s,...h&&{color:r}}),{align:_="inherit",className:o,component:T,gutterBottom:I=!1,noWrap:M=!1,paragraph:L=!1,variant:F="body1",variantMapping:q=X3,...$}=p,X={...p,align:_,color:r,className:o,component:T,gutterBottom:I,noWrap:M,paragraph:L,variant:F,variantMapping:q},te=T||(L?"p":q[F]||X3[F])||"span",he=ire(X);return V.jsx(sre,{as:te,ref:n,className:pn(he.root,o),...$,ownerState:X,style:{..._!=="inherit"&&{"--Typography-textAlign":_},...$.style}})});function rp(t){const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:s=!1,...h}=t,p=s?{}:s6(n,r),{props:_,internalRef:o}=o6({...h,externalSlotProps:p}),T=pa(o,p?.ref,t.additionalProps?.ref);return i6(e,{..._,ref:T},r)}function x1(t){return parseInt(H.version,10)>=19?t?.props?.ref||null:t?.ref||null}function ore(t){return typeof t=="function"?t():t}const are=H.forwardRef(function(e,n){const{children:r,container:s,disablePortal:h=!1}=e,[p,_]=H.useState(null),o=pa(H.isValidElement(r)?x1(r):null,n);if(Dh(()=>{h||_(ore(s)||document.body)},[s,h]),Dh(()=>{if(p&&!h)return $3(n,p),()=>{$3(n,null)}},[n,p,h]),h){if(H.isValidElement(r)){const T={ref:o};return H.cloneElement(r,T)}return r}return p&&zM.createPortal(r,p)}),lre=Os(V.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function cre(t){return br("MuiChip",t)}const ni=vr("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),ure=t=>{const{classes:e,disabled:n,size:r,color:s,iconColor:h,onDelete:p,clickable:_,variant:o}=t,T={root:["root",o,n&&"disabled",`size${tn(r)}`,`color${tn(s)}`,_&&"clickable",_&&`clickableColor${tn(s)}`,p&&"deletable",p&&`deletableColor${tn(s)}`,`${o}${tn(s)}`],label:["label",`label${tn(r)}`],avatar:["avatar",`avatar${tn(r)}`,`avatarColor${tn(s)}`],icon:["icon",`icon${tn(r)}`,`iconColor${tn(h)}`],deleteIcon:["deleteIcon",`deleteIcon${tn(r)}`,`deleteIconColor${tn(s)}`,`deleteIcon${tn(o)}Color${tn(s)}`]};return wr(T,cre,e)},hre=sn("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:s,clickable:h,onDelete:p,size:_,variant:o}=n;return[{[`& .${ni.avatar}`]:e.avatar},{[`& .${ni.avatar}`]:e[`avatar${tn(_)}`]},{[`& .${ni.avatar}`]:e[`avatarColor${tn(r)}`]},{[`& .${ni.icon}`]:e.icon},{[`& .${ni.icon}`]:e[`icon${tn(_)}`]},{[`& .${ni.icon}`]:e[`iconColor${tn(s)}`]},{[`& .${ni.deleteIcon}`]:e.deleteIcon},{[`& .${ni.deleteIcon}`]:e[`deleteIcon${tn(_)}`]},{[`& .${ni.deleteIcon}`]:e[`deleteIconColor${tn(r)}`]},{[`& .${ni.deleteIcon}`]:e[`deleteIcon${tn(o)}Color${tn(r)}`]},e.root,e[`size${tn(_)}`],e[`color${tn(r)}`],h&&e.clickable,h&&r!=="default"&&e[`clickableColor${tn(r)})`],p&&e.deletable,p&&r!=="default"&&e[`deletableColor${tn(r)}`],e[o],e[`${o}${tn(r)}`]]}})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${ni.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${ni.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${ni.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${ni.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${ni.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${ni.icon}`]:{marginLeft:5,marginRight:-6},[`& .${ni.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${ni.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${ni.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Zo(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${ni.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${ni.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${ni.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${ni.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(Zo(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${ni.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${ni.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Zo(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${ni.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${ni.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${ni.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${ni.avatar}`]:{marginLeft:4},[`& .${ni.avatarSmall}`]:{marginLeft:2},[`& .${ni.icon}`]:{marginLeft:4},[`& .${ni.iconSmall}`]:{marginLeft:2},[`& .${ni.deleteIcon}`]:{marginRight:5},[`& .${ni.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Zo()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.alpha((t.vars||t).palette[n].main,.7)}`,[`&.${ni.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${ni.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.focusOpacity)},[`& .${ni.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),dre=sn("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${tn(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function K3(t){return t.key==="Backspace"||t.key==="Delete"}const b1=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiChip"}),{avatar:s,className:h,clickable:p,color:_="default",component:o,deleteIcon:T,disabled:I=!1,icon:M,label:L,onClick:F,onDelete:q,onKeyDown:$,onKeyUp:X,size:te="medium",variant:he="filled",tabIndex:ie,skipFocusWhenDisabled:me=!1,slots:ge={},slotProps:Ee={},...ce}=r,ee=H.useRef(null),le=pa(ee,n),se=Kt=>{Kt.stopPropagation(),q&&q(Kt)},_e=Kt=>{Kt.currentTarget===Kt.target&&K3(Kt)&&Kt.preventDefault(),$&&$(Kt)},Q=Kt=>{Kt.currentTarget===Kt.target&&q&&K3(Kt)&&q(Kt),X&&X(Kt)},de=p!==!1&&F?!0:p,Ve=de||q?Ry:o||"div",Ke={...r,component:Ve,disabled:I,size:te,color:_,iconColor:H.isValidElement(M)&&M.props.color||_,onDelete:!!q,clickable:de,variant:he},Ce=ure(Ke),Xe=Ve===Ry?{component:o||"div",focusVisibleClassName:Ce.focusVisible,...q&&{disableRipple:!0}}:{};let tt=null;q&&(tt=T&&H.isValidElement(T)?H.cloneElement(T,{className:pn(T.props.className,Ce.deleteIcon),onClick:se}):V.jsx(lre,{className:Ce.deleteIcon,onClick:se}));let Be=null;s&&H.isValidElement(s)&&(Be=H.cloneElement(s,{className:pn(Ce.avatar,s.props.className)}));let yt=null;M&&H.isValidElement(M)&&(yt=H.cloneElement(M,{className:pn(Ce.icon,M.props.className)}));const Me={slots:ge,slotProps:Ee},[et,At]=di("root",{elementType:hre,externalForwardedProps:{...Me,...ce},ownerState:Ke,shouldForwardComponentProp:!0,ref:le,className:pn(Ce.root,h),additionalProps:{disabled:de&&I?!0:void 0,tabIndex:me&&I?-1:ie,...Xe},getSlotProps:Kt=>({...Kt,onClick:dn=>{Kt.onClick?.(dn),F?.(dn)},onKeyDown:dn=>{Kt.onKeyDown?.(dn),_e(dn)},onKeyUp:dn=>{Kt.onKeyUp?.(dn),Q(dn)}})}),[Dt,Gt]=di("label",{elementType:dre,externalForwardedProps:Me,ownerState:Ke,className:Ce.label});return V.jsxs(et,{as:Ve,...At,children:[Be||yt,V.jsx(Dt,{...Gt,children:L}),tt]})});function rT(t){return parseInt(t,10)||0}const fre={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function pre(t){for(const e in t)return!1;return!0}function Z3(t){return pre(t)||t.outerHeightStyle===0&&!t.overflowing}const mre=H.forwardRef(function(e,n){const{onChange:r,maxRows:s,minRows:h=1,style:p,value:_,...o}=e,{current:T}=H.useRef(_!=null),I=H.useRef(null),M=pa(n,I),L=H.useRef(null),F=H.useRef(null),q=H.useCallback(()=>{const ie=I.current,me=F.current;if(!ie||!me)return;const Ee=Tp(ie).getComputedStyle(ie);if(Ee.width==="0px")return{outerHeightStyle:0,overflowing:!1};me.style.width=Ee.width,me.value=ie.value||e.placeholder||"x",me.value.slice(-1)===`
`&&(me.value+=" ");const ce=Ee.boxSizing,ee=rT(Ee.paddingBottom)+rT(Ee.paddingTop),le=rT(Ee.borderBottomWidth)+rT(Ee.borderTopWidth),se=me.scrollHeight;me.value="x";const _e=me.scrollHeight;let Q=se;h&&(Q=Math.max(Number(h)*_e,Q)),s&&(Q=Math.min(Number(s)*_e,Q)),Q=Math.max(Q,_e);const de=Q+(ce==="border-box"?ee+le:0),Ve=Math.abs(Q-se)<=1;return{outerHeightStyle:de,overflowing:Ve}},[s,h,e.placeholder]),$=tf(()=>{const ie=I.current,me=q();if(!ie||!me||Z3(me))return!1;const ge=me.outerHeightStyle;return L.current!=null&&L.current!==ge}),X=H.useCallback(()=>{const ie=I.current,me=q();if(!ie||!me||Z3(me))return;const ge=me.outerHeightStyle;L.current!==ge&&(L.current=ge,ie.style.height=`${ge}px`),ie.style.overflow=me.overflowing?"hidden":""},[q]),te=H.useRef(-1);Dh(()=>{const ie=QV(X),me=I?.current;if(!me)return;const ge=Tp(me);ge.addEventListener("resize",ie);let Ee;return typeof ResizeObserver<"u"&&(Ee=new ResizeObserver(()=>{$()&&(Ee.unobserve(me),cancelAnimationFrame(te.current),X(),te.current=requestAnimationFrame(()=>{Ee.observe(me)}))}),Ee.observe(me)),()=>{ie.clear(),cancelAnimationFrame(te.current),ge.removeEventListener("resize",ie),Ee&&Ee.disconnect()}},[q,X,$]),Dh(()=>{X()});const he=ie=>{T||X();const me=ie.target,ge=me.value.length,Ee=me.value.endsWith(`
`),ce=me.selectionStart===ge;Ee&&ce&&me.setSelectionRange(ge,ge),r&&r(ie)};return V.jsxs(H.Fragment,{children:[V.jsx("textarea",{value:_,onChange:he,ref:M,rows:h,style:p,...o}),V.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:F,tabIndex:-1,style:{...fre.shadow,...p,paddingTop:0,paddingBottom:0}})]})});function cg({props:t,states:e,muiFormControl:n}){return e.reduce((r,s)=>(r[s]=t[s],n&&typeof t[s]>"u"&&(r[s]=n[s]),r),{})}const UD=H.createContext(void 0);function lf(){return H.useContext(UD)}function Q3(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function LE(t,e=!1){return t&&(Q3(t.value)&&t.value!==""||e&&Q3(t.defaultValue)&&t.defaultValue!=="")}function gre(t){return t.startAdornment}function yre(t){return br("MuiInputBase",t)}const Pv=vr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var J3;const jS=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${tn(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},$S=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},_re=t=>{const{classes:e,color:n,disabled:r,error:s,endAdornment:h,focused:p,formControl:_,fullWidth:o,hiddenLabel:T,multiline:I,readOnly:M,size:L,startAdornment:F,type:q}=t,$={root:["root",`color${tn(n)}`,r&&"disabled",s&&"error",o&&"fullWidth",p&&"focused",_&&"formControl",L&&L!=="medium"&&`size${tn(L)}`,I&&"multiline",F&&"adornedStart",h&&"adornedEnd",T&&"hiddenLabel",M&&"readOnly"],input:["input",r&&"disabled",q==="search"&&"inputTypeSearch",I&&"inputMultiline",L==="small"&&"inputSizeSmall",T&&"inputHiddenLabel",F&&"inputAdornedStart",h&&"inputAdornedEnd",M&&"readOnly"]};return wr($,yre,e)},qS=sn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:jS})(Ir(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Pv.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),HS=sn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:$S})(Ir(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Pv.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Pv.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:h})=>!h.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:h})=>h.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),ez=zD({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),jD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:h,autoFocus:p,className:_,color:o,components:T={},componentsProps:I={},defaultValue:M,disabled:L,disableInjectingGlobalStyles:F,endAdornment:q,error:$,fullWidth:X=!1,id:te,inputComponent:he="input",inputProps:ie={},inputRef:me,margin:ge,maxRows:Ee,minRows:ce,multiline:ee=!1,name:le,onBlur:se,onChange:_e,onClick:Q,onFocus:de,onKeyDown:Ve,onKeyUp:Ke,placeholder:Ce,readOnly:Xe,renderSuffix:tt,rows:Be,size:yt,slotProps:Me={},slots:et={},startAdornment:At,type:Dt="text",value:Gt,...Kt}=r,dn=ie.value!=null?ie.value:Gt,{current:Fn}=H.useRef(dn!=null),An=H.useRef(),Tn=H.useCallback(Zn=>{},[]),Lt=pa(An,me,ie.ref,Tn),[Ft,gn]=H.useState(!1),mn=lf(),tr=cg({props:r,muiFormControl:mn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});tr.focused=mn?mn.focused:Ft,H.useEffect(()=>{!mn&&L&&Ft&&(gn(!1),se&&se())},[mn,L,Ft,se]);const On=mn&&mn.onFilled,jn=mn&&mn.onEmpty,Lr=H.useCallback(Zn=>{LE(Zn)?On&&On():jn&&jn()},[On,jn]);Dh(()=>{Fn&&Lr({value:dn})},[dn,Lr,Fn]);const $n=Zn=>{de&&de(Zn),ie.onFocus&&ie.onFocus(Zn),mn&&mn.onFocus?mn.onFocus(Zn):gn(!0)},Vn=Zn=>{se&&se(Zn),ie.onBlur&&ie.onBlur(Zn),mn&&mn.onBlur?mn.onBlur(Zn):gn(!1)},Tr=(Zn,...vi)=>{if(!Fn){const Sr=Zn.target||An.current;if(Sr==null)throw new Error(wp(1));Lr({value:Sr.value})}ie.onChange&&ie.onChange(Zn,...vi),_e&&_e(Zn,...vi)};H.useEffect(()=>{Lr(An.current)},[]);const En=Zn=>{An.current&&Zn.currentTarget===Zn.target&&An.current.focus(),Q&&Q(Zn)};let Hi=he,nr=ie;ee&&Hi==="input"&&(Be?nr={type:void 0,minRows:Be,maxRows:Be,...nr}:nr={type:void 0,maxRows:Ee,minRows:ce,...nr},Hi=mre);const on=Zn=>{Lr(Zn.animationName==="mui-auto-fill-cancel"?An.current:{value:"x"})};H.useEffect(()=>{mn&&mn.setAdornedStart(!!At)},[mn,At]);const en={...r,color:tr.color||"primary",disabled:tr.disabled,endAdornment:q,error:tr.error,focused:tr.focused,formControl:mn,fullWidth:X,hiddenLabel:tr.hiddenLabel,multiline:ee,size:tr.size,startAdornment:At,type:Dt},yn=_re(en),bn=et.root||T.Root||qS,Pn=Me.root||I.root||{},Bn=et.input||T.Input||HS;return nr={...nr,...Me.input??I.input},V.jsxs(H.Fragment,{children:[!F&&typeof ez=="function"&&(J3||(J3=V.jsx(ez,{}))),V.jsxs(bn,{...Pn,ref:n,onClick:En,...Kt,...!Fm(bn)&&{ownerState:{...en,...Pn.ownerState}},className:pn(yn.root,Pn.className,_,Xe&&"MuiInputBase-readOnly"),children:[At,V.jsx(UD.Provider,{value:null,children:V.jsx(Bn,{"aria-invalid":tr.error,"aria-describedby":s,autoComplete:h,autoFocus:p,defaultValue:M,disabled:tr.disabled,id:te,onAnimationStart:on,name:le,placeholder:Ce,readOnly:Xe,required:tr.required,rows:Be,value:dn,onKeyDown:Ve,onKeyUp:Ke,type:Dt,...nr,...!Fm(Bn)&&{as:Hi,ownerState:{...en,...nr.ownerState}},ref:Lt,className:pn(yn.input,nr.className,Xe&&"MuiInputBase-readOnly"),onBlur:Vn,onChange:Tr,onFocus:$n})}),q,tt?tt({...tr,startAdornment:At}):null]})]})});function vre(t){return br("MuiInput",t)}const kx={...Pv,...vr("MuiInput",["root","underline","input"])};function xre(t){return br("MuiOutlinedInput",t)}const Rd={...Pv,...vr("MuiOutlinedInput",["root","notchedOutline","input"])};function bre(t){return br("MuiFilledInput",t)}const ey={...Pv,...vr("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},wre=Os(V.jsx("path",{d:"M7 10l5 5 5-5z"})),Tre=Os(V.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function Ere(t){return br("MuiAvatar",t)}vr("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Sre=t=>{const{classes:e,variant:n,colorDefault:r}=t;return wr({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},Ere,e)},Cre=sn("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(Ir(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),Are=sn("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Ire=sn(Tre,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function Mre({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[s,h]=H.useState(!1);return H.useEffect(()=>{if(!n&&!r)return;h(!1);let p=!0;const _=new Image;return _.onload=()=>{p&&h("loaded")},_.onerror=()=>{p&&h("error")},_.crossOrigin=t,_.referrerPolicy=e,_.src=n,r&&(_.srcset=r),()=>{p=!1}},[t,e,n,r]),s}const w1=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiAvatar"}),{alt:s,children:h,className:p,component:_="div",slots:o={},slotProps:T={},imgProps:I,sizes:M,src:L,srcSet:F,variant:q="circular",...$}=r;let X=null;const te={...r,component:_,variant:q},he=Mre({...I,...typeof T.img=="function"?T.img(te):T.img,src:L,srcSet:F}),ie=L||F,me=ie&&he!=="error";te.colorDefault=!me,delete te.ownerState;const ge=Sre(te),[Ee,ce]=di("root",{ref:n,className:pn(ge.root,p),elementType:Cre,externalForwardedProps:{slots:o,slotProps:T,component:_,...$},ownerState:te}),[ee,le]=di("img",{className:ge.img,elementType:Are,externalForwardedProps:{slots:o,slotProps:{img:{...I,...T.img}}},additionalProps:{alt:s,src:L,srcSet:F,sizes:M},ownerState:te}),[se,_e]=di("fallback",{className:ge.fallback,elementType:Ire,externalForwardedProps:{slots:o,slotProps:T},shouldForwardComponentProp:!0,ownerState:te});return me?X=V.jsx(ee,{...le}):h||h===0?X=h:ie&&s?X=s[0]:X=V.jsx(se,{..._e}),V.jsx(Ee,{...ce,children:X})}),Rre={entering:{opacity:1},entered:{opacity:1}},lM=H.forwardRef(function(e,n){const r=Uy(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:h,appear:p=!0,children:_,easing:o,in:T,onEnter:I,onEntered:M,onEntering:L,onExit:F,onExited:q,onExiting:$,style:X,timeout:te=s,TransitionComponent:he=af,...ie}=e,me=H.useRef(null),ge=pa(me,x1(_),n),Ee=Ve=>Ke=>{if(Ve){const Ce=me.current;Ke===void 0?Ve(Ce):Ve(Ce,Ke)}},ce=Ee(L),ee=Ee((Ve,Ke)=>{r6(Ve);const Ce=DE({style:X,timeout:te,easing:o},{mode:"enter"});Ve.style.webkitTransition=r.transitions.create("opacity",Ce),Ve.style.transition=r.transitions.create("opacity",Ce),I&&I(Ve,Ke)}),le=Ee(M),se=Ee($),_e=Ee(Ve=>{const Ke=DE({style:X,timeout:te,easing:o},{mode:"exit"});Ve.style.webkitTransition=r.transitions.create("opacity",Ke),Ve.style.transition=r.transitions.create("opacity",Ke),F&&F(Ve)}),Q=Ee(q),de=Ve=>{h&&h(me.current,Ve)};return V.jsx(he,{appear:p,in:T,nodeRef:me,onEnter:ee,onEntered:le,onEntering:ce,onExit:_e,onExited:Q,onExiting:se,addEndListener:de,timeout:te,...ie,children:(Ve,{ownerState:Ke,...Ce})=>H.cloneElement(_,{style:{opacity:0,visibility:Ve==="exited"&&!T?"hidden":void 0,...Rre[Ve],...X,..._.props.style},ref:ge,...Ce})})});function Dre(t){return br("MuiBackdrop",t)}vr("MuiBackdrop",["root","invisible"]);const kre=t=>{const{classes:e,invisible:n}=t;return wr({root:["root",n&&"invisible"]},Dre,e)},Pre=sn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),l6=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiBackdrop"}),{children:s,className:h,component:p="div",invisible:_=!1,open:o,components:T={},componentsProps:I={},slotProps:M={},slots:L={},TransitionComponent:F,transitionDuration:q,...$}=r,X={...r,component:p,invisible:_},te=kre(X),he={transition:F,root:T.Root,...L},ie={...I,...M},me={component:p,slots:he,slotProps:ie},[ge,Ee]=di("root",{elementType:Pre,externalForwardedProps:me,className:pn(te.root,h),ownerState:X}),[ce,ee]=di("transition",{elementType:lM,externalForwardedProps:me,ownerState:X});return V.jsx(ce,{in:o,timeout:q,...$,...ee,children:V.jsx(ge,{"aria-hidden":!0,...Ee,classes:te,ref:n,children:s})})}),Lre=vr("MuiBox",["root"]),Ore=VS(),wn=Ree({themeId:Jd,defaultTheme:Ore,defaultClassName:Lre.root,generateClassName:DV.generate});function zre(t){return br("MuiButton",t)}const ty=vr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Nre=H.createContext({}),Bre=H.createContext(void 0),Fre=t=>{const{color:e,disableElevation:n,fullWidth:r,size:s,variant:h,loading:p,loadingPosition:_,classes:o}=t,T={root:["root",p&&"loading",h,`${h}${tn(e)}`,`size${tn(s)}`,`${h}Size${tn(s)}`,`color${tn(e)}`,n&&"disableElevation",r&&"fullWidth",p&&`loadingPosition${tn(_)}`],startIcon:["icon","startIcon",`iconSize${tn(s)}`],endIcon:["icon","endIcon",`iconSize${tn(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},I=wr(T,zre,o);return{...o,...I}},c6=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Vre=sn(Ry,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${tn(n.color)}`],e[`size${tn(n.size)}`],e[`${n.variant}Size${tn(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${ty.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${ty.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${ty.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${ty.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Zo()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ty.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ty.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${ty.loading}`]:{color:"transparent"}}}]}})),Ure=sn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${tn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...c6]})),jre=sn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${tn(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...c6]})),$re=sn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),tz=sn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),ss=H.forwardRef(function(e,n){const r=H.useContext(Nre),s=H.useContext(Bre),h=jb(r,e),p=Rr({props:h,name:"MuiButton"}),{children:_,color:o="primary",component:T="button",className:I,disabled:M=!1,disableElevation:L=!1,disableFocusRipple:F=!1,endIcon:q,focusVisibleClassName:$,fullWidth:X=!1,id:te,loading:he=null,loadingIndicator:ie,loadingPosition:me="center",size:ge="medium",startIcon:Ee,type:ce,variant:ee="text",...le}=p,se=Vy(te),_e=ie??V.jsx(a6,{"aria-labelledby":se,color:"inherit",size:16}),Q={...p,color:o,component:T,disabled:M,disableElevation:L,disableFocusRipple:F,fullWidth:X,loading:he,loadingIndicator:_e,loadingPosition:me,size:ge,type:ce,variant:ee},de=Fre(Q),Ve=(Ee||he&&me==="start")&&V.jsx(Ure,{className:de.startIcon,ownerState:Q,children:Ee||V.jsx(tz,{className:de.loadingIconPlaceholder,ownerState:Q})}),Ke=(q||he&&me==="end")&&V.jsx(jre,{className:de.endIcon,ownerState:Q,children:q||V.jsx(tz,{className:de.loadingIconPlaceholder,ownerState:Q})}),Ce=s||"",Xe=typeof he=="boolean"?V.jsx("span",{className:de.loadingWrapper,style:{display:"contents"},children:he&&V.jsx($re,{className:de.loadingIndicator,ownerState:Q,children:_e})}):null;return V.jsxs(Vre,{ownerState:Q,className:pn(r.className,de.root,I,Ce),component:T,disabled:M||he,focusRipple:!F,focusVisibleClassName:pn(de.focusVisible,$),ref:n,type:ce,id:he?se:te,...le,classes:de,children:[Ve,me!=="end"&&Xe,_,me==="end"&&Xe,Ke]})});function qre(t){return br("MuiCard",t)}vr("MuiCard",["root"]);const Hre=t=>{const{classes:e}=t;return wr({root:["root"]},qre,e)},Gre=sn(Vl,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),$D=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiCard"}),{className:s,raised:h=!1,...p}=r,_={...r,raised:h},o=Hre(_);return V.jsx(Gre,{className:pn(o.root,s),elevation:h?8:void 0,ref:n,ownerState:_,...p})});function Wre(t){return br("MuiCardActions",t)}vr("MuiCardActions",["root","spacing"]);const Yre=t=>{const{classes:e,disableSpacing:n}=t;return wr({root:["root",!n&&"spacing"]},Wre,e)},Xre=sn("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),qD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiCardActions"}),{disableSpacing:s=!1,className:h,...p}=r,_={...r,disableSpacing:s},o=Yre(_);return V.jsx(Xre,{className:pn(o.root,h),ownerState:_,ref:n,...p})});function Kre(t){return br("MuiCardContent",t)}vr("MuiCardContent",["root"]);const Zre=t=>{const{classes:e}=t;return wr({root:["root"]},Kre,e)},Qre=sn("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),HD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiCardContent"}),{className:s,component:h="div",...p}=r,_={...r,component:h},o=Zre(_);return V.jsx(Qre,{as:h,className:pn(o.root,s),ownerState:_,ref:n,...p})});function Jre(t){return br("MuiCardHeader",t)}const OE=vr("MuiCardHeader",["root","avatar","action","content","title","subheader"]),eie=t=>{const{classes:e}=t;return wr({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Jre,e)},tie=sn("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>[{[`& .${OE.title}`]:e.title},{[`& .${OE.subheader}`]:e.subheader},e.root]})({display:"flex",alignItems:"center",padding:16}),nie=sn("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),rie=sn("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),iie=sn("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[`.${Y3.root}:where(& .${OE.title})`]:{display:"block"},[`.${Y3.root}:where(& .${OE.subheader})`]:{display:"block"}}),sie=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiCardHeader"}),{action:s,avatar:h,component:p="div",disableTypography:_=!1,subheader:o,subheaderTypographyProps:T,title:I,titleTypographyProps:M,slots:L={},slotProps:F={},...q}=r,$={...r,component:p,disableTypography:_},X=eie($),te={slots:L,slotProps:{title:M,subheader:T,...F}};let he=I;const[ie,me]=di("title",{className:X.title,elementType:Jt,externalForwardedProps:te,ownerState:$,additionalProps:{variant:h?"body2":"h5",component:"span"}});he!=null&&he.type!==Jt&&!_&&(he=V.jsx(ie,{...me,children:he}));let ge=o;const[Ee,ce]=di("subheader",{className:X.subheader,elementType:Jt,externalForwardedProps:te,ownerState:$,additionalProps:{variant:h?"body2":"body1",color:"textSecondary",component:"span"}});ge!=null&&ge.type!==Jt&&!_&&(ge=V.jsx(Ee,{...ce,children:ge}));const[ee,le]=di("root",{ref:n,className:X.root,elementType:tie,externalForwardedProps:{...te,...q,component:p},ownerState:$}),[se,_e]=di("avatar",{className:X.avatar,elementType:nie,externalForwardedProps:te,ownerState:$}),[Q,de]=di("content",{className:X.content,elementType:iie,externalForwardedProps:te,ownerState:$}),[Ve,Ke]=di("action",{className:X.action,elementType:rie,externalForwardedProps:te,ownerState:$});return V.jsxs(ee,{...le,children:[h&&V.jsx(se,{..._e,children:h}),V.jsxs(Q,{...de,children:[he,ge]}),s&&V.jsx(Ve,{...Ke,children:s})]})});function oie(t){return br("PrivateSwitchBase",t)}vr("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const aie=t=>{const{classes:e,checked:n,disabled:r,edge:s}=t,h={root:["root",n&&"checked",r&&"disabled",s&&`edge${tn(s)}`],input:["input"]};return wr(h,oie,e)},lie=sn(Ry,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),cie=sn("input",{name:"MuiSwitchBase",shouldForwardProp:gl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),uie=H.forwardRef(function(e,n){const{autoFocus:r,checked:s,checkedIcon:h,defaultChecked:p,disabled:_,disableFocusRipple:o=!1,edge:T=!1,icon:I,id:M,inputProps:L,inputRef:F,name:q,onBlur:$,onChange:X,onFocus:te,readOnly:he,required:ie=!1,tabIndex:me,type:ge,value:Ee,slots:ce={},slotProps:ee={},...le}=e,[se,_e]=$b({controlled:s,default:!!p,name:"SwitchBase",state:"checked"}),Q=lf(),de=Gt=>{te&&te(Gt),Q&&Q.onFocus&&Q.onFocus(Gt)},Ve=Gt=>{$&&$(Gt),Q&&Q.onBlur&&Q.onBlur(Gt)},Ke=Gt=>{if(Gt.nativeEvent.defaultPrevented)return;const Kt=Gt.target.checked;_e(Kt),X&&X(Gt,Kt)};let Ce=_;Q&&typeof Ce>"u"&&(Ce=Q.disabled);const Xe=ge==="checkbox"||ge==="radio",tt={...e,checked:se,disabled:Ce,disableFocusRipple:o,edge:T},Be=aie(tt),yt={slots:ce,slotProps:{input:L,...ee}},[Me,et]=di("root",{ref:n,elementType:lie,className:Be.root,shouldForwardComponentProp:!0,externalForwardedProps:{...yt,component:"span",...le},getSlotProps:Gt=>({...Gt,onFocus:Kt=>{Gt.onFocus?.(Kt),de(Kt)},onBlur:Kt=>{Gt.onBlur?.(Kt),Ve(Kt)}}),ownerState:tt,additionalProps:{centerRipple:!0,focusRipple:!o,disabled:Ce,role:void 0,tabIndex:null}}),[At,Dt]=di("input",{ref:F,elementType:cie,className:Be.input,externalForwardedProps:yt,getSlotProps:Gt=>({...Gt,onChange:Kt=>{Gt.onChange?.(Kt),Ke(Kt)}}),ownerState:tt,additionalProps:{autoFocus:r,checked:s,defaultChecked:p,disabled:Ce,id:Xe?M:void 0,name:q,readOnly:he,required:ie,tabIndex:me,type:ge,...ge==="checkbox"&&Ee===void 0?{}:{value:Ee}}});return V.jsxs(Me,{...et,children:[V.jsx(At,{...Dt}),se?h:I]})}),zh=vte({createStyledComponent:sn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${tn(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Rr({props:t,name:"MuiContainer"})}),cM=typeof zD({})=="function",hie=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),die=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),u6=(t,e=!1)=>{const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([h,p])=>{const _=t.getColorSchemeSelector(h);_.startsWith("@")?n[_]={":root":{colorScheme:p.palette?.mode}}:n[_.replace(/\s*&/,"")]={colorScheme:p.palette?.mode}});let r={html:hie(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...die(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const s=t.components?.MuiCssBaseline?.styleOverrides;return s&&(r=[r,s]),r},jT="mui-ecs",fie=t=>{const e=u6(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${jT})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,s])=>{const h=t.getColorSchemeSelector(r);h.startsWith("@")?n[h]={[`:root:not(:has(.${jT}))`]:{colorScheme:s.palette?.mode}}:n[h.replace(/\s*&/,"")]={[`&:not(:has(.${jT}))`]:{colorScheme:s.palette?.mode}}}),e},pie=zD(cM?({theme:t,enableColorScheme:e})=>u6(t,e):({theme:t})=>fie(t));function mie(t){const e=Rr({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return V.jsxs(H.Fragment,{children:[cM&&V.jsx(pie,{enableColorScheme:r}),!cM&&!r&&V.jsx("span",{className:jT,style:{display:"none"}}),n]})}function h6(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function gie(t){const e=Fl(t);return e.body===t?Tp(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function yb(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function nz(t){return parseInt(Tp(t).getComputedStyle(t).paddingRight,10)||0}function yie(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function rz(t,e,n,r,s){const h=[e,n,...r];[].forEach.call(t.children,p=>{const _=!h.includes(p),o=!yie(p);_&&o&&yb(p,s)})}function IA(t,e){let n=-1;return t.some((r,s)=>e(r)?(n=s,!0):!1),n}function _ie(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(gie(r)){const p=h6(Tp(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${nz(r)+p}px`;const _=Fl(r).querySelectorAll(".mui-fixed");[].forEach.call(_,o=>{n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${nz(o)+p}px`})}let h;if(r.parentNode instanceof DocumentFragment)h=Fl(r).body;else{const p=r.parentElement,_=Tp(r);h=p?.nodeName==="HTML"&&_.getComputedStyle(p).overflowY==="scroll"?p:r}n.push({value:h.style.overflow,property:"overflow",el:h},{value:h.style.overflowX,property:"overflow-x",el:h},{value:h.style.overflowY,property:"overflow-y",el:h}),h.style.overflow="hidden"}return()=>{n.forEach(({value:h,el:p,property:_})=>{h?p.style.setProperty(_,h):p.style.removeProperty(_)})}}function vie(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class xie{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&yb(e.modalRef,!1);const s=vie(n);rz(n,e.mount,e.modalRef,s,!0);const h=IA(this.containers,p=>p.container===n);return h!==-1?(this.containers[h].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:s}),r)}mount(e,n){const r=IA(this.containers,h=>h.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=_ie(s,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=IA(this.containers,p=>p.modals.includes(e)),h=this.containers[s];if(h.modals.splice(h.modals.indexOf(e),1),this.modals.splice(r,1),h.modals.length===0)h.restore&&h.restore(),e.modalRef&&yb(e.modalRef,n),rz(h.container,e.mount,e.modalRef,h.hiddenSiblings,!1),this.containers.splice(s,1);else{const p=h.modals[h.modals.length-1];p.modalRef&&yb(p.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const bie=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function wie(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function Tie(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function Eie(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Tie(t))}function Sie(t){const e=[],n=[];return Array.from(t.querySelectorAll(bie)).forEach((r,s)=>{const h=wie(r);h===-1||!Eie(r)||(h===0?e.push(r):n.push({documentOrder:s,tabIndex:h,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function Cie(){return!0}function Aie(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:h=Sie,isEnabled:p=Cie,open:_}=t,o=H.useRef(!1),T=H.useRef(null),I=H.useRef(null),M=H.useRef(null),L=H.useRef(null),F=H.useRef(!1),q=H.useRef(null),$=pa(x1(e),q),X=H.useRef(null);H.useEffect(()=>{!_||!q.current||(F.current=!n)},[n,_]),H.useEffect(()=>{if(!_||!q.current)return;const ie=Fl(q.current);return q.current.contains(ie.activeElement)||(q.current.hasAttribute("tabIndex")||q.current.setAttribute("tabIndex","-1"),F.current&&q.current.focus()),()=>{s||(M.current&&M.current.focus&&(o.current=!0,M.current.focus()),M.current=null)}},[_]),H.useEffect(()=>{if(!_||!q.current)return;const ie=Fl(q.current),me=ce=>{X.current=ce,!(r||!p()||ce.key!=="Tab")&&ie.activeElement===q.current&&ce.shiftKey&&(o.current=!0,I.current&&I.current.focus())},ge=()=>{const ce=q.current;if(ce===null)return;if(!ie.hasFocus()||!p()||o.current){o.current=!1;return}if(ce.contains(ie.activeElement)||r&&ie.activeElement!==T.current&&ie.activeElement!==I.current)return;if(ie.activeElement!==L.current)L.current=null;else if(L.current!==null)return;if(!F.current)return;let ee=[];if((ie.activeElement===T.current||ie.activeElement===I.current)&&(ee=h(q.current)),ee.length>0){const le=!!(X.current?.shiftKey&&X.current?.key==="Tab"),se=ee[0],_e=ee[ee.length-1];typeof se!="string"&&typeof _e!="string"&&(le?_e.focus():se.focus())}else ce.focus()};ie.addEventListener("focusin",ge),ie.addEventListener("keydown",me,!0);const Ee=setInterval(()=>{ie.activeElement&&ie.activeElement.tagName==="BODY"&&ge()},50);return()=>{clearInterval(Ee),ie.removeEventListener("focusin",ge),ie.removeEventListener("keydown",me,!0)}},[n,r,s,p,_,h]);const te=ie=>{M.current===null&&(M.current=ie.relatedTarget),F.current=!0,L.current=ie.target;const me=e.props.onFocus;me&&me(ie)},he=ie=>{M.current===null&&(M.current=ie.relatedTarget),F.current=!0};return V.jsxs(H.Fragment,{children:[V.jsx("div",{tabIndex:_?0:-1,onFocus:he,ref:T,"data-testid":"sentinelStart"}),H.cloneElement(e,{ref:$,onFocus:te}),V.jsx("div",{tabIndex:_?0:-1,onFocus:he,ref:I,"data-testid":"sentinelEnd"})]})}function Iie(t){return typeof t=="function"?t():t}function Mie(t){return t?t.props.hasOwnProperty("in"):!1}const iz=()=>{},iT=new xie;function Rie(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:h,onTransitionExited:p,children:_,onClose:o,open:T,rootRef:I}=t,M=H.useRef({}),L=H.useRef(null),F=H.useRef(null),q=pa(F,I),[$,X]=H.useState(!T),te=Mie(_);let he=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(he=!1);const ie=()=>Fl(L.current),me=()=>(M.current.modalRef=F.current,M.current.mount=L.current,M.current),ge=()=>{iT.mount(me(),{disableScrollLock:r}),F.current&&(F.current.scrollTop=0)},Ee=tf(()=>{const Ke=Iie(e)||ie().body;iT.add(me(),Ke),F.current&&ge()}),ce=()=>iT.isTopModal(me()),ee=tf(Ke=>{L.current=Ke,Ke&&(T&&ce()?ge():F.current&&yb(F.current,he))}),le=H.useCallback(()=>{iT.remove(me(),he)},[he]);H.useEffect(()=>()=>{le()},[le]),H.useEffect(()=>{T?Ee():(!te||!s)&&le()},[T,le,te,s,Ee]);const se=Ke=>Ce=>{Ke.onKeyDown?.(Ce),!(Ce.key!=="Escape"||Ce.which===229||!ce())&&(n||(Ce.stopPropagation(),o&&o(Ce,"escapeKeyDown")))},_e=Ke=>Ce=>{Ke.onClick?.(Ce),Ce.target===Ce.currentTarget&&o&&o(Ce,"backdropClick")};return{getRootProps:(Ke={})=>{const Ce=gb(t);delete Ce.onTransitionEnter,delete Ce.onTransitionExited;const Xe={...Ce,...Ke};return{role:"presentation",...Xe,onKeyDown:se(Xe),ref:q}},getBackdropProps:(Ke={})=>{const Ce=Ke;return{"aria-hidden":!0,...Ce,onClick:_e(Ce),open:T}},getTransitionProps:()=>{const Ke=()=>{X(!1),h&&h()},Ce=()=>{X(!0),p&&p(),s&&le()};return{onEnter:tM(Ke,_?.props.onEnter??iz),onExited:tM(Ce,_?.props.onExited??iz)}},rootRef:q,portalRef:ee,isTopModal:ce,exited:$,hasTransition:te}}function Die(t){return br("MuiModal",t)}vr("MuiModal",["root","hidden","backdrop"]);const kie=t=>{const{open:e,exited:n,classes:r}=t;return wr({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Die,r)},Pie=sn("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(Ir(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Lie=sn(l6,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),d6=H.forwardRef(function(e,n){const r=Rr({name:"MuiModal",props:e}),{BackdropComponent:s=Lie,BackdropProps:h,classes:p,className:_,closeAfterTransition:o=!1,children:T,container:I,component:M,components:L={},componentsProps:F={},disableAutoFocus:q=!1,disableEnforceFocus:$=!1,disableEscapeKeyDown:X=!1,disablePortal:te=!1,disableRestoreFocus:he=!1,disableScrollLock:ie=!1,hideBackdrop:me=!1,keepMounted:ge=!1,onClose:Ee,onTransitionEnter:ce,onTransitionExited:ee,open:le,slotProps:se={},slots:_e={},theme:Q,...de}=r,Ve={...r,closeAfterTransition:o,disableAutoFocus:q,disableEnforceFocus:$,disableEscapeKeyDown:X,disablePortal:te,disableRestoreFocus:he,disableScrollLock:ie,hideBackdrop:me,keepMounted:ge},{getRootProps:Ke,getBackdropProps:Ce,getTransitionProps:Xe,portalRef:tt,isTopModal:Be,exited:yt,hasTransition:Me}=Rie({...Ve,rootRef:n}),et={...Ve,exited:yt},At=kie(et),Dt={};if(T.props.tabIndex===void 0&&(Dt.tabIndex="-1"),Me){const{onEnter:Tn,onExited:Lt}=Xe();Dt.onEnter=Tn,Dt.onExited=Lt}const Gt={slots:{root:L.Root,backdrop:L.Backdrop,..._e},slotProps:{...F,...se}},[Kt,dn]=di("root",{ref:n,elementType:Pie,externalForwardedProps:{...Gt,...de,component:M},getSlotProps:Ke,ownerState:et,className:pn(_,At?.root,!et.open&&et.exited&&At?.hidden)}),[Fn,An]=di("backdrop",{ref:h?.ref,elementType:s,externalForwardedProps:Gt,shouldForwardComponentProp:!0,additionalProps:h,getSlotProps:Tn=>Ce({...Tn,onClick:Lt=>{Tn?.onClick&&Tn.onClick(Lt)}}),className:pn(h?.className,At?.backdrop),ownerState:et});return!ge&&!le&&(!Me||yt)?null:V.jsx(are,{ref:tt,container:I,disablePortal:te,children:V.jsxs(Kt,{...dn,children:[!me&&s?V.jsx(Fn,{...An}):null,V.jsx(Aie,{disableEnforceFocus:$,disableAutoFocus:q,disableRestoreFocus:he,isEnabled:Be,open:le,children:H.cloneElement(T,Dt)})]})})});function Oie(t){return br("MuiDialog",t)}const MA=vr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),f6=H.createContext({}),zie=sn(l6,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Nie=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:s,fullScreen:h}=t,p={root:["root"],container:["container",`scroll${tn(n)}`],paper:["paper",`paperScroll${tn(n)}`,`paperWidth${tn(String(r))}`,s&&"paperFullWidth",h&&"paperFullScreen"]};return wr(p,Oie,e)},Bie=sn(d6,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Fie=sn("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${tn(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Vie=sn(Vl,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${tn(n.scroll)}`],e[`paperWidth${tn(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(Ir(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${MA.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${MA.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${MA.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),sz=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiDialog"}),s=Uy(),h={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":p,"aria-labelledby":_,"aria-modal":o=!0,BackdropComponent:T,BackdropProps:I,children:M,className:L,disableEscapeKeyDown:F=!1,fullScreen:q=!1,fullWidth:$=!1,maxWidth:X="sm",onClick:te,onClose:he,open:ie,PaperComponent:me=Vl,PaperProps:ge={},scroll:Ee="paper",slots:ce={},slotProps:ee={},TransitionComponent:le=lM,transitionDuration:se=h,TransitionProps:_e,...Q}=r,de={...r,disableEscapeKeyDown:F,fullScreen:q,fullWidth:$,maxWidth:X,scroll:Ee},Ve=Nie(de),Ke=H.useRef(),Ce=gn=>{Ke.current=gn.target===gn.currentTarget},Xe=gn=>{te&&te(gn),Ke.current&&(Ke.current=null,he&&he(gn,"backdropClick"))},tt=Vy(_),Be=H.useMemo(()=>({titleId:tt}),[tt]),yt={transition:le,...ce},Me={transition:_e,paper:ge,backdrop:I,...ee},et={slots:yt,slotProps:Me},[At,Dt]=di("root",{elementType:Bie,shouldForwardComponentProp:!0,externalForwardedProps:et,ownerState:de,className:pn(Ve.root,L),ref:n}),[Gt,Kt]=di("backdrop",{elementType:zie,shouldForwardComponentProp:!0,externalForwardedProps:et,ownerState:de}),[dn,Fn]=di("paper",{elementType:Vie,shouldForwardComponentProp:!0,externalForwardedProps:et,ownerState:de,className:pn(Ve.paper,ge.className)}),[An,Tn]=di("container",{elementType:Fie,externalForwardedProps:et,ownerState:de,className:Ve.container}),[Lt,Ft]=di("transition",{elementType:lM,externalForwardedProps:et,ownerState:de,additionalProps:{appear:!0,in:ie,timeout:se,role:"presentation"}});return V.jsx(At,{closeAfterTransition:!0,slots:{backdrop:Gt},slotProps:{backdrop:{transitionDuration:se,as:T,...Kt}},disableEscapeKeyDown:F,onClose:he,open:ie,onClick:Xe,...Dt,...Q,children:V.jsx(Lt,{...Ft,children:V.jsx(An,{onMouseDown:Ce,...Tn,children:V.jsx(dn,{as:me,elevation:24,role:"dialog","aria-describedby":p,"aria-labelledby":tt,"aria-modal":o,...Fn,children:V.jsx(f6.Provider,{value:Be,children:M})})})})})});function Uie(t){return br("MuiDialogActions",t)}vr("MuiDialogActions",["root","spacing"]);const jie=t=>{const{classes:e,disableSpacing:n}=t;return wr({root:["root",!n&&"spacing"]},Uie,e)},$ie=sn("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),oz=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:h=!1,...p}=r,_={...r,disableSpacing:h},o=jie(_);return V.jsx($ie,{className:pn(o.root,s),ownerState:_,ref:n,...p})});function qie(t){return br("MuiDialogContent",t)}vr("MuiDialogContent",["root","dividers"]);function Hie(t){return br("MuiDialogTitle",t)}const Gie=vr("MuiDialogTitle",["root"]),Wie=t=>{const{classes:e,dividers:n}=t;return wr({root:["root",n&&"dividers"]},qie,e)},Yie=sn("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(Ir(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Gie.root} + &`]:{paddingTop:0}}}]}))),az=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiDialogContent"}),{className:s,dividers:h=!1,...p}=r,_={...r,dividers:h},o=Wie(_);return V.jsx(Yie,{className:pn(o.root,s),ownerState:_,ref:n,...p})}),Xie=t=>{const{classes:e}=t;return wr({root:["root"]},Hie,e)},Kie=sn(Jt,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),lz=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiDialogTitle"}),{className:s,id:h,...p}=r,_=r,o=Xie(_),{titleId:T=h}=H.useContext(f6);return V.jsx(Kie,{component:"h2",className:pn(o.root,s),ownerState:_,ref:n,variant:"h6",id:h??T,...p})});function Zie(t){return br("MuiDivider",t)}const cz=vr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Qie=t=>{const{absolute:e,children:n,classes:r,flexItem:s,light:h,orientation:p,textAlign:_,variant:o}=t;return wr({root:["root",e&&"absolute",o,h&&"light",p==="vertical"&&"vertical",s&&"flexItem",n&&"withChildren",n&&p==="vertical"&&"withChildrenVertical",_==="right"&&p!=="vertical"&&"textAlignRight",_==="left"&&p!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",p==="vertical"&&"wrapperVertical"]},Zie,r)},Jie=sn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(Ir(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),ese=sn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(Ir(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),eo=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiDivider"}),{absolute:s=!1,children:h,className:p,orientation:_="horizontal",component:o=h||_==="vertical"?"div":"hr",flexItem:T=!1,light:I=!1,role:M=o!=="hr"?"separator":void 0,textAlign:L="center",variant:F="fullWidth",...q}=r,$={...r,absolute:s,component:o,flexItem:T,light:I,orientation:_,role:M,textAlign:L,variant:F},X=Qie($);return V.jsx(Jie,{as:o,className:pn(X.root,p),role:M,ref:n,ownerState:$,"aria-orientation":M==="separator"&&(o!=="hr"||_==="vertical")?_:void 0,...q,children:h?V.jsx(ese,{className:X.wrapper,ownerState:$,children:h}):null})});eo&&(eo.muiSkipListHighlight=!0);function tse(t){return br("MuiFab",t)}const uz=vr("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),nse=t=>{const{color:e,variant:n,classes:r,size:s}=t,h={root:["root",n,`size${tn(s)}`,e==="inherit"?"colorInherit":e]},p=wr(h,tse,r);return{...r,...p}},rse=sn(Ry,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>gl(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${tn(n.size)}`],n.color==="inherit"&&e.colorInherit,e[tn(n.size)],e[n.color]]}})(Ir(({theme:t})=>({...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.grey[900]:t.palette.getContrastText?.(t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${uz.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),Ir(({theme:t})=>({variants:[...Object.entries(t.palette).filter(Zo(["dark","contrastText"])).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].contrastText,backgroundColor:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:(t.vars||t).palette[e].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e].main}}}}))]})),Ir(({theme:t})=>({[`&.${uz.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}))),ise=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFab"}),{children:s,className:h,color:p="default",component:_="button",disabled:o=!1,disableFocusRipple:T=!1,focusVisibleClassName:I,size:M="large",variant:L="circular",...F}=r,q={...r,color:p,component:_,disabled:o,disableFocusRipple:T,size:M,variant:L},$=nse(q);return V.jsx(rse,{className:pn($.root,h),component:_,disabled:o,focusRipple:!T,focusVisibleClassName:pn($.focusVisible,I),ownerState:q,ref:n,...F,classes:$,children:s})}),sse=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:s,size:h,hiddenLabel:p,multiline:_}=t,o={root:["root",!n&&"underline",r&&"adornedStart",s&&"adornedEnd",h==="small"&&`size${tn(h)}`,p&&"hiddenLabel",_&&"multiline"],input:["input"]},T=wr(o,bre,e);return{...e,...T}},ose=sn(qS,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...jS(t,e),!n.disableUnderline&&e.underline]}})(Ir(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${ey.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${ey.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:h},variants:[{props:({ownerState:p})=>!p.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ey.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ey.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ey.disabled}, .${ey.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${ey.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Zo()).map(([p])=>({props:{disableUnderline:!1,color:p},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[p]?.main}`}}})),{props:({ownerState:p})=>p.startAdornment,style:{paddingLeft:12}},{props:({ownerState:p})=>p.endAdornment,style:{paddingRight:12}},{props:({ownerState:p})=>p.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:p,size:_})=>p.multiline&&_==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:p})=>p.multiline&&p.hiddenLabel&&p.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),ase=sn(HS,{name:"MuiFilledInput",slot:"Input",overridesResolver:$S})(Ir(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),GD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:h={},componentsProps:p,fullWidth:_=!1,hiddenLabel:o,inputComponent:T="input",multiline:I=!1,slotProps:M,slots:L={},type:F="text",...q}=r,$={...r,disableUnderline:s,fullWidth:_,inputComponent:T,multiline:I,type:F},X=sse(r),te={root:{ownerState:$},input:{ownerState:$}},he=M??p?da(te,M??p):te,ie=L.root??h.Root??ose,me=L.input??h.Input??ase;return V.jsx(jD,{slots:{root:ie,input:me},slotProps:he,fullWidth:_,inputComponent:T,multiline:I,ref:n,type:F,...q,classes:X})});GD.muiName="Input";function lse(t){return br("MuiFormControl",t)}vr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const cse=t=>{const{classes:e,margin:n,fullWidth:r}=t,s={root:["root",n!=="none"&&`margin${tn(n)}`,r&&"fullWidth"]};return wr(s,lse,e)},use=sn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${tn(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),uM=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFormControl"}),{children:s,className:h,color:p="primary",component:_="div",disabled:o=!1,error:T=!1,focused:I,fullWidth:M=!1,hiddenLabel:L=!1,margin:F="none",required:q=!1,size:$="medium",variant:X="outlined",...te}=r,he={...r,color:p,component:_,disabled:o,error:T,fullWidth:M,hiddenLabel:L,margin:F,required:q,size:$,variant:X},ie=cse(he),[me,ge]=H.useState(()=>{let Ke=!1;return s&&H.Children.forEach(s,Ce=>{if(!CA(Ce,["Input","Select"]))return;const Xe=CA(Ce,["Select"])?Ce.props.input:Ce;Xe&&gre(Xe.props)&&(Ke=!0)}),Ke}),[Ee,ce]=H.useState(()=>{let Ke=!1;return s&&H.Children.forEach(s,Ce=>{CA(Ce,["Input","Select"])&&(LE(Ce.props,!0)||LE(Ce.props.inputProps,!0))&&(Ke=!0)}),Ke}),[ee,le]=H.useState(!1);o&&ee&&le(!1);const se=I!==void 0&&!o?I:ee;let _e;H.useRef(!1);const Q=H.useCallback(()=>{ce(!0)},[]),de=H.useCallback(()=>{ce(!1)},[]),Ve=H.useMemo(()=>({adornedStart:me,setAdornedStart:ge,color:p,disabled:o,error:T,filled:Ee,focused:se,fullWidth:M,hiddenLabel:L,size:$,onBlur:()=>{le(!1)},onFocus:()=>{le(!0)},onEmpty:de,onFilled:Q,registerEffect:_e,required:q,variant:X}),[me,p,o,T,Ee,se,M,L,_e,de,Q,q,$,X]);return V.jsx(UD.Provider,{value:Ve,children:V.jsx(use,{as:_,ownerState:he,className:pn(ie.root,h),ref:n,...te,children:s})})});function hse(t){return br("MuiFormControlLabel",t)}const Jx=vr("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),dse=t=>{const{classes:e,disabled:n,labelPlacement:r,error:s,required:h}=t,p={root:["root",n&&"disabled",`labelPlacement${tn(r)}`,s&&"error",h&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return wr(p,hse,e)},fse=sn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Jx.label}`]:e.label},e.root,e[`labelPlacement${tn(n.labelPlacement)}`]]}})(Ir(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Jx.disabled}`]:{cursor:"default"},[`& .${Jx.label}`]:{[`&.${Jx.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),pse=sn("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(Ir(({theme:t})=>({[`&.${Jx.error}`]:{color:(t.vars||t).palette.error.main}}))),sT=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFormControlLabel"}),{checked:s,className:h,componentsProps:p={},control:_,disabled:o,disableTypography:T,inputRef:I,label:M,labelPlacement:L="end",name:F,onChange:q,required:$,slots:X={},slotProps:te={},value:he,...ie}=r,me=lf(),ge=o??_.props.disabled??me?.disabled,Ee=$??_.props.required,ce={disabled:ge,required:Ee};["checked","name","onChange","value","inputRef"].forEach(Ke=>{typeof _.props[Ke]>"u"&&typeof r[Ke]<"u"&&(ce[Ke]=r[Ke])});const ee=cg({props:r,muiFormControl:me,states:["error"]}),le={...r,disabled:ge,labelPlacement:L,required:Ee,error:ee.error},se=dse(le),_e={slots:X,slotProps:{...p,...te}},[Q,de]=di("typography",{elementType:Jt,externalForwardedProps:_e,ownerState:le});let Ve=M;return Ve!=null&&Ve.type!==Jt&&!T&&(Ve=V.jsx(Q,{component:"span",...de,className:pn(se.label,de?.className),children:Ve})),V.jsxs(fse,{className:pn(se.root,h),ownerState:le,ref:n,...ie,children:[H.cloneElement(_,ce),Ee?V.jsxs("div",{children:[Ve,V.jsxs(pse,{ownerState:le,"aria-hidden":!0,className:se.asterisk,children:["","*"]})]}):Ve]})});function mse(t){return br("MuiFormGroup",t)}vr("MuiFormGroup",["root","row","error"]);const gse=t=>{const{classes:e,row:n,error:r}=t;return wr({root:["root",n&&"row",r&&"error"]},mse,e)},yse=sn("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),_se=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFormGroup"}),{className:s,row:h=!1,...p}=r,_=lf(),o=cg({props:r,muiFormControl:_,states:["error"]}),T={...r,row:h,error:o.error},I=gse(T);return V.jsx(yse,{className:pn(I.root,s),ownerState:T,ref:n,...p})});function vse(t){return br("MuiFormHelperText",t)}const hz=vr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var dz;const xse=t=>{const{classes:e,contained:n,size:r,disabled:s,error:h,filled:p,focused:_,required:o}=t,T={root:["root",s&&"disabled",h&&"error",r&&`size${tn(r)}`,n&&"contained",_&&"focused",p&&"filled",o&&"required"]};return wr(T,vse,e)},bse=sn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${tn(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(Ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${hz.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${hz.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),wse=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFormHelperText"}),{children:s,className:h,component:p="p",disabled:_,error:o,filled:T,focused:I,margin:M,required:L,variant:F,...q}=r,$=lf(),X=cg({props:r,muiFormControl:$,states:["variant","size","disabled","error","filled","focused","required"]}),te={...r,component:p,contained:X.variant==="filled"||X.variant==="outlined",variant:X.variant,size:X.size,disabled:X.disabled,error:X.error,filled:X.filled,focused:X.focused,required:X.required};delete te.ownerState;const he=xse(te);return V.jsx(bse,{as:p,className:pn(he.root,h),ref:n,...q,ownerState:te,children:s===" "?dz||(dz=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function Tse(t){return br("MuiFormLabel",t)}const _b=vr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Ese=t=>{const{classes:e,color:n,focused:r,disabled:s,error:h,filled:p,required:_}=t,o={root:["root",`color${tn(n)}`,s&&"disabled",h&&"error",p&&"filled",r&&"focused",_&&"required"],asterisk:["asterisk",h&&"error"]};return wr(o,Tse,e)},Sse=sn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(Ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{[`&.${_b.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${_b.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${_b.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),Cse=sn("span",{name:"MuiFormLabel",slot:"Asterisk"})(Ir(({theme:t})=>({[`&.${_b.error}`]:{color:(t.vars||t).palette.error.main}}))),hM=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiFormLabel"}),{children:s,className:h,color:p,component:_="label",disabled:o,error:T,filled:I,focused:M,required:L,...F}=r,q=lf(),$=cg({props:r,muiFormControl:q,states:["color","required","focused","disabled","error","filled"]}),X={...r,color:$.color||"primary",component:_,disabled:$.disabled,error:$.error,filled:$.filled,focused:$.focused,required:$.required},te=Ese(X);return V.jsxs(Sse,{as:_,ownerState:X,className:pn(te.root,h),ref:n,...F,children:[s,$.required&&V.jsxs(Cse,{ownerState:X,"aria-hidden":!0,className:te.asterisk,children:["","*"]})]})});function dM(t){return`scale(${t}, ${t**2})`}const Ase={entering:{opacity:1,transform:dM(1)},entered:{opacity:1,transform:"none"}},RA=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),fM=H.forwardRef(function(e,n){const{addEndListener:r,appear:s=!0,children:h,easing:p,in:_,onEnter:o,onEntered:T,onEntering:I,onExit:M,onExited:L,onExiting:F,style:q,timeout:$="auto",TransitionComponent:X=af,...te}=e,he=n6(),ie=H.useRef(),me=Uy(),ge=H.useRef(null),Ee=pa(ge,x1(h),n),ce=Ke=>Ce=>{if(Ke){const Xe=ge.current;Ce===void 0?Ke(Xe):Ke(Xe,Ce)}},ee=ce(I),le=ce((Ke,Ce)=>{r6(Ke);const{duration:Xe,delay:tt,easing:Be}=DE({style:q,timeout:$,easing:p},{mode:"enter"});let yt;$==="auto"?(yt=me.transitions.getAutoHeightDuration(Ke.clientHeight),ie.current=yt):yt=Xe,Ke.style.transition=[me.transitions.create("opacity",{duration:yt,delay:tt}),me.transitions.create("transform",{duration:RA?yt:yt*.666,delay:tt,easing:Be})].join(","),o&&o(Ke,Ce)}),se=ce(T),_e=ce(F),Q=ce(Ke=>{const{duration:Ce,delay:Xe,easing:tt}=DE({style:q,timeout:$,easing:p},{mode:"exit"});let Be;$==="auto"?(Be=me.transitions.getAutoHeightDuration(Ke.clientHeight),ie.current=Be):Be=Ce,Ke.style.transition=[me.transitions.create("opacity",{duration:Be,delay:Xe}),me.transitions.create("transform",{duration:RA?Be:Be*.666,delay:RA?Xe:Xe||Be*.333,easing:tt})].join(","),Ke.style.opacity=0,Ke.style.transform=dM(.75),M&&M(Ke)}),de=ce(L),Ve=Ke=>{$==="auto"&&he.start(ie.current||0,Ke),r&&r(ge.current,Ke)};return V.jsx(X,{appear:s,in:_,nodeRef:ge,onEnter:le,onEntered:se,onEntering:ee,onExit:Q,onExited:de,onExiting:_e,addEndListener:Ve,timeout:$==="auto"?null:$,...te,children:(Ke,{ownerState:Ce,...Xe})=>H.cloneElement(h,{style:{opacity:0,transform:dM(.75),visibility:Ke==="exited"&&!_?"hidden":void 0,...Ase[Ke],...q,...h.props.style},ref:Ee,...Xe})})});fM&&(fM.muiSupportAuto=!0);const Ise=t=>{const{classes:e,disableUnderline:n}=t,s=wr({root:["root",!n&&"underline"],input:["input"]},vre,e);return{...e,...s}},Mse=sn(qS,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...jS(t,e),!n.disableUnderline&&e.underline]}})(Ir(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kx.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kx.disabled}, .${kx.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${kx.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Zo()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),Rse=sn(HS,{name:"MuiInput",slot:"Input",overridesResolver:$S})({}),WD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:h={},componentsProps:p,fullWidth:_=!1,inputComponent:o="input",multiline:T=!1,slotProps:I,slots:M={},type:L="text",...F}=r,q=Ise(r),X={root:{ownerState:{disableUnderline:s}}},te=I??p?da(I??p,X):X,he=M.root??h.Root??Mse,ie=M.input??h.Input??Rse;return V.jsx(jD,{slots:{root:he,input:ie},slotProps:te,fullWidth:_,inputComponent:o,multiline:T,ref:n,type:L,...F,classes:q})});WD.muiName="Input";function Dse(t){return br("MuiInputLabel",t)}vr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const kse=t=>{const{classes:e,formControl:n,size:r,shrink:s,disableAnimation:h,variant:p,required:_}=t,o={root:["root",n&&"formControl",!h&&"animated",s&&"shrink",r&&r!=="medium"&&`size${tn(r)}`,p],asterisk:[_&&"asterisk"]},T=wr(o,Dse,e);return{...e,...T}},Pse=sn(hM,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${_b.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(Ir(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Lse=H.forwardRef(function(e,n){const r=Rr({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:h,shrink:p,variant:_,className:o,...T}=r,I=lf();let M=p;typeof M>"u"&&I&&(M=I.filled||I.focused||I.adornedStart);const L=cg({props:r,muiFormControl:I,states:["size","variant","required","focused"]}),F={...r,disableAnimation:s,formControl:I,shrink:M,size:L.size,variant:L.variant,required:L.required,focused:L.focused},q=kse(F);return V.jsx(Pse,{"data-shrink":M,ref:n,className:pn(q.root,o),...T,ownerState:F,classes:q})}),pM=H.createContext({});function Ose(t){return br("MuiList",t)}vr("MuiList",["root","padding","dense","subheader"]);const zse=t=>{const{classes:e,disablePadding:n,dense:r,subheader:s}=t;return wr({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},Ose,e)},Nse=sn("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Bse=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiList"}),{children:s,className:h,component:p="ul",dense:_=!1,disablePadding:o=!1,subheader:T,...I}=r,M=H.useMemo(()=>({dense:_}),[_]),L={...r,component:p,dense:_,disablePadding:o},F=zse(L);return V.jsx(pM.Provider,{value:M,children:V.jsxs(Nse,{as:p,className:pn(F.root,h),ref:n,ownerState:L,...I,children:[T,s]})})}),fz=vr("MuiListItemIcon",["root","alignItemsFlexStart"]),pz=vr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function DA(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function mz(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function p6(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function Px(t,e,n,r,s,h){let p=!1,_=s(t,e,e?n:!1);for(;_;){if(_===t.firstChild){if(p)return!1;p=!0}const o=r?!1:_.disabled||_.getAttribute("aria-disabled")==="true";if(!_.hasAttribute("tabindex")||!p6(_,h)||o)_=s(t,_,n);else return _.focus(),!0}return!1}const Fse=H.forwardRef(function(e,n){const{actions:r,autoFocus:s=!1,autoFocusItem:h=!1,children:p,className:_,disabledItemsFocusable:o=!1,disableListWrap:T=!1,onKeyDown:I,variant:M="selectedMenu",...L}=e,F=H.useRef(null),q=H.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Dh(()=>{s&&F.current.focus()},[s]),H.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(ie,{direction:me})=>{const ge=!F.current.style.width;if(ie.clientHeight<F.current.clientHeight&&ge){const Ee=`${h6(Tp(ie))}px`;F.current.style[me==="rtl"?"paddingLeft":"paddingRight"]=Ee,F.current.style.width=`calc(100% + ${Ee})`}return F.current}}),[]);const $=ie=>{const me=F.current,ge=ie.key;if(ie.ctrlKey||ie.metaKey||ie.altKey){I&&I(ie);return}const ce=Fl(me).activeElement;if(ge==="ArrowDown")ie.preventDefault(),Px(me,ce,T,o,DA);else if(ge==="ArrowUp")ie.preventDefault(),Px(me,ce,T,o,mz);else if(ge==="Home")ie.preventDefault(),Px(me,null,T,o,DA);else if(ge==="End")ie.preventDefault(),Px(me,null,T,o,mz);else if(ge.length===1){const ee=q.current,le=ge.toLowerCase(),se=performance.now();ee.keys.length>0&&(se-ee.lastTime>500?(ee.keys=[],ee.repeating=!0,ee.previousKeyMatched=!0):ee.repeating&&le!==ee.keys[0]&&(ee.repeating=!1)),ee.lastTime=se,ee.keys.push(le);const _e=ce&&!ee.repeating&&p6(ce,ee);ee.previousKeyMatched&&(_e||Px(me,ce,!1,o,DA,ee))?ie.preventDefault():ee.previousKeyMatched=!1}I&&I(ie)},X=pa(F,n);let te=-1;H.Children.forEach(p,(ie,me)=>{if(!H.isValidElement(ie)){te===me&&(te+=1,te>=p.length&&(te=-1));return}ie.props.disabled||(M==="selectedMenu"&&ie.props.selected||te===-1)&&(te=me),te===me&&(ie.props.disabled||ie.props.muiSkipListHighlight||ie.type.muiSkipListHighlight)&&(te+=1,te>=p.length&&(te=-1))});const he=H.Children.map(p,(ie,me)=>{if(me===te){const ge={};return h&&(ge.autoFocus=!0),ie.props.tabIndex===void 0&&M==="selectedMenu"&&(ge.tabIndex=0),H.cloneElement(ie,ge)}return ie});return V.jsx(Bse,{role:"menu",ref:X,className:_,onKeyDown:$,tabIndex:s?0:-1,...L,children:he})});function Vse(t){return br("MuiPopover",t)}vr("MuiPopover",["root","paper"]);function gz(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function yz(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function _z(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function oT(t){return typeof t=="function"?t():t}const Use=t=>{const{classes:e}=t;return wr({root:["root"],paper:["paper"]},Vse,e)},jse=sn(d6,{name:"MuiPopover",slot:"Root"})({}),m6=sn(Vl,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),$se=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiPopover"}),{action:s,anchorEl:h,anchorOrigin:p={vertical:"top",horizontal:"left"},anchorPosition:_,anchorReference:o="anchorEl",children:T,className:I,container:M,elevation:L=8,marginThreshold:F=16,open:q,PaperProps:$={},slots:X={},slotProps:te={},transformOrigin:he={vertical:"top",horizontal:"left"},TransitionComponent:ie,transitionDuration:me="auto",TransitionProps:ge={},disableScrollLock:Ee=!1,...ce}=r,ee=H.useRef(),le={...r,anchorOrigin:p,anchorReference:o,elevation:L,marginThreshold:F,transformOrigin:he,TransitionComponent:ie,transitionDuration:me,TransitionProps:ge},se=Use(le),_e=H.useCallback(()=>{if(o==="anchorPosition")return _;const Tn=oT(h),Ft=(Tn&&Tn.nodeType===1?Tn:Fl(ee.current).body).getBoundingClientRect();return{top:Ft.top+gz(Ft,p.vertical),left:Ft.left+yz(Ft,p.horizontal)}},[h,p.horizontal,p.vertical,_,o]),Q=H.useCallback(Tn=>({vertical:gz(Tn,he.vertical),horizontal:yz(Tn,he.horizontal)}),[he.horizontal,he.vertical]),de=H.useCallback(Tn=>{const Lt={width:Tn.offsetWidth,height:Tn.offsetHeight},Ft=Q(Lt);if(o==="none")return{top:null,left:null,transformOrigin:_z(Ft)};const gn=_e();let mn=gn.top-Ft.vertical,tr=gn.left-Ft.horizontal;const On=mn+Lt.height,jn=tr+Lt.width,Lr=Tp(oT(h)),$n=Lr.innerHeight-F,Vn=Lr.innerWidth-F;if(F!==null&&mn<F){const Tr=mn-F;mn-=Tr,Ft.vertical+=Tr}else if(F!==null&&On>$n){const Tr=On-$n;mn-=Tr,Ft.vertical+=Tr}if(F!==null&&tr<F){const Tr=tr-F;tr-=Tr,Ft.horizontal+=Tr}else if(jn>Vn){const Tr=jn-Vn;tr-=Tr,Ft.horizontal+=Tr}return{top:`${Math.round(mn)}px`,left:`${Math.round(tr)}px`,transformOrigin:_z(Ft)}},[h,o,_e,Q,F]),[Ve,Ke]=H.useState(q),Ce=H.useCallback(()=>{const Tn=ee.current;if(!Tn)return;const Lt=de(Tn);Lt.top!==null&&Tn.style.setProperty("top",Lt.top),Lt.left!==null&&(Tn.style.left=Lt.left),Tn.style.transformOrigin=Lt.transformOrigin,Ke(!0)},[de]);H.useEffect(()=>(Ee&&window.addEventListener("scroll",Ce),()=>window.removeEventListener("scroll",Ce)),[h,Ee,Ce]);const Xe=()=>{Ce()},tt=()=>{Ke(!1)};H.useEffect(()=>{q&&Ce()}),H.useImperativeHandle(s,()=>q?{updatePosition:()=>{Ce()}}:null,[q,Ce]),H.useEffect(()=>{if(!q)return;const Tn=QV(()=>{Ce()}),Lt=Tp(oT(h));return Lt.addEventListener("resize",Tn),()=>{Tn.clear(),Lt.removeEventListener("resize",Tn)}},[h,q,Ce]);let Be=me;const yt={slots:{transition:ie,...X},slotProps:{transition:ge,paper:$,...te}},[Me,et]=di("transition",{elementType:fM,externalForwardedProps:yt,ownerState:le,getSlotProps:Tn=>({...Tn,onEntering:(Lt,Ft)=>{Tn.onEntering?.(Lt,Ft),Xe()},onExited:Lt=>{Tn.onExited?.(Lt),tt()}}),additionalProps:{appear:!0,in:q}});me==="auto"&&!Me.muiSupportAuto&&(Be=void 0);const At=M||(h?Fl(oT(h)).body:void 0),[Dt,{slots:Gt,slotProps:Kt,...dn}]=di("root",{ref:n,elementType:jse,externalForwardedProps:{...yt,...ce},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:X.backdrop},slotProps:{backdrop:pne(typeof te.backdrop=="function"?te.backdrop(le):te.backdrop,{invisible:!0})},container:At,open:q},ownerState:le,className:pn(se.root,I)}),[Fn,An]=di("paper",{ref:ee,className:se.paper,elementType:m6,externalForwardedProps:yt,shouldForwardComponentProp:!0,additionalProps:{elevation:L,style:Ve?void 0:{opacity:0}},ownerState:le});return V.jsx(Dt,{...dn,...!Fm(Dt)&&{slots:Gt,slotProps:Kt,disableScrollLock:Ee},children:V.jsx(Me,{...et,timeout:Be,children:V.jsx(Fn,{...An,children:T})})})});function qse(t){return br("MuiMenu",t)}vr("MuiMenu",["root","paper","list"]);const Hse={vertical:"top",horizontal:"right"},Gse={vertical:"top",horizontal:"left"},Wse=t=>{const{classes:e}=t;return wr({root:["root"],paper:["paper"],list:["list"]},qse,e)},Yse=sn($se,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),Xse=sn(m6,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Kse=sn(Fse,{name:"MuiMenu",slot:"List"})({outline:0}),Zse=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:h,className:p,disableAutoFocusItem:_=!1,MenuListProps:o={},onClose:T,open:I,PaperProps:M={},PopoverClasses:L,transitionDuration:F="auto",TransitionProps:{onEntering:q,...$}={},variant:X="selectedMenu",slots:te={},slotProps:he={},...ie}=r,me=UV(),ge={...r,autoFocus:s,disableAutoFocusItem:_,MenuListProps:o,onEntering:q,PaperProps:M,transitionDuration:F,TransitionProps:$,variant:X},Ee=Wse(ge),ce=s&&!_&&I,ee=H.useRef(null),le=(Be,yt)=>{ee.current&&ee.current.adjustStyleForScrollbar(Be,{direction:me?"rtl":"ltr"}),q&&q(Be,yt)},se=Be=>{Be.key==="Tab"&&(Be.preventDefault(),T&&T(Be,"tabKeyDown"))};let _e=-1;H.Children.map(h,(Be,yt)=>{H.isValidElement(Be)&&(Be.props.disabled||(X==="selectedMenu"&&Be.props.selected||_e===-1)&&(_e=yt))});const Q={slots:te,slotProps:{list:o,transition:$,paper:M,...he}},de=rp({elementType:te.root,externalSlotProps:he.root,ownerState:ge,className:[Ee.root,p]}),[Ve,Ke]=di("paper",{className:Ee.paper,elementType:Xse,externalForwardedProps:Q,shouldForwardComponentProp:!0,ownerState:ge}),[Ce,Xe]=di("list",{className:pn(Ee.list,o.className),elementType:Kse,shouldForwardComponentProp:!0,externalForwardedProps:Q,getSlotProps:Be=>({...Be,onKeyDown:yt=>{se(yt),Be.onKeyDown?.(yt)}}),ownerState:ge}),tt=typeof Q.slotProps.transition=="function"?Q.slotProps.transition(ge):Q.slotProps.transition;return V.jsx(Yse,{onClose:T,anchorOrigin:{vertical:"bottom",horizontal:me?"right":"left"},transformOrigin:me?Hse:Gse,slots:{root:te.root,paper:Ve,backdrop:te.backdrop,...te.transition&&{transition:te.transition}},slotProps:{root:de,paper:Ke,backdrop:typeof he.backdrop=="function"?he.backdrop(ge):he.backdrop,transition:{...tt,onEntering:(...Be)=>{le(...Be),tt?.onEntering?.(...Be)}}},open:I,ref:n,transitionDuration:F,ownerState:ge,...ie,classes:L,children:V.jsx(Ce,{actions:ee,autoFocus:s&&(_e===-1||_),autoFocusItem:ce,variant:X,...Xe,children:h})})});function Qse(t){return br("MuiMenuItem",t)}const Lx=vr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Jse=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},eoe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:s,selected:h,classes:p}=t,o=wr({root:["root",n&&"dense",e&&"disabled",!s&&"gutters",r&&"divider",h&&"selected"]},Qse,p);return{...p,...o}},toe=sn(Ry,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Jse})(Ir(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Lx.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${Lx.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${Lx.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${Lx.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Lx.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${cz.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${cz.inset}`]:{marginLeft:52},[`& .${pz.root}`]:{marginTop:0,marginBottom:0},[`& .${pz.inset}`]:{paddingLeft:36},[`& .${fz.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${fz.root} svg`]:{fontSize:"1.25rem"}}}]}))),kA=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:h="li",dense:p=!1,divider:_=!1,disableGutters:o=!1,focusVisibleClassName:T,role:I="menuitem",tabIndex:M,className:L,...F}=r,q=H.useContext(pM),$=H.useMemo(()=>({dense:p||q.dense||!1,disableGutters:o}),[q.dense,p,o]),X=H.useRef(null);Dh(()=>{s&&X.current&&X.current.focus()},[s]);const te={...r,dense:$.dense,divider:_,disableGutters:o},he=eoe(r),ie=pa(X,n);let me;return r.disabled||(me=M!==void 0?M:-1),V.jsx(pM.Provider,{value:$,children:V.jsx(toe,{ref:ie,role:I,tabIndex:me,component:h,focusVisibleClassName:pn(he.focusVisible,T),className:pn(he.root,L),...F,ownerState:te,classes:he})})});function noe(t){return br("MuiNativeSelect",t)}const YD=vr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),roe=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:h,error:p}=t,_={select:["select",n,r&&"disabled",s&&"multiple",p&&"error"],icon:["icon",`icon${tn(n)}`,h&&"iconOpen",r&&"disabled"]};return wr(_,noe,e)},g6=sn("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${YD.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),ioe=sn(g6,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:gl,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${YD.multiple}`]:e.multiple}]}})({}),y6=sn("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${YD.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),soe=sn(y6,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${tn(n.variant)}`],n.open&&e.iconOpen]}})({}),ooe=H.forwardRef(function(e,n){const{className:r,disabled:s,error:h,IconComponent:p,inputRef:_,variant:o="standard",...T}=e,I={...e,disabled:s,variant:o,error:h},M=roe(I);return V.jsxs(H.Fragment,{children:[V.jsx(ioe,{ownerState:I,className:pn(M.select,r),disabled:s,ref:_||n,...T}),e.multiple?null:V.jsx(soe,{as:p,ownerState:I,className:M.icon})]})});var vz;const aoe=sn("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:gl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),loe=sn("legend",{name:"MuiNotchedOutlined",shouldForwardProp:gl})(Ir(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function coe(t){const{children:e,classes:n,className:r,label:s,notched:h,...p}=t,_=s!=null&&s!=="",o={...t,notched:h,withLabel:_};return V.jsx(aoe,{"aria-hidden":!0,className:r,ownerState:o,...p,children:V.jsx(loe,{ownerState:o,children:_?V.jsx("span",{children:s}):vz||(vz=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const uoe=t=>{const{classes:e}=t,r=wr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},xre,e);return{...e,...r}},hoe=sn(qS,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:jS})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Rd.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Rd.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}},[`&.${Rd.focused} .${Rd.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Zo()).map(([n])=>({props:{color:n},style:{[`&.${Rd.focused} .${Rd.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${Rd.error} .${Rd.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Rd.disabled} .${Rd.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),doe=sn(coe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}})),foe=sn(HS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:$S})(Ir(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),XD=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:h=!1,inputComponent:p="input",label:_,multiline:o=!1,notched:T,slots:I={},slotProps:M={},type:L="text",...F}=r,q=uoe(r),$=lf(),X=cg({props:r,muiFormControl:$,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),te={...r,color:X.color||"primary",disabled:X.disabled,error:X.error,focused:X.focused,formControl:$,fullWidth:h,hiddenLabel:X.hiddenLabel,multiline:o,size:X.size,type:L},he=I.root??s.Root??hoe,ie=I.input??s.Input??foe,[me,ge]=di("notchedOutline",{elementType:doe,className:q.notchedOutline,shouldForwardComponentProp:!0,ownerState:te,externalForwardedProps:{slots:I,slotProps:M},additionalProps:{label:_!=null&&_!==""&&X.required?V.jsxs(H.Fragment,{children:[_,"","*"]}):_}});return V.jsx(jD,{slots:{root:he,input:ie},slotProps:M,renderSuffix:Ee=>V.jsx(me,{...ge,notched:typeof T<"u"?T:!!(Ee.startAdornment||Ee.filled||Ee.focused)}),fullWidth:h,inputComponent:p,multiline:o,ref:n,type:L,...F,classes:{...q,notchedOutline:null}})});XD.muiName="Input";const poe=Os(V.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),moe=Os(V.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),goe=sn("span",{name:"MuiRadioButtonIcon",shouldForwardProp:gl})({position:"relative",display:"flex"}),yoe=sn(poe,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),_oe=sn(moe,{name:"MuiRadioButtonIcon"})(Ir(({theme:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}}]})));function _6(t){const{checked:e=!1,classes:n={},fontSize:r}=t,s={...t,checked:e};return V.jsxs(goe,{className:n.root,ownerState:s,children:[V.jsx(yoe,{fontSize:r,className:n.background,ownerState:s}),V.jsx(_oe,{fontSize:r,className:n.dot,ownerState:s})]})}const v6=H.createContext(void 0);function voe(){return H.useContext(v6)}function xoe(t){return br("MuiRadio",t)}const xz=vr("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),boe=t=>{const{classes:e,color:n,size:r}=t,s={root:["root",`color${tn(n)}`,r!=="medium"&&`size${tn(r)}`]};return{...e,...wr(s,xoe,e)}},woe=sn(uie,{shouldForwardProp:t=>gl(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size!=="medium"&&e[`size${tn(n.size)}`],e[`color${tn(n.color)}`]]}})(Ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,[`&.${xz.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e,disabled:!1},style:{[`&.${xz.checked}`]:{color:(t.vars||t).palette[e].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Toe(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const Eoe=V.jsx(_6,{checked:!0}),Soe=V.jsx(_6,{}),aT=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiRadio"}),{checked:s,checkedIcon:h=Eoe,color:p="primary",icon:_=Soe,name:o,onChange:T,size:I="medium",className:M,disabled:L,disableRipple:F=!1,slots:q={},slotProps:$={},inputProps:X,...te}=r,he=lf();let ie=L;he&&typeof ie>"u"&&(ie=he.disabled),ie??=!1;const me={...r,disabled:ie,disableRipple:F,color:p,size:I},ge=boe(me),Ee=voe();let ce=s;const ee=tM(T,Ee&&Ee.onChange);let le=o;Ee&&(typeof ce>"u"&&(ce=Toe(Ee.value,r.value)),typeof le>"u"&&(le=Ee.name));const se=$.input??X,[_e,Q]=di("root",{ref:n,elementType:woe,className:pn(ge.root,M),shouldForwardComponentProp:!0,externalForwardedProps:{slots:q,slotProps:$,...te},getSlotProps:de=>({...de,onChange:(Ve,...Ke)=>{de.onChange?.(Ve,...Ke),ee(Ve,...Ke)}}),ownerState:me,additionalProps:{type:"radio",icon:H.cloneElement(_,{fontSize:_.props.fontSize??I}),checkedIcon:H.cloneElement(h,{fontSize:h.props.fontSize??I}),disabled:ie,name:le,checked:ce,slots:q,slotProps:{input:typeof se=="function"?se(me):se}}});return V.jsx(_e,{...Q,classes:ge})});function Coe(t){return br("MuiRadioGroup",t)}vr("MuiRadioGroup",["root","row","error"]);const Aoe=t=>{const{classes:e,row:n,error:r}=t;return wr({root:["root",n&&"row",r&&"error"]},Coe,e)},bz=H.forwardRef(function(e,n){const{actions:r,children:s,className:h,defaultValue:p,name:_,onChange:o,value:T,...I}=e,M=H.useRef(null),L=Aoe(e),[F,q]=$b({controlled:T,default:p,name:"RadioGroup"});H.useImperativeHandle(r,()=>({focus:()=>{let he=M.current.querySelector("input:not(:disabled):checked");he||(he=M.current.querySelector("input:not(:disabled)")),he&&he.focus()}}),[]);const $=pa(n,M),X=Vy(_),te=H.useMemo(()=>({name:X,onChange(he){q(he.target.value),o&&o(he,he.target.value)},value:F}),[X,o,q,F]);return V.jsx(v6.Provider,{value:te,children:V.jsx(_se,{role:"radiogroup",ref:$,className:pn(L.root,h),...I,children:s})})}),Ioe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function x6(t){return br("MuiSelect",t)}const Ox=vr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var wz;const Moe=sn(g6,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Ox.select}`]:e.select},{[`&.${Ox.select}`]:e[n.variant]},{[`&.${Ox.error}`]:e.error},{[`&.${Ox.multiple}`]:e.multiple}]}})({[`&.${Ox.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Roe=sn(y6,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${tn(n.variant)}`],n.open&&e.iconOpen]}})({}),Doe=sn("input",{shouldForwardProp:t=>US(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function Tz(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function koe(t){return t==null||typeof t=="string"&&!t.trim()}const Poe=t=>{const{classes:e,variant:n,disabled:r,multiple:s,open:h,error:p}=t,_={select:["select",n,r&&"disabled",s&&"multiple",p&&"error"],icon:["icon",`icon${tn(n)}`,h&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return wr(_,x6,e)},Loe=H.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":s,autoFocus:h,autoWidth:p,children:_,className:o,defaultOpen:T,defaultValue:I,disabled:M,displayEmpty:L,error:F=!1,IconComponent:q,inputRef:$,labelId:X,MenuProps:te={},multiple:he,name:ie,onBlur:me,onChange:ge,onClose:Ee,onFocus:ce,onOpen:ee,open:le,readOnly:se,renderValue:_e,required:Q,SelectDisplayProps:de={},tabIndex:Ve,type:Ke,value:Ce,variant:Xe="standard",...tt}=e,[Be,yt]=$b({controlled:Ce,default:I,name:"Select"}),[Me,et]=$b({controlled:le,default:T,name:"Select"}),At=H.useRef(null),Dt=H.useRef(null),[Gt,Kt]=H.useState(null),{current:dn}=H.useRef(le!=null),[Fn,An]=H.useState(),Tn=pa(n,$),Lt=H.useCallback(vn=>{Dt.current=vn,vn&&Kt(vn)},[]),Ft=Gt?.parentNode;H.useImperativeHandle(Tn,()=>({focus:()=>{Dt.current.focus()},node:At.current,value:Be}),[Be]),H.useEffect(()=>{T&&Me&&Gt&&!dn&&(An(p?null:Ft.clientWidth),Dt.current.focus())},[Gt,p]),H.useEffect(()=>{h&&Dt.current.focus()},[h]),H.useEffect(()=>{if(!X)return;const vn=Fl(Dt.current).getElementById(X);if(vn){const Wn=()=>{getSelection().isCollapsed&&Dt.current.focus()};return vn.addEventListener("click",Wn),()=>{vn.removeEventListener("click",Wn)}}},[X]);const gn=(vn,Wn)=>{vn?ee&&ee(Wn):Ee&&Ee(Wn),dn||(An(p?null:Ft.clientWidth),et(vn))},mn=vn=>{vn.button===0&&(vn.preventDefault(),Dt.current.focus(),gn(!0,vn))},tr=vn=>{gn(!1,vn)},On=H.Children.toArray(_),jn=vn=>{const Wn=On.find(ri=>ri.props.value===vn.target.value);Wn!==void 0&&(yt(Wn.props.value),ge&&ge(vn,Wn))},Lr=vn=>Wn=>{let ri;if(Wn.currentTarget.hasAttribute("tabindex")){if(he){ri=Array.isArray(Be)?Be.slice():[];const Ss=Be.indexOf(vn.props.value);Ss===-1?ri.push(vn.props.value):ri.splice(Ss,1)}else ri=vn.props.value;if(vn.props.onClick&&vn.props.onClick(Wn),Be!==ri&&(yt(ri),ge)){const Ss=Wn.nativeEvent||Wn,Jo=new Ss.constructor(Ss.type,Ss);Object.defineProperty(Jo,"target",{writable:!0,value:{value:ri,name:ie}}),ge(Jo,vn)}he||gn(!1,Wn)}},$n=vn=>{se||[" ","ArrowUp","ArrowDown","Enter"].includes(vn.key)&&(vn.preventDefault(),gn(!0,vn))},Vn=Gt!==null&&Me,Tr=vn=>{!Vn&&me&&(Object.defineProperty(vn,"target",{writable:!0,value:{value:Be,name:ie}}),me(vn))};delete tt["aria-invalid"];let En,Hi;const nr=[];let on=!1;(LE({value:Be})||L)&&(_e?En=_e(Be):on=!0);const en=On.map(vn=>{if(!H.isValidElement(vn))return null;let Wn;if(he){if(!Array.isArray(Be))throw new Error(wp(2));Wn=Be.some(ri=>Tz(ri,vn.props.value)),Wn&&on&&nr.push(vn.props.children)}else Wn=Tz(Be,vn.props.value),Wn&&on&&(Hi=vn.props.children);return H.cloneElement(vn,{"aria-selected":Wn?"true":"false",onClick:Lr(vn),onKeyUp:ri=>{ri.key===" "&&ri.preventDefault(),vn.props.onKeyUp&&vn.props.onKeyUp(ri)},role:"option",selected:Wn,value:void 0,"data-value":vn.props.value})});on&&(he?nr.length===0?En=null:En=nr.reduce((vn,Wn,ri)=>(vn.push(Wn),ri<nr.length-1&&vn.push(", "),vn),[]):En=Hi);let yn=Fn;!p&&dn&&Gt&&(yn=Ft.clientWidth);let bn;typeof Ve<"u"?bn=Ve:bn=M?null:0;const Pn=de.id||(ie?`mui-component-select-${ie}`:void 0),Bn={...e,variant:Xe,value:Be,open:Vn,error:F},Zn=Poe(Bn),vi={...te.PaperProps,...typeof te.slotProps?.paper=="function"?te.slotProps.paper(Bn):te.slotProps?.paper},Sr={...te.MenuListProps,...typeof te.slotProps?.list=="function"?te.slotProps.list(Bn):te.slotProps?.list},Or=Vy();return V.jsxs(H.Fragment,{children:[V.jsx(Moe,{as:"div",ref:Lt,tabIndex:bn,role:"combobox","aria-controls":Vn?Or:void 0,"aria-disabled":M?"true":void 0,"aria-expanded":Vn?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[X,Pn].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":Q?"true":void 0,"aria-invalid":F?"true":void 0,onKeyDown:$n,onMouseDown:M||se?null:mn,onBlur:Tr,onFocus:ce,...de,ownerState:Bn,className:pn(de.className,Zn.select,o),id:Pn,children:koe(En)?wz||(wz=V.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):En}),V.jsx(Doe,{"aria-invalid":F,value:Array.isArray(Be)?Be.join(","):Be,name:ie,ref:At,"aria-hidden":!0,onChange:jn,tabIndex:-1,disabled:M,className:Zn.nativeInput,autoFocus:h,required:Q,...tt,ownerState:Bn}),V.jsx(Roe,{as:q,className:Zn.icon,ownerState:Bn}),V.jsx(Zse,{id:`menu-${ie||""}`,anchorEl:Ft,open:Vn,onClose:tr,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...te,slotProps:{...te.slotProps,list:{"aria-labelledby":X,role:"listbox","aria-multiselectable":he?"true":void 0,disableListWrap:!0,id:Or,...Sr},paper:{...vi,style:{minWidth:yn,...vi!=null?vi.style:null}}},children:en})]})}),Ooe=t=>{const{classes:e}=t,r=wr({root:["root"]},x6,e);return{...e,...r}},KD={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>gl(t)&&t!=="variant"},zoe=sn(WD,KD)(""),Noe=sn(XD,KD)(""),Boe=sn(GD,KD)(""),b6=H.forwardRef(function(e,n){const r=Rr({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:h,classes:p={},className:_,defaultOpen:o=!1,displayEmpty:T=!1,IconComponent:I=wre,id:M,input:L,inputProps:F,label:q,labelId:$,MenuProps:X,multiple:te=!1,native:he=!1,onClose:ie,onOpen:me,open:ge,renderValue:Ee,SelectDisplayProps:ce,variant:ee="outlined",...le}=r,se=he?ooe:Loe,_e=lf(),Q=cg({props:r,muiFormControl:_e,states:["variant","error"]}),de=Q.variant||ee,Ve={...r,variant:de,classes:p},Ke=Ooe(Ve),{root:Ce,...Xe}=Ke,tt=L||{standard:V.jsx(zoe,{ownerState:Ve}),outlined:V.jsx(Noe,{label:q,ownerState:Ve}),filled:V.jsx(Boe,{ownerState:Ve})}[de],Be=pa(n,x1(tt));return V.jsx(H.Fragment,{children:H.cloneElement(tt,{inputComponent:se,inputProps:{children:h,error:Q.error,IconComponent:I,variant:de,type:void 0,multiple:te,...he?{id:M}:{autoWidth:s,defaultOpen:o,displayEmpty:T,labelId:$,MenuProps:X,onClose:ie,onOpen:me,open:ge,renderValue:Ee,SelectDisplayProps:{id:M,...ce}},...F,classes:F?da(Xe,F.classes):Xe,...L?L.props.inputProps:{}},...(te&&he||T)&&de==="outlined"?{notched:!0}:{},ref:Be,className:pn(tt.props.className,_,Ke.root),...!L&&{variant:de},...le})})});b6.muiName="Select";function Foe(t,e,n=(r,s)=>r===s){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}const Voe=2;function K_(t,e,n,r,s){return n===1?Math.min(t+e,s):Math.max(t-e,r)}function w6(t,e){return t-e}function Ez(t,e){const{index:n}=t.reduce((r,s,h)=>{const p=Math.abs(e-s);return r===null||p<r.distance||p===r.distance?{distance:p,index:h}:r},null)??{};return n}function lT(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const s=n.changedTouches[r];if(s.identifier===e.current)return{x:s.clientX,y:s.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function zE(t,e,n){return(t-e)*100/(n-e)}function Uoe(t,e,n){return(n-e)*t+e}function joe(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function $oe(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(joe(e)))}function Sz({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(w6)}function cT({sliderRef:t,activeIndex:e,setActive:n}){const r=Fl(t.current);(!t.current?.contains(r.activeElement)||Number(r?.activeElement?.getAttribute("data-index"))!==e)&&t.current?.querySelector(`[type="range"][data-index="${e}"]`).focus(),n&&n(e)}function uT(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?Foe(t,e):!1}const qoe={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},Hoe=t=>t;let hT;function Cz(){return hT===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?hT=CSS.supports("touch-action","none"):hT=!0),hT}function Goe(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:s=!1,isRtl:h=!1,marks:p=!1,max:_=100,min:o=0,name:T,onChange:I,onChangeCommitted:M,orientation:L="horizontal",rootRef:F,scale:q=Hoe,step:$=1,shiftStep:X=10,tabIndex:te,value:he}=t,ie=H.useRef(void 0),[me,ge]=H.useState(-1),[Ee,ce]=H.useState(-1),[ee,le]=H.useState(!1),se=H.useRef(0),_e=H.useRef(null),[Q,de]=$b({controlled:he,default:n??o,name:"Slider"}),Ve=I&&((on,en,yn)=>{const bn=on.nativeEvent||on,Pn=new bn.constructor(bn.type,bn);Object.defineProperty(Pn,"target",{writable:!0,value:{value:en,name:T}}),_e.current=en,I(Pn,en,yn)}),Ke=Array.isArray(Q);let Ce=Ke?Q.slice().sort(w6):[Q];Ce=Ce.map(on=>on==null?o:rv(on,o,_));const Xe=p===!0&&$!==null?[...Array(Math.floor((_-o)/$)+1)].map((on,en)=>({value:o+$*en})):p||[],tt=Xe.map(on=>on.value),[Be,yt]=H.useState(-1),Me=H.useRef(null),et=pa(F,Me),At=on=>en=>{const yn=Number(en.currentTarget.getAttribute("data-index"));kE(en.target)&&yt(yn),ce(yn),on?.onFocus?.(en)},Dt=on=>en=>{kE(en.target)||yt(-1),ce(-1),on?.onBlur?.(en)},Gt=(on,en)=>{const yn=Number(on.currentTarget.getAttribute("data-index")),bn=Ce[yn],Pn=tt.indexOf(bn);let Bn=en;if(Xe&&$==null){const Zn=tt[tt.length-1];Bn>=Zn?Bn=Zn:Bn<=tt[0]?Bn=tt[0]:Bn=Bn<bn?tt[Pn-1]:tt[Pn+1]}if(Bn=rv(Bn,o,_),Ke){s&&(Bn=rv(Bn,Ce[yn-1]||-1/0,Ce[yn+1]||1/0));const Zn=Bn;Bn=Sz({values:Ce,newValue:Bn,index:yn});let vi=yn;s||(vi=Bn.indexOf(Zn)),cT({sliderRef:Me,activeIndex:vi})}de(Bn),yt(yn),Ve&&!uT(Bn,Q)&&Ve(on,Bn,yn),M&&M(on,_e.current??Bn)},Kt=on=>en=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(en.key)){en.preventDefault();const yn=Number(en.currentTarget.getAttribute("data-index")),bn=Ce[yn];let Pn=null;if($!=null){const Bn=en.shiftKey?X:$;switch(en.key){case"ArrowUp":Pn=K_(bn,Bn,1,o,_);break;case"ArrowRight":Pn=K_(bn,Bn,h?-1:1,o,_);break;case"ArrowDown":Pn=K_(bn,Bn,-1,o,_);break;case"ArrowLeft":Pn=K_(bn,Bn,h?1:-1,o,_);break;case"PageUp":Pn=K_(bn,X,1,o,_);break;case"PageDown":Pn=K_(bn,X,-1,o,_);break;case"Home":Pn=o;break;case"End":Pn=_;break}}else if(Xe){const Bn=tt[tt.length-1],Zn=tt.indexOf(bn),vi=[h?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],Sr=[h?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];vi.includes(en.key)?Zn===0?Pn=tt[0]:Pn=tt[Zn-1]:Sr.includes(en.key)&&(Zn===tt.length-1?Pn=Bn:Pn=tt[Zn+1])}Pn!=null&&Gt(en,Pn)}on?.onKeyDown?.(en)};Dh(()=>{r&&Me.current.contains(document.activeElement)&&document.activeElement?.blur()},[r]),r&&me!==-1&&ge(-1),r&&Be!==-1&&yt(-1);const dn=on=>en=>{on.onChange?.(en),Gt(en,en.target.valueAsNumber)},Fn=H.useRef(void 0);let An=L;h&&L==="horizontal"&&(An+="-reverse");const Tn=({finger:on,move:en=!1})=>{const{current:yn}=Me,{width:bn,height:Pn,bottom:Bn,left:Zn}=yn.getBoundingClientRect();let vi;An.startsWith("vertical")?vi=(Bn-on.y)/Pn:vi=(on.x-Zn)/bn,An.includes("-reverse")&&(vi=1-vi);let Sr;if(Sr=Uoe(vi,o,_),$)Sr=$oe(Sr,$,o);else{const vn=Ez(tt,Sr);Sr=tt[vn]}Sr=rv(Sr,o,_);let Or=0;if(Ke){en?Or=Fn.current:Or=Ez(Ce,Sr),s&&(Sr=rv(Sr,Ce[Or-1]||-1/0,Ce[Or+1]||1/0));const vn=Sr;Sr=Sz({values:Ce,newValue:Sr,index:Or}),s&&en||(Or=Sr.indexOf(vn),Fn.current=Or)}return{newValue:Sr,activeIndex:Or}},Lt=tf(on=>{const en=lT(on,ie);if(!en)return;if(se.current+=1,on.type==="mousemove"&&on.buttons===0){Ft(on);return}const{newValue:yn,activeIndex:bn}=Tn({finger:en,move:!0});cT({sliderRef:Me,activeIndex:bn,setActive:ge}),de(yn),!ee&&se.current>Voe&&le(!0),Ve&&!uT(yn,Q)&&Ve(on,yn,bn)}),Ft=tf(on=>{const en=lT(on,ie);if(le(!1),!en)return;const{newValue:yn}=Tn({finger:en,move:!0});ge(-1),on.type==="touchend"&&ce(-1),M&&M(on,_e.current??yn),ie.current=void 0,mn()}),gn=tf(on=>{if(r)return;Cz()||on.preventDefault();const en=on.changedTouches[0];en!=null&&(ie.current=en.identifier);const yn=lT(on,ie);if(yn!==!1){const{newValue:Pn,activeIndex:Bn}=Tn({finger:yn});cT({sliderRef:Me,activeIndex:Bn,setActive:ge}),de(Pn),Ve&&!uT(Pn,Q)&&Ve(on,Pn,Bn)}se.current=0;const bn=Fl(Me.current);bn.addEventListener("touchmove",Lt,{passive:!0}),bn.addEventListener("touchend",Ft,{passive:!0})}),mn=H.useCallback(()=>{const on=Fl(Me.current);on.removeEventListener("mousemove",Lt),on.removeEventListener("mouseup",Ft),on.removeEventListener("touchmove",Lt),on.removeEventListener("touchend",Ft)},[Ft,Lt]);H.useEffect(()=>{const{current:on}=Me;return on.addEventListener("touchstart",gn,{passive:Cz()}),()=>{on.removeEventListener("touchstart",gn),mn()}},[mn,gn]),H.useEffect(()=>{r&&mn()},[r,mn]);const tr=on=>en=>{if(on.onMouseDown?.(en),r||en.defaultPrevented||en.button!==0)return;en.preventDefault();const yn=lT(en,ie);if(yn!==!1){const{newValue:Pn,activeIndex:Bn}=Tn({finger:yn});cT({sliderRef:Me,activeIndex:Bn,setActive:ge}),de(Pn),Ve&&!uT(Pn,Q)&&Ve(en,Pn,Bn)}se.current=0;const bn=Fl(Me.current);bn.addEventListener("mousemove",Lt,{passive:!0}),bn.addEventListener("mouseup",Ft)},On=zE(Ke?Ce[0]:o,o,_),jn=zE(Ce[Ce.length-1],o,_)-On,Lr=(on={})=>{const en=gb(on),yn={onMouseDown:tr(en||{})},bn={...en,...yn};return{...on,ref:et,...bn}},$n=on=>en=>{on.onMouseOver?.(en);const yn=Number(en.currentTarget.getAttribute("data-index"));ce(yn)},Vn=on=>en=>{on.onMouseLeave?.(en),ce(-1)},Tr=(on={})=>{const en=gb(on),yn={onMouseOver:$n(en||{}),onMouseLeave:Vn(en||{})};return{...on,...en,...yn}},En=on=>({pointerEvents:me!==-1&&me!==on?"none":void 0});let Hi;return L==="vertical"&&(Hi=h?"vertical-rl":"vertical-lr"),{active:me,axis:An,axisProps:qoe,dragging:ee,focusedThumbIndex:Be,getHiddenInputProps:(on={})=>{const en=gb(on),yn={onChange:dn(en||{}),onFocus:At(en||{}),onBlur:Dt(en||{}),onKeyDown:Kt(en||{})},bn={...en,...yn};return{tabIndex:te,"aria-labelledby":e,"aria-orientation":L,"aria-valuemax":q(_),"aria-valuemin":q(o),name:T,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:r,...on,...bn,style:{...Ioe,direction:h?"rtl":"ltr",width:"100%",height:"100%",writingMode:Hi}}},getRootProps:Lr,getThumbProps:Tr,marks:Xe,open:Ee,range:Ke,rootRef:et,trackLeap:jn,trackOffset:On,values:Ce,getThumbStyle:En}}const Woe=t=>!t||!Fm(t);function Yoe(t){return br("MuiSlider",t)}const Ru=vr("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Xoe=t=>{const{open:e}=t;return{offset:pn(e&&Ru.valueLabelOpen),circle:Ru.valueLabelCircle,label:Ru.valueLabelLabel}};function Koe(t){const{children:e,className:n,value:r}=t,s=Xoe(t);return e?H.cloneElement(e,{className:e.props.className},V.jsxs(H.Fragment,{children:[e.props.children,V.jsx("span",{className:pn(s.offset,n),"aria-hidden":!0,children:V.jsx("span",{className:s.circle,children:V.jsx("span",{className:s.label,children:r})})})]})):null}function Az(t){return t}const Zoe=sn("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${tn(n.color)}`],n.size!=="medium"&&e[`size${tn(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(Ir(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Ru.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ru.dragging}`]:{[`& .${Ru.thumb}, & .${Ru.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),Qoe=sn("span",{name:"MuiSlider",slot:"Rail"})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),Joe=sn("span",{name:"MuiSlider",slot:"Track"})(Ir(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:t.lighten(t.palette[e].main,.62),borderColor:t.lighten(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:t.darken(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:t.darken(t.palette[e].main,.5)})}}}))]}))),eae=sn("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${tn(n.color)}`],n.size!=="medium"&&e[`thumbSize${tn(n.size)}`]]}})(Ir(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Ru.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Zo()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Ru.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.alpha((t.vars||t).palette[e].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Ru.active}`]:{boxShadow:`0px 0px 0px 14px ${t.alpha((t.vars||t).palette[e].main,.16)}`}}}))]}))),tae=sn(Koe,{name:"MuiSlider",slot:"ValueLabel"})(Ir(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Ru.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Ru.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),nae=sn("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>US(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(Ir(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),rae=sn("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>US(t)&&t!=="markLabelActive"})(Ir(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),iae=t=>{const{disabled:e,dragging:n,marked:r,orientation:s,track:h,classes:p,color:_,size:o}=t,T={root:["root",e&&"disabled",n&&"dragging",r&&"marked",s==="vertical"&&"vertical",h==="inverted"&&"trackInverted",h===!1&&"trackFalse",_&&`color${tn(_)}`,o&&`size${tn(o)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",o&&`thumbSize${tn(o)}`,_&&`thumbColor${tn(_)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return wr(T,Yoe,p)},sae=({children:t})=>t,oae=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiSlider"}),s=UV(),{"aria-label":h,"aria-valuetext":p,"aria-labelledby":_,component:o="span",components:T={},componentsProps:I={},color:M="primary",classes:L,className:F,disableSwap:q=!1,disabled:$=!1,getAriaLabel:X,getAriaValueText:te,marks:he=!1,max:ie=100,min:me=0,name:ge,onChange:Ee,onChangeCommitted:ce,orientation:ee="horizontal",shiftStep:le=10,size:se="medium",step:_e=1,scale:Q=Az,slotProps:de,slots:Ve,tabIndex:Ke,track:Ce="normal",value:Xe,valueLabelDisplay:tt="off",valueLabelFormat:Be=Az,...yt}=r,Me={...r,isRtl:s,max:ie,min:me,classes:L,disabled:$,disableSwap:q,orientation:ee,marks:he,color:M,size:se,step:_e,shiftStep:le,scale:Q,track:Ce,valueLabelDisplay:tt,valueLabelFormat:Be},{axisProps:et,getRootProps:At,getHiddenInputProps:Dt,getThumbProps:Gt,open:Kt,active:dn,axis:Fn,focusedThumbIndex:An,range:Tn,dragging:Lt,marks:Ft,values:gn,trackOffset:mn,trackLeap:tr,getThumbStyle:On}=Goe({...Me,rootRef:n});Me.marked=Ft.length>0&&Ft.some(fe=>fe.label),Me.dragging=Lt,Me.focusedThumbIndex=An;const jn=iae(Me),Lr=Ve?.root??T.Root??Zoe,$n=Ve?.rail??T.Rail??Qoe,Vn=Ve?.track??T.Track??Joe,Tr=Ve?.thumb??T.Thumb??eae,En=Ve?.valueLabel??T.ValueLabel??tae,Hi=Ve?.mark??T.Mark??nae,nr=Ve?.markLabel??T.MarkLabel??rae,on=Ve?.input??T.Input??"input",en=de?.root??I.root,yn=de?.rail??I.rail,bn=de?.track??I.track,Pn=de?.thumb??I.thumb,Bn=de?.valueLabel??I.valueLabel,Zn=de?.mark??I.mark,vi=de?.markLabel??I.markLabel,Sr=de?.input??I.input,Or=rp({elementType:Lr,getSlotProps:At,externalSlotProps:en,externalForwardedProps:yt,additionalProps:{...Woe(Lr)&&{as:o}},ownerState:{...Me,...en?.ownerState},className:[jn.root,F]}),vn=rp({elementType:$n,externalSlotProps:yn,ownerState:Me,className:jn.rail}),Wn=rp({elementType:Vn,externalSlotProps:bn,additionalProps:{style:{...et[Fn].offset(mn),...et[Fn].leap(tr)}},ownerState:{...Me,...bn?.ownerState},className:jn.track}),ri=rp({elementType:Tr,getSlotProps:Gt,externalSlotProps:Pn,ownerState:{...Me,...Pn?.ownerState},className:jn.thumb}),Ss=rp({elementType:En,externalSlotProps:Bn,ownerState:{...Me,...Bn?.ownerState},className:jn.valueLabel}),Jo=rp({elementType:Hi,externalSlotProps:Zn,ownerState:Me,className:jn.mark}),Oe=rp({elementType:nr,externalSlotProps:vi,ownerState:Me,className:jn.markLabel}),pe=rp({elementType:on,getSlotProps:Dt,externalSlotProps:Sr,ownerState:Me});return V.jsxs(Lr,{...Or,children:[V.jsx($n,{...vn}),V.jsx(Vn,{...Wn}),Ft.filter(fe=>fe.value>=me&&fe.value<=ie).map((fe,ke)=>{const Fe=zE(fe.value,me,ie),Ge=et[Fn].offset(Fe);let nt;return Ce===!1?nt=gn.includes(fe.value):nt=Ce==="normal"&&(Tn?fe.value>=gn[0]&&fe.value<=gn[gn.length-1]:fe.value<=gn[0])||Ce==="inverted"&&(Tn?fe.value<=gn[0]||fe.value>=gn[gn.length-1]:fe.value>=gn[0]),V.jsxs(H.Fragment,{children:[V.jsx(Hi,{"data-index":ke,...Jo,...!Fm(Hi)&&{markActive:nt},style:{...Ge,...Jo.style},className:pn(Jo.className,nt&&jn.markActive)}),fe.label!=null?V.jsx(nr,{"aria-hidden":!0,"data-index":ke,...Oe,...!Fm(nr)&&{markLabelActive:nt},style:{...Ge,...Oe.style},className:pn(jn.markLabel,Oe.className,nt&&jn.markLabelActive),children:fe.label}):null]},ke)}),gn.map((fe,ke)=>{const Fe=zE(fe,me,ie),Ge=et[Fn].offset(Fe),nt=tt==="off"?sae:En;return V.jsx(nt,{...!Fm(nt)&&{valueLabelFormat:Be,valueLabelDisplay:tt,value:typeof Be=="function"?Be(Q(fe),ke):Be,index:ke,open:Kt===ke||dn===ke||tt==="on",disabled:$},...Ss,children:V.jsx(Tr,{"data-index":ke,...ri,className:pn(jn.thumb,ri.className,dn===ke&&jn.active,An===ke&&jn.focusVisible),style:{...Ge,...On(ke),...ri.style},children:V.jsx(on,{"data-index":ke,"aria-label":X?X(ke):h,"aria-valuenow":Q(fe),"aria-labelledby":_,"aria-valuetext":te?te(Q(fe),ke):p,value:gn[ke],...pe})})},ke)})]})}),hr=Cte({createStyledComponent:sn("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>Rr({props:t,name:"MuiStack"})});function aae(t){return br("MuiToolbar",t)}vr("MuiToolbar",["root","gutters","regular","dense"]);const lae=t=>{const{classes:e,disableGutters:n,variant:r}=t;return wr({root:["root",!n&&"gutters",r]},aae,e)},cae=sn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(Ir(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),uae=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiToolbar"}),{className:s,component:h="div",disableGutters:p=!1,variant:_="regular",...o}=r,T={...r,component:h,disableGutters:p,variant:_},I=lae(T);return V.jsx(cae,{as:h,className:pn(I.root,s),ref:n,ownerState:T,...o})});function hae(t){return br("MuiTextField",t)}vr("MuiTextField",["root"]);const dae={standard:WD,filled:GD,outlined:XD},fae=t=>{const{classes:e}=t;return wr({root:["root"]},hae,e)},pae=sn(uM,{name:"MuiTextField",slot:"Root"})({}),Js=H.forwardRef(function(e,n){const r=Rr({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:h=!1,children:p,className:_,color:o="primary",defaultValue:T,disabled:I=!1,error:M=!1,FormHelperTextProps:L,fullWidth:F=!1,helperText:q,id:$,InputLabelProps:X,inputProps:te,InputProps:he,inputRef:ie,label:me,maxRows:ge,minRows:Ee,multiline:ce=!1,name:ee,onBlur:le,onChange:se,onFocus:_e,placeholder:Q,required:de=!1,rows:Ve,select:Ke=!1,SelectProps:Ce,slots:Xe={},slotProps:tt={},type:Be,value:yt,variant:Me="outlined",...et}=r,At={...r,autoFocus:h,color:o,disabled:I,error:M,fullWidth:F,multiline:ce,required:de,select:Ke,variant:Me},Dt=fae(At),Gt=Vy($),Kt=q&&Gt?`${Gt}-helper-text`:void 0,dn=me&&Gt?`${Gt}-label`:void 0,Fn=dae[Me],An={slots:Xe,slotProps:{input:he,inputLabel:X,htmlInput:te,formHelperText:L,select:Ce,...tt}},Tn={},Lt=An.slotProps.inputLabel;Me==="outlined"&&(Lt&&typeof Lt.shrink<"u"&&(Tn.notched=Lt.shrink),Tn.label=me),Ke&&((!Ce||!Ce.native)&&(Tn.id=void 0),Tn["aria-describedby"]=void 0);const[Ft,gn]=di("root",{elementType:pae,shouldForwardComponentProp:!0,externalForwardedProps:{...An,...et},ownerState:At,className:pn(Dt.root,_),ref:n,additionalProps:{disabled:I,error:M,fullWidth:F,required:de,color:o,variant:Me}}),[mn,tr]=di("input",{elementType:Fn,externalForwardedProps:An,additionalProps:Tn,ownerState:At}),[On,jn]=di("inputLabel",{elementType:Lse,externalForwardedProps:An,ownerState:At}),[Lr,$n]=di("htmlInput",{elementType:"input",externalForwardedProps:An,ownerState:At}),[Vn,Tr]=di("formHelperText",{elementType:wse,externalForwardedProps:An,ownerState:At}),[En,Hi]=di("select",{elementType:b6,externalForwardedProps:An,ownerState:At}),nr=V.jsx(mn,{"aria-describedby":Kt,autoComplete:s,autoFocus:h,defaultValue:T,fullWidth:F,multiline:ce,name:ee,rows:Ve,maxRows:ge,minRows:Ee,type:Be,value:yt,id:Gt,inputRef:ie,onBlur:le,onChange:se,onFocus:_e,placeholder:Q,inputProps:$n,slots:{input:Xe.htmlInput?Lr:void 0},...tr});return V.jsxs(Ft,{...gn,children:[me!=null&&me!==""&&V.jsx(On,{htmlFor:Gt,id:dn,...jn,children:me}),Ke?V.jsx(En,{"aria-describedby":Kt,id:Gt,labelId:dn,value:yt,input:nr,...Hi,children:p}):nr,q&&V.jsx(Vn,{id:Kt,...Tr,children:q})]})}),zx=sg(wn),Iz=sg(Jt),Mz=sg("div");function mae(){const t=Uy();return V.jsx(wn,{sx:{minHeight:"100vh",display:"flex",bgcolor:t.palette.mode==="dark"?"radial-gradient(circle at top, #1d4ed8, #020617)":"radial-gradient(circle at top, #bfdbfe, #eff6ff)"},children:V.jsx(zh,{maxWidth:"md",sx:{display:"flex",alignItems:"center",justifyContent:"center",py:8},children:V.jsxs(zx,{initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},sx:{width:"100%",borderRadius:4,p:{xs:4,md:6},boxShadow:8,bgcolor:"background.paper",position:"relative",overflow:"hidden"},children:[V.jsx(zx,{initial:{opacity:0,scale:.7},animate:{opacity:.9,scale:1},transition:{duration:1.2,ease:"easeOut"},sx:{position:"absolute",inset:-80,background:"radial-gradient(circle at 0% 0%, rgba(59,130,246,0.35), transparent 60%)",pointerEvents:"none"}}),V.jsx(wn,{component:"svg",sx:{position:"absolute",width:0,height:0},children:V.jsx("defs",{children:V.jsxs("filter",{id:"ripple-distortion",children:[V.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.01",numOctaves:2,result:"noise",children:V.jsx("animate",{attributeName:"baseFrequency",dur:"6s",values:"0.01;0.03;0.01",repeatCount:"indefinite"})}),V.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:8,xChannelSelector:"R",yChannelSelector:"G",children:V.jsx("animate",{attributeName:"scale",dur:"6s",values:"4;10;4",repeatCount:"indefinite"})})]})})}),V.jsxs(hr,{spacing:4,textAlign:"center",alignItems:"center",position:"relative",children:[V.jsxs(wn,{sx:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",mb:1},children:[V.jsx(zx,{"aria-hidden":!0,initial:{opacity:0,scale:.9},animate:{opacity:[.4,.15,0],scale:[1,1.9,2.4]},transition:{duration:5,repeat:1/0,ease:"easeOut",delay:0},sx:{position:"absolute",width:260,height:260,borderRadius:"50%",border:"2px solid rgba(59,130,246,0.5)",boxShadow:"0 0 40px rgba(37,99,235,0.35)"}}),V.jsx(zx,{"aria-hidden":!0,initial:{opacity:0,scale:.9},animate:{opacity:[.5,.2,0],scale:[1,1.7,2.2]},transition:{duration:5,repeat:1/0,ease:"easeOut",delay:1},sx:{position:"absolute",width:210,height:210,borderRadius:"50%",border:"2px solid rgba(59,130,246,0.35)",boxShadow:"0 0 32px rgba(37,99,235,0.25)"}}),V.jsx(zx,{"aria-hidden":!0,initial:{opacity:0,scale:.95},animate:{opacity:[.7,.3,0],scale:[1,1.5,2]},transition:{duration:5,repeat:1/0,ease:"easeOut",delay:2},sx:{position:"absolute",width:160,height:160,borderRadius:"50%",border:"2px solid rgba(59,130,246,0.25)",boxShadow:"0 0 24px rgba(37,99,235,0.2)"}}),V.jsx(Iz,{variant:"h1",initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:[0,2,-1,0],scale:[1,1.015,.99,1],rotate:[0,.3,-.2,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},sx:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:800,fontSize:{xs:"3.5rem",md:"5rem"},background:"linear-gradient(135deg, #38bdf8 0%, #1d4ed8 50%, #0ea5e9 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.02em",lineHeight:1.1,filter:"url(#ripple-distortion)",textShadow:"0 0 16px rgba(59,130,246,0.45), 0 0 32px rgba(37,99,235,0.55)",position:"relative",zIndex:1},children:"Ripple"})]}),V.jsx(Iz,{variant:"h5",color:"text.secondary",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},sx:{fontFamily:"'Inter', sans-serif",fontWeight:400,fontSize:{xs:"1.25rem",md:"1.5rem"},lineHeight:1.6,maxWidth:"600px",mx:"auto",textAlign:"center"},children:"Connect with people nearby at events using shared WiFi and realtime profiles. No awkward introductions, just instant context."}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",sx:{mt:2},children:[V.jsx(Mz,{whileHover:{scale:1.05},whileTap:{scale:.98},children:V.jsx(ss,{variant:"contained",component:Bc,to:"/login",size:"large",disableRipple:!0,sx:{px:5,py:1.5,fontSize:"1.125rem",fontWeight:600,borderRadius:3,textTransform:"none",background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",boxShadow:"0 4px 14px rgba(59, 130, 246, 0.4)",transition:"all 0.3s ease-in-out","&:hover":{background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",boxShadow:"0 8px 24px rgba(37, 99, 235, 0.55)"}},children:"Login"})}),V.jsx(Mz,{whileHover:{scale:1.05},whileTap:{scale:.98},children:V.jsx(ss,{variant:"outlined",component:Bc,to:"/signup",size:"large",sx:{px:5,py:1.5,fontSize:"1.125rem",fontWeight:600,borderRadius:3,textTransform:"none",borderWidth:2,borderColor:"primary.main",color:"primary.main","&:hover":{borderWidth:2,borderColor:"primary.dark",backgroundColor:"rgba(59,130,246,0.05)"}},children:"Sign Up"})})]})]})]})})})}const gae=sg(Vl);function yae(){const[t,e]=H.useState(""),[n,r]=H.useState(""),[s,h]=H.useState(""),[p,_]=H.useState(!1),o=Pu(),T=async I=>{I.preventDefault(),h(""),_(!0);try{await SQ(t,n),o("/dashboard")}catch(M){if(console.error("Login error:",M),M instanceof Lu)switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":h("Invalid email or password. Please try again.");break;case"auth/invalid-email":h("Invalid email address.");break;case"auth/user-disabled":h("This account has been disabled.");break;case"auth/configuration-not-found":case"auth/project-not-found":h("Firebase is not configured properly. Please check your setup.");break;default:h(`Failed to login: ${M.code}. Please try again or check the console.`)}else h("An unexpected error occurred. Please try again.")}finally{_(!1)}};return V.jsx(wn,{sx:{minHeight:"100vh",pt:8,display:"flex",alignItems:"center",justifyContent:"center"},children:V.jsx(zh,{maxWidth:"xs",children:V.jsxs(gae,{elevation:6,sx:{p:4,borderRadius:3},initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.4},children:[V.jsx(Jt,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Login"}),s&&V.jsx(Jt,{color:"error",variant:"body2",sx:{mb:2,textAlign:"center"},children:s}),V.jsx(wn,{component:"form",onSubmit:T,children:V.jsxs(hr,{spacing:2,children:[V.jsx(Js,{label:"Email",type:"email",fullWidth:!0,value:t,onChange:I=>e(I.target.value),required:!0}),V.jsx(Js,{label:"Password",type:"password",fullWidth:!0,value:n,onChange:I=>r(I.target.value),required:!0}),V.jsx(ss,{type:"submit",variant:"contained",fullWidth:!0,disabled:p,children:p?"Logging in...":"Login"})]})}),V.jsxs(Jt,{variant:"body2",sx:{mt:2,textAlign:"center"},children:["Don't have an account? ",V.jsx(Bc,{to:"/signup",children:"Sign up"})]})]})})})}const _ae=sg(Vl);function vae(){const[t,e]=H.useState(""),[n,r]=H.useState(""),[s,h]=H.useState(""),[p,_]=H.useState(""),[o,T]=H.useState(!1),I=Pu(),M=async L=>{L.preventDefault(),_(""),T(!0);try{await EQ(t,n),I("/dashboard")}catch(F){if(console.error("Signup error:",F),F instanceof Lu)switch(F.code){case"auth/email-already-in-use":_("This email is already registered. Please use a different email or login instead.");break;case"auth/weak-password":_("Password is too weak. Please use at least 6 characters.");break;case"auth/invalid-email":_("Invalid email address.");break;case"auth/configuration-not-found":case"auth/project-not-found":_("Firebase is not configured properly. Please check your setup.");break;default:_(`Failed to create account: ${F.code}. Please check the console for details.`)}else _("An unexpected error occurred. Please try again.");T(!1)}finally{T(!1)}};return V.jsx(wn,{sx:{minHeight:"100vh",pt:8,display:"flex",alignItems:"center",justifyContent:"center"},children:V.jsx(zh,{maxWidth:"xs",children:V.jsxs(_ae,{elevation:6,sx:{p:4,borderRadius:3},initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.4},children:[V.jsx(Jt,{variant:"h5",component:"h1",gutterBottom:!0,align:"center",children:"Sign Up"}),p&&V.jsx(Jt,{color:"error",variant:"body2",sx:{mb:2,textAlign:"center"},children:p}),V.jsx(wn,{component:"form",onSubmit:M,children:V.jsxs(hr,{spacing:2,children:[V.jsx(Js,{label:"Name",fullWidth:!0,value:s,onChange:L=>h(L.target.value),required:!0}),V.jsx(Js,{label:"Email",type:"email",fullWidth:!0,value:t,onChange:L=>e(L.target.value),required:!0}),V.jsx(Js,{label:"Password",type:"password",fullWidth:!0,value:n,onChange:L=>r(L.target.value),required:!0,inputProps:{minLength:6}}),V.jsx(ss,{type:"submit",variant:"contained",fullWidth:!0,disabled:o,children:o?"Creating Account...":"Sign Up"})]})}),V.jsxs(Jt,{variant:"body2",sx:{mt:2,textAlign:"center"},children:["Already have an account? ",V.jsx(Bc,{to:"/login",children:"Login"})]})]})})})}const T6=6048e5,xae=864e5,GS=6e4,WS=36e5,bae=1e3,Rz=Symbol.for("constructDateFrom");function os(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Rz in t?t[Rz](e):t instanceof Date?new t.constructor(e):new Date(e)}function Gn(t,e){return os(e||t,t)}function Ah(t,e,n){const r=Gn(t,n?.in);return isNaN(e)?os(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function kh(t,e,n){const r=Gn(t,n?.in);if(isNaN(e))return os(t,NaN);if(!e)return r;const s=r.getDate(),h=os(t,r.getTime());h.setMonth(r.getMonth()+e+1,0);const p=h.getDate();return s>=p?h:(r.setFullYear(h.getFullYear(),h.getMonth(),s),r)}function E6(t,e,n){return os(t,+Gn(t)+e)}function wae(t,e,n){return E6(t,e*WS)}let Tae={};function jy(){return Tae}function Ep(t,e){const n=jy(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Gn(t,e?.in),h=s.getDay(),p=(h<r?7:0)+h-r;return s.setDate(s.getDate()-p),s.setHours(0,0,0,0),s}function Lv(t,e){return Ep(t,{...e,weekStartsOn:1})}function S6(t,e){const n=Gn(t,e?.in),r=n.getFullYear(),s=os(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const h=Lv(s),p=os(n,0);p.setFullYear(r,0,4),p.setHours(0,0,0,0);const _=Lv(p);return n.getTime()>=h.getTime()?r+1:n.getTime()>=_.getTime()?r:r-1}function NE(t){const e=Gn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Cp(t,...e){const n=os.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Dy(t,e){const n=Gn(t,e?.in);return n.setHours(0,0,0,0),n}function Ov(t,e,n){const[r,s]=Cp(n?.in,t,e),h=Dy(r),p=Dy(s),_=+h-NE(h),o=+p-NE(p);return Math.round((_-o)/xae)}function Eae(t,e){const n=S6(t,e),r=os(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Lv(r)}function mM(t,e,n){const r=Gn(t,n?.in);return r.setTime(r.getTime()+e*GS),r}function ZD(t,e,n){return kh(t,e*3,n)}function Sae(t,e,n){return E6(t,e*1e3)}function BE(t,e,n){return Ah(t,e*7,n)}function up(t,e,n){return kh(t,e*12,n)}function Dz(t,e){let n,r=e?.in;return t.forEach(s=>{!r&&typeof s=="object"&&(r=os.bind(null,s));const h=Gn(s,r);(!n||n<h||isNaN(+h))&&(n=h)}),os(r,n||NaN)}function kz(t,e){let n,r=e?.in;return t.forEach(s=>{!r&&typeof s=="object"&&(r=os.bind(null,s));const h=Gn(s,r);(!n||n>h||isNaN(+h))&&(n=h)}),os(r,n||NaN)}function Cae(t,e,n){const[r,s]=Cp(n?.in,t,e);return+Dy(r)==+Dy(s)}function hp(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function FE(t){return!(!hp(t)&&typeof t!="number"||isNaN(+Gn(t)))}function VE(t,e,n){const[r,s]=Cp(n?.in,t,e),h=r.getFullYear()-s.getFullYear(),p=r.getMonth()-s.getMonth();return h*12+p}function Pm(t,e){const n=Gn(t,e?.in);return Math.trunc(n.getMonth()/3)+1}function UE(t,e,n){const[r,s]=Cp(n?.in,t,e),h=r.getFullYear()-s.getFullYear(),p=Pm(r)-Pm(s);return h*4+p}function jE(t,e,n){const[r,s]=Cp(n?.in,t,e);return r.getFullYear()-s.getFullYear()}function Aae(t,e,n){const[r,s]=Cp(n?.in,t,e),h=Pz(r,s),p=Math.abs(Ov(r,s));r.setDate(r.getDate()-h*p);const _=+(Pz(r,s)===-h),o=h*(p-_);return o===0?0:o}function Pz(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function C6(t,e){const n=Gn(t,e?.in);return n.setHours(23,59,59,999),n}function A6(t,e){const n=Gn(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function gM(t,e){const n=Gn(t,e?.in),r=n.getMonth(),s=r-r%3;return n.setMonth(s,1),n.setHours(0,0,0,0),n}function I6(t,e){const n=Gn(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function M6(t,e){const n=Gn(t,e?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function YS(t,e){const n=Gn(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Iae(t,e){const n=jy(),r=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Gn(t,e?.in),h=s.getDay(),p=(h<r?-7:0)+6-(h-r);return s.setDate(s.getDate()+p),s.setHours(23,59,59,999),s}const Mae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Rae=(t,e,n)=>{let r;const s=Mae[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function PA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Dae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lae={date:PA({formats:Dae,defaultWidth:"full"}),time:PA({formats:kae,defaultWidth:"full"}),dateTime:PA({formats:Pae,defaultWidth:"full"})},Oae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zae=(t,e,n,r)=>Oae[t];function Nx(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const p=t.defaultFormattingWidth||t.defaultWidth,_=n?.width?String(n.width):p;s=t.formattingValues[_]||t.formattingValues[p]}else{const p=t.defaultWidth,_=n?.width?String(n.width):t.defaultWidth;s=t.values[_]||t.values[p]}const h=t.argumentCallback?t.argumentCallback(e):e;return s[h]}}const Nae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Bae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},$ae=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qae={ordinalNumber:$ae,era:Nx({values:Nae,defaultWidth:"wide"}),quarter:Nx({values:Bae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Nx({values:Fae,defaultWidth:"wide"}),day:Nx({values:Vae,defaultWidth:"wide"}),dayPeriod:Nx({values:Uae,defaultWidth:"wide",formattingValues:jae,defaultFormattingWidth:"wide"})};function Bx(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],h=e.match(s);if(!h)return null;const p=h[0],_=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],o=Array.isArray(_)?Gae(_,M=>M.test(p)):Hae(_,M=>M.test(p));let T;T=t.valueCallback?t.valueCallback(o):o,T=n.valueCallback?n.valueCallback(T):T;const I=e.slice(p.length);return{value:T,rest:I}}}function Hae(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Gae(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Wae(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],h=e.match(t.parsePattern);if(!h)return null;let p=t.valueCallback?t.valueCallback(h[0]):h[0];p=n.valueCallback?n.valueCallback(p):p;const _=e.slice(s.length);return{value:p,rest:_}}}const Yae=/^(\d+)(th|st|nd|rd)?/i,Xae=/\d+/i,Kae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zae={any:[/^b/i,/^(a|c)/i]},Qae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jae={any:[/1/i,/2/i,/3/i,/4/i]},ele={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rle={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ile={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sle={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ole={ordinalNumber:Wae({matchPattern:Yae,parsePattern:Xae,valueCallback:t=>parseInt(t,10)}),era:Bx({matchPatterns:Kae,defaultMatchWidth:"wide",parsePatterns:Zae,defaultParseWidth:"any"}),quarter:Bx({matchPatterns:Qae,defaultMatchWidth:"wide",parsePatterns:Jae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bx({matchPatterns:ele,defaultMatchWidth:"wide",parsePatterns:tle,defaultParseWidth:"any"}),day:Bx({matchPatterns:nle,defaultMatchWidth:"wide",parsePatterns:rle,defaultParseWidth:"any"}),dayPeriod:Bx({matchPatterns:ile,defaultMatchWidth:"any",parsePatterns:sle,defaultParseWidth:"any"})},R6={code:"en-US",formatDistance:Rae,formatLong:Lae,formatRelative:zae,localize:qae,match:ole,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ale(t,e){const n=Gn(t,e?.in);return Ov(n,YS(n))+1}function QD(t,e){const n=Gn(t,e?.in),r=+Lv(n)-+Eae(n);return Math.round(r/T6)+1}function JD(t,e){const n=Gn(t,e?.in),r=n.getFullYear(),s=jy(),h=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,p=os(e?.in||t,0);p.setFullYear(r+1,0,h),p.setHours(0,0,0,0);const _=Ep(p,e),o=os(e?.in||t,0);o.setFullYear(r,0,h),o.setHours(0,0,0,0);const T=Ep(o,e);return+n>=+_?r+1:+n>=+T?r:r-1}function lle(t,e){const n=jy(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=JD(t,e),h=os(e?.in||t,0);return h.setFullYear(s,0,r),h.setHours(0,0,0,0),Ep(h,e)}function D6(t,e){const n=Gn(t,e?.in),r=+Ep(n,e)-+lle(n,e);return Math.round(r/T6)+1}function is(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Sm={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return is(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):is(n+1,2)},d(t,e){return is(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return is(t.getHours()%12||12,e.length)},H(t,e){return is(t.getHours(),e.length)},m(t,e){return is(t.getMinutes(),e.length)},s(t,e){return is(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return is(s,e.length)}},Z_={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Lz={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Sm.y(t,e)},Y:function(t,e,n,r){const s=JD(t,r),h=s>0?s:1-s;if(e==="YY"){const p=h%100;return is(p,2)}return e==="Yo"?n.ordinalNumber(h,{unit:"year"}):is(h,e.length)},R:function(t,e){const n=S6(t);return is(n,e.length)},u:function(t,e){const n=t.getFullYear();return is(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return is(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return is(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Sm.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return is(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=D6(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):is(s,e.length)},I:function(t,e,n){const r=QD(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):is(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Sm.d(t,e)},D:function(t,e,n){const r=ale(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):is(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),h=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(h);case"ee":return is(h,2);case"eo":return n.ordinalNumber(h,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),h=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(h);case"cc":return is(h,e.length);case"co":return n.ordinalNumber(h,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return is(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Z_.noon:r===0?s=Z_.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Z_.evening:r>=12?s=Z_.afternoon:r>=4?s=Z_.morning:s=Z_.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Sm.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Sm.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):is(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):is(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Sm.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Sm.s(t,e)},S:function(t,e){return Sm.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return zz(r);case"XXXX":case"XX":return ay(r);case"XXXXX":case"XXX":default:return ay(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return zz(r);case"xxxx":case"xx":return ay(r);case"xxxxx":case"xxx":default:return ay(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Oz(r,":");case"OOOO":default:return"GMT"+ay(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Oz(r,":");case"zzzz":default:return"GMT"+ay(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return is(r,e.length)},T:function(t,e,n){return is(+t,e.length)}};function Oz(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),h=r%60;return h===0?n+String(s):n+String(s)+e+is(h,2)}function zz(t,e){return t%60===0?(t>0?"-":"+")+is(Math.abs(t)/60,2):ay(t,e)}function ay(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=is(Math.trunc(r/60),2),h=is(r%60,2);return n+s+e+h}const Nz=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},k6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cle=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Nz(t,e);let h;switch(r){case"P":h=e.dateTime({width:"short"});break;case"PP":h=e.dateTime({width:"medium"});break;case"PPP":h=e.dateTime({width:"long"});break;case"PPPP":default:h=e.dateTime({width:"full"});break}return h.replace("{{date}}",Nz(r,e)).replace("{{time}}",k6(s,e))},yM={p:k6,P:cle},ule=/^D+$/,hle=/^Y+$/,dle=["D","DD","YY","YYYY"];function fle(t){return ule.test(t)}function ple(t){return hle.test(t)}function mle(t,e,n){const r=gle(t,e,n);if(console.warn(r),dle.includes(t))throw new RangeError(r)}function gle(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yle=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_le=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vle=/^'([^]*?)'?$/,xle=/''/g,ble=/[a-zA-Z]/;function Bz(t,e,n){const r=jy(),s=n?.locale??r.locale??R6,h=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,p=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,_=Gn(t,n?.in);if(!FE(_))throw new RangeError("Invalid time value");let o=e.match(_le).map(I=>{const M=I[0];if(M==="p"||M==="P"){const L=yM[M];return L(I,s.formatLong)}return I}).join("").match(yle).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const M=I[0];if(M==="'")return{isToken:!1,value:wle(I)};if(Lz[M])return{isToken:!0,value:I};if(M.match(ble))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:I}});s.localize.preprocessor&&(o=s.localize.preprocessor(_,o));const T={firstWeekContainsDate:h,weekStartsOn:p,locale:s};return o.map(I=>{if(!I.isToken)return I.value;const M=I.value;(!n?.useAdditionalWeekYearTokens&&ple(M)||!n?.useAdditionalDayOfYearTokens&&fle(M))&&mle(M,e,String(t));const L=Lz[M[0]];return L(_,M,s.localize,T)}).join("")}function wle(t){const e=t.match(vle);return e?e[1].replace(xle,"'"):t}function Fz(t,e){return Gn(t,e?.in).getDate()}function Tle(t,e){return Gn(t,e?.in).getDay()}function Ele(t,e){const n=Gn(t,e?.in),r=n.getFullYear(),s=n.getMonth(),h=os(n,0);return h.setFullYear(r,s+1,0),h.setHours(0,0,0,0),h.getDate()}function Sle(){return Object.assign({},jy())}function dp(t,e){return Gn(t,e?.in).getHours()}function Cle(t,e){const n=Gn(t,e?.in).getDay();return n===0?7:n}function fp(t,e){return Gn(t,e?.in).getMinutes()}function fl(t,e){return Gn(t,e?.in).getMonth()}function Vm(t){return Gn(t).getSeconds()}function _M(t){return+Gn(t)}function qr(t,e){return Gn(t,e?.in).getFullYear()}function ng(t,e){return+Gn(t)>+Gn(e)}function Ud(t,e){return+Gn(t)<+Gn(e)}function Ale(t,e){return+Gn(t)==+Gn(e)}function Ile(t,e){const n=Mle(e)?new e(0):os(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Mle(t){return typeof t=="function"&&t.prototype?.constructor===t}const Rle=10;class P6{subPriority=0;validate(e,n){return!0}}class Dle extends P6{constructor(e,n,r,s,h){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,h&&(this.subPriority=h)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class kle extends P6{priority=Rle;subPriority=-1;constructor(e,n){super(),this.context=e||(r=>os(n,r))}set(e,n){return n.timestampIsSet?e:os(e,Ile(e,this.context))}}class qi{run(e,n,r,s){const h=this.parse(e,n,r,s);return h?{setter:new Dle(h.value,this.validate,this.set,this.priority,this.subPriority),rest:h.rest}:null}validate(e,n,r){return!0}}class Ple extends qi{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const po={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Nd={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mo(t,e){return t&&{value:e(t.value),rest:t.rest}}function $s(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Bd(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,h=n[3]?parseInt(n[3],10):0,p=n[5]?parseInt(n[5],10):0;return{value:r*(s*WS+h*GS+p*bae),rest:e.slice(n[0].length)}}function L6(t){return $s(po.anyDigitsSigned,t)}function no(t,e){switch(t){case 1:return $s(po.singleDigit,e);case 2:return $s(po.twoDigits,e);case 3:return $s(po.threeDigits,e);case 4:return $s(po.fourDigits,e);default:return $s(new RegExp("^\\d{1,"+t+"}"),e)}}function $E(t,e){switch(t){case 1:return $s(po.singleDigitSigned,e);case 2:return $s(po.twoDigitsSigned,e);case 3:return $s(po.threeDigitsSigned,e);case 4:return $s(po.fourDigitsSigned,e);default:return $s(new RegExp("^-?\\d{1,"+t+"}"),e)}}function ek(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function O6(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const h=r+50,p=Math.trunc(h/100)*100,_=t>=h%100;s=t+p-(_?100:0)}return n?s:1-s}function z6(t){return t%400===0||t%4===0&&t%100!==0}class Lle extends qi{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const s=h=>({year:h,isTwoDigitYear:n==="yy"});switch(n){case"y":return mo(no(4,e),s);case"yo":return mo(r.ordinalNumber(e,{unit:"year"}),s);default:return mo(no(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const s=e.getFullYear();if(r.isTwoDigitYear){const p=O6(r.year,s);return e.setFullYear(p,0,1),e.setHours(0,0,0,0),e}const h=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(h,0,1),e.setHours(0,0,0,0),e}}class Ole extends qi{priority=130;parse(e,n,r){const s=h=>({year:h,isTwoDigitYear:n==="YY"});switch(n){case"Y":return mo(no(4,e),s);case"Yo":return mo(r.ordinalNumber(e,{unit:"year"}),s);default:return mo(no(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,s){const h=JD(e,s);if(r.isTwoDigitYear){const _=O6(r.year,h);return e.setFullYear(_,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ep(e,s)}const p=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(p,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Ep(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class zle extends qi{priority=130;parse(e,n){return $E(n==="R"?4:n.length,e)}set(e,n,r){const s=os(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Lv(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Nle extends qi{priority=130;parse(e,n){return $E(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Ble extends qi{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return no(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Fle extends qi{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return no(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Vle extends qi{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const s=h=>h-1;switch(n){case"M":return mo($s(po.month,e),s);case"MM":return mo(no(2,e),s);case"Mo":return mo(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Ule extends qi{priority=110;parse(e,n,r){const s=h=>h-1;switch(n){case"L":return mo($s(po.month,e),s);case"LL":return mo(no(2,e),s);case"Lo":return mo(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function jle(t,e,n){const r=Gn(t,n?.in),s=D6(r,n)-e;return r.setDate(r.getDate()-s*7),Gn(r,n?.in)}class $le extends qi{priority=100;parse(e,n,r){switch(n){case"w":return $s(po.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return no(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,s){return Ep(jle(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function qle(t,e,n){const r=Gn(t,n?.in),s=QD(r,n)-e;return r.setDate(r.getDate()-s*7),r}class Hle extends qi{priority=100;parse(e,n,r){switch(n){case"I":return $s(po.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return no(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return Lv(qle(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Gle=[31,28,31,30,31,30,31,31,30,31,30,31],Wle=[31,29,31,30,31,30,31,31,30,31,30,31];class Yle extends qi{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return $s(po.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return no(n.length,e)}}validate(e,n){const r=e.getFullYear(),s=z6(r),h=e.getMonth();return s?n>=1&&n<=Wle[h]:n>=1&&n<=Gle[h]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Xle extends qi{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return $s(po.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return no(n.length,e)}}validate(e,n){const r=e.getFullYear();return z6(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function tk(t,e,n){const r=jy(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,h=Gn(t,n?.in),p=h.getDay(),o=(e%7+7)%7,T=7-s,I=e<0||e>6?e-(p+T)%7:(o+T)%7-(p+T)%7;return Ah(h,I,n)}class Kle extends qi{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=tk(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Zle extends qi{priority=90;parse(e,n,r,s){const h=p=>{const _=Math.floor((p-1)/7)*7;return(p+s.weekStartsOn+6)%7+_};switch(n){case"e":case"ee":return mo(no(n.length,e),h);case"eo":return mo(r.ordinalNumber(e,{unit:"day"}),h);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=tk(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Qle extends qi{priority=90;parse(e,n,r,s){const h=p=>{const _=Math.floor((p-1)/7)*7;return(p+s.weekStartsOn+6)%7+_};switch(n){case"c":case"cc":return mo(no(n.length,e),h);case"co":return mo(r.ordinalNumber(e,{unit:"day"}),h);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=tk(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Jle(t,e,n){const r=Gn(t,n?.in),s=Cle(r,n),h=e-s;return Ah(r,h,n)}class ece extends qi{priority=90;parse(e,n,r){const s=h=>h===0?7:h;switch(n){case"i":case"ii":return no(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return mo(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return mo(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return mo(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return mo(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=Jle(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class tce extends qi{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(ek(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class nce extends qi{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(ek(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class rce extends qi{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(ek(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class ice extends qi{priority=70;parse(e,n,r){switch(n){case"h":return $s(po.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return no(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class sce extends qi{priority=70;parse(e,n,r){switch(n){case"H":return $s(po.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return no(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class oce extends qi{priority=70;parse(e,n,r){switch(n){case"K":return $s(po.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return no(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class ace extends qi{priority=70;parse(e,n,r){switch(n){case"k":return $s(po.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return no(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class lce extends qi{priority=60;parse(e,n,r){switch(n){case"m":return $s(po.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return no(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class cce extends qi{priority=50;parse(e,n,r){switch(n){case"s":return $s(po.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return no(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class uce extends qi{priority=30;parse(e,n){const r=s=>Math.trunc(s*Math.pow(10,-n.length+3));return mo(no(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class hce extends qi{priority=10;parse(e,n){switch(n){case"X":return Bd(Nd.basicOptionalMinutes,e);case"XX":return Bd(Nd.basic,e);case"XXXX":return Bd(Nd.basicOptionalSeconds,e);case"XXXXX":return Bd(Nd.extendedOptionalSeconds,e);case"XXX":default:return Bd(Nd.extended,e)}}set(e,n,r){return n.timestampIsSet?e:os(e,e.getTime()-NE(e)-r)}incompatibleTokens=["t","T","x"]}class dce extends qi{priority=10;parse(e,n){switch(n){case"x":return Bd(Nd.basicOptionalMinutes,e);case"xx":return Bd(Nd.basic,e);case"xxxx":return Bd(Nd.basicOptionalSeconds,e);case"xxxxx":return Bd(Nd.extendedOptionalSeconds,e);case"xxx":default:return Bd(Nd.extended,e)}}set(e,n,r){return n.timestampIsSet?e:os(e,e.getTime()-NE(e)-r)}incompatibleTokens=["t","T","X"]}class fce extends qi{priority=40;parse(e){return L6(e)}set(e,n,r){return[os(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class pce extends qi{priority=20;parse(e){return L6(e)}set(e,n,r){return[os(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const mce={G:new Ple,y:new Lle,Y:new Ole,R:new zle,u:new Nle,Q:new Ble,q:new Fle,M:new Vle,L:new Ule,w:new $le,I:new Hle,d:new Yle,D:new Xle,E:new Kle,e:new Zle,c:new Qle,i:new ece,a:new tce,b:new nce,B:new rce,h:new ice,H:new sce,K:new oce,k:new ace,m:new lce,s:new cce,S:new uce,X:new hce,x:new dce,t:new fce,T:new pce},gce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_ce=/^'([^]*?)'?$/,vce=/''/g,xce=/\S/,bce=/[a-zA-Z]/;function wce(t,e,n,r){const s=()=>os(r?.in||n,NaN),h=Sle(),p=r?.locale??h.locale??R6,_=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??h.firstWeekContainsDate??h.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??h.weekStartsOn??h.locale?.options?.weekStartsOn??0;if(!e)return t?s():Gn(n,r?.in);const T={firstWeekContainsDate:_,weekStartsOn:o,locale:p},I=[new kle(r?.in,n)],M=e.match(yce).map(X=>{const te=X[0];if(te in yM){const he=yM[te];return he(X,p.formatLong)}return X}).join("").match(gce),L=[];for(let X of M){const te=X[0],he=mce[te];if(he){const{incompatibleTokens:ie}=he;if(Array.isArray(ie)){const ge=L.find(Ee=>ie.includes(Ee.token)||Ee.token===te);if(ge)throw new RangeError(`The format string mustn't contain \`${ge.fullToken}\` and \`${X}\` at the same time`)}else if(he.incompatibleTokens==="*"&&L.length>0)throw new RangeError(`The format string mustn't contain \`${X}\` and any other token at the same time`);L.push({token:te,fullToken:X});const me=he.run(t,X,p.match,T);if(!me)return s();I.push(me.setter),t=me.rest}else{if(te.match(bce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+te+"`");if(X==="''"?X="'":te==="'"&&(X=Tce(X)),t.indexOf(X)===0)t=t.slice(X.length);else return s()}}if(t.length>0&&xce.test(t))return s();const F=I.map(X=>X.priority).sort((X,te)=>te-X).filter((X,te,he)=>he.indexOf(X)===te).map(X=>I.filter(te=>te.priority===X).sort((te,he)=>he.subPriority-te.subPriority)).map(X=>X[0]);let q=Gn(n,r?.in);if(isNaN(+q))return s();const $={};for(const X of F){if(!X.validate(q,T))return s();const te=X.set(q,$,T);Array.isArray(te)?(q=te[0],Object.assign($,te[1])):q=te}return q}function Tce(t){return t.match(_ce)[1].replace(vce,"'")}function Ece(t,e,n){const[r,s]=Cp(n?.in,t,e);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function Sce(t,e,n){const[r,s]=Cp(n?.in,t,e);return+gM(r)==+gM(s)}function Cce(t,e,n){const[r,s]=Cp(n?.in,t,e);return r.getFullYear()===s.getFullYear()}function qb(t,e,n){const r=+Gn(t,n?.in),[s,h]=[+Gn(e.start,n?.in),+Gn(e.end,n?.in)].sort((p,_)=>p-_);return r>=s&&r<=h}function Ace(t,e,n){return Ah(t,-1,n)}function Ice(t,e){const n=()=>os(e?.in,NaN),s=kce(t);let h;if(s.date){const T=Pce(s.date,2);h=Lce(T.restDateString,T.year)}if(!h||isNaN(+h))return n();const p=+h;let _=0,o;if(s.time&&(_=Oce(s.time),isNaN(_)))return n();if(s.timezone){if(o=zce(s.timezone),isNaN(o))return n()}else{const T=new Date(p+_),I=Gn(0,e?.in);return I.setFullYear(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate()),I.setHours(T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds()),I}return Gn(p+_+o,e?.in)}const dT={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Mce=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Rce=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Dce=/^([+-])(\d{2})(?::?(\d{2}))?$/;function kce(t){const e={},n=t.split(dT.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],dT.timeZoneDelimiter.test(e.date)&&(e.date=t.split(dT.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=dT.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Pce(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,h=r[2]?parseInt(r[2]):null;return{year:h===null?s:h*100,restDateString:t.slice((r[1]||r[2]).length)}}function Lce(t,e){if(e===null)return new Date(NaN);const n=t.match(Mce);if(!n)return new Date(NaN);const r=!!n[4],s=Fx(n[1]),h=Fx(n[2])-1,p=Fx(n[3]),_=Fx(n[4]),o=Fx(n[5])-1;if(r)return Uce(e,_,o)?Nce(e,_,o):new Date(NaN);{const T=new Date(0);return!Fce(e,h,p)||!Vce(e,s)?new Date(NaN):(T.setUTCFullYear(e,h,Math.max(s,p)),T)}}function Fx(t){return t?parseInt(t):1}function Oce(t){const e=t.match(Rce);if(!e)return NaN;const n=LA(e[1]),r=LA(e[2]),s=LA(e[3]);return jce(n,r,s)?n*WS+r*GS+s*1e3:NaN}function LA(t){return t&&parseFloat(t.replace(",","."))||0}function zce(t){if(t==="Z")return 0;const e=t.match(Dce);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return $ce(r,s)?n*(r*WS+s*GS):NaN}function Nce(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,h=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+h),r}const Bce=[31,null,31,30,31,30,31,31,30,31,30,31];function N6(t){return t%400===0||t%4===0&&t%100!==0}function Fce(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Bce[e]||(N6(t)?29:28))}function Vce(t,e){return e>=1&&e<=(N6(t)?366:365)}function Uce(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function jce(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function $ce(t,e){return e>=0&&e<=59}function Oc(t,e,n){const r=Gn(t,n?.in),s=r.getFullYear(),h=r.getDate(),p=os(t,0);p.setFullYear(s,e,15),p.setHours(0,0,0,0);const _=Ele(p);return r.setMonth(e,Math.min(h,_)),r}function $T(t,e,n){const r=Gn(t,n?.in);return r.setHours(e),r}function qT(t,e,n){const r=Gn(t,n?.in);return r.setMinutes(e),r}function sv(t,e,n){const r=Gn(t,n?.in),s=Math.trunc(r.getMonth()/3)+1,h=e-s;return Oc(r,r.getMonth()+h*3)}function HT(t,e,n){const r=Gn(t,n?.in);return r.setSeconds(e),r}function kd(t,e,n){const r=Gn(t,n?.in);return isNaN(+r)?os(t,NaN):(r.setFullYear(e),r)}function xy(t,e,n){return kh(t,-e,n)}function B6(t,e,n){return ZD(t,-1,n)}function Vz(t,e,n){return BE(t,-1,n)}function zv(t,e,n){return up(t,-e,n)}function XS(){return typeof window<"u"}function e0(t){return F6(t)?(t.nodeName||"").toLowerCase():"#document"}function Uc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function cf(t){var e;return(e=(F6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function F6(t){return XS()?t instanceof Node||t instanceof Uc(t).Node:!1}function Bl(t){return XS()?t instanceof Element||t instanceof Uc(t).Element:!1}function sf(t){return XS()?t instanceof HTMLElement||t instanceof Uc(t).HTMLElement:!1}function Uz(t){return!XS()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Uc(t).ShadowRoot}const qce=new Set(["inline","contents"]);function T1(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ku(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!qce.has(s)}const Hce=new Set(["table","td","th"]);function Gce(t){return Hce.has(e0(t))}const Wce=[":popover-open",":modal"];function KS(t){return Wce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Yce=["transform","translate","scale","rotate","perspective"],Xce=["transform","translate","scale","rotate","perspective","filter"],Kce=["paint","layout","strict","content"];function nk(t){const e=rk(),n=Bl(t)?ku(t):t;return Yce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Xce.some(r=>(n.willChange||"").includes(r))||Kce.some(r=>(n.contain||"").includes(r))}function Zce(t){let e=rg(t);for(;sf(e)&&!Nv(e);){if(nk(e))return e;if(KS(e))return null;e=rg(e)}return null}function rk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Qce=new Set(["html","body","#document"]);function Nv(t){return Qce.has(e0(t))}function ku(t){return Uc(t).getComputedStyle(t)}function ZS(t){return Bl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function rg(t){if(e0(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Uz(t)&&t.host||cf(t);return Uz(e)?e.host:e}function V6(t){const e=rg(t);return Nv(e)?t.ownerDocument?t.ownerDocument.body:t.body:sf(e)&&T1(e)?e:V6(e)}function Hb(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=V6(t),h=s===((r=t.ownerDocument)==null?void 0:r.body),p=Uc(s);if(h){const _=vM(p);return e.concat(p,p.visualViewport||[],T1(s)?s:[],_&&n?Hb(_):[])}return e.concat(s,Hb(s,[],n))}function vM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Bv=Math.min,by=Math.max,qE=Math.round,fT=Math.floor,nf=t=>({x:t,y:t}),Jce={left:"right",right:"left",bottom:"top",top:"bottom"},eue={start:"end",end:"start"};function tue(t,e,n){return by(t,Bv(e,n))}function QS(t,e){return typeof t=="function"?t(e):t}function Fv(t){return t.split("-")[0]}function E1(t){return t.split("-")[1]}function nue(t){return t==="x"?"y":"x"}function ik(t){return t==="y"?"height":"width"}const rue=new Set(["top","bottom"]);function py(t){return rue.has(Fv(t))?"y":"x"}function sk(t){return nue(py(t))}function iue(t,e,n){n===void 0&&(n=!1);const r=E1(t),s=sk(t),h=ik(s);let p=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[h]>e.floating[h]&&(p=HE(p)),[p,HE(p)]}function sue(t){const e=HE(t);return[xM(t),e,xM(e)]}function xM(t){return t.replace(/start|end/g,e=>eue[e])}const jz=["left","right"],$z=["right","left"],oue=["top","bottom"],aue=["bottom","top"];function lue(t,e,n){switch(t){case"top":case"bottom":return n?e?$z:jz:e?jz:$z;case"left":case"right":return e?oue:aue;default:return[]}}function cue(t,e,n,r){const s=E1(t);let h=lue(Fv(t),n==="start",r);return s&&(h=h.map(p=>p+"-"+s),e&&(h=h.concat(h.map(xM)))),h}function HE(t){return t.replace(/left|right|bottom|top/g,e=>Jce[e])}function uue(t){return{top:0,right:0,bottom:0,left:0,...t}}function U6(t){return typeof t!="number"?uue(t):{top:t,right:t,bottom:t,left:t}}function GE(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}var hue=typeof document<"u",due=function(){},WE=hue?H.useLayoutEffect:due;const fue={...vb},pue=fue.useInsertionEffect,mue=pue||(t=>t());function gue(t){const e=H.useRef(()=>{});return mue(()=>{e.current=t}),H.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function qz(t,e,n){let{reference:r,floating:s}=t;const h=py(e),p=sk(e),_=ik(p),o=Fv(e),T=h==="y",I=r.x+r.width/2-s.width/2,M=r.y+r.height/2-s.height/2,L=r[_]/2-s[_]/2;let F;switch(o){case"top":F={x:I,y:r.y-s.height};break;case"bottom":F={x:I,y:r.y+r.height};break;case"right":F={x:r.x+r.width,y:M};break;case"left":F={x:r.x-s.width,y:M};break;default:F={x:r.x,y:r.y}}switch(E1(e)){case"start":F[p]-=L*(n&&T?-1:1);break;case"end":F[p]+=L*(n&&T?-1:1);break}return F}const yue=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:h=[],platform:p}=n,_=h.filter(Boolean),o=await(p.isRTL==null?void 0:p.isRTL(e));let T=await p.getElementRects({reference:t,floating:e,strategy:s}),{x:I,y:M}=qz(T,r,o),L=r,F={},q=0;for(let $=0;$<_.length;$++){const{name:X,fn:te}=_[$],{x:he,y:ie,data:me,reset:ge}=await te({x:I,y:M,initialPlacement:r,placement:L,strategy:s,middlewareData:F,rects:T,platform:p,elements:{reference:t,floating:e}});I=he??I,M=ie??M,F={...F,[X]:{...F[X],...me}},ge&&q<=50&&(q++,typeof ge=="object"&&(ge.placement&&(L=ge.placement),ge.rects&&(T=ge.rects===!0?await p.getElementRects({reference:t,floating:e,strategy:s}):ge.rects),{x:I,y:M}=qz(T,L,o)),$=-1)}return{x:I,y:M,placement:L,strategy:s,middlewareData:F}};async function _ue(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:h,rects:p,elements:_,strategy:o}=t,{boundary:T="clippingAncestors",rootBoundary:I="viewport",elementContext:M="floating",altBoundary:L=!1,padding:F=0}=QS(e,t),q=U6(F),X=_[L?M==="floating"?"reference":"floating":M],te=GE(await h.getClippingRect({element:(n=await(h.isElement==null?void 0:h.isElement(X)))==null||n?X:X.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(_.floating)),boundary:T,rootBoundary:I,strategy:o})),he=M==="floating"?{x:r,y:s,width:p.floating.width,height:p.floating.height}:p.reference,ie=await(h.getOffsetParent==null?void 0:h.getOffsetParent(_.floating)),me=await(h.isElement==null?void 0:h.isElement(ie))?await(h.getScale==null?void 0:h.getScale(ie))||{x:1,y:1}:{x:1,y:1},ge=GE(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_,rect:he,offsetParent:ie,strategy:o}):he);return{top:(te.top-ge.top+q.top)/me.y,bottom:(ge.bottom-te.bottom+q.bottom)/me.y,left:(te.left-ge.left+q.left)/me.x,right:(ge.right-te.right+q.right)/me.x}}const vue=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:h,platform:p,elements:_,middlewareData:o}=e,{element:T,padding:I=0}=QS(t,e)||{};if(T==null)return{};const M=U6(I),L={x:n,y:r},F=sk(s),q=ik(F),$=await p.getDimensions(T),X=F==="y",te=X?"top":"left",he=X?"bottom":"right",ie=X?"clientHeight":"clientWidth",me=h.reference[q]+h.reference[F]-L[F]-h.floating[q],ge=L[F]-h.reference[F],Ee=await(p.getOffsetParent==null?void 0:p.getOffsetParent(T));let ce=Ee?Ee[ie]:0;(!ce||!await(p.isElement==null?void 0:p.isElement(Ee)))&&(ce=_.floating[ie]||h.floating[q]);const ee=me/2-ge/2,le=ce/2-$[q]/2-1,se=Bv(M[te],le),_e=Bv(M[he],le),Q=se,de=ce-$[q]-_e,Ve=ce/2-$[q]/2+ee,Ke=tue(Q,Ve,de),Ce=!o.arrow&&E1(s)!=null&&Ve!==Ke&&h.reference[q]/2-(Ve<Q?se:_e)-$[q]/2<0,Xe=Ce?Ve<Q?Ve-Q:Ve-de:0;return{[F]:L[F]+Xe,data:{[F]:Ke,centerOffset:Ve-Ke-Xe,...Ce&&{alignmentOffset:Xe}},reset:Ce}}}),xue=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:h,rects:p,initialPlacement:_,platform:o,elements:T}=e,{mainAxis:I=!0,crossAxis:M=!0,fallbackPlacements:L,fallbackStrategy:F="bestFit",fallbackAxisSideDirection:q="none",flipAlignment:$=!0,...X}=QS(t,e);if((n=h.arrow)!=null&&n.alignmentOffset)return{};const te=Fv(s),he=py(_),ie=Fv(_)===_,me=await(o.isRTL==null?void 0:o.isRTL(T.floating)),ge=L||(ie||!$?[HE(_)]:sue(_)),Ee=q!=="none";!L&&Ee&&ge.push(...cue(_,$,q,me));const ce=[_,...ge],ee=await _ue(e,X),le=[];let se=((r=h.flip)==null?void 0:r.overflows)||[];if(I&&le.push(ee[te]),M){const Ve=iue(s,p,me);le.push(ee[Ve[0]],ee[Ve[1]])}if(se=[...se,{placement:s,overflows:le}],!le.every(Ve=>Ve<=0)){var _e,Q;const Ve=(((_e=h.flip)==null?void 0:_e.index)||0)+1,Ke=ce[Ve];if(Ke&&(!(M==="alignment"?he!==py(Ke):!1)||se.every(tt=>py(tt.placement)===he?tt.overflows[0]>0:!0)))return{data:{index:Ve,overflows:se},reset:{placement:Ke}};let Ce=(Q=se.filter(Xe=>Xe.overflows[0]<=0).sort((Xe,tt)=>Xe.overflows[1]-tt.overflows[1])[0])==null?void 0:Q.placement;if(!Ce)switch(F){case"bestFit":{var de;const Xe=(de=se.filter(tt=>{if(Ee){const Be=py(tt.placement);return Be===he||Be==="y"}return!0}).map(tt=>[tt.placement,tt.overflows.filter(Be=>Be>0).reduce((Be,yt)=>Be+yt,0)]).sort((tt,Be)=>tt[1]-Be[1])[0])==null?void 0:de[0];Xe&&(Ce=Xe);break}case"initialPlacement":Ce=_;break}if(s!==Ce)return{reset:{placement:Ce}}}return{}}}},bue=new Set(["left","top"]);async function wue(t,e){const{placement:n,platform:r,elements:s}=t,h=await(r.isRTL==null?void 0:r.isRTL(s.floating)),p=Fv(n),_=E1(n),o=py(n)==="y",T=bue.has(p)?-1:1,I=h&&o?-1:1,M=QS(e,t);let{mainAxis:L,crossAxis:F,alignmentAxis:q}=typeof M=="number"?{mainAxis:M,crossAxis:0,alignmentAxis:null}:{mainAxis:M.mainAxis||0,crossAxis:M.crossAxis||0,alignmentAxis:M.alignmentAxis};return _&&typeof q=="number"&&(F=_==="end"?q*-1:q),o?{x:F*I,y:L*T}:{x:L*T,y:F*I}}const Tue=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:h,placement:p,middlewareData:_}=e,o=await wue(e,t);return p===((n=_.offset)==null?void 0:n.placement)&&(r=_.arrow)!=null&&r.alignmentOffset?{}:{x:s+o.x,y:h+o.y,data:{...o,placement:p}}}}};function j6(t){const e=ku(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=sf(t),h=s?t.offsetWidth:n,p=s?t.offsetHeight:r,_=qE(n)!==h||qE(r)!==p;return _&&(n=h,r=p),{width:n,height:r,$:_}}function ok(t){return Bl(t)?t:t.contextElement}function xv(t){const e=ok(t);if(!sf(e))return nf(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:h}=j6(e);let p=(h?qE(n.width):n.width)/r,_=(h?qE(n.height):n.height)/s;return(!p||!Number.isFinite(p))&&(p=1),(!_||!Number.isFinite(_))&&(_=1),{x:p,y:_}}const Eue=nf(0);function $6(t){const e=Uc(t);return!rk()||!e.visualViewport?Eue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Sue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Uc(t)?!1:e}function ky(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),h=ok(t);let p=nf(1);e&&(r?Bl(r)&&(p=xv(r)):p=xv(t));const _=Sue(h,n,r)?$6(h):nf(0);let o=(s.left+_.x)/p.x,T=(s.top+_.y)/p.y,I=s.width/p.x,M=s.height/p.y;if(h){const L=Uc(h),F=r&&Bl(r)?Uc(r):r;let q=L,$=vM(q);for(;$&&r&&F!==q;){const X=xv($),te=$.getBoundingClientRect(),he=ku($),ie=te.left+($.clientLeft+parseFloat(he.paddingLeft))*X.x,me=te.top+($.clientTop+parseFloat(he.paddingTop))*X.y;o*=X.x,T*=X.y,I*=X.x,M*=X.y,o+=ie,T+=me,q=Uc($),$=vM(q)}}return GE({width:I,height:M,x:o,y:T})}function JS(t,e){const n=ZS(t).scrollLeft;return e?e.left+n:ky(cf(t)).left+n}function q6(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-JS(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function Cue(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const h=s==="fixed",p=cf(r),_=e?KS(e.floating):!1;if(r===p||_&&h)return n;let o={scrollLeft:0,scrollTop:0},T=nf(1);const I=nf(0),M=sf(r);if((M||!M&&!h)&&((e0(r)!=="body"||T1(p))&&(o=ZS(r)),sf(r))){const F=ky(r);T=xv(r),I.x=F.x+r.clientLeft,I.y=F.y+r.clientTop}const L=p&&!M&&!h?q6(p,o):nf(0);return{width:n.width*T.x,height:n.height*T.y,x:n.x*T.x-o.scrollLeft*T.x+I.x+L.x,y:n.y*T.y-o.scrollTop*T.y+I.y+L.y}}function Aue(t){return Array.from(t.getClientRects())}function Iue(t){const e=cf(t),n=ZS(t),r=t.ownerDocument.body,s=by(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),h=by(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let p=-n.scrollLeft+JS(t);const _=-n.scrollTop;return ku(r).direction==="rtl"&&(p+=by(e.clientWidth,r.clientWidth)-s),{width:s,height:h,x:p,y:_}}const Hz=25;function Mue(t,e){const n=Uc(t),r=cf(t),s=n.visualViewport;let h=r.clientWidth,p=r.clientHeight,_=0,o=0;if(s){h=s.width,p=s.height;const I=rk();(!I||I&&e==="fixed")&&(_=s.offsetLeft,o=s.offsetTop)}const T=JS(r);if(T<=0){const I=r.ownerDocument,M=I.body,L=getComputedStyle(M),F=I.compatMode==="CSS1Compat"&&parseFloat(L.marginLeft)+parseFloat(L.marginRight)||0,q=Math.abs(r.clientWidth-M.clientWidth-F);q<=Hz&&(h-=q)}else T<=Hz&&(h+=T);return{width:h,height:p,x:_,y:o}}const Rue=new Set(["absolute","fixed"]);function Due(t,e){const n=ky(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,h=sf(t)?xv(t):nf(1),p=t.clientWidth*h.x,_=t.clientHeight*h.y,o=s*h.x,T=r*h.y;return{width:p,height:_,x:o,y:T}}function Gz(t,e,n){let r;if(e==="viewport")r=Mue(t,n);else if(e==="document")r=Iue(cf(t));else if(Bl(e))r=Due(e,n);else{const s=$6(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return GE(r)}function H6(t,e){const n=rg(t);return n===e||!Bl(n)||Nv(n)?!1:ku(n).position==="fixed"||H6(n,e)}function kue(t,e){const n=e.get(t);if(n)return n;let r=Hb(t,[],!1).filter(_=>Bl(_)&&e0(_)!=="body"),s=null;const h=ku(t).position==="fixed";let p=h?rg(t):t;for(;Bl(p)&&!Nv(p);){const _=ku(p),o=nk(p);!o&&_.position==="fixed"&&(s=null),(h?!o&&!s:!o&&_.position==="static"&&!!s&&Rue.has(s.position)||T1(p)&&!o&&H6(t,p))?r=r.filter(I=>I!==p):s=_,p=rg(p)}return e.set(t,r),r}function Pue(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const p=[...n==="clippingAncestors"?KS(e)?[]:kue(e,this._c):[].concat(n),r],_=p[0],o=p.reduce((T,I)=>{const M=Gz(e,I,s);return T.top=by(M.top,T.top),T.right=Bv(M.right,T.right),T.bottom=Bv(M.bottom,T.bottom),T.left=by(M.left,T.left),T},Gz(e,_,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function Lue(t){const{width:e,height:n}=j6(t);return{width:e,height:n}}function Oue(t,e,n){const r=sf(e),s=cf(e),h=n==="fixed",p=ky(t,!0,h,e);let _={scrollLeft:0,scrollTop:0};const o=nf(0);function T(){o.x=JS(s)}if(r||!r&&!h)if((e0(e)!=="body"||T1(s))&&(_=ZS(e)),r){const F=ky(e,!0,h,e);o.x=F.x+e.clientLeft,o.y=F.y+e.clientTop}else s&&T();h&&!r&&s&&T();const I=s&&!r&&!h?q6(s,_):nf(0),M=p.left+_.scrollLeft-o.x-I.x,L=p.top+_.scrollTop-o.y-I.y;return{x:M,y:L,width:p.width,height:p.height}}function OA(t){return ku(t).position==="static"}function Wz(t,e){if(!sf(t)||ku(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return cf(t)===n&&(n=n.ownerDocument.body),n}function G6(t,e){const n=Uc(t);if(KS(t))return n;if(!sf(t)){let s=rg(t);for(;s&&!Nv(s);){if(Bl(s)&&!OA(s))return s;s=rg(s)}return n}let r=Wz(t,e);for(;r&&Gce(r)&&OA(r);)r=Wz(r,e);return r&&Nv(r)&&OA(r)&&!nk(r)?n:r||Zce(t)||n}const zue=async function(t){const e=this.getOffsetParent||G6,n=this.getDimensions,r=await n(t.floating);return{reference:Oue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Nue(t){return ku(t).direction==="rtl"}const Bue={convertOffsetParentRelativeRectToViewportRelativeRect:Cue,getDocumentElement:cf,getClippingRect:Pue,getOffsetParent:G6,getElementRects:zue,getClientRects:Aue,getDimensions:Lue,getScale:xv,isElement:Bl,isRTL:Nue};function W6(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Fue(t,e){let n=null,r;const s=cf(t);function h(){var _;clearTimeout(r),(_=n)==null||_.disconnect(),n=null}function p(_,o){_===void 0&&(_=!1),o===void 0&&(o=1),h();const T=t.getBoundingClientRect(),{left:I,top:M,width:L,height:F}=T;if(_||e(),!L||!F)return;const q=fT(M),$=fT(s.clientWidth-(I+L)),X=fT(s.clientHeight-(M+F)),te=fT(I),ie={rootMargin:-q+"px "+-$+"px "+-X+"px "+-te+"px",threshold:by(0,Bv(1,o))||1};let me=!0;function ge(Ee){const ce=Ee[0].intersectionRatio;if(ce!==o){if(!me)return p();ce?p(!1,ce):r=setTimeout(()=>{p(!1,1e-7)},1e3)}ce===1&&!W6(T,t.getBoundingClientRect())&&p(),me=!1}try{n=new IntersectionObserver(ge,{...ie,root:s.ownerDocument})}catch{n=new IntersectionObserver(ge,ie)}n.observe(t)}return p(!0),h}function Vue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:h=!0,elementResize:p=typeof ResizeObserver=="function",layoutShift:_=typeof IntersectionObserver=="function",animationFrame:o=!1}=r,T=ok(t),I=s||h?[...T?Hb(T):[],...Hb(e)]:[];I.forEach(te=>{s&&te.addEventListener("scroll",n,{passive:!0}),h&&te.addEventListener("resize",n)});const M=T&&_?Fue(T,n):null;let L=-1,F=null;p&&(F=new ResizeObserver(te=>{let[he]=te;he&&he.target===T&&F&&(F.unobserve(e),cancelAnimationFrame(L),L=requestAnimationFrame(()=>{var ie;(ie=F)==null||ie.observe(e)})),n()}),T&&!o&&F.observe(T),F.observe(e));let q,$=o?ky(t):null;o&&X();function X(){const te=ky(t);$&&!W6($,te)&&n(),$=te,q=requestAnimationFrame(X)}return n(),()=>{var te;I.forEach(he=>{s&&he.removeEventListener("scroll",n),h&&he.removeEventListener("resize",n)}),M?.(),(te=F)==null||te.disconnect(),F=null,o&&cancelAnimationFrame(q)}}const Uue=Tue,jue=xue,Yz=vue,$ue=(t,e,n)=>{const r=new Map,s={platform:Bue,...n},h={...s.platform,_c:r};return yue(t,e,{...s,platform:h})};var que=typeof document<"u",Hue=function(){},GT=que?H.useLayoutEffect:Hue;function YE(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!YE(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const h=s[r];if(!(h==="_owner"&&t.$$typeof)&&!YE(t[h],e[h]))return!1}return!0}return t!==t&&e!==e}function Y6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Xz(t,e){const n=Y6(t);return Math.round(e*n)/n}function zA(t){const e=H.useRef(t);return GT(()=>{e.current=t}),e}function Gue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:h,floating:p}={},transform:_=!0,whileElementsMounted:o,open:T}=t,[I,M]=H.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[L,F]=H.useState(r);YE(L,r)||F(r);const[q,$]=H.useState(null),[X,te]=H.useState(null),he=H.useCallback(tt=>{tt!==Ee.current&&(Ee.current=tt,$(tt))},[]),ie=H.useCallback(tt=>{tt!==ce.current&&(ce.current=tt,te(tt))},[]),me=h||q,ge=p||X,Ee=H.useRef(null),ce=H.useRef(null),ee=H.useRef(I),le=o!=null,se=zA(o),_e=zA(s),Q=zA(T),de=H.useCallback(()=>{if(!Ee.current||!ce.current)return;const tt={placement:e,strategy:n,middleware:L};_e.current&&(tt.platform=_e.current),$ue(Ee.current,ce.current,tt).then(Be=>{const yt={...Be,isPositioned:Q.current!==!1};Ve.current&&!YE(ee.current,yt)&&(ee.current=yt,zM.flushSync(()=>{M(yt)}))})},[L,e,n,_e,Q]);GT(()=>{T===!1&&ee.current.isPositioned&&(ee.current.isPositioned=!1,M(tt=>({...tt,isPositioned:!1})))},[T]);const Ve=H.useRef(!1);GT(()=>(Ve.current=!0,()=>{Ve.current=!1}),[]),GT(()=>{if(me&&(Ee.current=me),ge&&(ce.current=ge),me&&ge){if(se.current)return se.current(me,ge,de);de()}},[me,ge,de,se,le]);const Ke=H.useMemo(()=>({reference:Ee,floating:ce,setReference:he,setFloating:ie}),[he,ie]),Ce=H.useMemo(()=>({reference:me,floating:ge}),[me,ge]),Xe=H.useMemo(()=>{const tt={position:n,left:0,top:0};if(!Ce.floating)return tt;const Be=Xz(Ce.floating,I.x),yt=Xz(Ce.floating,I.y);return _?{...tt,transform:"translate("+Be+"px, "+yt+"px)",...Y6(Ce.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Be,top:yt}},[n,_,Ce.floating,I.x,I.y]);return H.useMemo(()=>({...I,update:de,refs:Ke,elements:Ce,floatingStyles:Xe}),[I,de,Ke,Ce,Xe])}const Wue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Yz({element:r.current,padding:s}).fn(n):{}:r?Yz({element:r,padding:s}).fn(n):{}}}},Yue=(t,e)=>({...Uue(t),options:[t,e]}),Xue=(t,e)=>({...jue(t),options:[t,e]}),Kue=(t,e)=>({...Wue(t),options:[t,e]}),Zue={...vb};let Kz=!1,Que=0;const Zz=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Que++;function Jue(){const[t,e]=H.useState(()=>Kz?Zz():void 0);return WE(()=>{t==null&&e(Zz())},[]),H.useEffect(()=>{Kz=!0},[]),t}const ehe=Zue.useId,X6=ehe||Jue,the=H.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:h,shift:p}},width:_=14,height:o=7,tipRadius:T=0,strokeWidth:I=0,staticOffset:M,stroke:L,d:F,style:{transform:q,...$}={},...X}=e,te=X6(),[he,ie]=H.useState(!1);if(WE(()=>{if(!s)return;ku(s).direction==="rtl"&&ie(!0)},[s]),!s)return null;const[me,ge]=r.split("-"),Ee=me==="top"||me==="bottom";let ce=M;(Ee&&p!=null&&p.x||!Ee&&p!=null&&p.y)&&(ce=null);const ee=I*2,le=ee/2,se=_/2*(T/-8+1),_e=o/2*T/4,Q=!!F,de=ce&&ge==="end"?"bottom":"top";let Ve=ce&&ge==="end"?"right":"left";ce&&he&&(Ve=ge==="end"?"left":"right");const Ke=h?.x!=null?ce||h.x:"",Ce=h?.y!=null?ce||h.y:"",Xe=F||"M0,0"+(" H"+_)+(" L"+(_-se)+","+(o-_e))+(" Q"+_/2+","+o+" "+se+","+(o-_e))+" Z",tt={top:Q?"rotate(180deg)":"",left:Q?"rotate(90deg)":"rotate(-90deg)",bottom:Q?"":"rotate(180deg)",right:Q?"rotate(-90deg)":"rotate(90deg)"}[me];return V.jsxs("svg",{...X,"aria-hidden":!0,ref:n,width:Q?_:_+ee,height:_,viewBox:"0 0 "+_+" "+(o>_?o:_),style:{position:"absolute",pointerEvents:"none",[Ve]:Ke,[de]:Ce,[me]:Ee||Q?"100%":"calc(100% - "+ee/2+"px)",transform:[tt,q].filter(Be=>!!Be).join(" "),...$},children:[ee>0&&V.jsx("path",{clipPath:"url(#"+te+")",fill:"none",stroke:L,strokeWidth:ee+(F?0:1),d:Xe}),V.jsx("path",{stroke:ee&&!F?X.fill:"none",d:Xe}),V.jsx("clipPath",{id:te,children:V.jsx("rect",{x:-le,y:le*(Q?-1:1),width:_+ee,height:_})})]})});function nhe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const rhe=H.createContext(null),ihe=H.createContext(null),she=()=>{var t;return((t=H.useContext(rhe))==null?void 0:t.id)||null},ohe=()=>H.useContext(ihe);function ahe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=X6(),h=H.useRef({}),[p]=H.useState(()=>nhe()),_=she()!=null,[o,T]=H.useState(r.reference),I=gue((F,q,$)=>{h.current.openEvent=F?q:void 0,p.emit("openchange",{open:F,event:q,reason:$,nested:_}),n?.(F,q,$)}),M=H.useMemo(()=>({setPositionReference:T}),[]),L=H.useMemo(()=>({reference:o||r.reference||null,floating:r.floating||null,domReference:r.reference}),[o,r.reference,r.floating]);return H.useMemo(()=>({dataRef:h,open:e,onOpenChange:I,elements:L,events:p,floatingId:s,refs:M}),[e,I,L,p,s,M])}function lhe(t){t===void 0&&(t={});const{nodeId:e}=t,n=ahe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[h,p]=H.useState(null),[_,o]=H.useState(null),I=s?.domReference||h,M=H.useRef(null),L=ohe();WE(()=>{I&&(M.current=I)},[I]);const F=Gue({...t,elements:{...s,..._&&{reference:_}}}),q=H.useCallback(ie=>{const me=Bl(ie)?{getBoundingClientRect:()=>ie.getBoundingClientRect(),getClientRects:()=>ie.getClientRects(),contextElement:ie}:ie;o(me),F.refs.setReference(me)},[F.refs]),$=H.useCallback(ie=>{(Bl(ie)||ie===null)&&(M.current=ie,p(ie)),(Bl(F.refs.reference.current)||F.refs.reference.current===null||ie!==null&&!Bl(ie))&&F.refs.setReference(ie)},[F.refs]),X=H.useMemo(()=>({...F.refs,setReference:$,setPositionReference:q,domReference:M}),[F.refs,$,q]),te=H.useMemo(()=>({...F.elements,domReference:I}),[F.elements,I]),he=H.useMemo(()=>({...F,...r,refs:X,elements:te,nodeId:e}),[F,X,te,e,r]);return WE(()=>{r.dataRef.current.floatingContext=he;const ie=L?.nodesRef.current.find(me=>me.id===e);ie&&(ie.context=he)}),H.useMemo(()=>({...F,context:he,refs:X,elements:te}),[F,X,te,he])}var bM=function(e,n){return bM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(r[h]=s[h])},bM(e,n)};function za(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bM(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var li=function(){return li=Object.assign||function(n){for(var r,s=1,h=arguments.length;s<h;s++){r=arguments[s];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(n[p]=r[p])}return n},li.apply(this,arguments)};function jd(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,h;r<s;r++)(h||!(r in e))&&(h||(h=Array.prototype.slice.call(e,0,r)),h[r]=e[r]);return t.concat(h||Array.prototype.slice.call(e))}var che=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,r=t.showTime,s=r===void 0?!1:r,h=t.className,p=t.children,_=t.inline,o=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return Ct.createElement("div",{className:h,"aria-label":o,role:_?void 0:"dialog","aria-modal":_?void 0:"true"},p)},uhe=function(t,e){var n=H.useRef(null),r=H.useRef(t);H.useEffect(function(){r.current=t},[t]);var s=H.useCallback(function(h){var p,_=h.composed&&h.composedPath&&h.composedPath().find(function(o){return o instanceof Node})||h.target;n.current&&!n.current.contains(_)&&(e&&_ instanceof HTMLElement&&_.classList.contains(e)||(p=r.current)===null||p===void 0||p.call(r,h))},[e]);return H.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},eC=function(t){var e=t.children,n=t.onClickOutside,r=t.className,s=t.containerRef,h=t.style,p=t.ignoreClass,_=uhe(n,p);return Ct.createElement("div",{className:r,style:h,ref:function(o){_.current=o,s&&(s.current=o)}},e)},Cn;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(Cn||(Cn={}));function K6(){var t=typeof window<"u"?window:globalThis;return t}var S1=12;function Zi(t){if(t==null)return new Date;var e=typeof t=="string"?Ice(t):Gn(t);return Fd(e)?e:new Date}function NA(t,e,n,r,s){s===void 0&&(s=Zi());for(var h=Vv(n)||Vv(ak()),p=Array.isArray(e)?e:[e],_=0,o=p;_<o.length;_++){var T=o[_],I=wce(t,T,s,{locale:h});if(Fd(I)&&(!r||t===Ps(I,T,n)))return I}return null}function Fd(t,e){return FE(t)&&!Ud(t,new Date("1/1/1800"))}function Ps(t,e,n){if(n==="en")return Bz(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Vv(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),r=r||Vv(ak()),Bz(t,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Lc(t,e){var n=e.dateFormat,r=e.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return t&&Ps(t,s,r)||""}var Z6=" - ";function hhe(t,e,n){if(!t&&!e)return"";var r=t?Lc(t,n):"",s=e?Lc(e,n):"",h=n.rangeSeparator||Z6;return"".concat(r).concat(h).concat(s)}function dhe(t,e){if(!t?.length)return"";var n=t[0]?Lc(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var r=Lc(t[1],e);return"".concat(n,", ").concat(r)}var s=t.length-1;return"".concat(n," (+").concat(s,")")}function BA(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,h=s===void 0?0:s,p=e.second,_=p===void 0?0:p;return $T(qT(HT(t,_),h),r)}function fhe(t){return QD(t)}function phe(t,e){return Ps(t,"ddd",e)}function WT(t){return Dy(t)}function Um(t,e,n){var r=Vv(e||ak());return Ep(t,{locale:r,weekStartsOn:n})}function pp(t){return I6(t)}function eb(t){return YS(t)}function Qz(t){return gM(t)}function Jz(){return Dy(Zi())}function eN(t){return C6(t)}function mhe(t){return Iae(t)}function ghe(t){return A6(t)}function Od(t,e){return t&&e?Cce(t,e):!t&&!e}function zl(t,e){return t&&e?Ece(t,e):!t&&!e}function XE(t,e){return t&&e?Sce(t,e):!t&&!e}function ai(t,e){return t&&e?Cae(t,e):!t&&!e}function my(t,e){return t&&e?Ale(t,e):!t&&!e}function ly(t,e,n){var r,s=Dy(e),h=C6(n);try{r=qb(t,{start:s,end:h})}catch{r=!1}return r}function ak(){var t=K6();return t.__localeId__}function Vv(t){if(typeof t=="string"){var e=K6();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function yhe(t,e,n){return e(Ps(t,"EEEE",n))}function _he(t,e){return Ps(t,"EEEEEE",e)}function vhe(t,e){return Ps(t,"EEE",e)}function lk(t,e){return Ps(Oc(Zi(),t),"LLLL",e)}function Q6(t,e){return Ps(Oc(Zi(),t),"LLL",e)}function xhe(t,e){return Ps(sv(Zi(),t),"QQQ",e)}function Su(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,h=n.excludeDates,p=n.excludeDateIntervals,_=n.includeDates,o=n.includeDateIntervals,T=n.filterDate,I=n.disabled;return I?!0:C1(t,{minDate:r,maxDate:s})||h&&h.some(function(M){return M instanceof Date?ai(t,M):ai(t,M.date)})||p&&p.some(function(M){var L=M.start,F=M.end;return qb(t,{start:L,end:F})})||_&&!_.some(function(M){return ai(t,M)})||o&&!o.some(function(M){var L=M.start,F=M.end;return qb(t,{start:L,end:F})})||T&&!T(Zi(t))||!1}function ck(t,e){var n=e===void 0?{}:e,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(h){var p=h.start,_=h.end;return qb(t,{start:p,end:_})}):r&&r.some(function(h){var p;return h instanceof Date?ai(t,h):ai(t,(p=h.date)!==null&&p!==void 0?p:new Date)})||!1}function J6(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,h=n.excludeDates,p=n.includeDates,_=n.filterDate;return C1(t,{minDate:r?I6(r):void 0,maxDate:s?A6(s):void 0})||h?.some(function(o){return zl(t,o instanceof Date?o:o.date)})||p&&!p.some(function(o){return zl(t,o)})||_&&!_(Zi(t))||!1}function pT(t,e,n,r){var s=qr(t),h=fl(t),p=qr(e),_=fl(e),o=qr(r);return s===p&&s===o?h<=n&&n<=_:s<p?o===s&&h<=n||o===p&&_>=n||o<p&&o>s:!1}function bhe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,h=n.excludeDates,p=n.includeDates;return C1(t,{minDate:r,maxDate:s})||h&&h.some(function(_){return zl(_ instanceof Date?_:_.date,t)})||p&&!p.some(function(_){return zl(_,t)})||!1}function mT(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,h=n.excludeDates,p=n.includeDates,_=n.filterDate,o=n.disabled;return o?!0:C1(t,{minDate:r,maxDate:s})||h?.some(function(T){return XE(t,T instanceof Date?T:T.date)})||p&&!p.some(function(T){return XE(t,T)})||_&&!_(Zi(t))||!1}function gT(t,e,n){if(!e||!n||!FE(e)||!FE(n))return!1;var r=qr(e),s=qr(n);return r<=t&&s>=t}function YT(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,h=n.excludeDates,p=n.includeDates,_=n.filterDate,o=n.disabled;if(o)return!0;var T=new Date(t,0,1);return C1(T,{minDate:r?YS(r):void 0,maxDate:s?M6(s):void 0})||h?.some(function(I){return Od(T,I instanceof Date?I:I.date)})||p&&!p.some(function(I){return Od(T,I)})||_&&!_(Zi(T))||!1}function yT(t,e,n,r){var s=qr(t),h=Pm(t),p=qr(e),_=Pm(e),o=qr(r);return s===p&&s===o?h<=n&&n<=_:s<p?o===s&&h<=n||o===p&&_>=n||o<p&&o>s:!1}function C1(t,e){var n,r=e===void 0?{}:e,s=r.minDate,h=r.maxDate;return(n=s&&Ov(t,s)<0||h&&Ov(t,h)>0)!==null&&n!==void 0?n:!1}function tN(t,e){return e.some(function(n){return dp(n)===dp(t)&&fp(n)===fp(t)&&Vm(n)===Vm(t)})}function nN(t,e){var n=e===void 0?{}:e,r=n.excludeTimes,s=n.includeTimes,h=n.filterTime;return r&&tN(t,r)||s&&!tN(t,s)||h&&!h(t)||!1}function rN(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=Zi();s=$T(s,dp(t)),s=qT(s,fp(t)),s=HT(s,Vm(t));var h=Zi();h=$T(h,dp(n)),h=qT(h,fp(n)),h=HT(h,Vm(n));var p=Zi();p=$T(p,dp(r)),p=qT(p,fp(r)),p=HT(p,Vm(r));var _;try{_=!qb(s,{start:h,end:p})}catch{_=!1}return _}function iN(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,h=xy(t,1);return r&&VE(r,h)>0||s&&s.every(function(p){return VE(p,h)>0})||!1}function sN(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,h=kh(t,1);return r&&VE(h,r)>0||s&&s.every(function(p){return VE(h,p)>0})||!1}function whe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,h=YS(t),p=B6(h);return r&&UE(r,p)>0||s&&s.every(function(_){return UE(_,p)>0})||!1}function The(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,h=M6(t),p=ZD(h,1);return r&&UE(p,r)>0||s&&s.every(function(_){return UE(p,_)>0})||!1}function oN(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,h=zv(t,1);return r&&jE(r,h)>0||s&&s.every(function(p){return jE(p,h)>0})||!1}function Ehe(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.yearItemNumber,h=s===void 0?S1:s,p=eb(zv(t,h)),_=op(p,h).endPeriod,o=r&&qr(r);return o&&o>_||!1}function aN(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,h=up(t,1);return r&&jE(h,r)>0||s&&s.every(function(p){return jE(h,p)>0})||!1}function She(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.yearItemNumber,h=s===void 0?S1:s,p=up(t,h),_=op(p,h).startPeriod,o=r&&qr(r);return o&&o<_||!1}function eU(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return Ov(s,e)>=0});return kz(r)}else return n?kz(n):e}function tU(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return Ov(s,e)<=0});return Dz(r)}else return n?Dz(n):e}function lN(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,s=0,h=t.length;s<h;s++){var p=t[s];if(hp(p)){var _=Ps(p,"MM.dd.yyyy"),o=r.get(_)||[];o.includes(e)||(o.push(e),r.set(_,o))}else if(typeof p=="object"){var T=Object.keys(p),I=(n=T[0])!==null&&n!==void 0?n:"",M=p[I];if(typeof I=="string"&&Array.isArray(M))for(var L=0,F=M.length;L<F;L++){var q=M[L];if(q){var _=Ps(q,"MM.dd.yyyy"),o=r.get(_)||[];o.includes(I)||(o.push(I),r.set(_,o))}}}}return r}function Che(t,e){return t.length!==e.length?!1:t.every(function(n,r){return n===e[r]})}function Ahe(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(r){var s=r.date,h=r.holidayName;if(hp(s)){var p=Ps(s,"MM.dd.yyyy"),_=n.get(p)||{className:"",holidayNames:[]};if(!("className"in _&&_.className===e&&Che(_.holidayNames,[h]))){_.className=e;var o=_.holidayNames;_.holidayNames=o?jd(jd([],o,!0),[h],!1):[h],n.set(p,_)}}}),n}function Ihe(t,e,n,r,s){for(var h=s.length,p=[],_=0;_<h;_++){var o=t,T=s[_];T&&(o=wae(o,dp(T)),o=mM(o,fp(T)),o=Sae(o,Vm(T)));var I=mM(t,(n+1)*r);ng(o,e)&&Ud(o,I)&&T!=null&&p.push(T)}return p}function cN(t){return t<10?"0".concat(t):"".concat(t)}function op(t,e){e===void 0&&(e=S1);var n=Math.ceil(qr(t)/e)*e,r=n-(e-1);return{startPeriod:r,endPeriod:n}}function Mhe(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function uN(t){var e=t.getSeconds(),n=t.getMilliseconds();return Gn(t.getTime()-e*1e3-n)}function Rhe(t,e){return uN(t).getTime()===uN(e).getTime()}function hN(t){if(!hp(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function FA(t,e){if(!hp(t)||!hp(e))throw new Error("Invalid date received");var n=hN(t),r=hN(e);return Ud(n,r)}function nU(t){return t.key===Cn.Space}var Dhe=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.inputRef=Ct.createRef(),r.onTimeChange=function(s){var h,p;r.setState({time:s});var _=r.props.date,o=_ instanceof Date&&!isNaN(+_),T=o?_:new Date;if(s?.includes(":")){var I=s.split(":"),M=I[0],L=I[1];T.setHours(Number(M)),T.setMinutes(Number(L))}(p=(h=r.props).onChange)===null||p===void 0||p.call(h,T)},r.renderTimeInput=function(){var s=r.state.time,h=r.props,p=h.date,_=h.timeString,o=h.customTimeInput;return o?H.cloneElement(o,{date:p,value:s,onChange:r.onTimeChange}):Ct.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var T;(T=r.inputRef.current)===null||T===void 0||T.focus()},required:!0,value:s,onChange:function(T){r.onTimeChange(T.target.value||_)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},e.prototype.render=function(){return Ct.createElement("div",{className:"react-datepicker__input-time-container"},Ct.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Ct.createElement("div",{className:"react-datepicker-time__input-container"},Ct.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(H.Component),khe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=H.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,h,p=r.key;p===Cn.Space&&(r.preventDefault(),r.key=Cn.Enter),(h=(s=n.props).handleOnKeyDown)===null||h===void 0||h.call(s,r)},n.isSameDay=function(r){return ai(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(p){return n.isSameDayOrWeek(p)}):n.isSameDayOrWeek(n.props.selected),h=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!h},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Su(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(){return ck(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return ai(n.props.day,Um(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&ai(r,Um(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,h=r.highlightDates;if(!h)return!1;var p=Ps(s,"MM.dd.yyyy");return h.get(p)},n.getHolidaysClass=function(){var r,s=n.props,h=s.day,p=s.holidays;if(!p)return[void 0];var _=Ps(h,"MM.dd.yyyy");return p.has(_)?[(r=p.get(_))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,h=r.startDate,p=r.endDate;return!h||!p?!1:ly(s,h,p)},n.isInSelectingRange=function(){var r,s=n.props,h=s.day,p=s.selectsStart,_=s.selectsEnd,o=s.selectsRange,T=s.selectsDisabledDaysInRange,I=s.startDate,M=s.swapRange,L=s.endDate,F=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;if(!(p||_||o)||!F||!T&&n.isDisabled())return!1;if(p&&L&&(Ud(F,L)||my(F,L)))return ly(h,F,L);if(_&&I&&(ng(F,I)||my(F,I)))return ly(h,I,F);if(o&&I&&!L){if(my(F,I)||ng(F,I))return ly(h,I,F);if(M&&Ud(F,I))return ly(h,F,I)}return!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,h=s.day,p=s.startDate,_=s.selectsStart,o=s.swapRange,T=s.selectsRange,I=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return _?ai(h,I):T&&o&&p&&I?ai(h,Ud(I,p)?I:p):ai(h,p)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,h=s.day,p=s.endDate,_=s.selectsEnd,o=s.selectsRange,T=s.swapRange,I=s.startDate,M=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return _?ai(h,M):o&&T&&I&&M?ai(h,Ud(M,I)?I:M):o?ai(h,M):ai(h,p)},n.isRangeStart=function(){var r=n.props,s=r.day,h=r.startDate,p=r.endDate;return!h||!p?!1:ai(h,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,h=r.startDate,p=r.endDate;return!h||!p?!1:ai(p,s)},n.isWeekend=function(){var r=Tle(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===fl(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(fl(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(Zi())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return pn("react-datepicker__day",s,"react-datepicker__day--"+phe(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,h=r.ariaLabelPrefixWhenEnabled,p=h===void 0?"Choose":h,_=r.ariaLabelPrefixWhenDisabled,o=_===void 0?"Not available":_,T=n.isDisabled()||n.isExcluded()?o:p;return"".concat(T," ").concat(Ps(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,h=r.holidays,p=h===void 0?new Map:h,_=r.excludeDates,o=Ps(s,"MM.dd.yyyy"),T=[];return p.has(o)&&T.push.apply(T,p.get(o).holidayNames),n.isExcluded()&&T.push(_?.filter(function(I){return I instanceof Date?ai(I,s):ai(I?.date,s)}).map(function(I){if(!(I instanceof Date))return I?.message})),T.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,h=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&ai(s,r))?0:-1;return h},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(Fz(n.props.day),n.props.day):Fz(n.props.day)},n.render=function(){return Ct.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"gridcell",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&Ct.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(H.Component),Phe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=H.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,h,p=r.key;p===Cn.Space&&(r.preventDefault(),r.key=Cn.Enter),(h=(s=n.props).handleOnKeyDown)===null||h===void 0||h.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!ai(n.props.date,n.props.selected)&&ai(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||ai(n.props.date,n.props.selected)&&ai(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!r?.isInputFocused&&ai(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,h=n.ariaLabelPrefix,p=h===void 0?e.defaultProps.ariaLabelPrefix:h,_=n.onClick,o={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!_&&!s,"react-datepicker__week-number--selected":!!_&&ai(this.props.date,this.props.selected)};return Ct.createElement("div",{ref:this.weekNumberEl,className:pn(o),"aria-label":"".concat(p," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},e})(H.Component),Lhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(r){return Su(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,h){for(var p,_,o,T=new Date(r),I=0;I<7;I++){var M=new Date(r);M.setDate(M.getDate()+I);var L=!n.isDisabled(M);if(L){T=M;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(T,s,h),n.props.showWeekPicker&&n.handleDayClick(T,h),((p=n.props.shouldCloseOnSelect)!==null&&p!==void 0?p:e.defaultProps.shouldCloseOnSelect)&&((o=(_=n.props).setOpen)===null||o===void 0||o.call(_,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):fhe(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=Ah(r,6),h=new Date(r);h<=s;){if(!n.isDisabled(h))return!1;h=Ah(h,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],h=n.formatWeekNumber(r);if(n.props.showWeekNumber){var p=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,h):void 0;s.push(Ct.createElement(Phe,li({key:"W"},e.defaultProps,n.props,{weekNumber:h,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:p})))}return s.concat([0,1,2,3,4,5,6].map(function(_){var o=Ah(r,_);return Ct.createElement(khe,li({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:o.valueOf(),day:o,onClick:n.handleDayClick.bind(n,o),onMouseEnter:n.handleDayMouseEnter.bind(n,o)}))}))},n.startOfWeek=function(){return Um(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!ai(n.startOfWeek(),n.props.selected)&&ai(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":ai(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Ct.createElement("div",{className:pn(n,r),role:"row"},this.renderDays())},e})(H.Component),Vx,Ohe=6,bv={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},VA=(Vx={},Vx[bv.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Vx[bv.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Vx[bv.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Vx),_T=1;function dN(t,e){return t?bv.FOUR_COLUMNS:e?bv.TWO_COLUMNS:bv.THREE_COLUMNS}var zhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=jd([],Array(12),!0).map(function(){return H.createRef()}),n.QUARTER_REFS=jd([],Array(4),!0).map(function(){return H.createRef()}),n.isDisabled=function(r){return Su(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate,disabled:n.props.disabled})},n.isExcluded=function(r){return ck(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var h,p;(p=(h=n.props).onDayClick)===null||p===void 0||p.call(h,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,h;(h=(s=n.props).onDayMouseEnter)===null||h===void 0||h.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate;return!p||!_?!1:zl(Oc(h,r),p)},n.isRangeStartQuarter=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate;return!p||!_?!1:XE(sv(h,r),p)},n.isRangeEndMonth=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate;return!p||!_?!1:zl(Oc(h,r),_)},n.isRangeEndQuarter=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate;return!p||!_?!1:XE(sv(h,r),_)},n.isInSelectingRangeMonth=function(r){var s,h=n.props,p=h.day,_=h.selectsStart,o=h.selectsEnd,T=h.selectsRange,I=h.startDate,M=h.endDate,L=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(_||o||T)||!L?!1:_&&M?pT(L,M,r,p):o&&I||T&&I&&!M?pT(I,L,r,p):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var h=n.props,p=h.day,_=h.startDate,o=h.selectsStart,T=Oc(p,r),I=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return o?zl(T,I):zl(T,_)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var h=n.props,p=h.day,_=h.endDate,o=h.selectsEnd,T=h.selectsRange,I=Oc(p,r),M=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return o||T?zl(I,M):zl(I,_)},n.isInSelectingRangeQuarter=function(r){var s,h=n.props,p=h.day,_=h.selectsStart,o=h.selectsEnd,T=h.selectsRange,I=h.startDate,M=h.endDate,L=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(_||o||T)||!L?!1:_&&M?yT(L,M,r,p):o&&I||T&&I&&!M?yT(I,L,r,p):!1},n.isWeekInMonth=function(r){var s=n.props.day,h=Ah(r,6);return zl(r,s)||zl(h,s)},n.isCurrentMonth=function(r,s){return qr(r)===qr(Zi())&&s===fl(Zi())},n.isCurrentQuarter=function(r,s){return qr(r)===qr(Zi())&&s===Pm(Zi())},n.isSelectedMonth=function(r,s,h){return fl(h)===s&&qr(r)===qr(h)},n.isSelectMonthInList=function(r,s,h){return h.some(function(p){return n.isSelectedMonth(r,s,p)})},n.isSelectedQuarter=function(r,s,h){return Pm(h)===s&&qr(r)===qr(h)},n.isSelectQuarterInList=function(r,s,h){return h.some(function(p){return n.isSelectedQuarter(r,s,p)})},n.isMonthSelected=function(){var r=n.props,s=r.day,h=r.selected,p=r.selectedDates,_=r.selectsMultiple,o=fl(s);return _?p?.some(function(T){return n.isSelectedMonth(s,o,T)}):!!h&&n.isSelectedMonth(s,o,h)},n.isQuarterSelected=function(){var r=n.props,s=r.day,h=r.selected,p=r.selectedDates,_=r.selectsMultiple,o=Pm(s);return _?p?.some(function(T){return n.isSelectedQuarter(s,o,T)}):!!h&&n.isSelectedQuarter(s,o,h)},n.renderWeeks=function(){if(!Fd(n.props.day))return[];for(var r=[],s=n.props.fixedHeight,h=0,p=!1,_=Um(pp(n.props.day),n.props.locale,n.props.calendarStartDay),o=function(q){return n.props.showWeekPicker?Um(q,n.props.locale,n.props.calendarStartDay):n.props.preSelection},T=function(q){return n.props.showWeekPicker?Um(q,n.props.locale,n.props.calendarStartDay):n.props.selected},I=n.props.selected?T(n.props.selected):void 0,M=n.props.preSelection?o(n.props.preSelection):void 0;r.push(Ct.createElement(Lhe,li({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:h,day:_,month:fl(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:I,preSelection:M,showWeekNumber:n.props.showWeekNumbers}))),!p;){h++,_=BE(_,1);var L=s&&h>=Ohe,F=!s&&!n.isWeekInMonth(_);if(L||F)if(n.props.peekNextMonth)p=!0;else break}return r},n.onMonthClick=function(r,s){var h=n.isMonthDisabledForLabelDate(s),p=h.isDisabled,_=h.labelDate;p||n.handleDayClick(pp(_),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),h=s.isDisabled,p=s.labelDate;h||n.handleDayMouseEnter(pp(p))},n.handleMonthNavigation=function(r,s){var h,p,_,o;(p=(h=n.props).setPreSelection)===null||p===void 0||p.call(h,s),(o=(_=n.MONTH_REFS[r])===null||_===void 0?void 0:_.current)===null||o===void 0||o.focus()},n.handleKeyboardNavigation=function(r,s,h){var p,_=n.props,o=_.selected,T=_.preSelection,I=_.setPreSelection,M=_.minDate,L=_.maxDate,F=_.showFourColumnMonthYearPicker,q=_.showTwoColumnMonthYearPicker;if(T){var $=dN(F,q),X=n.getVerticalOffset($),te=(p=VA[$])===null||p===void 0?void 0:p.grid,he=function(ce,ee,le){var se,_e,Q=ee,de=le;switch(ce){case Cn.ArrowRight:Q=kh(ee,_T),de=le===11?0:le+_T;break;case Cn.ArrowLeft:Q=xy(ee,_T),de=le===0?11:le-_T;break;case Cn.ArrowUp:Q=xy(ee,X),de=!((se=te?.[0])===null||se===void 0)&&se.includes(le)?le+12-X:le-X;break;case Cn.ArrowDown:Q=kh(ee,X),de=!((_e=te?.[te.length-1])===null||_e===void 0)&&_e.includes(le)?le-12+X:le+X;break}return{newCalculatedDate:Q,newCalculatedMonth:de}},ie=function(ce,ee,le){for(var se=40,_e=ce,Q=!1,de=0,Ve=he(_e,ee,le),Ke=Ve.newCalculatedDate,Ce=Ve.newCalculatedMonth;!Q;){if(de>=se){Ke=ee,Ce=le;break}if(M&&Ke<M){_e=Cn.ArrowRight;var Xe=he(_e,Ke,Ce);Ke=Xe.newCalculatedDate,Ce=Xe.newCalculatedMonth}if(L&&Ke>L){_e=Cn.ArrowLeft;var Xe=he(_e,Ke,Ce);Ke=Xe.newCalculatedDate,Ce=Xe.newCalculatedMonth}if(bhe(Ke,n.props)){var Xe=he(_e,Ke,Ce);Ke=Xe.newCalculatedDate,Ce=Xe.newCalculatedMonth}else Q=!0;de++}return{newCalculatedDate:Ke,newCalculatedMonth:Ce}};if(s===Cn.Enter){n.isMonthDisabled(h)||(n.onMonthClick(r,h),I?.(o));return}var me=ie(s,T,h),ge=me.newCalculatedDate,Ee=me.newCalculatedMonth;switch(s){case Cn.ArrowRight:case Cn.ArrowLeft:case Cn.ArrowUp:case Cn.ArrowDown:n.handleMonthNavigation(Ee,ge);break}}},n.getVerticalOffset=function(r){var s,h;return(h=(s=VA[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&h!==void 0?h:0},n.onMonthKeyDown=function(r,s){var h=n.props,p=h.disabledKeyboardNavigation,_=h.handleOnMonthKeyDown,o=r.key;o!==Cn.Tab&&r.preventDefault(),p||n.handleKeyboardNavigation(r,o,s),_&&_(r)},n.onQuarterClick=function(r,s){var h=sv(n.props.day,s);mT(h,n.props)||n.handleDayClick(Qz(h),r)},n.onQuarterMouseEnter=function(r){var s=sv(n.props.day,r);mT(s,n.props)||n.handleDayMouseEnter(Qz(s))},n.handleQuarterNavigation=function(r,s){var h,p,_,o;n.isDisabled(s)||n.isExcluded(s)||((p=(h=n.props).setPreSelection)===null||p===void 0||p.call(h,s),(o=(_=n.QUARTER_REFS[r-1])===null||_===void 0?void 0:_.current)===null||o===void 0||o.focus())},n.onQuarterKeyDown=function(r,s){var h,p,_=r.key;if(!n.props.disabledKeyboardNavigation)switch(_){case Cn.Enter:n.onQuarterClick(r,s),(p=(h=n.props).setPreSelection)===null||p===void 0||p.call(h,n.props.selected);break;case Cn.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,ZD(n.props.preSelection,1));break;case Cn.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,B6(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,h=n.props,p=h.day,_=h.disabled,o=h.minDate,T=h.maxDate,I=h.excludeDates,M=h.includeDates,L=Oc(p,r);return _?{isDisabled:!0,labelDate:Oc(p,r)}:{isDisabled:(s=(o||T||I||M)&&J6(L,n.props))!==null&&s!==void 0?s:!1,labelDate:L}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate,o=s.preSelection,T=s.monthClassName,I=T?T(Oc(h,r)):void 0,M=n.getSelection();return pn("react-datepicker__month-text","react-datepicker__month-".concat(r),I,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":M?n.isSelectMonthInList(h,r,M):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&o&&n.isSelectedMonth(h,r,o)&&!n.isMonthSelected()&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":p&&_?pT(p,_,r,h):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(h,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=fl(n.props.preSelection),h=n.isMonthDisabledForLabelDate(s).isDisabled,p=r===s&&!(h||n.props.disabledKeyboardNavigation)?"0":"-1";return p},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Pm(n.props.preSelection),h=mT(n.props.day,n.props),p=r===s&&!(h||n.props.disabledKeyboardNavigation)?"0":"-1";return p},n.getAriaLabel=function(r){var s=n.props,h=s.chooseDayAriaLabelPrefix,p=h===void 0?"Choose":h,_=s.disabledDayAriaLabelPrefix,o=_===void 0?"Not available":_,T=s.day,I=s.locale,M=Oc(T,r),L=n.isDisabled(M)||n.isExcluded(M)?o:p;return"".concat(L," ").concat(Ps(M,"MMMM yyyy",I))},n.getQuarterClassNames=function(r){var s=n.props,h=s.day,p=s.startDate,_=s.endDate,o=s.minDate,T=s.maxDate,I=s.excludeDates,M=s.includeDates,L=s.filterDate,F=s.preSelection,q=s.disabledKeyboardNavigation,$=s.disabled,X=(o||T||I||M||L||$)&&mT(sv(h,r),n.props),te=n.getSelection();return pn("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":X,"react-datepicker__quarter-text--selected":te?n.isSelectQuarterInList(h,r,te):void 0,"react-datepicker__quarter-text--keyboard-selected":!q&&F&&n.isSelectedQuarter(h,r,F)&&!n.isQuarterSelected()&&!X,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":p&&_?yT(p,_,r,h):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":n.isCurrentQuarter(h,r)})},n.getMonthContent=function(r){var s=n.props,h=s.showFullMonthYearPicker,p=s.renderMonthContent,_=s.locale,o=s.day,T=Q6(r,_),I=lk(r,_);return p?p(r,T,I,o):h?I:T},n.getQuarterContent=function(r){var s,h=n.props,p=h.renderQuarterContent,_=h.locale,o=xhe(r,_);return(s=p?.(r,o))!==null&&s!==void 0?s:o},n.renderMonths=function(){var r,s=n.props,h=s.showTwoColumnMonthYearPicker,p=s.showFourColumnMonthYearPicker,_=s.day,o=s.selected,T=(r=VA[dN(p,h)])===null||r===void 0?void 0:r.grid;return T?.map(function(I,M){return Ct.createElement("div",{className:"react-datepicker__month-wrapper",key:M},I.map(function(L,F){return Ct.createElement("div",{ref:n.MONTH_REFS[L],key:F,onClick:function(q){n.onMonthClick(q,L)},onKeyDown:function(q){nU(q)&&(q.preventDefault(),q.key=Cn.Enter),n.onMonthKeyDown(q,L)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(L)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(L)}:void 0,tabIndex:Number(n.getTabIndex(L)),className:n.getMonthClassNames(L),"aria-disabled":n.isMonthDisabled(L),role:"option","aria-label":n.getAriaLabel(L),"aria-current":n.isCurrentMonth(_,L)?"date":void 0,"aria-selected":o?n.isSelectedMonth(_,L,o):void 0},n.getMonthContent(L))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,h=r.selected,p=[1,2,3,4];return Ct.createElement("div",{className:"react-datepicker__quarter-wrapper"},p.map(function(_,o){return Ct.createElement("div",{key:o,ref:n.QUARTER_REFS[o],role:"option",onClick:function(T){n.onQuarterClick(T,_)},onKeyDown:function(T){n.onQuarterKeyDown(T,_)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(_)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(_)}:void 0,className:n.getQuarterClassNames(_),"aria-selected":h?n.isSelectedQuarter(s,_,h):void 0,tabIndex:Number(n.getQuarterTabIndex(_)),"aria-current":n.isCurrentQuarter(s,_)?"date":void 0},n.getQuarterContent(_))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,h=r.selectsStart,p=r.selectsEnd,_=r.showMonthYearPicker,o=r.showQuarterYearPicker,T=r.showWeekPicker;return pn("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(h||p)},{"react-datepicker__monthPicker":_},{"react-datepicker__quarterPicker":o},{"react-datepicker__weekPicker":T})},n}return e.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,h=n.selectsMultiple;if(h)return s;if(r)return[r]},e.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,h=n.day,p=n.ariaLabelPrefix,_=p===void 0?"Month ":p,o=_?_.trim()+" ":"",T=Fd(h)?"".concat(o).concat(Ps(h,"MMMM, yyyy",this.props.locale)):"",I=r||s;return I?Ct.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":T,role:"listbox"},r?this.renderMonths():this.renderQuarters()):Ct.createElement("div",{role:"table"},this.props.dayNamesHeader&&Ct.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),Ct.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":T,role:"rowgroup"},this.renderWeeks()))},e})(H.Component),Nhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.monthOptionButtonsRef={},n.isSelectedMonth=function(r){return n.props.month===r},n.handleOptionKeyDown=function(r,s){var h;switch(s.key){case"Enter":s.preventDefault(),n.onChange(r);break;case"Escape":s.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var p=(r+(s.key==="ArrowUp"?-1:1)+n.props.monthNames.length)%n.props.monthNames.length;(h=n.monthOptionButtonsRef[p])===null||h===void 0||h.focus();break}}},n.renderOptions=function(){return n.monthOptionButtonsRef={},n.props.monthNames.map(function(r,s){return Ct.createElement("div",{ref:function(h){n.monthOptionButtonsRef[s]=h,n.isSelectedMonth(s)&&h?.focus()},role:"button",tabIndex:0,className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),onKeyDown:n.handleOptionKeyDown.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?Ct.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return Ct.createElement(eC,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(H.Component),Bhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,h){return Ct.createElement("option",{key:s,value:h},s)})},n.renderSelectMode=function(r){return Ct.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return Ct.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},Ct.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Ct.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return Ct.createElement(Nhe,li({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,h=[n.renderReadView(!s,r)];return s&&h.unshift(n.renderDropdown(r)),h},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(h){return Q6(h,n.props.locale)}:function(h){return lk(h,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return Ct.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(H.Component);function Fhe(t,e){for(var n=[],r=pp(t),s=pp(e);!ng(r,s);)n.push(Zi(r)),r=kh(r,1);return n}var Vhe=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var h=_M(s),p=Od(r.props.date,s)&&zl(r.props.date,s);return Ct.createElement("div",{className:p?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:h,onClick:r.onChange.bind(r,h),"aria-selected":p?"true":void 0},p?Ct.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Ps(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:Fhe(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var n=pn({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Ct.createElement(eC,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(H.Component),Uhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=pp(n.props.minDate),s=pp(n.props.maxDate),h=[];!ng(r,s);){var p=_M(r);h.push(Ct.createElement("option",{key:p,value:p},Ps(r,n.props.dateFormat,n.props.locale))),r=kh(r,1)}return h},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Ct.createElement("select",{value:_M(pp(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=Ps(n.props.date,n.props.dateFormat,n.props.locale);return Ct.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},Ct.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Ct.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return Ct.createElement(Vhe,li({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=Zi(r);Od(n.props.date,s)&&zl(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Ct.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(H.Component),jhe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,h;n.list&&(n.list.scrollTop=(h=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&h!==void 0?h:0)})},n.handleClick=function(r){var s,h;(n.props.minTime||n.props.maxTime)&&rN(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&nN(r,n.props)||(h=(s=n.props).onChange)===null||h===void 0||h.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&Rhe(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&rN(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&nN(r,n.props)},n.liClasses=function(r){var s,h=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&h.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&h.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(dp(r)*3600+fp(r)*60+Vm(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals)*60)!==0&&h.push("react-datepicker__time-list-item--injected"),h.join(" ")},n.handleOnKeyDown=function(r,s){var h,p;r.key===Cn.Space&&(r.preventDefault(),r.key=Cn.Enter),(r.key===Cn.ArrowUp||r.key===Cn.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Cn.ArrowDown||r.key===Cn.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Cn.Enter&&n.handleClick(s),(p=(h=n.props).handleOnKeyDown)===null||p===void 0||p.call(h,r)},n.renderTimes=function(){for(var r,s=[],h=typeof n.props.format=="string"?n.props.format:"p",p=(r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,_=n.props.selected||n.props.openToDate||Zi(),o=WT(_),T=n.props.injectTimes&&n.props.injectTimes.sort(function(X,te){return X.getTime()-te.getTime()}),I=60*Mhe(_),M=I/p,L=0;L<M;L++){var F=mM(o,L*p);if(s.push(F),T){var q=Ihe(o,F,L,p,T);s=s.concat(q)}}var $=s.reduce(function(X,te){return te.getTime()<=_.getTime()?te:X},s[0]);return s.map(function(X){return Ct.createElement("li",{key:X.valueOf(),onClick:n.handleClick.bind(n,X),className:n.liClasses(X),ref:function(te){X===$&&(n.centerLi=te)},onKeyDown:function(te){n.handleOnKeyDown(te,X)},tabIndex:X===$?0:-1,role:"option","aria-selected":n.isSelectedTime(X)?"true":void 0,"aria-disabled":n.isDisabledTime(X)?"true":void 0},Ps(X,h,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?Ct.createElement(Ct.Fragment,null):Ct.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},Ct.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},e.prototype.componentWillUnmount=function(){var n;(n=this.resizeObserver)===null||n===void 0||n.disconnect()},e.prototype.observeDatePickerHeightChanges=function(){var n=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){n.updateContainerHeight()}),this.resizeObserver.observe(r))},e.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,r,s=this.state.height;return Ct.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Ct.createElement("div",{className:"react-datepicker__time"},Ct.createElement("div",{className:"react-datepicker__time-box"},Ct.createElement("ul",{className:"react-datepicker__time-list",ref:function(h){n.list=h},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},e})(H.Component),fN=3,$he=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.YEAR_REFS=jd([],Array(r.props.yearItemNumber),!0).map(function(){return H.createRef()}),r.isDisabled=function(s){return Su(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return ck(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var h=function(){var p,_;(_=(p=r.YEAR_REFS[s])===null||p===void 0?void 0:p.current)===null||_===void 0||_.focus()};window.requestAnimationFrame(h)},r.handleYearClick=function(s,h){r.props.onDayClick&&r.props.onDayClick(s,h)},r.handleYearNavigation=function(s,h){var p,_,o,T,I=r.props,M=I.date,L=I.yearItemNumber;if(!(M===void 0||L===void 0)){var F=op(M,L).startPeriod;r.isDisabled(h)||r.isExcluded(h)||((_=(p=r.props).setPreSelection)===null||_===void 0||_.call(p,h),s-F<0?r.updateFocusOnPaginate(L-(F-s)):s-F>=L?r.updateFocusOnPaginate(Math.abs(L-(s-F))):(T=(o=r.YEAR_REFS[s-F])===null||o===void 0?void 0:o.current)===null||T===void 0||T.focus())}},r.isSameDay=function(s,h){return ai(s,h)},r.isCurrentYear=function(s){return s===qr(Zi())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&Od(kd(Zi(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&Od(kd(Zi(),s),r.props.endDate)},r.isInRange=function(s){return gT(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var h=r.props,p=h.selectsStart,_=h.selectsEnd,o=h.selectsRange,T=h.startDate,I=h.endDate;return!(p||_||o)||!r.selectingDate()?!1:p&&I?gT(s,r.selectingDate(),I):_&&T||o&&T&&!I?gT(s,T,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var h;if(!r.isInSelectingRange(s))return!1;var p=r.props,_=p.startDate,o=p.selectsStart,T=kd(Zi(),s);return o?Od(T,(h=r.selectingDate())!==null&&h!==void 0?h:null):Od(T,_??null)},r.isSelectingRangeEnd=function(s){var h;if(!r.isInSelectingRange(s))return!1;var p=r.props,_=p.endDate,o=p.selectsEnd,T=p.selectsRange,I=kd(Zi(),s);return o||T?Od(I,(h=r.selectingDate())!==null&&h!==void 0?h:null):Od(I,_??null)},r.isKeyboardSelected=function(s){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var h=r.props,p=h.minDate,_=h.maxDate,o=h.excludeDates,T=h.includeDates,I=h.filterDate,M=h.selected,L=eb(kd(r.props.date,s)),F=(p||_||o||T||I)&&YT(s,r.props),q=!!M&&ai(L,eb(M)),$=ai(L,eb(r.props.preSelection));return!r.props.inline&&!q&&$&&!F}},r.isSelectedYear=function(s){var h=r.props,p=h.selectsMultiple,_=h.selected,o=h.selectedDates;return p?o?.some(function(T){return s===qr(T)}):!!_&&s===qr(_)},r.onYearClick=function(s,h){var p=r.props.date;p!==void 0&&r.handleYearClick(eb(kd(p,h)),s)},r.onYearKeyDown=function(s,h){var p,_,o=s.key,T=r.props,I=T.date,M=T.yearItemNumber,L=T.handleOnKeyDown;if(o!==Cn.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(o){case Cn.Enter:if(r.props.selected==null)break;r.onYearClick(s,h),(_=(p=r.props).setPreSelection)===null||_===void 0||_.call(p,r.props.selected);break;case Cn.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(h+1,up(r.props.preSelection,1));break;case Cn.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(h-1,zv(r.props.preSelection,1));break;case Cn.ArrowUp:{if(I===void 0||M===void 0||r.props.preSelection==null)break;var F=op(I,M).startPeriod,q=fN,$=h-q;if($<F){var X=M%q;h>=F&&h<F+X?q=X:q+=X,$=h-q}r.handleYearNavigation($,zv(r.props.preSelection,q));break}case Cn.ArrowDown:{if(I===void 0||M===void 0||r.props.preSelection==null)break;var te=op(I,M).endPeriod,q=fN,$=h+q;if($>te){var X=M%q;h<=te&&h>te-X?q=X:q+=X,$=h+q}r.handleYearNavigation($,up(r.props.preSelection,q));break}}L&&L(s)},r.getYearClassNames=function(s){var h=r.props,p=h.date,_=h.disabled,o=h.minDate,T=h.maxDate,I=h.excludeDates,M=h.includeDates,L=h.filterDate,F=h.yearClassName;return pn("react-datepicker__year-text","react-datepicker__year-".concat(s),p?F?.(kd(p,s)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(s),"react-datepicker__year-text--disabled":(o||T||I||M||L||_)&&YT(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var h=qr(r.props.preSelection),p=YT(s,r.props);return s===h&&!p?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return e.prototype.render=function(){var n=this,r=[],s=this.props,h=s.date,p=s.yearItemNumber,_=s.onYearMouseEnter,o=s.onYearMouseLeave;if(h===void 0)return null;for(var T=op(h,p),I=T.startPeriod,M=T.endPeriod,L=function($){r.push(Ct.createElement("div",{ref:F.YEAR_REFS[$-I],onClick:function(X){n.onYearClick(X,$)},onKeyDown:function(X){nU(X)&&(X.preventDefault(),X.key=Cn.Enter),n.onYearKeyDown(X,$)},tabIndex:Number(F.getYearTabIndex($)),className:F.getYearClassNames($),onMouseEnter:F.props.usePointerEvent?void 0:function(X){return _(X,$)},onPointerEnter:F.props.usePointerEvent?function(X){return _(X,$)}:void 0,onMouseLeave:F.props.usePointerEvent?void 0:function(X){return o(X,$)},onPointerLeave:F.props.usePointerEvent?function(X){return o(X,$)}:void 0,key:$,"aria-current":F.isCurrentYear($)?"date":void 0},F.getYearContent($)))},F=this,q=I;q<=M;q++)L(q);return Ct.createElement("div",{className:"react-datepicker__year"},Ct.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e})(H.Component);function qhe(t,e,n,r){for(var s=[],h=0;h<2*e+1;h++){var p=t+e-h,_=!0;n&&(_=qr(n)<=p),r&&_&&(_=qr(r)>=p),_&&s.push(p)}return s}var Hhe=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(_,o){var T;switch(o.key){case"Enter":o.preventDefault(),r.onChange(_);break;case"Escape":o.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{o.preventDefault();var I=_+(o.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[I]&&((T=r.yearOptionButtonsRef[I])===null||T===void 0||T.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var _=r.props.year,o=r.state.yearsList.map(function(M){return Ct.createElement("div",{ref:function(L){r.yearOptionButtonsRef[M]=L,M===_&&L?.focus()},role:"button",tabIndex:0,className:_===M?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:M,onClick:r.onChange.bind(r,M),onKeyDown:r.handleOptionKeyDown.bind(r,M),"aria-selected":_===M?"true":void 0},_===M?Ct.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",M)}),T=r.props.minDate?qr(r.props.minDate):null,I=r.props.maxDate?qr(r.props.maxDate):null;return(!I||!r.state.yearsList.find(function(M){return M===I}))&&o.unshift(Ct.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},Ct.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!T||!r.state.yearsList.find(function(M){return M===T}))&&o.push(Ct.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},Ct.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),o},r.onChange=function(_){r.props.onChange(_)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(_){var o=r.state.yearsList.map(function(T){return T+_});r.setState({yearsList:o})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,h=n.scrollableYearDropdown,p=s||(h?10:5);return r.state={yearsList:qhe(r.props.year,p,r.props.minDate,r.props.maxDate)},r.dropdownRef=H.createRef(),r}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(h){return h.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=pn({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Ct.createElement(eC,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(H.Component),Ghe=(function(t){za(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?qr(n.props.minDate):1900,s=n.props.maxDate?qr(n.props.maxDate):2100,h=[],p=r;p<=s;p++)h.push(Ct.createElement("option",{key:p,value:p},p));return h},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return Ct.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return Ct.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:n.toggleDropdown},Ct.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Ct.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return Ct.createElement(Hhe,li({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var h;(h=n.onSelect)===null||h===void 0||h.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var h,p;(p=(h=n.props).onSelect)===null||p===void 0||p.call(h,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return Ct.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(H.Component),Whe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],rU="react-datepicker-ignore-onclickoutside",Yhe=function(t){var e=(t.className||"").split(/\s+/);return Whe.some(function(n){return e.indexOf(n)>=0})},Xhe=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var h,p;Yhe(s.target)&&((p=(h=r.props).onDropdownFocus)===null||p===void 0||p.call(h,s))},r.getDateInView=function(){var s=r.props,h=s.preSelection,p=s.selected,_=s.openToDate,o=eU(r.props),T=tU(r.props),I=Zi(),M=_||p||h;return M||(o&&Ud(I,o)?o:T&&ng(I,T)?T:I)},r.increaseMonth=function(){r.setState(function(s){var h=s.date;return{date:kh(h,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var h=s.date;return{date:xy(h,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,h,p){r.props.onSelect(s,h,p),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,h){r.setState({selectingDate:kd(Zi(),h)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,h)},r.handleYearMouseLeave=function(s,h){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,h)},r.handleYearChange=function(s){var h,p,_,o;(p=(h=r.props).onYearChange)===null||p===void 0||p.call(h,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(o=(_=r.props).setOpen)===null||o===void 0||o.call(_,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!Su(s,r.props))return s;for(var h=pp(s),p=ghe(s),_=Aae(p,h),o=null,T=0;T<=_;T++){var I=Ah(h,T);if(!Su(I,r.props)){o=I;break}}return o},r.handleMonthChange=function(s){var h,p,_,o=(h=r.getEnabledPreSelectionDateForMonth(s))!==null&&h!==void 0?h:s;r.handleCustomMonthChange(o),r.props.adjustDateOnChange&&(r.props.onSelect(o),(_=(p=r.props).setOpen)===null||_===void 0||_.call(p,!0)),r.props.setPreSelection&&r.props.setPreSelection(o)},r.handleCustomMonthChange=function(s){var h,p;(p=(h=r.props).onMonthChange)===null||p===void 0||p.call(h,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(h){var p=h.date;return{date:kd(p,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(h){var p=h.date;return{date:Oc(p,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(h){var p=h.date;return{date:kd(Oc(p,fl(s)),qr(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){if(s===void 0&&(s=r.state.date),!Fd(s))return[];var h=r.props.disabled,p=Um(s,r.props.locale,r.props.calendarStartDay),_=[];return r.props.showWeekNumbers&&_.push(Ct.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(h?"react-datepicker__day-name--disabled":""),role:"columnheader"},Ct.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Ct.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),_.concat([0,1,2,3,4,5,6].map(function(o){var T=Ah(p,o),I=r.formatWeekday(T,r.props.locale),M=r.props.weekDayClassName?r.props.weekDayClassName(T):void 0;return Ct.createElement("div",{key:o,role:"columnheader",className:pn("react-datepicker__day-name",M,h?"react-datepicker__day-name--disabled":"")},Ct.createElement("span",{className:"react-datepicker__sr-only"},Ps(T,"EEEE",r.props.locale)),Ct.createElement("span",{"aria-hidden":"true"},I))}))},r.formatWeekday=function(s,h){return r.props.formatWeekDay?yhe(s,r.props.formatWeekDay,h):r.props.useWeekdaysShort?vhe(s,h):_he(s,h)},r.decreaseYear=function(){r.setState(function(s){var h,p=s.date;return{date:zv(p,r.props.showYearPicker?(h=r.props.yearItemNumber)!==null&&h!==void 0?h:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,h,p;if(!r.props.renderCustomHeader){var _=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,o=r.props.showPreviousMonths?_-1:0,T=(h=r.props.monthSelectedIn)!==null&&h!==void 0?h:o,I=xy(r.state.date,T),M;switch(!0){case r.props.disabled:M=!0;break;case r.props.showMonthYearPicker:M=oN(r.state.date,r.props);break;case r.props.showYearPicker:M=Ehe(r.state.date,r.props);break;case r.props.showQuarterYearPicker:M=whe(r.state.date,r.props);break;default:M=iN(I,r.props);break}if(!(!((p=r.props.forceShowMonthNavigation)!==null&&p!==void 0?p:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&M||r.props.showTimeSelectOnly)){var L=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],F=["react-datepicker__navigation","react-datepicker__navigation--previous"],q=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(q=r.decreaseYear),M&&r.props.showDisabledMonthNavigation&&(F.push("react-datepicker__navigation--previous--disabled"),q=void 0);var $=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,X=r.props,te=X.previousMonthButtonLabel,he=te===void 0?e.defaultProps.previousMonthButtonLabel:te,ie=X.previousYearButtonLabel,me=ie===void 0?e.defaultProps.previousYearButtonLabel:ie,ge=r.props,Ee=ge.previousMonthAriaLabel,ce=Ee===void 0?typeof he=="string"?he:"Previous Month":Ee,ee=ge.previousYearAriaLabel,le=ee===void 0?typeof me=="string"?me:"Previous Year":ee;return Ct.createElement("button",{type:"button",className:F.join(" "),onClick:q,onKeyDown:r.props.handleOnKeyDown,"aria-label":$?le:ce},Ct.createElement("span",{className:L.join(" ")},$?me:he))}}},r.increaseYear=function(){r.setState(function(s){var h,p=s.date;return{date:up(p,r.props.showYearPicker?(h=r.props.yearItemNumber)!==null&&h!==void 0?h:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var h;switch(!0){case r.props.disabled:h=!0;break;case r.props.showMonthYearPicker:h=aN(r.state.date,r.props);break;case r.props.showYearPicker:h=She(r.state.date,r.props);break;case r.props.showQuarterYearPicker:h=The(r.state.date,r.props);break;default:h=sN(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&h||r.props.showTimeSelectOnly)){var p=["react-datepicker__navigation","react-datepicker__navigation--next"],_=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&p.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&p.push("react-datepicker__navigation--next--with-today-button");var o=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(o=r.increaseYear),h&&r.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--next--disabled"),o=void 0);var T=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,I=r.props,M=I.nextMonthButtonLabel,L=M===void 0?e.defaultProps.nextMonthButtonLabel:M,F=I.nextYearButtonLabel,q=F===void 0?e.defaultProps.nextYearButtonLabel:F,$=r.props,X=$.nextMonthAriaLabel,te=X===void 0?typeof L=="string"?L:"Next Month":X,he=$.nextYearAriaLabel,ie=he===void 0?typeof q=="string"?q:"Next Year":he;return Ct.createElement("button",{type:"button",className:p.join(" "),onClick:o,onKeyDown:r.props.handleOnKeyDown,"aria-label":T?ie:te},Ct.createElement("span",{className:_.join(" ")},T?q:L))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var h=["react-datepicker__current-month"];return r.props.showYearDropdown&&h.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&h.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&h.push("react-datepicker__current-month--hasMonthYearDropdown"),Ct.createElement("h2",{className:h.join(" ")},Fd(s)?Ps(s,r.props.dateFormat,r.props.locale):"")},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return Ct.createElement(Ghe,li({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:qr(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return Ct.createElement(Bhe,li({},e.defaultProps,r.props,{month:fl(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return Ct.createElement(Uhe,li({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(Jz(),s),r.props.setPreSelection&&r.props.setPreSelection(Jz())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return Ct.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(s){return Ct.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(s))},r.renderDefaultHeader=function(s){var h=s.monthDate,p=s.i;return Ct.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(h),Ct.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(p!==0),r.renderMonthYearDropdown(p!==0),r.renderYearDropdown(p!==0)))},r.renderCustomHeader=function(s){var h,p,_=s.monthDate,o=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var T=r.props,I=T.showYearPicker,M=T.yearItemNumber,L;if(I){var F=op(_,M),q=F.startPeriod,$=F.endPeriod;L={startYear:q,endYear:$}}var X=iN(r.state.date,r.props),te=sN(r.state.date,r.props),he=oN(r.state.date,r.props),ie=aN(r.state.date,r.props);return Ct.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(p=(h=r.props).renderCustomHeader)===null||p===void 0?void 0:p.call(h,li(li(li({},r.state),I&&{visibleYearsRange:L}),{customHeaderCount:o,monthDate:_,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:X,nextMonthButtonDisabled:te,prevYearButtonDisabled:he,nextYearButtonDisabled:ie})))},r.renderYearHeader=function(s){var h=s.monthDate,p=r.props,_=p.showYearPicker,o=p.yearItemNumber,T=o===void 0?e.defaultProps.yearItemNumber:o,I=op(h,T),M=I.startPeriod,L=I.endPeriod;return Ct.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},_?"".concat(M," - ").concat(L):qr(h))},r.renderHeader=function(s){var h=s.monthDate,p=s.i,_=p===void 0?0:p,o={monthDate:h,i:_};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(o);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(o);default:return r.renderDefaultHeader(o)}},r.renderMonths=function(){var s,h;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var p=[],_=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,o=r.props.showPreviousMonths?_-1:0,T=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?up(r.state.date,o):xy(r.state.date,o),I=(h=r.props.monthSelectedIn)!==null&&h!==void 0?h:o,M=0;M<_;++M){var L=M-I+o,F=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?up(T,L):kh(T,L),q="month-".concat(M),$=M<_-1,X=M>0;p.push(Ct.createElement("div",{key:q,ref:function(te){r.monthContainer=te??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:F,i:M}),Ct.createElement(zhe,li({},e.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:F,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:M,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:$,monthShowsDuplicateDaysStart:X,dayNamesHeader:r.renderDayNamesHeader(F)}))))}return p}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return Ct.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),Ct.createElement($he,li({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return Ct.createElement(jhe,li({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,h=s&&Fd(s)&&!!r.props.selected,p=h?"".concat(cN(s.getHours()),":").concat(cN(s.getMinutes())):"";if(r.props.showTimeInput)return Ct.createElement(Dhe,li({},e.defaultProps,r.props,{date:s,timeString:p,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s;if(!Fd(r.state.date))return Ct.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"});var h=op(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber),p=h.startPeriod,_=h.endPeriod,o;return r.props.showYearPicker?o="".concat(p," - ").concat(_):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?o=qr(r.state.date):o="".concat(lk(fl(r.state.date),r.props.locale)," ").concat(qr(r.state.date)),Ct.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&o)},r.renderChildren=function(){if(r.props.children)return Ct.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=H.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:rU,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:S1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&Fd(this.props.preSelection)&&(!ai(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!zl(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!ai(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||che;return Ct.createElement(eC,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Ct.createElement("div",{style:{display:"contents"},ref:this.containerRef},Ct.createElement(n,{className:pn("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly,inline:this.props.inline},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},e})(H.Component),Khe=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,h="react-datepicker__calendar-icon";if(typeof e=="string")return Ct.createElement("i",{className:"".concat(h," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s});if(Ct.isValidElement(e)){var p=e;return Ct.cloneElement(p,{className:"".concat(p.props.className||""," ").concat(h," ").concat(r),onClick:function(_){typeof p.props.onClick=="function"&&p.props.onClick(_),typeof s=="function"&&s(_)}})}return Ct.createElement("svg",{className:"".concat(h," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Ct.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},iU=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return jx.createPortal(this.props.children,this.el)},e})(H.Component),Zhe="[tabindex], a, button, input, select, textarea",Qhe=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},sU=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(Zhe),1,-1).filter(Qhe)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=H.createRef(),r}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?Ct.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Ct.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Ct.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(H.Component);function Jhe(t){function e(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,h=H.useRef(null),p=lhe(li({open:!s,whileElementsMounted:Vue,placement:n.popperPlacement,middleware:jd([Xue({padding:15}),Yue(10),Kue({element:h})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),_=li(li({},n),{hidePopper:s,popperProps:li(li({},p),{arrowRef:h})});return Ct.createElement(t,li({},_))}return e.displayName="withFloating(".concat(t.displayName||t.name||"Component",")"),e}var ede=function(t){var e=t.className,n=t.wrapperClassName,r=t.hidePopper,s=r===void 0?!0:r,h=t.popperComponent,p=t.targetComponent,_=t.enableTabLoop,o=t.popperOnKeyDown,T=t.portalId,I=t.portalHost,M=t.popperProps,L=t.showArrow,F=void 0;if(!s){var q=pn("react-datepicker-popper",e);F=Ct.createElement(sU,{enableTabLoop:_},Ct.createElement("div",{ref:M.refs.setFloating,style:M.floatingStyles,className:q,"data-placement":M.placement,onKeyDown:o},h,L&&Ct.createElement(the,{ref:M.arrowRef,context:M.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}t.popperContainer&&(F=H.createElement(t.popperContainer,{},F)),T&&!s&&(F=Ct.createElement(iU,{portalId:T,portalHost:I},F));var $=pn("react-datepicker-wrapper",n);return Ct.createElement(Ct.Fragment,null,Ct.createElement("div",{ref:M.refs.setReference,className:$},p),F)},tde=Jhe(ede);function nde(t,e){return t&&e?fl(t)!==fl(e)||qr(t)!==qr(e):t!==e}var UA="Date input not valid.",pN=(function(t){za(e,t);function e(n){var r=t.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Zi()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(h,p){var _=new Date(p.date);return Fd(_)?jd(jd([],h,!0),[li(li({},p),{date:_})],!1):h},[])},r.calcInitialState=function(){var s,h=r.getPreSelection(),p=eU(r.props),_=tU(r.props),o=p&&Ud(h,WT(p))?p:_&&ng(h,eN(_))?_:h;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:o,highlightDates:lN(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var s,h=r.props,p=h.locale,_=h.startDate,o=h.endDate,T=h.rangeSeparator,I=h.selected,M=h.selectedDates,L=h.selectsMultiple,F=h.selectsRange,q=h.value,$=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,X=r.state.inputValue;return typeof q=="string"?q:typeof X=="string"?X:F?hhe(_,o,{dateFormat:$,locale:p,rangeSeparator:T}):L?dhe(M??[],{dateFormat:$,locale:p}):Lc(I,{dateFormat:$,locale:p})},r.resetHiddenStatus=function(){r.setState(li(li({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(li(li({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var s,h;(h=(s=r.input)===null||s===void 0?void 0:s.focus)===null||h===void 0||h.call(s,{preventScroll:!0})},r.setBlur=function(){var s,h;(h=(s=r.input)===null||s===void 0?void 0:s.blur)===null||h===void 0||h.call(s),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(s,h){h===void 0&&(h=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:jA},function(){s||r.setState(function(p){return{focused:h?p.focused:!1}},function(){!h&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return hp(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var h,p,_=r.state.wasHidden,o=_?r.state.open:!0;_&&r.resetHiddenStatus(),r.state.preventFocus||((p=(h=r.props).onFocus)===null||p===void 0||p.call(h,s),o&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(li(li({},r.state),{inputValue:null}))},r.handleBlur=function(s){var h,p;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((p=(h=r.props).onBlur)===null||p===void 0||p.call(h,s)),r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var h,p;r.props.inline||r.setOpen(!1),(p=(h=r.props).onClickOutside)===null||p===void 0||p.call(h,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,h,p,_,o,T=[],I=0;I<arguments.length;I++)T[I]=arguments[I];var M=T[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,T),!M||typeof M.isDefaultPrevented!="function"||M.isDefaultPrevented()))){r.setState({inputValue:M?.target instanceof HTMLInputElement?M.target.value:null,lastPreSelectChange:rde});var L=r.props,F=L.selectsRange,q=L.startDate,$=L.endDate,X=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,te=(h=r.props.strictParsing)!==null&&h!==void 0?h:e.defaultProps.strictParsing,he=M?.target instanceof HTMLInputElement?M.target.value:"";if(F){var ie=r.props.rangeSeparator,me=ie.trim(),ge=he.split(X.includes(me)?ie:me,2).map(function(de){return de.trim()}),Ee=ge[0],ce=ge[1],ee=NA(Ee??"",X,r.props.locale,te),le=ee?NA(ce??"",X,r.props.locale,te):null,se=q?.getTime()!==ee?.getTime(),_e=$?.getTime()!==le?.getTime();if(!se&&!_e||ee&&Su(ee,r.props)||le&&Su(le,r.props))return;(_=(p=r.props).onChange)===null||_===void 0||_.call(p,[ee,le],M)}else{var Q=NA(he,X,r.props.locale,te,(o=r.props.selected)!==null&&o!==void 0?o:void 0);(Q||!he)&&r.setSelected(Q,M,!0)}}},r.handleSelect=function(s,h,p){var _;if(!r.props.readOnly){var o=r.props,T=o.selectsRange,I=o.startDate,M=o.endDate,L=o.locale,F=o.swapRange,q=(_=r.props.dateFormat)!==null&&_!==void 0?_:e.defaultProps.dateFormat,$=!T||I&&!M&&(F||!FA(s,I));if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&$&&r.sendFocusBackToInput(),r.props.onChangeRaw){var X=Lc(s,{dateFormat:q,locale:L});r.props.onChangeRaw(h,{date:s,formattedDate:X})}r.setSelected(s,h,!1,p),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(s):$&&r.setOpen(!1)}},r.setSelected=function(s,h,p,_){var o,T,I=s;if(r.props.showYearPicker){if(I!==null&&YT(qr(I),r.props))return}else if(r.props.showMonthYearPicker){if(I!==null&&J6(I,r.props))return}else if(I!==null&&Su(I,r.props))return;var M=r.props,L=M.onChange,F=M.selectsRange,q=M.startDate,$=M.endDate,X=M.selectsMultiple,te=M.selectedDates,he=M.minTime,ie=M.swapRange;if(!my(r.props.selected,I)||r.props.allowSameDay||F||X)if(I!==null&&(r.props.selected&&(!p||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(I=BA(I,{hour:dp(r.props.selected),minute:fp(r.props.selected),second:Vm(r.props.selected)})),!p&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&he&&(I=BA(I,{hour:he.getHours(),minute:he.getMinutes(),second:he.getSeconds()})),r.props.inline||r.setState({preSelection:I}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:_})),F){var me=!q&&!$,ge=q&&!$,Ee=!q&&!!$,ce=q&&$;me?L?.([I,null],h):ge?I===null?L?.([null,null],h):FA(I,q)?L?.(ie?[I,q]:[I,null],h):L?.([q,I],h):Ee&&(I&&FA(I,$)?L?.([I,$],h):L?.([I,null],h)),ce&&L?.([I,null],h)}else if(X){if(I!==null)if(!te?.length)L?.([I],h);else{var ee=te.some(function(se){return ai(se,I)});if(ee){var le=te.filter(function(se){return!ai(se,I)});L?.(le,h)}else L?.(jd(jd([],te,!0),[I],!1),h)}}else L?.(I,h);p||((T=(o=r.props).onSelect)===null||T===void 0||T.call(o,I,h),r.setState({inputValue:null}))},r.setPreSelection=function(s){if(!r.props.readOnly){var h=hp(r.props.minDate),p=hp(r.props.maxDate),_=!0;if(s){var o=WT(s);if(h&&p)_=ly(s,r.props.minDate,r.props.maxDate);else if(h){var T=WT(r.props.minDate);_=ng(s,T)||my(o,T)}else if(p){var I=eN(r.props.maxDate);_=Ud(s,I)||my(o,I)}}_&&r.setState({preSelection:s})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var h,p;if(!(r.props.selectsRange||r.props.selectsMultiple)){var _=r.props.selected?r.props.selected:r.getPreSelection(),o=r.props.selected?s:BA(_,{hour:dp(s),minute:fp(s)});r.setState({preSelection:o}),(p=(h=r.props).onChange)===null||p===void 0||p.call(h,o),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,h;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(h=(s=r.props).onInputClick)===null||h===void 0||h.call(s)},r.onInputKeyDown=function(s){var h,p,_,o,T,I;(p=(h=r.props).onKeyDown)===null||p===void 0||p.call(h,s);var M=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(M===Cn.ArrowDown||M===Cn.ArrowUp||M===Cn.Enter)&&((_=r.onInputClick)===null||_===void 0||_.call(r));return}if(r.state.open){if(M===Cn.ArrowDown||M===Cn.ArrowUp){s.preventDefault();var L=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',F=((o=r.calendar)===null||o===void 0?void 0:o.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(L);F instanceof HTMLElement&&F.focus({preventScroll:!0});return}var q=Zi(r.state.preSelection);M===Cn.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===jA?(r.handleSelect(q,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(q)):r.setOpen(!1)):M===Cn.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):M===Cn.Tab&&r.setOpen(!1),r.inputOk()||(I=(T=r.props).onInputError)===null||I===void 0||I.call(T,{code:1,msg:UA})}},r.onPortalKeyDown=function(s){var h=s.key;h===Cn.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var h,p,_,o,T,I,M=r.props,L=M.minDate,F=M.maxDate,q=M.disabledKeyboardNavigation,$=M.showWeekPicker,X=M.shouldCloseOnSelect,te=M.locale,he=M.calendarStartDay,ie=M.adjustDateOnChange,me=M.inline;if((p=(h=r.props).onKeyDown)===null||p===void 0||p.call(h,s),!q){var ge=s.key,Ee=s.shiftKey,ce=Zi(r.state.preSelection),ee=function(Ke,Ce){var Xe=Ce;switch(Ke){case Cn.ArrowRight:Xe=$?BE(Ce,1):Ah(Ce,1);break;case Cn.ArrowLeft:Xe=$?Vz(Ce):Ace(Ce);break;case Cn.ArrowUp:Xe=Vz(Ce);break;case Cn.ArrowDown:Xe=BE(Ce,1);break;case Cn.PageUp:Xe=Ee?zv(Ce,1):xy(Ce,1);break;case Cn.PageDown:Xe=Ee?up(Ce,1):kh(Ce,1);break;case Cn.Home:Xe=Um(Ce,te,he);break;case Cn.End:Xe=mhe(Ce);break}return Xe},le=function(Ke,Ce){for(var Xe=40,tt=Ke,Be=!1,yt=0,Me=ee(Ke,Ce);!Be;){if(yt>=Xe){Me=Ce;break}L&&Me<L&&(tt=Cn.ArrowRight,Me=Su(L,r.props)?ee(tt,Me):L),F&&Me>F&&(tt=Cn.ArrowLeft,Me=Su(F,r.props)?ee(tt,Me):F),Su(Me,r.props)?((tt===Cn.PageUp||tt===Cn.Home)&&(tt=Cn.ArrowRight),(tt===Cn.PageDown||tt===Cn.End)&&(tt=Cn.ArrowLeft),Me=ee(tt,Me)):Be=!0,yt++}return Me};if(ge===Cn.Enter){s.preventDefault(),r.handleSelect(ce,s),!X&&r.setPreSelection(ce);return}else if(ge===Cn.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(o=(_=r.props).onInputError)===null||o===void 0||o.call(_,{code:1,msg:UA});return}var se=null;switch(ge){case Cn.ArrowLeft:case Cn.ArrowRight:case Cn.ArrowUp:case Cn.ArrowDown:case Cn.PageUp:case Cn.PageDown:case Cn.Home:case Cn.End:se=le(ge,ce);break}if(!se){(I=(T=r.props).onInputError)===null||I===void 0||I.call(T,{code:1,msg:UA});return}if(s.preventDefault(),r.setState({lastPreSelectChange:jA}),ie&&r.setSelected(se),r.setPreSelection(se),me){var _e=fl(ce),Q=fl(se),de=qr(ce),Ve=qr(se);_e!==Q||de!==Ve?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var h=s.key;h===Cn.Escape&&(s.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var h=r.props,p=h.selectsRange,_=h.onChange;_?.(p?[null,null]:null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,h;return!r.props.inline&&!r.isCalendarOpen()?null:Ct.createElement(Xhe,li({showMonthYearDropdown:void 0,ref:function(p){r.calendar=p}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Ahe(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(h=r.props.dropdownMode)!==null&&h!==void 0?h:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s,h=r.props.locale,p=(s=r.props.dateFormat)!==null&&s!==void 0?s:e.defaultProps.dateFormat,_=r.props.showTimeInput||r.props.showTimeSelect,o=_?"PPPPp":"PPPP",T;return r.props.selectsRange?T="Selected start date: ".concat(Lc(r.props.startDate,{dateFormat:o,locale:h}),". ").concat(r.props.endDate?"End date: "+Lc(r.props.endDate,{dateFormat:o,locale:h}):""):r.props.showTimeSelectOnly?T="Selected time: ".concat(Lc(r.props.selected,{dateFormat:p,locale:h})):r.props.showYearPicker?T="Selected year: ".concat(Lc(r.props.selected,{dateFormat:"yyyy",locale:h})):r.props.showMonthYearPicker?T="Selected month: ".concat(Lc(r.props.selected,{dateFormat:"MMMM yyyy",locale:h})):r.props.showQuarterYearPicker?T="Selected quarter: ".concat(Lc(r.props.selected,{dateFormat:"yyyy, QQQ",locale:h})):T="Selected date: ".concat(Lc(r.props.selected,{dateFormat:o,locale:h})),Ct.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},T)},r.renderDateInput=function(){var s,h,p=pn(r.props.className,(s={},s[r.props.outsideClickIgnoreClass||e.defaultProps.outsideClickIgnoreClass]=r.state.open,s)),_=r.props.customInput||Ct.createElement("input",{type:"text"}),o=r.props.customInputRef||"ref";return H.cloneElement(_,(h={},h[o]=function(T){r.input=T},h.value=r.getInputValue(),h.onBlur=r.handleBlur,h.onChange=r.handleChange,h.onClick=r.onInputClick,h.onFocus=r.handleFocus,h.onKeyDown=r.onInputKeyDown,h.id=r.props.id,h.name=r.props.name,h.form=r.props.form,h.autoFocus=r.props.autoFocus,h.placeholder=r.props.placeholderText,h.disabled=r.props.disabled,h.autoComplete=r.props.autoComplete,h.className=pn(_.props.className,p),h.title=r.props.title,h.readOnly=r.props.readOnly,h.required=r.props.required,h.tabIndex=r.props.tabIndex,h["aria-describedby"]=r.props.ariaDescribedBy,h["aria-invalid"]=r.props.ariaInvalid,h["aria-labelledby"]=r.props.ariaLabelledBy,h["aria-required"]=r.props.ariaRequired,h))},r.renderClearButton=function(){var s=r.props,h=s.isClearable,p=s.disabled,_=s.selected,o=s.startDate,T=s.endDate,I=s.clearButtonTitle,M=s.clearButtonClassName,L=M===void 0?"":M,F=s.ariaLabelClose,q=F===void 0?"Close":F,$=s.selectedDates,X=s.readOnly;return h&&!X&&(_!=null||o!=null||T!=null||$?.length)?Ct.createElement("button",{type:"button",className:pn("react-datepicker__close-icon",L,{"react-datepicker__close-icon--disabled":p}),disabled:p,"aria-label":q,onClick:r.onClearClick,title:I,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:rU,readOnly:!1,rangeSeparator:Z6,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:S1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,r){var s,h,p,_;n.inline&&nde(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:lN(this.props.highlightDates)}),!r.focused&&!my(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((h=(s=this.props).onCalendarOpen)===null||h===void 0||h.call(s)),r.open===!0&&this.state.open===!1&&((_=(p=this.props).onCalendarClose)===null||_===void 0||_.call(p)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,h=n.calendarIconClassname,p=n.calendarIconClassName,_=n.toggleCalendarOnIconClick,o=this.state.open;return h&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Ct.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&Ct.createElement(Khe,li({icon:s,className:pn(p,!p&&h,o&&"react-datepicker-ignore-onclickoutside")},_?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?Ct.createElement(sU,{enableTabLoop:this.props.enableTabLoop},Ct.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=Ct.createElement(iU,li({portalId:this.props.portalId},this.props),r)),Ct.createElement("div",null,this.renderInputContainer(),r)}return Ct.createElement(tde,li({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(H.Component),rde="input",jA="navigate";const ide=Os(V.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),sde=Os(V.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"})),ode=Os([V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),V.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),ade=Os(V.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),tb=Ou`
  0% {
    opacity: 0;
    transform: translateY(18px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,lde=Ou`
  0% {
    opacity: 0;
    transform: scale(0.92);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,cde=Ou`
  0% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
  100% { transform: translateY(0); }
`;Ou`
  0% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
`;Ou`
  0% {
    opacity: 0;
    transform: translateX(20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
`;async function uk(t){const{ownerUserId:e,otherUserId:n,eventCode:r,note:s}=t,h=`${e}_${r}_${n}`,p=$c(fa,"interactions",h),o=!(await Fy(p)).exists(),T={ownerUserId:e,otherUserId:n,eventCode:r,updatedAt:Jm()};o&&(T.createdAt=Jm(),s!==void 0?T.note=s:T.note="",T.favorite=!1),await Dv(p,T,{merge:!0})}async function mN(t){const{ownerUserId:e,otherUserId:n,eventCode:r,note:s,favorite:h}=t,p=`${e}_${r}_${n}`,_=$c(fa,"interactions",p),o={updatedAt:Jm()};s!==void 0&&(o.note=s),h!==void 0&&(o.favorite=h),await Dv(_,o,{merge:!0})}async function ude(t){const{ownerUserId:e,otherUserId:n,eventCode:r}=t,s=`${e}_${r}_${n}`,h=$c(fa,"interactions",s);await NT(h)}async function hde(t,e){const n=TS(u1(fa,"interactions"),Nb("ownerUserId","==",t),Nb("eventCode","==",e));return(await d1(n)).docs.map(s=>({id:s.id,...s.data()}))}const t0="events",tC="eventMemberships";async function dde(t){const{code:e,name:n,date:r,time:s,location:h,createdByUid:p,role:_,imageUrl:o,lat:T,lng:I,startTimestamp:M}=t,L=$c(fa,t0,e);if((await Fy(L)).exists())throw new Error("Event code already exists.");await Dv(L,{code:e,name:n,date:r,time:s,location:h,createdByUid:p,imageUrl:o||null,lat:T??null,lng:I??null,startTimestamp:M??null,createdAt:Jm()});const q=$c(fa,tC,`${p}_${e}`);await Dv(q,{eventCode:e,userId:p,role:_,joinedAt:Jm()})}async function fde(t,e,n){const r=$c(fa,t0,t),s=await Fy(r);if(!s.exists())throw new Error("Event code does not exist.");const h=$c(fa,tC,`${e}_${t}`);return await Dv(h,{eventCode:t,userId:e,role:n,joinedAt:Jm()},{merge:!0}),s.data()}async function pde(t){const e=TS(u1(fa,tC),Nb("userId","==",t)),n=await d1(e),r=[];for(const s of n.docs){const{eventCode:h,role:p}=s.data(),_=$c(fa,t0,h),o=await Fy(_);o.exists()&&r.push({event:o.data(),role:p})}return r}async function mde(t,e){const n=$c(fa,t0,t),r=await Fy(n);if(!r.exists())throw new Error("Event does not exist.");const s=r.data(),h=$c(fa,tC,`${e}_${t}`);if(s.createdByUid!==e){await NT(h);return}await Promise.all([NT(n),NT(h)])}async function gde(){return(await d1(u1(fa,t0))).docs.map(e=>e.data())}async function yde(t){const e=$c(fa,t0,t),n=await Fy(e);return n.exists()?n.data():null}function _de(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}async function vde(t,e){const n=TS(u1(fa,"profiles"),Nb("slug","==",t));return(await d1(n)).docs.some(s=>s.id!==e)}async function xde(t,e){const n=_de(t);if(!n)return`user-${e.slice(0,8)}`;let r=n,s=2;for(;await vde(r,e);)r=`${n}-${s}`,s++;return r}async function bde(t,e){const n=$c(fa,"profiles",t);let r=e.slug;!r&&e.name&&(r=await xde(e.name,t)),await Dv(n,{...e,slug:r,userId:t,updatedAt:Jm(),createdAt:e.createdAt||Jm()},{merge:!0})}async function A1(t){const e=$c(fa,"profiles",t),n=await Fy(e);return n.exists()?n.data():null}async function oU(t){const e=TS(u1(fa,"profiles"),Nb("slug","==",t)),n=await d1(e);return n.empty?null:n.docs[0].data()}async function hk(t){const e=await oU(t);return e||await A1(t)}const aU=H.createContext({mode:"light",toggleColorMode:()=>{}});function wde({children:t}){const[e,n]=H.useState("light"),r=()=>{n(p=>p==="light"?"dark":"light")},s=H.useMemo(()=>({mode:e,toggleColorMode:r}),[e]),h=H.useMemo(()=>VS({palette:{mode:e,primary:{main:e==="light"?"#2563eb":"#3b82f6",light:e==="light"?"#60a5fa":"#93c5fd",dark:e==="light"?"#1e40af":"#1d4ed8"},secondary:{main:e==="light"?"#7c3aed":"#a78bfa",light:e==="light"?"#a78bfa":"#c4b5fd",dark:e==="light"?"#5b21b6":"#6d28d9"},success:{main:e==="light"?"#059669":"#10b981"},background:{default:e==="light"?"#f8fafc":"#0f172a",paper:e==="light"?"#ffffff":"#1e293b"}},typography:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif",h1:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:800,letterSpacing:"-0.035em",fontSize:"3.5rem",lineHeight:1.15},h2:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:700,letterSpacing:"-0.03em",fontSize:"2.75rem",lineHeight:1.2},h3:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:700,letterSpacing:"-0.025em",fontSize:"2.25rem",lineHeight:1.25},h4:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:700,letterSpacing:"-0.02em",fontSize:"1.875rem",lineHeight:1.3},h5:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:600,letterSpacing:"-0.015em",fontSize:"1.5rem",lineHeight:1.35},h6:{fontFamily:"'Poppins', 'Inter', sans-serif",fontWeight:600,letterSpacing:"-0.01em",fontSize:"1.25rem",lineHeight:1.4},subtitle1:{fontFamily:"'Inter', sans-serif",fontWeight:600,fontSize:"1.125rem",letterSpacing:"-0.01em",lineHeight:1.5},subtitle2:{fontFamily:"'Inter', sans-serif",fontWeight:600,fontSize:"1rem",letterSpacing:"-0.005em",lineHeight:1.5},body1:{fontFamily:"'Inter', sans-serif",fontSize:"1rem",fontWeight:400,letterSpacing:"-0.011em",lineHeight:1.75},body2:{fontFamily:"'Inter', sans-serif",fontSize:"0.875rem",fontWeight:400,letterSpacing:"-0.006em",lineHeight:1.65},button:{fontFamily:"'Inter', sans-serif",textTransform:"none",fontWeight:600,letterSpacing:"-0.01em",fontSize:"0.9375rem"},caption:{fontFamily:"'Inter', sans-serif",fontSize:"0.75rem",fontWeight:400,letterSpacing:"0.01em",lineHeight:1.5},overline:{fontFamily:"'Inter', sans-serif",fontSize:"0.75rem",fontWeight:700,letterSpacing:"0.08em",textTransform:"uppercase",lineHeight:1.5}},shape:{borderRadius:12},shadows:["none","0 1px 2px 0 rgb(0 0 0 / 0.05)","0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)","0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)","0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)","0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)","0 25px 50px -12px rgb(0 0 0 / 0.25)"],components:{MuiButton:{styleOverrides:{root:{borderRadius:10,padding:"10px 24px",fontSize:"0.95rem",boxShadow:"none",transition:"all 0.2s ease","&:hover":{boxShadow:"0 4px 12px 0 rgb(0 0 0 / 0.15)",transform:"translateY(-1px)"}},contained:{fontWeight:600}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:e==="light"?"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)":"0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3)"}}},MuiPaper:{styleOverrides:{root:{borderRadius:12}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:10}}}},MuiChip:{styleOverrides:{root:{fontWeight:500,borderRadius:8}}}}}),[e]);return V.jsx(aU.Provider,{value:s,children:V.jsxs(ane,{theme:h,children:[V.jsx(mie,{}),t]})})}function Tde(){const{mode:t,toggleColorMode:e}=H.useContext(aU),n=t==="dark";return V.jsxs("label",{className:"switch",children:[V.jsx("input",{type:"checkbox",checked:n,onChange:e}),V.jsxs("span",{className:"slider",children:[V.jsx("span",{className:"star star_1"}),V.jsx("span",{className:"star star_2"}),V.jsx("span",{className:"star star_3"}),V.jsx("svg",{className:"cloud",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:V.jsx("path",{fill:"#fff",d:"M406.5 399.1c47.6 0 86.2-38.6 86.2-86.2s-38.6-86.2-86.2-86.2c-1.9 0-3.8.1-5.6.2C390.3 165.5 338.4 128 278 128c-53.4 0-99 33.5-117.2 80.5-4.7-.5-9.5-.8-14.3-.8-61.9 0-112.1 50.2-112.1 112.1S84.6 432 146.5 432h260z"})})]})]})}const Ede=Os(V.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"})),$A=t=>`https://picsum.photos/seed/${t}/800/400`,Sde=H.forwardRef(function(e,n){return V.jsx(Js,{...e,fullWidth:!0,inputRef:n})}),Cde=H.forwardRef(function(e,n){return V.jsx(Js,{...e,fullWidth:!0,inputRef:n})});function Ade(){const{user:t}=H.useContext(Sp),e=Uy(),n=Pu(),[r,s]=H.useState("");H.useEffect(()=>{t&&A1(t.uid).then(Lt=>{Lt?.firstName&&s(Lt.firstName)})},[t]);const h=r||"",[p,_]=H.useState([]),[o,T]=H.useState(!0),[I,M]=H.useState(!1),[L,F]=H.useState(""),[q,$]=H.useState("attendee"),[X,te]=H.useState(""),[he,ie]=H.useState(!1),[me,ge]=H.useState(""),[Ee,ce]=H.useState(""),[ee,le]=H.useState(""),[se,_e]=H.useState(null),[Q,de]=H.useState(null),[Ve,Ke]=H.useState(""),[Ce,Xe]=H.useState("attendee"),[tt,Be]=H.useState(null),[yt,Me]=H.useState(null),[et,At]=H.useState("");H.useEffect(()=>{if(!t){_([]),T(!1);return}T(!0),pde(t.uid).then(Lt=>{const Ft=Lt.map(({event:gn,role:mn})=>({code:gn.code,name:gn.name,date:gn.date,time:gn.time,location:gn.location,joined:!0,image:gn.imageUrl||$A(gn.code),createdByUid:gn.createdByUid,role:mn}));_(Ft)}).finally(()=>T(!1))},[t]);const Dt=async()=>{if(!L.trim()||!t)return;const Lt=L.trim().toUpperCase();try{const Ft=await fde(Lt,t.uid,q),gn=Ft.imageUrl||$A(Ft.code);_(mn=>mn.find(On=>On.code===Lt)?mn.map(On=>On.code===Lt?{...On,joined:!0,role:q}:On):[...mn,{code:Ft.code,name:Ft.name,date:Ft.date,time:Ft.time,location:Ft.location,joined:!0,image:gn,createdByUid:Ft.createdByUid,role:q}]),n(`/nearby/${Lt}`),F(""),te(""),M(!1)}catch(Ft){te(Ft.message||"Could not join event.")}},Gt=async()=>{if(!t)return;if(!me.trim()){At("Event name is required.");return}const Lt=Math.random().toString(36).substring(2,8).toUpperCase(),Ft=Ee||"TBD",gn=ee||"TBD",mn=Ve||"TBD";try{let tr;if(yt){const jn=yQ(TQ,`event_images/${t.uid}/${Lt}_${yt.name}`);await mQ(jn,yt),tr=await gQ(jn)}await dde({code:Lt,name:me.trim(),date:Ft,time:gn,location:mn,createdByUid:t.uid,role:Ce,imageUrl:tr});const On={code:Lt,name:me.trim(),date:Ft,time:gn,location:mn,joined:!0,image:tr||$A(Lt),createdByUid:t.uid,role:Ce};_(jn=>[...jn,On]),Be(Lt),At(""),Me(null),ie(!1),ge(""),ce(""),le(""),Ke("")}catch(tr){console.error(tr),At(tr.message||"Failed to create event.")}},Kt=()=>{ie(!1),At(""),Be(null),Me(null),ge(""),ce(""),le(""),Ke("")},dn=async Lt=>{if(!(!t||!window.confirm("Are you sure you want to delete this event? This cannot be undone.")))try{await mde(Lt,t.uid),_(gn=>gn.filter(mn=>mn.code!==Lt))}catch(gn){console.error(gn),alert(gn.message||"Failed to delete event.")}},Fn=t?p.filter(Lt=>Lt.createdByUid===t.uid):[],An=t?p.filter(Lt=>Lt.createdByUid!==t.uid):p,Tn=(Lt,Ft)=>V.jsx(wn,{sx:{flex:"1 1 350px",maxWidth:500},children:V.jsx("div",{className:"event-card-container",children:V.jsx("div",{className:"event-card-border",children:V.jsx("div",{className:"event-card-shadow",children:V.jsx("div",{className:"event-card-content",children:V.jsxs($D,{elevation:0,sx:{borderRadius:2,overflow:"hidden",position:"relative",backgroundImage:`url(${Lt.image})`,backgroundSize:"cover",backgroundPosition:"center",color:"common.white",animation:`${lde} 0.4s ease-out`,animationDelay:`${Ft*.05}s`,animationFillMode:"backwards",height:"100%"},children:[V.jsx(wn,{sx:{position:"absolute",inset:0,bgcolor:"rgba(0,0,0,0.6)"}}),V.jsxs(HD,{sx:{position:"relative"},children:[V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:V.jsx("b",{children:Lt.name})}),V.jsxs(hr,{spacing:.5,children:[V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",children:[V.jsx(sde,{fontSize:"small"}),V.jsx(Jt,{variant:"body2",children:Lt.date})]}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",children:[V.jsx(ode,{fontSize:"small"}),V.jsx(Jt,{variant:"body2",children:Lt.time})]}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",children:[V.jsx(ade,{fontSize:"small"}),V.jsx(Jt,{variant:"body2",children:Lt.location})]}),V.jsxs(Jt,{variant:"body2",sx:{mt:.5,opacity:.85},children:["Code: ",Lt.code]}),Lt.role&&V.jsxs(Jt,{variant:"body2",sx:{opacity:.9},children:["Your role:"," ",Lt.role==="recruiter"?"Recruiter":"Attendee"]})]})]}),V.jsxs(qD,{sx:{position:"relative"},children:[V.jsx(ss,{size:"small",component:Bc,to:`/events/${Lt.code}`,sx:{color:"common.white"},children:"View Contacts"}),Lt.joined&&V.jsx(ss,{size:"small",component:Bc,to:`/nearby/${Lt.code}`,sx:{color:"common.white"},children:"Find Nearby"}),t&&Lt.createdByUid===t.uid&&V.jsx(ss,{size:"small",color:"error",sx:{ml:"auto",color:"error.light"},onClick:()=>dn(Lt.code),children:"Delete"})]})]})})})})})},Lt.code);return V.jsxs(wn,{sx:{minHeight:"100vh",bgcolor:e.palette.mode==="dark"?"background.default":"#f5f5f7"},children:[V.jsx(wn,{sx:{position:"fixed",top:30,left:15,zIndex:2e3},children:V.jsx(ss,{variant:"contained",color:"error",startIcon:V.jsx(Ede,{}),onClick:async()=>{await CQ(),n("/")},sx:{boxShadow:2,"&:hover":{boxShadow:4}},children:"Logout"})}),V.jsx(zh,{maxWidth:"lg",sx:{pt:10,pb:6},children:V.jsxs(hr,{spacing:4,children:[V.jsxs(hr,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{animation:`${tb} 0.6s ease-out`},children:[V.jsxs(wn,{children:[V.jsx(Jt,{variant:"h4",fontWeight:600,children:"Events Dashboard"}),V.jsx(Jt,{variant:"body2",color:"text.secondary",children:"Create events, join events, see whos nearby, and manage your profile."})]}),V.jsx(Tde,{})]}),V.jsxs(hr,{spacing:1,sx:{animation:`${tb} 0.7s ease-out`},children:[V.jsxs(Jt,{variant:"body1",children:["Welcome ",V.jsx("b",{children:h}),"!"]}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsx(ss,{variant:"contained",component:Bc,to:"/profile/me",children:"My Profile"}),V.jsx(ss,{color:"secondary",variant:"contained",component:Bc,to:"/map",children:"Search for nearby events"}),V.jsx(ss,{variant:"outlined",onClick:()=>{M(!0),te(""),F("")},children:"Join Event"})]})]}),V.jsxs(hr,{spacing:3,children:[o&&V.jsx(Jt,{variant:"body2",color:"text.secondary",children:"Loading your events"}),Fn.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(Jt,{variant:"h6",fontWeight:600,sx:{animation:`${tb} 0.8s ease-out`},children:"Events you created"}),V.jsx(wn,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:Fn.map((Lt,Ft)=>Tn(Lt,Ft))})]}),V.jsx(Jt,{variant:"h6",fontWeight:600,sx:{animation:`${tb} 0.8s ease-out`},children:"Your Events"}),V.jsxs(wn,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[p.length===0&&!o&&V.jsx(Jt,{variant:"body2",color:"text.secondary",children:"You havent joined any events yet."}),An.map((Lt,Ft)=>Tn(Lt,Ft))]})]})]})}),V.jsx(ise,{color:"primary","aria-label":"create-event",sx:{position:"fixed",bottom:24,right:24,animation:`${cde} 3s ease-in-out infinite`},onClick:()=>{ie(!0),Be(null)},children:V.jsx(ide,{})}),V.jsxs(sz,{open:I,onClose:()=>{M(!1),te(""),F("")},maxWidth:"sm",fullWidth:!0,children:[V.jsx(lz,{children:"Join Event"}),V.jsx(az,{children:V.jsxs(hr,{spacing:2,sx:{mt:1},children:[V.jsx(Js,{autoFocus:!0,margin:"dense",label:"Event Code",fullWidth:!0,variant:"outlined",value:L,onChange:Lt=>{F(Lt.target.value.toUpperCase()),te("")},onKeyDown:Lt=>{Lt.key==="Enter"&&Dt()}}),V.jsxs(uM,{children:[V.jsx(hM,{children:"I am attending as"}),V.jsxs(bz,{row:!0,value:q,onChange:Lt=>$(Lt.target.value),children:[V.jsx(sT,{value:"attendee",control:V.jsx(aT,{}),label:"Attendee"}),V.jsx(sT,{value:"recruiter",control:V.jsx(aT,{}),label:"Recruiter"})]})]}),X&&V.jsx(Jt,{color:"error",children:X})]})}),V.jsxs(oz,{children:[V.jsx(ss,{onClick:()=>{M(!1),te(""),F("")},children:"Cancel"}),V.jsx(ss,{variant:"contained",onClick:Dt,children:"Join"})]})]}),V.jsxs(sz,{open:he,onClose:Kt,maxWidth:"md",fullWidth:!0,children:[V.jsx(lz,{children:"Create Event"}),V.jsx(az,{children:V.jsxs(hr,{spacing:2,sx:{mt:1},children:[V.jsx(Js,{label:"Event Name",fullWidth:!0,variant:"outlined",value:me,onChange:Lt=>ge(Lt.target.value)}),V.jsx(pN,{selected:se,onChange:Lt=>{if(_e(Lt),Lt){const Ft=Lt.getFullYear(),gn=String(Lt.getMonth()+1).padStart(2,"0"),mn=String(Lt.getDate()).padStart(2,"0");ce(`${Ft}-${gn}-${mn}`)}else ce("")},dateFormat:"yyyy-MM-dd",customInput:V.jsx(Sde,{label:"Date"})}),V.jsx(pN,{selected:Q,onChange:Lt=>{if(de(Lt),Lt){const Ft=String(Lt.getHours()).padStart(2,"0"),gn=String(Lt.getMinutes()).padStart(2,"0");le(`${Ft}:${gn}`)}else le("")},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"hh:mm aa",customInput:V.jsx(Cde,{label:"Time"})}),V.jsx(Js,{label:"Location",fullWidth:!0,variant:"outlined",value:Ve,onChange:Lt=>Ke(Lt.target.value)}),V.jsxs(ss,{variant:"outlined",component:"label",sx:{alignSelf:"flex-start",mt:1},children:["Upload event image",V.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:Lt=>Me(Lt.target.files?.[0]||null)})]}),yt&&V.jsxs(Jt,{variant:"caption",children:["Selected: ",yt.name]}),V.jsxs(uM,{children:[V.jsx(hM,{children:"I am attending as"}),V.jsxs(bz,{row:!0,value:Ce,onChange:Lt=>Xe(Lt.target.value),children:[V.jsx(sT,{value:"attendee",control:V.jsx(aT,{}),label:"Attendee"}),V.jsx(sT,{value:"recruiter",control:V.jsx(aT,{}),label:"Recruiter"})]})]}),tt&&V.jsxs(Jt,{children:["Event created! Code: ",V.jsx("b",{children:tt})]}),et&&V.jsx(Jt,{color:"error",children:et})]})}),V.jsxs(oz,{children:[V.jsx(ss,{onClick:Kt,children:"Close"}),V.jsx(ss,{variant:"contained",onClick:Gt,children:"Create"})]})]})]})}const Ide=Os([V.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),V.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),dk=Os(V.jsx("path",{d:"m18 4 2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4z"})),Mde=Os(V.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),Rde="/assets/defaultAvatar-DC3-Upee.png";function Dde(){const{user:t}=H.useContext(Sp),e=Pu(),[n,r]=H.useState(""),[s,h]=H.useState(""),[p,_]=H.useState(""),[o,T]=H.useState(""),[I,M]=H.useState(""),[L,F]=H.useState(""),[q,$]=H.useState(""),[X,te]=H.useState(""),[he,ie]=H.useState([]),[me,ge]=H.useState(""),[Ee,ce]=H.useState(!1),[ee,le]=H.useState(""),se=H.useRef([]);H.useEffect(()=>{if(!t)return;let Be=!0;return(async()=>{try{const yt=await A1(t.uid);if(!Be||!yt)return;const Me=(yt.name||"").split(" ");r(yt.firstName||Me[0]||""),h(yt.lastName||Me.slice(1).join(" ")||""),_(yt.bio||""),Array.isArray(yt.interests)?T(yt.interests.join(", ")):yt.interests&&T(yt.interests),M(yt.linkedin||""),F(yt.website||""),$(yt.photoURL||""),te(yt.resumeUrl||""),ie(yt.galleryUrls||[]),ge(yt.videoUrl||"")}catch(yt){console.error("Failed to load profile:",yt)}})(),()=>{Be=!1,se.current.forEach(yt=>URL.revokeObjectURL(yt))}},[t]);const _e=Be=>{se.current.push(Be)},Q=Be=>{if(!Be)return;const yt=URL.createObjectURL(Be);_e(yt),$(yt)},de=Be=>{if(!Be)return;if(Be.type!=="application/pdf"){le("Resume must be a PDF file.");return}const yt=URL.createObjectURL(Be);_e(yt),te(yt)},Ve=Be=>{if(!Be)return;const yt=[];Array.from(Be).slice(0,5).forEach(Me=>{if(Me.type.startsWith("image/")){const et=URL.createObjectURL(Me);_e(et),yt.push(et)}}),yt.length&&ie(yt)},Ke=Be=>{if(!Be)return;if(!Be.type.startsWith("video/")){le("Video must be a video file (mp4, webm, etc).");return}const yt=URL.createObjectURL(Be),Me=document.createElement("video");Me.preload="metadata",Me.src=yt,Me.onloadedmetadata=()=>{if(window.URL.revokeObjectURL(Me.src),Me.duration>60){le("Video must be at most 60 seconds long.");return}_e(yt),ge(yt)}},Ce=async Be=>{if(Be.preventDefault(),le(""),!t){le("You must be signed in to save your profile.");return}ce(!0);try{const yt=o.split(",").map(et=>et.trim()).filter(Boolean),Me=`${n} ${s}`.trim();await bde(t.uid,{firstName:n,lastName:s,name:Me,bio:p,interests:yt,linkedin:I,website:L,photoURL:q,resumeUrl:X,galleryUrls:he,videoUrl:me}),e("/profile/me")}catch(yt){console.error(yt),le("Failed to save profile. Check console for details.")}finally{ce(!1)}},Xe=X||"",tt=Xe.includes("drive.google.com/file/d/")?Xe.replace(/\/view.*$/,"/preview"):Xe;return V.jsx(wn,{sx:{minHeight:"100vh",pt:8,display:"flex",alignItems:"center",justifyContent:"center"},children:V.jsx(zh,{maxWidth:"sm",children:V.jsxs(Vl,{sx:{p:4,borderRadius:4,boxShadow:6,backdropFilter:"blur(8px)"},children:[V.jsx(Jt,{variant:"h5",gutterBottom:!0,align:"center",children:"Edit Profile"}),V.jsxs(hr,{spacing:3,alignItems:"center",sx:{mb:2},children:[V.jsx(w1,{src:q||Rde,sx:{width:120,height:120,boxShadow:4,border:"3px solid white"}}),V.jsxs(hr,{direction:"row",spacing:1,children:[V.jsxs(ss,{variant:"outlined",component:"label",startIcon:V.jsx(Ide,{}),children:["Upload Photo",V.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:Be=>Q(Be.target.files?.[0]||null)})]}),V.jsx(Js,{size:"small",label:"Photo URL",value:q,onChange:Be=>$(Be.target.value)})]})]}),V.jsx(wn,{component:"form",onSubmit:Ce,children:V.jsxs(hr,{spacing:2,children:[V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsx(Js,{label:"First name",fullWidth:!0,value:n,onChange:Be=>r(Be.target.value),disabled:Ee}),V.jsx(Js,{label:"Last name",fullWidth:!0,value:s,onChange:Be=>h(Be.target.value),disabled:Ee})]}),V.jsx(Js,{label:"Bio",fullWidth:!0,multiline:!0,minRows:3,value:p,onChange:Be=>_(Be.target.value),disabled:Ee}),V.jsx(Js,{label:"Interests (comma separated)",fullWidth:!0,value:o,onChange:Be=>T(Be.target.value),disabled:Ee}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsx(Js,{label:"LinkedIn URL",fullWidth:!0,value:I,onChange:Be=>M(Be.target.value),disabled:Ee}),V.jsx(Js,{label:"Website",fullWidth:!0,value:L,onChange:Be=>F(Be.target.value),disabled:Ee})]}),V.jsx(eo,{flexItem:!0}),V.jsx(Jt,{variant:"subtitle1",children:"Resume (PDF)"}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsxs(ss,{variant:"outlined",component:"label",children:["Upload PDF",V.jsx("input",{type:"file",accept:"application/pdf",hidden:!0,onChange:Be=>de(Be.target.files?.[0]||null)})]}),V.jsx(Js,{label:"Resume URL (Drive or direct)",fullWidth:!0,value:X,onChange:Be=>te(Be.target.value)})]}),X&&V.jsx(wn,{sx:{mt:1,borderRadius:2,border:"1px solid",borderColor:"divider",p:1,bgcolor:"background.default",height:260,overflow:"hidden"},children:V.jsx("iframe",{src:tt,title:"Resume preview",style:{border:"none",width:"100%",height:"100%"}})}),V.jsx(eo,{flexItem:!0}),V.jsx(Jt,{variant:"subtitle1",children:"Photo Gallery (up to 5 images)"}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsxs(ss,{variant:"outlined",component:"label",startIcon:V.jsx(Mde,{}),children:["Upload Images",V.jsx("input",{type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:Be=>Ve(Be.target.files)})]}),V.jsx(Js,{label:"Image URLs (comma separated, optional)",fullWidth:!0,value:he.join(", "),onChange:Be=>ie(Be.target.value.split(",").map(yt=>yt.trim()).filter(Boolean))})]}),V.jsx(eo,{flexItem:!0}),V.jsx(Jt,{variant:"subtitle1",children:"Video Portfolio (max 60 seconds)"}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:2,children:[V.jsxs(ss,{variant:"outlined",component:"label",startIcon:V.jsx(dk,{}),children:["Upload Video",V.jsx("input",{type:"file",accept:"video/*",hidden:!0,onChange:Be=>Ke(Be.target.files?.[0]||null)})]}),V.jsx(Js,{label:"Video URL (optional)",fullWidth:!0,value:me,onChange:Be=>ge(Be.target.value)})]}),ee&&V.jsx(Jt,{color:"error",variant:"body2",children:ee}),V.jsx(ss,{type:"submit",variant:"contained",disabled:Ee,children:Ee?"Saving...":"Save Profile"})]})})]})})})}const fk=Os(V.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"})),pk=Os(V.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"})),mk=Os(V.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"})),gk=Os(V.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"})),KE=Os(V.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"})),yk=Os(V.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),kde=sg(VD),nC=({onClick:t})=>{const e=Pu(),r=Uy().palette.mode==="dark",s=()=>{t?t():e(-1)};return V.jsx(wn,{sx:{position:"fixed",top:70,left:45,zIndex:2e3},children:V.jsx(kde,{onClick:s,sx:{bgcolor:r?"rgba(0, 0, 0, 0.95)":"rgba(255,255,255,0.95)",color:r?"grey.100":"text.primary",border:r?"1px solid rgba(255,255,255,0.1)":"1px solid rgba(0,0,0,0.06)",boxShadow:2,"&:hover":{bgcolor:r?"rgba(30, 30, 30, 0.95)":"grey.100"}},"aria-label":"Back",initial:{opacity:0,x:-8,scale:.9},animate:{opacity:1,x:[0,4,0],scale:1},transition:{opacity:{duration:.25},scale:{duration:.25},x:{duration:1.4,repeat:1/0,repeatType:"reverse",delay:.6}},whileTap:{x:-18,opacity:.7,scale:.95},children:V.jsx(yk,{})})})},Pde=Ou`
  0% { opacity: 0; transform: translateY(16px); }
  100% { opacity: 1; transform: translateY(0); }
`,gN={transition:"transform 0.25s ease, box-shadow 0.25s ease","&:hover":{transform:"translateY(-4px)",boxShadow:8}};function Lde(){const{user:t}=H.useContext(Sp),[e,n]=H.useState(null),[r,s]=H.useState(!1);H.useEffect(()=>{if(!t)return;let M=!0;return s(!0),(async()=>{try{const L=await A1(t.uid);if(!M)return;n(L||{})}catch(L){console.error("Failed to load profile:",L)}finally{M&&s(!1)}})(),()=>{M=!1}},[t]);const h=(e?.name||e?.firstName||t?.email||"U").trim().charAt(0).toUpperCase()||"U",p=(e?.galleryUrls||[]).filter(Boolean),_=e?.resumeUrl||"",o=_.includes("drive.google.com/file/d/")?_.replace(/\/view.*$/,"/preview"):_;function T(M){try{const L=new URL(M);if(L.hostname.includes("youtube.com")&&L.searchParams.get("v"))return`https://www.youtube.com/embed/${L.searchParams.get("v")}`;if(L.hostname==="youtu.be")return`https://www.youtube.com/embed${L.pathname}`}catch{}return null}const I=e?.videoUrl?T(e.videoUrl):null;return V.jsxs(wn,{sx:{minHeight:"100vh",pt:8,display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at top, rgba(25,118,210,0.13), transparent 60%)"},children:[V.jsx(nC,{}),V.jsx(zh,{maxWidth:"sm",children:V.jsxs(Vl,{sx:{p:4,borderRadius:4,animation:`${Pde} 0.45s ease-out`,...gN},children:[V.jsxs(hr,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[V.jsx(Jt,{variant:"h5",children:"My Profile"}),V.jsx(ss,{variant:"outlined",size:"small",component:Bc,to:"/profile/edit",children:"Edit"})]}),r?V.jsx(Jt,{children:"Loading"}):V.jsxs(V.Fragment,{children:[V.jsxs(hr,{direction:"column",alignItems:"center",spacing:2,children:[V.jsx(w1,{src:e?.photoURL||void 0,sx:{width:120,height:120,bgcolor:"primary.main",fontSize:40},children:h}),V.jsx(Jt,{variant:"h4",align:"center",children:e?.name||"(name not set)"}),e?.bio&&V.jsxs(wn,{sx:{mt:1,width:"100%"},children:[V.jsx(Jt,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Bio"}),V.jsx(Jt,{variant:"body1",color:"text.secondary",sx:{whiteSpace:"pre-line"},children:e.bio})]})]}),V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{spacing:1.5,children:[e?.email&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(fk,{color:"action"}),V.jsx(Jt,{sx:{wordBreak:"break-word"},children:e.email})]}),e?.phone&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(pk,{color:"action"}),V.jsx(Jt,{sx:{wordBreak:"break-word"},children:e.phone})]}),e?.linkedin&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(mk,{color:"action"}),V.jsx(Jt,{component:"a",href:e.linkedin,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",wordBreak:"break-word"},children:"LinkedIn"})]}),e?.website&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(gk,{color:"action"}),V.jsx(Jt,{component:"a",href:e.website,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",wordBreak:"break-word"},children:"Website"})]})]}),e?.interests&&e.interests.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:"Interests"}),V.jsx(wn,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.interests.map((M,L)=>V.jsx(b1,{label:M,color:"primary",variant:"outlined"},L))})]}),e?.resumeUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:"Resume"}),V.jsx(wn,{sx:{borderRadius:2,border:"1px solid",borderColor:"divider",p:1,bgcolor:"background.default",height:300,overflow:"hidden"},children:V.jsx("iframe",{src:o,title:"Resume",style:{border:"none",width:"100%",height:"100%"}})})]}),p.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(KE,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Photos"})]}),V.jsx(wn,{sx:{display:"flex",flexDirection:"row",gap:1.5,overflowX:"auto",py:1,px:.5},children:p.map((M,L)=>V.jsx(wn,{sx:{flex:"0 0 70%",maxWidth:280,borderRadius:2,overflow:"hidden",boxShadow:3,...gN},children:V.jsx(wn,{component:"img",src:M,alt:`Gallery ${L+1}`,sx:{display:"block",width:"100%",height:"100%",objectFit:"cover",aspectRatio:"4 / 3"}})},L))})]}),e?.videoUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(dk,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Video Portfolio"})]}),I?V.jsx(wn,{component:"iframe",src:I,title:"YouTube video",sx:{width:"100%",aspectRatio:"16 / 9",border:0,borderRadius:2,boxShadow:3},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):V.jsx(wn,{component:"video",src:e.videoUrl,controls:!0,sx:{width:"100%",borderRadius:2,boxShadow:4,maxHeight:320,objectFit:"cover"}})]})]})]})})]})}const lU=Os(V.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"})),Ode=sg(VD),zde={transition:"transform 0.25s ease, boxShadow 0.25s ease","&:hover":{transform:"translateY(-4px)",boxShadow:8}};function Nde(){const{slug:t}=JE(),[e]=UN(),n=e.get("eventCode"),r=e.get("back")||"events",s=Pu(),{user:h}=H.useContext(Sp),[p,_]=H.useState(null),[o,T]=H.useState(!0),[I,M]=H.useState(!1);H.useEffect(()=>{t&&oU(t).then(he=>{he&&_(he)}).finally(()=>T(!1))},[t]);const L=async()=>{h&&n&&p&&!I&&(await uk({ownerUserId:h.uid,otherUserId:p.userId,eventCode:n,note:"Met via proximity detection"}),M(!0)),s(r==="nearby"&&n?`/nearby/${n}`:r==="contacts"&&n?`/events/${n}`:n?`/events/${n}`:"/events")};if(o)return V.jsx(wn,{sx:{display:"flex",justifyContent:"center",pt:10},children:V.jsx(Jt,{children:"Loading profile..."})});if(!p)return V.jsx(wn,{sx:{display:"flex",justifyContent:"center",pt:10},children:V.jsx(Jt,{children:"Profile not found"})});const F=p.resumeUrl||"",q=F.includes("drive.google.com/file/d/")?F.replace(/\/view.*$/,"/preview"):F,$=(p.galleryUrls||[]).filter(Boolean);function X(he){try{const ie=new URL(he);if(ie.hostname.includes("youtube.com")&&ie.searchParams.get("v"))return`https://www.youtube.com/embed/${ie.searchParams.get("v")}`;if(ie.hostname==="youtu.be")return`https://www.youtube.com/embed${ie.pathname}`}catch{}return null}const te=p.videoUrl?X(p.videoUrl):null;return V.jsxs(wn,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",pt:8},children:[V.jsx(wn,{sx:{position:"fixed",top:70,left:16,zIndex:1e3},children:V.jsx(Ode,{onClick:L,whileTap:{x:-10,opacity:.7},transition:{type:"spring",stiffness:300,damping:20},sx:{bgcolor:"white",boxShadow:2,"&:hover":{bgcolor:"grey.100"}},children:V.jsx(yk,{})})}),V.jsxs(zh,{maxWidth:"sm",sx:{py:4},children:[V.jsxs(Vl,{elevation:3,sx:{p:4,borderRadius:3},children:[V.jsxs(hr,{direction:"column",alignItems:"center",spacing:2,children:[V.jsx(w1,{src:p.photoURL,sx:{width:120,height:120,bgcolor:"primary.main",boxShadow:3},children:p.name?.charAt(0).toUpperCase()}),V.jsx(Jt,{variant:"h4",align:"center",children:p.name}),p.bio&&V.jsx(Jt,{variant:"body1",color:"text.secondary",align:"center",children:p.bio})]}),V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{spacing:2,children:[p.email&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(fk,{color:"action"}),V.jsx(Jt,{children:p.email})]}),p.phone&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(pk,{color:"action"}),V.jsx(Jt,{children:p.phone})]}),p.linkedin&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(mk,{color:"action"}),V.jsx(Jt,{component:"a",href:p.linkedin,target:"_blank",rel:"noreferrer",sx:{textDecoration:"none",color:"primary.main"},children:"LinkedIn Profile"})]}),p.website&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(gk,{color:"action"}),V.jsx(Jt,{component:"a",href:p.website,target:"_blank",rel:"noreferrer",sx:{textDecoration:"none",color:"primary.main"},children:p.website})]})]}),p.interests&&p.interests.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:"Interests"}),V.jsx(wn,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:p.interests.map((he,ie)=>V.jsx(b1,{label:he,color:"primary",variant:"outlined"},ie))})]}),p.resumeUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(lU,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Resume"})]}),V.jsx(wn,{component:"iframe",src:q,title:"Resume",sx:{width:"100%",height:320,borderRadius:2,border:"1px solid",borderColor:"divider",bgcolor:"background.paper"}})]}),$.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(KE,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Photos"})]}),V.jsx(wn,{sx:{display:"flex",flexDirection:"row",gap:1.5,overflowX:"auto",py:1,px:.5},children:$.map((he,ie)=>V.jsx(wn,{sx:{flex:"0 0 70%",maxWidth:280,borderRadius:2,overflow:"hidden",boxShadow:3,...zde},children:V.jsx(wn,{component:"img",src:he,alt:`Gallery ${ie+1}`,sx:{display:"block",width:"100%",height:"100%",objectFit:"cover",aspectRatio:"4 / 3"}})},ie))})]}),p.videoUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:"Video Portfolio"}),te?V.jsx(wn,{component:"iframe",src:te,title:"YouTube video",sx:{width:"100%",aspectRatio:"16 / 9",border:0,borderRadius:2,boxShadow:3},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):V.jsx(wn,{sx:{borderRadius:2,overflow:"hidden",bgcolor:"black"},children:V.jsx("video",{src:p.videoUrl,controls:!0,style:{width:"100%",maxHeight:260,display:"block"}})})]}),V.jsx(wn,{sx:{mt:4,display:"flex",justifyContent:"center"},children:V.jsx(ss,{variant:"contained",size:"large",fullWidth:!0,onClick:L,children:I?"Contact Saved! Go Back":"Save Contact & Go Back"})})]}),n&&V.jsxs(Jt,{variant:"caption",color:"text.secondary",align:"center",sx:{display:"block",mt:2},children:["Met at event: ",n]})]})]})}const Bde=Ou`
  0% { opacity: 0; transform: translateY(16px); }
  100% { opacity: 1; transform: translateY(0); }
`,qA={transition:"transform 0.25s ease, box-shadow 0.25s ease","&:hover":{transform:"translateY(-4px)",boxShadow:8}};function Fde(){const{slug:t}=JE(),[e]=UN(),n=e.get("eventCode"),r=e.get("eventName"),s=e.get("hidePortfolio")==="1",h=e.get("back")||"events",p=Pu(),{user:_}=H.useContext(Sp),[o,T]=H.useState(null),[I,M]=H.useState(!0),[L,F]=H.useState(!1);H.useEffect(()=>{let ie=!1;async function me(){if(!t){M(!1);return}try{const ge=await hk(t);console.log("ProfileView slug =",t,"data =",ge),!ie&&ge&&T(ge)}finally{ie||M(!1)}}return me(),()=>{ie=!0}},[t]);const q=async()=>{_&&n&&o&&!L&&(await uk({ownerUserId:_.uid,otherUserId:o.userId,eventCode:n,note:"Met via proximity detection"}),F(!0)),p(h==="nearby"&&n?`/nearby/${n}`:h==="contacts"&&n?`/events/${n}`:n?`/events/${n}`:"/dashboard")};if(I)return V.jsx(wn,{sx:{display:"flex",justifyContent:"center",pt:10},children:V.jsx(Jt,{children:"Loading profile..."})});if(!o)return V.jsx(wn,{sx:{display:"flex",justifyContent:"center",pt:10},children:V.jsx(Jt,{children:"Profile not found"})});const $=o.resumeUrl||"",X=$.includes("drive.google.com/file/d/")?$.replace(/\/view.*$/,"/preview"):$,te=(o.name||o.firstName||"").trim().charAt(0).toUpperCase()||"U",he=(o.galleryUrls||[]).filter(Boolean);return V.jsx(wn,{sx:{minHeight:"100vh",bgcolor:"#f5f5f5",pt:8,background:"radial-gradient(circle at top, rgba(25,118,210,0.13), transparent 60%)"},children:V.jsxs(zh,{maxWidth:"sm",sx:{py:2},children:[V.jsx(ss,{onClick:q,startIcon:V.jsx(yk,{}),sx:{mb:2},children:"Back"}),V.jsxs(Vl,{elevation:4,sx:{p:4,borderRadius:4,animation:`${Bde} 0.45s ease-out`,...qA},children:[V.jsxs(hr,{direction:"column",alignItems:"center",spacing:2,children:[V.jsx(w1,{src:o.photoURL||void 0,sx:{width:120,height:120,bgcolor:"primary.main",fontSize:40},children:te}),V.jsx(Jt,{variant:"h4",align:"center",children:o.name}),o.bio&&V.jsxs(wn,{sx:{mt:1,width:"100%"},children:[V.jsx(Jt,{variant:"subtitle2",sx:{fontWeight:600,mb:.5},children:"Bio"}),V.jsx(Jt,{variant:"body1",color:"text.secondary",sx:{whiteSpace:"pre-line"},children:o.bio})]})]}),V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{spacing:1.5,children:[o.email&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(fk,{color:"action"}),V.jsx(Jt,{sx:{wordBreak:"break-word"},children:o.email})]}),o.phone&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(pk,{color:"action"}),V.jsx(Jt,{sx:{wordBreak:"break-word"},children:o.phone})]}),o.linkedin&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(mk,{color:"action"}),V.jsx(Jt,{component:"a",href:o.linkedin,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",wordBreak:"break-word"},children:"LinkedIn"})]}),o.website&&V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1},children:[V.jsx(gk,{color:"action"}),V.jsx(Jt,{component:"a",href:o.website,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",wordBreak:"break-word"},children:"Website"})]})]}),o.interests&&o.interests.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsx(Jt,{variant:"h6",gutterBottom:!0,children:"Interests"}),V.jsx(wn,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:o.interests.map((ie,me)=>V.jsx(b1,{label:ie,color:"primary",variant:"outlined"},me))})]}),o.resumeUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(lU,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Resume"})]}),V.jsx(wn,{component:"iframe",src:X,title:"Resume",sx:{width:"100%",height:320,borderRadius:2,border:"1px solid",borderColor:"divider",bgcolor:"background.paper"}})]}),he.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(KE,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Photos"})]}),V.jsx(wn,{sx:{display:"flex",flexDirection:"row",gap:1.5,overflowX:"auto",py:1,px:.5},children:he.map((ie,me)=>V.jsx(wn,{sx:{flex:"0 0 70%",maxWidth:280,borderRadius:2,overflow:"hidden",boxShadow:3,...qA},children:V.jsx(wn,{component:"img",src:ie,alt:`Gallery ${me+1}`,sx:{display:"block",width:"100%",height:"100%",objectFit:"cover",aspectRatio:"4 / 3"}})},me))})]}),!s&&he.length>0&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(KE,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Photos"})]}),V.jsx(wn,{sx:{display:"flex",flexDirection:"row",gap:1.5,overflowX:"auto",py:1,px:.5},children:he.map((ie,me)=>V.jsx(wn,{sx:{flex:"0 0 70%",maxWidth:280,borderRadius:2,overflow:"hidden",boxShadow:3,...qA},children:V.jsx(wn,{component:"img",src:ie,alt:`Gallery ${me+1}`,sx:{display:"block",width:"100%",height:"100%",objectFit:"cover",aspectRatio:"4 / 3"}})},me))})]}),!s&&o.videoUrl&&V.jsxs(V.Fragment,{children:[V.jsx(eo,{sx:{my:3}}),V.jsxs(hr,{direction:"row",spacing:1,alignItems:"center",mb:1,children:[V.jsx(dk,{fontSize:"small"}),V.jsx(Jt,{variant:"h6",children:"Video Portfolio"})]}),V.jsx(wn,{component:"video",src:o.videoUrl,controls:!0,sx:{width:"100%",borderRadius:2,boxShadow:4,maxHeight:320,objectFit:"cover"}})]})]}),(r||n)&&V.jsxs(Jt,{variant:"caption",color:"text.secondary",align:"center",sx:{display:"block",mt:2},children:["Met at event: ",r||n]})]})})}const of=Object.create(null);of.open="0";of.close="1";of.ping="2";of.pong="3";of.message="4";of.upgrade="5";of.noop="6";const XT=Object.create(null);Object.keys(of).forEach(t=>{XT[of[t]]=t});const wM={type:"error",data:"parser error"},cU=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",uU=typeof ArrayBuffer=="function",hU=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,_k=({type:t,data:e},n,r)=>cU&&e instanceof Blob?n?r(e):yN(e,r):uU&&(e instanceof ArrayBuffer||hU(e))?n?r(e):yN(new Blob([e]),r):r(of[t]+(e||"")),yN=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function _N(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let HA;function Vde(t,e){if(cU&&t.data instanceof Blob)return t.data.arrayBuffer().then(_N).then(e);if(uU&&(t.data instanceof ArrayBuffer||hU(t.data)))return e(_N(t.data));_k(t,!1,n=>{HA||(HA=new TextEncoder),e(HA.encode(n))})}const vN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<vN.length;t++)nb[vN.charCodeAt(t)]=t;const Ude=t=>{let e=t.length*.75,n=t.length,r,s=0,h,p,_,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const T=new ArrayBuffer(e),I=new Uint8Array(T);for(r=0;r<n;r+=4)h=nb[t.charCodeAt(r)],p=nb[t.charCodeAt(r+1)],_=nb[t.charCodeAt(r+2)],o=nb[t.charCodeAt(r+3)],I[s++]=h<<2|p>>4,I[s++]=(p&15)<<4|_>>2,I[s++]=(_&3)<<6|o&63;return T},jde=typeof ArrayBuffer=="function",vk=(t,e)=>{if(typeof t!="string")return{type:"message",data:dU(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:$de(t.substring(1),e)}:XT[n]?t.length>1?{type:XT[n],data:t.substring(1)}:{type:XT[n]}:wM},$de=(t,e)=>{if(jde){const n=Ude(t);return dU(n,e)}else return{base64:!0,data:t}},dU=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},fU="",qde=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((h,p)=>{_k(h,!1,_=>{r[p]=_,++s===n&&e(r.join(fU))})})},Hde=(t,e)=>{const n=t.split(fU),r=[];for(let s=0;s<n.length;s++){const h=vk(n[s],e);if(r.push(h),h.type==="error")break}return r};function Gde(){return new TransformStream({transform(t,e){Vde(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const h=new DataView(s.buffer);h.setUint8(0,126),h.setUint16(1,r)}else{s=new Uint8Array(9);const h=new DataView(s.buffer);h.setUint8(0,127),h.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let GA;function vT(t){return t.reduce((e,n)=>e+n.length,0)}function xT(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function Wde(t,e){GA||(GA=new TextDecoder);const n=[];let r=0,s=-1,h=!1;return new TransformStream({transform(p,_){for(n.push(p);;){if(r===0){if(vT(n)<1)break;const o=xT(n,1);h=(o[0]&128)===128,s=o[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(vT(n)<2)break;const o=xT(n,2);s=new DataView(o.buffer,o.byteOffset,o.length).getUint16(0),r=3}else if(r===2){if(vT(n)<8)break;const o=xT(n,8),T=new DataView(o.buffer,o.byteOffset,o.length),I=T.getUint32(0);if(I>Math.pow(2,21)-1){_.enqueue(wM);break}s=I*Math.pow(2,32)+T.getUint32(4),r=3}else{if(vT(n)<s)break;const o=xT(n,s);_.enqueue(vk(h?o:GA.decode(o),e)),r=0}if(s===0||s>t){_.enqueue(wM);break}}}})}const pU=4;function Oo(t){if(t)return Yde(t)}function Yde(t){for(var e in Oo.prototype)t[e]=Oo.prototype[e];return t}Oo.prototype.on=Oo.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Oo.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Oo.prototype.off=Oo.prototype.removeListener=Oo.prototype.removeAllListeners=Oo.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Oo.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Oo.prototype.emitReserved=Oo.prototype.emit;Oo.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Oo.prototype.hasListeners=function(t){return!!this.listeners(t).length};const rC=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Cu=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Xde="arraybuffer";function mU(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const Kde=Cu.setTimeout,Zde=Cu.clearTimeout;function iC(t,e){e.useNativeTimers?(t.setTimeoutFn=Kde.bind(Cu),t.clearTimeoutFn=Zde.bind(Cu)):(t.setTimeoutFn=Cu.setTimeout.bind(Cu),t.clearTimeoutFn=Cu.clearTimeout.bind(Cu))}const Qde=1.33;function Jde(t){return typeof t=="string"?efe(t):Math.ceil((t.byteLength||t.size)*Qde)}function efe(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function gU(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function tfe(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function nfe(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let h=n[r].split("=");e[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}return e}class rfe extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class xk extends Oo{constructor(e){super(),this.writable=!1,iC(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new rfe(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=vk(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=tfe(e);return n.length?"?"+n:""}}class ife extends xk{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Hde(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,qde(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=gU()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let yU=!1;try{yU=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const sfe=yU;function ofe(){}class afe extends ife{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,h)=>{this.onError("xhr post error",s,h)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let wv=class KT extends Oo{constructor(e,n,r){super(),this.createRequest=e,iC(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=mU(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=KT.requestsCount++,KT.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ofe,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete KT.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};wv.requestsCount=0;wv.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xN);else if(typeof addEventListener=="function"){const t="onpagehide"in Cu?"pagehide":"unload";addEventListener(t,xN,!1)}}function xN(){for(let t in wv.requests)wv.requests.hasOwnProperty(t)&&wv.requests[t].abort()}const lfe=(function(){const t=_U({xdomain:!1});return t&&t.responseType!==null})();class cfe extends afe{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=lfe&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new wv(_U,this.uri(),e)}}function _U(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||sfe))return new XMLHttpRequest}catch{}if(!e)try{return new Cu[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vU=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ufe extends xk{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=vU?{}:mU(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;_k(r,this.supportsBinary,h=>{try{this.doWrite(r,h)}catch{}s&&rC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=gU()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const WA=Cu.WebSocket||Cu.MozWebSocket;class hfe extends ufe{createSocket(e,n,r){return vU?new WA(e,n,r):n?new WA(e,n):new WA(e)}doWrite(e,n){this.ws.send(n)}}class dfe extends xk{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=Wde(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=Gde();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const h=()=>{r.read().then(({done:_,value:o})=>{_||(this.onPacket(o),h())}).catch(_=>{})};h();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this._writer.write(p).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&rC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ffe={websocket:hfe,webtransport:dfe,polling:cfe},pfe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mfe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function TM(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=pfe.exec(t||""),h={},p=14;for(;p--;)h[mfe[p]]=s[p]||"";return n!=-1&&r!=-1&&(h.source=e,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=gfe(h,h.path),h.queryKey=yfe(h,h.query),h}function gfe(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function yfe(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,h){s&&(n[s]=h)}),n}const EM=typeof addEventListener=="function"&&typeof removeEventListener=="function",ZT=[];EM&&addEventListener("offline",()=>{ZT.forEach(t=>t())},!1);class jm extends Oo{constructor(e,n){if(super(),this.binaryType=Xde,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=TM(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=TM(n.host).host);iC(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=nfe(this.opts.query)),EM&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ZT.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=pU,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&jm.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",jm.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=Jde(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,rC(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const h={type:e,data:n,options:r};this.emitReserved("packetCreate",h),this.writeBuffer.push(h),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(jm.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),EM&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ZT.indexOf(this._offlineEventListener);r!==-1&&ZT.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}jm.protocol=pU;class _fe extends jm{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;jm.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",M=>{if(!r)if(M.type==="pong"&&M.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;jm.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(I(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const L=new Error("probe error");L.transport=n.name,this.emitReserved("upgradeError",L)}}))};function h(){r||(r=!0,I(),n.close(),n=null)}const p=M=>{const L=new Error("probe error: "+M);L.transport=n.name,h(),this.emitReserved("upgradeError",L)};function _(){p("transport closed")}function o(){p("socket closed")}function T(M){n&&M.name!==n.name&&h()}const I=()=>{n.removeListener("open",s),n.removeListener("error",p),n.removeListener("close",_),this.off("close",o),this.off("upgrading",T)};n.once("open",s),n.once("error",p),n.once("close",_),this.once("close",o),this.once("upgrading",T),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let vfe=class extends _fe{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>ffe[s]).filter(s=>!!s)),super(e,r)}};function xfe(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=TM(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const h=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+h+":"+r.port+e,r.href=r.protocol+"://"+h+(n&&n.port===r.port?"":":"+r.port),r}const bfe=typeof ArrayBuffer=="function",wfe=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,xU=Object.prototype.toString,Tfe=typeof Blob=="function"||typeof Blob<"u"&&xU.call(Blob)==="[object BlobConstructor]",Efe=typeof File=="function"||typeof File<"u"&&xU.call(File)==="[object FileConstructor]";function bk(t){return bfe&&(t instanceof ArrayBuffer||wfe(t))||Tfe&&t instanceof Blob||Efe&&t instanceof File}function QT(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(QT(t[n]))return!0;return!1}if(bk(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return QT(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&QT(t[n]))return!0;return!1}function Sfe(t){const e=[],n=t.data,r=t;return r.data=SM(n,e),r.attachments=e.length,{packet:r,buffers:e}}function SM(t,e){if(!t)return t;if(bk(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=SM(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=SM(t[r],e));return n}return t}function Cfe(t,e){return t.data=CM(t.data,e),delete t.attachments,t}function CM(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=CM(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=CM(t[n],e));return t}const Afe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ife=5;var pi;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(pi||(pi={}));class Mfe{constructor(e){this.replacer=e}encode(e){return(e.type===pi.EVENT||e.type===pi.ACK)&&QT(e)?this.encodeAsBinary({type:e.type===pi.EVENT?pi.BINARY_EVENT:pi.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===pi.BINARY_EVENT||e.type===pi.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Sfe(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function bN(t){return Object.prototype.toString.call(t)==="[object Object]"}class wk extends Oo{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===pi.BINARY_EVENT;r||n.type===pi.BINARY_ACK?(n.type=r?pi.EVENT:pi.ACK,this.reconstructor=new Rfe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(bk(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(pi[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===pi.BINARY_EVENT||r.type===pi.BINARY_ACK){const h=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const p=e.substring(h,n);if(p!=Number(p)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(p)}if(e.charAt(n+1)==="/"){const h=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(h,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const h=n+1;for(;++n;){const p=e.charAt(n);if(p==null||Number(p)!=p){--n;break}if(n===e.length)break}r.id=Number(e.substring(h,n+1))}if(e.charAt(++n)){const h=this.tryParse(e.substr(n));if(wk.isPayloadValid(r.type,h))r.data=h;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case pi.CONNECT:return bN(n);case pi.DISCONNECT:return n===void 0;case pi.CONNECT_ERROR:return typeof n=="string"||bN(n);case pi.EVENT:case pi.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Afe.indexOf(n[0])===-1);case pi.ACK:case pi.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Rfe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Cfe(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Dfe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:wk,Encoder:Mfe,get PacketType(){return pi},protocol:Ife},Symbol.toStringTag,{value:"Module"}));function Eh(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const kfe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class bU extends Oo{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Eh(e,"open",this.onopen.bind(this)),Eh(e,"packet",this.onpacket.bind(this)),Eh(e,"error",this.onerror.bind(this)),Eh(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,h;if(kfe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const p={type:pi.EVENT,data:n};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const I=this.ids++,M=n.pop();this._registerAckCallback(I,M),p.id=I}const _=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,o=this.connected&&!(!((h=this.io.engine)===null||h===void 0)&&h._hasPingExpired());return this.flags.volatile&&!_||(o?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let _=0;_<this.sendBuffer.length;_++)this.sendBuffer[_].id===e&&this.sendBuffer.splice(_,1);n.call(this,new Error("operation has timed out"))},s),p=(..._)=>{this.io.clearTimeoutFn(h),n.apply(this,_)};p.withError=!0,this.acks[e]=p}emitWithAck(e,...n){return new Promise((r,s)=>{const h=(p,_)=>p?s(p):r(_);h.withError=!0,n.push(h),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...h)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...h)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pi.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pi.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pi.EVENT:case pi.BINARY_EVENT:this.onevent(e);break;case pi.ACK:case pi.BINARY_ACK:this.onack(e);break;case pi.DISCONNECT:this.ondisconnect();break;case pi.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:pi.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pi.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function n0(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}n0.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};n0.prototype.reset=function(){this.attempts=0};n0.prototype.setMin=function(t){this.ms=t};n0.prototype.setMax=function(t){this.max=t};n0.prototype.setJitter=function(t){this.jitter=t};class AM extends Oo{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,iC(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new n0({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||Dfe;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new vfe(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Eh(n,"open",function(){r.onopen(),e&&e()}),h=_=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",_),e?e(_):this.maybeReconnectOnOpen()},p=Eh(n,"error",h);if(this._timeout!==!1){const _=this._timeout,o=this.setTimeoutFn(()=>{s(),h(new Error("timeout")),n.close()},_);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(s),this.subs.push(p),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Eh(e,"ping",this.onping.bind(this)),Eh(e,"data",this.ondata.bind(this)),Eh(e,"error",this.onerror.bind(this)),Eh(e,"close",this.onclose.bind(this)),Eh(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){rC(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new bU(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ux={};function JT(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=xfe(t,e.path||"/socket.io"),r=n.source,s=n.id,h=n.path,p=Ux[s]&&h in Ux[s].nsps,_=e.forceNew||e["force new connection"]||e.multiplex===!1||p;let o;return _?o=new AM(r,e):(Ux[s]||(Ux[s]=new AM(r,e)),o=Ux[s]),n.query&&!e.query&&(e.query=n.queryKey),o.socket(n.path,e)}Object.assign(JT,{Manager:AM,Socket:bU,io:JT,connect:JT});let YA=null;function Pfe(){return YA||(YA=JT("http://localhost:3001",{transports:["websocket","polling"]})),YA}const wN=250;function Lfe(){const{eventCode:t}=JE(),e=Pu(),{user:n}=H.useContext(Sp),[r]=H.useState(()=>n?.uid?`uid-${n.uid}`:"anon-"+Math.random().toString(36).slice(2)),[s,h]=H.useState(""),[p,_]=H.useState([]),[o,T]=H.useState("");H.useEffect(()=>{n&&A1(n.uid).then(M=>{M?.slug&&h(M.slug)})},[n]),H.useEffect(()=>{t&&yde(t).then(M=>{M?.name&&T(M.name)})},[t]);async function I(M){!n||!t||!M.profileSlug||(await uk({ownerUserId:n.uid,otherUserId:M.userId,eventCode:t,note:"Met via WiFi proximity"}),e(`/profile/view/${M.profileSlug}?eventCode=${t}&back=nearby`))}return H.useEffect(()=>{if(!t||!n)return;const M=Pfe(),L=s||n.uid||r,F=()=>{M.emit("presence",{eventCode:t,deviceId:r,profileSlug:L,userId:n.uid,timestamp:Date.now()})};F();const q=setInterval(F,1500);return M.on("presence",async $=>{if($.deviceId===r)return;const X=Date.now(),te=X-($.timestamp||X);let he;try{if($.userId){const me=await hk($.userId);me?.name&&(he=me.name)}}catch(me){console.error("Failed to load nearby user profile",me)}const ie={deviceId:$.deviceId,profileSlug:$.profileSlug,userId:$.userId,name:he,latency:te,timestamp:X};_(me=>{const ge=me.findIndex(Ee=>Ee.deviceId===$.deviceId);if(ge!==-1){const Ee=[...me];return Ee[ge]=ie,Ee}return[...me,ie]})}),()=>{clearInterval(q),M.off("presence")}},[r,t,s,n]),V.jsxs(wn,{sx:{minHeight:"100vh",pt:10,pb:4},children:[V.jsx(nC,{onClick:()=>e("/dashboard")}),V.jsxs(zh,{maxWidth:"md",sx:{animation:`${tb} 0.6s ease-out`},children:[V.jsxs(Jt,{variant:"h3",gutterBottom:!0,sx:{fontWeight:700},children:["Nearby people at ",o||t]}),V.jsx(Jt,{variant:"h6",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:400},children:"Anyone on the same WiFi with this page open and event code selected will appear here."}),V.jsx(hr,{direction:"row",spacing:2,sx:{mt:3},children:V.jsx(b1,{size:"medium",color:"primary",label:`Latency < ${wN}ms`})}),p.length===0&&V.jsx(Jt,{variant:"h6",color:"text.secondary",sx:{mt:4,fontWeight:400},children:"Waiting for other devices"}),V.jsx(hr,{spacing:3,sx:{mt:4},children:p.map(M=>{const L=M.latency!==void 0&&M.latency<wN,F=M.name||"Someone nearby";return V.jsxs($D,{children:[V.jsxs(HD,{children:[V.jsxs(Jt,{variant:"h5",sx:{fontWeight:600,mb:1.5},children:[F," ",L&&""]}),V.jsx(Jt,{variant:"body1",color:"text.secondary",children:M.latency!==void 0?`Latency: ${M.latency}ms`:"Measuring distance..."})]}),V.jsx(qD,{sx:{p:2,pt:0},children:V.jsx(ss,{variant:"contained",onClick:()=>I(M),children:"View Profile"})})]},M.deviceId)})})]})]})}const Ofe=Os(V.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),zfe=Os(V.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),Nfe=Os(V.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Bfe=Os(V.jsx("path",{d:"M3 18h12v-2H3zM3 6v2h18V6zm0 7h18v-2H3z"}));function TN(t){if(!t)return"";const e=t.trim().split(/\s+/);return e.length===0?"":e[e.length-1]}function Ffe(){const{eventCode:t}=JE(),{user:e}=H.useContext(Sp),n=Pu(),[r,s]=H.useState([]),[h,p]=H.useState(!1),[_,o]=H.useState("ALL");H.useEffect(()=>{!e||!t||(p(!0),hde(e.uid,t).then(async $=>{const X=await Promise.all($.map(async te=>{const he=await hk(te.otherUserId);return he?{...te,eventCode:t,profile:{name:he.name||"Unknown User",email:he.email||"",photoURL:he.photoURL||"",slug:he.slug||te.otherUserId}}:{...te,eventCode:t,profile:{name:"Unknown User",slug:te.otherUserId}}}));s(X)}).finally(()=>p(!1)))},[e,t]);const T=[...r].sort(($,X)=>{const te=TN($.profile.name),he=TN(X.profile.name),ie=te.localeCompare(he);return ie!==0?ie:($.profile.name||"").localeCompare(X.profile.name||"")}),I=_==="ALL"?T:_==="FAVORITES"?T.filter($=>$.favorite):T.filter($=>$.id===_),M=async $=>{if(!e||!t)return;const X=!$.favorite;s(te=>te.map(he=>he.id===$.id?{...he,favorite:X}:he)),await mN({ownerUserId:e.uid,otherUserId:$.otherUserId,eventCode:t,favorite:X})},L=($,X)=>{s(te=>te.map(he=>he.id===$?{...he,note:X}:he))},F=async $=>{!e||!t||await mN({ownerUserId:e.uid,otherUserId:$.otherUserId,eventCode:t,note:$.note||""})},q=async $=>{!e||!t||!window.confirm(`Discard contact "${$.profile.name}" from this event?`)||(await ude({ownerUserId:e.uid,otherUserId:$.otherUserId,eventCode:t}),s(te=>te.filter(he=>he.id!==$.id)),_===$.id&&o("ALL"))};return V.jsxs(wn,{sx:{minHeight:"100vh",pt:8,py:4},children:[V.jsx(nC,{onClick:()=>n("/dashboard")}),V.jsxs(zh,{maxWidth:"md",children:[V.jsx(uae,{}),V.jsx(Jt,{variant:"h4",gutterBottom:!0,align:"center",children:"Event Contacts"}),V.jsxs(Jt,{variant:"body1",color:"text.secondary",align:"center",sx:{mb:4},children:["Event Code: ",V.jsx("strong",{children:t})]}),h&&V.jsx(Jt,{align:"center",sx:{mb:2},children:"Loading contacts"}),T.length>0&&V.jsxs(Vl,{sx:{p:2,mb:3,display:"flex",flexDirection:"column",gap:1.5},children:[V.jsx(Jt,{variant:"subtitle1",children:"Contacts at this event"}),V.jsxs(Js,{select:!0,fullWidth:!0,size:"small",label:"Filter / jump to contact",value:_,onChange:$=>o($.target.value),children:[V.jsx(kA,{value:"ALL",children:"All contacts"}),V.jsx(kA,{value:"FAVORITES",children:" Favorites only"}),T.map($=>V.jsxs(kA,{value:$.id,children:[$.favorite?" ":"",$.profile.name]},$.id))]}),V.jsx(Jt,{variant:"caption",color:"text.secondary",children:'Choose a person to only show their card, or select "All contacts" / " Favorites only".'})]}),T.length===0?V.jsxs(Vl,{sx:{p:4,textAlign:"center"},children:[V.jsx(Jt,{variant:"body1",color:"text.secondary",children:'No contacts yet. Use the "Find Nearby" feature to meet people at this event!'}),V.jsx(ss,{component:Bc,to:`/nearby/${t}`,variant:"contained",sx:{mt:2},children:"Find Nearby People"})]}):V.jsx(hr,{spacing:2,children:I.length===0?V.jsx(Vl,{sx:{p:3,textAlign:"center"},children:V.jsx(Jt,{variant:"body2",color:"text.secondary",children:"No contacts match this filter."})}):I.map($=>{const X=_!=="ALL"&&_!=="FAVORITES"&&$.id===_;return V.jsxs($D,{sx:{borderRadius:3,boxShadow:"0 10px 30px rgba(15, 23, 42, 0.08)",border:X?"2px solid rgba(59, 130, 246, 0.7)":"1px solid rgba(148,163,184,0.25)",transition:"transform 0.2s ease, box-shadow 0.2s ease, border 0.2s","&:hover":{transform:"translateY(-3px)",boxShadow:"0 16px 40px rgba(15, 23, 42, 0.14)"}},children:[V.jsx(sie,{avatar:V.jsx(w1,{src:$.profile.photoURL,sx:{width:56,height:56},children:$.profile.name?.charAt(0).toUpperCase()}),title:V.jsx(Jt,{variant:"h6",sx:{fontWeight:700,wordBreak:"break-word"},children:$.profile.name}),subheader:$.profile.email&&V.jsx(Jt,{variant:"body2",color:"text.secondary",sx:{wordBreak:"break-word"},children:$.profile.email}),action:V.jsx(VD,{onClick:()=>M($),children:$.favorite?V.jsx(Ofe,{color:"warning"}):V.jsx(zfe,{})}),sx:{pb:.5}}),V.jsx(eo,{sx:{mx:2,my:1.5}}),V.jsxs(HD,{sx:{pt:0},children:[V.jsxs(wn,{sx:{display:"flex",alignItems:"center",gap:1,mb:.75},children:[V.jsx(Bfe,{fontSize:"small"}),V.jsx(Jt,{variant:"subtitle2",sx:{fontWeight:600},children:"Notes"})]}),V.jsx(Js,{multiline:!0,minRows:2,fullWidth:!0,placeholder:"Add notes about this person (e.g. where you met, what you discussed)...",value:$.note||"",onChange:te=>L($.id,te.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,bgcolor:"rgba(248,250,252,0.9)"}}}),V.jsx(wn,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:V.jsx(ss,{size:"small",onClick:()=>F($),children:"Save note"})})]}),V.jsxs(qD,{sx:{display:"flex",justifyContent:"space-between",px:2.5,pb:2.5},children:[V.jsx(ss,{size:"small",component:Bc,to:`/profile/view/${$.profile.slug}?eventCode=${t}&back=contacts`,children:"View Profile"}),V.jsx(ss,{size:"small",color:"error",startIcon:V.jsx(Nfe,{}),onClick:()=>q($),children:"Discard"})]})]},$.id)})})]})]})}var eE={exports:{}},Vfe=eE.exports,EN;function Ufe(){return EN||(EN=1,(function(t,e){var n={};(function(r,s){t.exports=s()})(Vfe,(function(){var r,s,h;function p(o,T){if(!r)r=T;else if(!s)s=T;else{var I="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",M={};r(M),h=T(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(h.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}p(["exports"],(function(o){var T=typeof self<"u"?self:{},I="2.15.0";let M;const L={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(M==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{M=n.API_URL_REGEX!=null?new RegExp(n.API_URL_REGEX):a}catch{M=a}}return M},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!L.API_URL)return null;try{const a=new URL(L.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},F={supported:!1,testSupport:function(a){!X&&$&&(te?he(a):q=a)}};let q,$,X=!1,te=!1;function he(a){const i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,$),a.isContextLost())return;F.supported=!0}catch{}a.deleteTexture(i),X=!0}T.document&&($=T.document.createElement("img"),$.onload=function(){q&&he(q),q=null,te=!0},$.onerror=function(){X=!0,q=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ie="01";function me(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ge=Ee;function Ee(a,i,l,f){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=l,this.p2y=f}Ee.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,f=0;f<8;f++){var g=this.sampleCurveX(l)-a;if(Math.abs(g)<i)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=g/x}var w=0,C=1;for(l=a,f=0;f<20&&(g=this.sampleCurveX(l),!(Math.abs(g-a)<i));f++)a>g?w=l:C=l,l=.5*(C-w)+w;return l},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var ce=me(ge),ee=le;function le(a,i){this.x=a,this.y=i}le.prototype={clone:function(){return new le(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,l=a.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),l=Math.sin(a),f=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=f,this},_rotateAround:function(a,i){var l=Math.cos(a),f=Math.sin(a),g=i.y+f*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-f*(this.y-i.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},le.convert=function(a){return a instanceof le?a:Array.isArray(a)?new le(a[0],a[1]):a};var se=me(ee);const _e=Math.PI/180,Q=180/Math.PI;function de(a){return a*_e}function Ve(a){return a*Q}const Ke=[[0,0],[1,0],[1,1],[0,1]];function Ce(a){if(a<=0)return 0;if(a>=1)return 1;const i=a*a,l=i*a;return 4*(a<.5?l:3*(a-i)+l-.75)}function Xe(a,i,l,f){const g=new ce(a,i,l,f);return function(x){return g.solve(x)}}const tt=Xe(.25,.1,.25,1);function Be(a,i,l){return Math.min(l,Math.max(i,a))}function yt(a,i,l){return(l=Be((l-a)/(i-a),0,1))*l*(3-2*l)}function Me(a,i,l){const f=l-i,g=((a-i)%f+f)%f+i;return g===i?l:g}function et(a,i,l){if(!a.length)return l(null,[]);let f=a.length;const g=new Array(a.length);let x=null;a.forEach(((w,C)=>{i(w,((R,k)=>{R&&(x=R),g[C]=k,--f==0&&l(x,g)}))}))}function At(a){const i=[];for(const l in a)i.push(a[l]);return i}function Dt(a,...i){for(const l of i)for(const f in l)a[f]=l[f];return a}let Gt=1;function Kt(){return Gt++}function dn(){return(function a(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)})()}function Fn(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function An(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Tn(a,i){a.forEach((l=>{i[l]&&(i[l]=i[l].bind(i))}))}function Lt(a,i){return a.indexOf(i,a.length-i.length)!==-1}function Ft(a,i,l){const f={};for(const g in a)f[g]=i.call(this,a[g],g,a);return f}function gn(a,i,l){const f={};for(const g in a)i.call(l||this,a[g],g,a)&&(f[g]=a[g]);return f}function mn(a){return Array.isArray(a)?a.map(mn):typeof a=="object"&&a?Ft(a,mn):a}const tr={};function On(a){tr[a]||(typeof console<"u"&&console.warn(a),tr[a]=!0)}function jn(a,i,l){return(l.y-a.y)*(i.x-a.x)>(i.y-a.y)*(l.x-a.x)}function Lr(a){let i=0;for(let l,f,g=0,x=a.length,w=x-1;g<x;w=g++)l=a[g],f=a[w],i+=(f.x-l.x)*(l.y+f.y);return i}function $n(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Vn(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((l,f,g,x)=>{const w=g||x;return i[f]=!w||w.toLowerCase(),""})),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let Tr=null;function En(a){if(Tr==null){const i=a.navigator?a.navigator.userAgent:null;Tr=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Tr}function Hi(a){try{const i=T[a];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function nr(a,i){return[a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]]}const on="mapbox-tiles";let en=500,yn=50,bn,Pn;function Bn(){try{return T.caches}catch{}}function Zn(){Bn()&&!bn&&(bn=T.caches.open(on))}function vi(a){const i=a.indexOf("?");if(i<0)return a;const l=(function(g){const x=g.indexOf("?");return x>0?g.slice(x+1).split("&"):[]})(a),f=l.filter((g=>{const x=g.split("=");return x[0]==="language"||x[0]==="worldview"}));return f.length?`${a.slice(0,i)}?${f.join("&")}`:a.slice(0,i)}let Sr=1/0;const Or={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Or);class vn extends Error{constructor(i,l,f){l===401&&nt(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Wn=$n()?()=>self.worker&&self.worker.referrer:()=>(T.location.protocol==="blob:"?T.parent:T).location.href,ri=function(a,i){if(!(/^file:/.test(l=a.url)||/^file:/.test(Wn())&&!/^\w+:/.test(l))){if(T.fetch&&T.Request&&T.AbortController&&T.Request.prototype.hasOwnProperty("signal"))return(function(f,g){const x=new T.AbortController,w=new T.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:Wn(),referrerPolicy:f.referrerPolicy,signal:x.signal});let C=!1,R=!1;const k=(B=w.url).indexOf("sku=")>0&&nt(B);var B;f.type==="json"&&w.headers.set("Accept","application/json");const j=(Z,J,ue)=>{if(R)return;if(Z&&Z.message!=="SecurityError"&&On(Z.toString()),J&&ue)return G(J);const ve=Date.now();T.fetch(w).then((Re=>{if(Re.ok){const Ne=k?Re.clone():null;return G(Re,Ne,ve)}return g(new vn(Re.statusText,Re.status,f.url))})).catch((Re=>{Re.name!=="AbortError"&&g(new Error(`${Re.message} ${f.url}`))}))},G=(Z,J,ue)=>{(f.type==="arrayBuffer"?Z.arrayBuffer():f.type==="json"?Z.json():Z.text()).then((ve=>{R||(J&&ue&&(function(Re,Ne,De){if(Zn(),!bn)return;const ze={status:Ne.status,statusText:Ne.statusText,headers:new T.Headers};Ne.headers.forEach(((ht,at)=>ze.headers.set(at,ht)));const je=Vn(Ne.headers.get("Cache-Control")||"");if(je["no-store"])return;je["max-age"]&&ze.headers.set("Expires",new Date(De+1e3*je["max-age"]).toUTCString());const Ue=ze.headers.get("Expires");Ue&&(new Date(Ue).getTime()-De<42e4||(function(ht,at){if(Pn===void 0)try{new Response(new ReadableStream),Pn=!0}catch{Pn=!1}Pn?at(ht.body):ht.blob().then(at)})(Ne,(ht=>{const at=new T.Response(ht,ze);Zn(),bn&&bn.then((wt=>wt.put(vi(Re.url),at))).catch((wt=>On(wt.message)))})))})(w,J,ue),C=!0,g(null,ve,Z.headers.get("Cache-Control"),Z.headers.get("Expires")))})).catch((ve=>{R||g(new Error(ve.message))}))};return k?(function(Z,J){if(Zn(),!bn)return J(null);const ue=vi(Z.url);bn.then((ve=>{ve.match(ue).then((Re=>{const Ne=(function(De){if(!De)return!1;const ze=new Date(De.headers.get("Expires")||0),je=Vn(De.headers.get("Cache-Control")||"");return ze>Date.now()&&!je["no-cache"]})(Re);ve.delete(ue),Ne&&ve.put(ue,Re.clone()),J(null,Re,Ne)})).catch(J)})).catch(J)})(w,j):j(null,null),{cancel:()=>{R=!0,C||x.abort()}}})(a,i);if($n()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,i,void 0,!0)}var l;return(function(f,g){const x=new T.XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(x.responseType="arraybuffer");for(const w in f.headers)x.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let w=x.response;if(f.type==="json")try{w=JSON.parse(x.response)}catch(C){return g(C)}g(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else g(new vn(x.statusText,x.status,f.url))},x.send(f.body),{cancel:()=>x.abort()}})(a,i)},Ss=function(a,i){return ri(Dt(a,{type:"arrayBuffer"}),i)};function Jo(a){const i=T.document.createElement("a");return i.href=a,i.protocol===T.document.location.protocol&&i.host===T.document.location.host}const Oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let pe,fe;pe=[],fe=0;const ke=function(a,i){if(F.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),fe>=L.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:a,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return pe.push(x),x}fe++;let l=!1;const f=()=>{if(!l)for(l=!0,fe--;pe.length&&fe<L.MAX_PARALLEL_IMAGE_REQUESTS;){const x=pe.shift(),{requestParameters:w,callback:C,cancelled:R}=x;R||(x.cancel=ke(w,C).cancel)}},g=Ss(a,((x,w,C,R)=>{f(),x?i(x):w&&(T.createImageBitmap?(function(k,B){const j=new T.Blob([new Uint8Array(k)],{type:"image/png"});T.createImageBitmap(j).then((G=>{B(null,G)})).catch((G=>{B(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))})(w,((k,B)=>i(k,B,C,R))):(function(k,B){const j=new T.Image,G=T.URL;j.onload=()=>{B(null,j),G.revokeObjectURL(j.src),j.onload=null,T.requestAnimationFrame((()=>{j.src=Oe}))},j.onerror=()=>B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Z=new T.Blob([new Uint8Array(k)],{type:"image/png"});j.src=k.byteLength?G.createObjectURL(Z):Oe})(w,((k,B)=>i(k,B,C,R))))}));return{cancel:()=>{g.cancel(),f()}}},Fe="NO_ACCESS_TOKEN";function Ge(a){return a.indexOf("mapbox:")===0}function nt(a){return L.API_URL_REGEX.test(a)}function rt(a){return L.API_CDN_URL_REGEX.test(a)}function Ye(a){return L.API_STYLE_REGEX.test(a)&&!ut(a)}function ut(a){return L.API_SPRITE_REGEX.test(a)}const Yt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Qt(a){const i=a.match(Yt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function $t(a){const i=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${i}`}const Xn="mapbox.eventData";function Jn(a){if(!a)return null;const i=a.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(T.atob(i[1]).split("").map((l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch{return null}}class qn{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=Jn(L.ACCESS_TOKEN);let f="";return f=l&&l.u?T.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,((g,x)=>String.fromCharCode(+("0x"+x))))):L.ACCESS_TOKEN||"",i?`${Xn}.${i}:${f}`:`${Xn}:${f}`}fetchEventData(){const i=Hi("localStorage"),l=this.getStorageKey(),f=this.getStorageKey("uuid");if(i)try{const g=T.localStorage.getItem(l);g&&(this.eventData=JSON.parse(g));const x=T.localStorage.getItem(f);x&&(this.anonId=x)}catch{On("Unable to read from LocalStorage")}}saveEventData(){const i=Hi("localStorage"),l=this.getStorageKey(),f=this.getStorageKey("uuid");if(i)try{T.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&T.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{On("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,f,g){if(!L.EVENTS_URL)return;const x=Qt(L.EVENTS_URL);x.params.push(`access_token=${g||L.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(i).toISOString()},C=l?Dt(w,l):w,R={url:$t(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};this.pendingRequest=(function(k,B){return ri(Dt(k,{method:"POST"}),B)})(R,(k=>{this.pendingRequest=null,f(k),this.saveEventData(),this.processRequests(g)}))}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const ir=new class extends qn{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,i){L.EVENTS_URL&&L.ACCESS_TOKEN&&Array.isArray(a)&&a.some((l=>Ge(l)||nt(l)))&&this.queueRequest(Date.now(),i)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Jn(L.ACCESS_TOKEN),l=i?i.u:L.ACCESS_TOKEN;let f=l!==this.eventData.tokenU;An(this.anonId)||(this.anonId=dn(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const x=new Date(this.eventData.lastSuccess),w=new Date(g),C=(g-this.eventData.lastSuccess)/864e5;f=f||C>=1||C<-1||x.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:I,skuId:ie,"enabled.telemetry":!1,userId:this.anonId},(x=>{x||(this.eventData.lastSuccess=g,this.eventData.tokenU=l)}),a):this.processRequests()}},er=ir.postTurnstileEvent.bind(ir),Vr=new class extends qn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,i,l,f){this.skuToken=i,this.errorCb=f,L.EVENTS_URL&&(l||L.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Fe)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),An(this.anonId)||(this.anonId=dn()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:I,skuId:ie,skuToken:this.skuToken,userId:this.anonId},(f=>{f?this.errorCb(f):i&&(this.success[i]=!0)}),a))}},Cr=Vr.postMapLoadEvent.bind(Vr),Kr=new class extends qn{constructor(){super("gljs.performance")}postPerformanceEvent(a,i){L.EVENTS_URL&&(a||L.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),f=(function(g){const x=T.performance.getEntriesByType("resource"),w=T.performance.getEntriesByType("mark"),C=(function(G){const Z={};if(G){for(const J in G)if(J!=="other")for(const ue of G[J]){const ve=`${J}ResolveRangeMin`,Re=`${J}ResolveRangeMax`,Ne=`${J}RequestCount`,De=`${J}RequestCachedCount`;Z[ve]=Math.min(Z[ve]||1/0,ue.startTime),Z[Re]=Math.max(Z[Re]||-1/0,ue.responseEnd);const ze=je=>{Z[je]===void 0&&(Z[je]=0),++Z[je]};ue.transferSize!==void 0&&ue.transferSize===0&&ze(De),ze(Ne)}}return Z})((function(G,Z){const J={};if(G)for(const ue of G){const ve=Z(ue);J[ve]===void 0&&(J[ve]=[]),J[ve].push(ue)}return J})(x,Nu)),R=T.devicePixelRatio,k=T.navigator.connection||T.navigator.mozConnection||T.navigator.webkitConnection,B={counters:[],metadata:[],attributes:[]},j=(G,Z,J)=>{J!=null&&G.push({name:Z,value:J.toString()})};for(const G in C)j(B.counters,G,C[G]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(j(B.counters,"interactionRangeMin",g.interactionRange[0]),j(B.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const G of Object.keys(lc)){const Z=lc[G],J=w.find((ue=>ue.name===Z));J&&j(B.counters,Z,J.startTime)}return j(B.counters,"visibilityHidden",g.visibilityHidden),j(B.attributes,"style",(function(G){if(G)for(const Z of G){const J=Z.name.split("?")[0];if(Ye(J)){const ue=J.split("/").slice(-2);if(ue.length===2)return`mapbox://styles/${ue[0]}/${ue[1]}`}}})(x)),j(B.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),j(B.attributes,"fogEnabled",g.fogEnabled?"true":"false"),j(B.attributes,"projection",g.projection),j(B.attributes,"zoom",g.zoom),j(B.metadata,"devicePixelRatio",R),j(B.metadata,"connectionEffectiveType",k?k.effectiveType:void 0),j(B.metadata,"navigatorUserAgent",T.navigator.userAgent),j(B.metadata,"screenWidth",T.screen.width),j(B.metadata,"screenHeight",T.screen.height),j(B.metadata,"windowWidth",T.innerWidth),j(B.metadata,"windowHeight",T.innerHeight),j(B.metadata,"mapWidth",g.width/R),j(B.metadata,"mapHeight",g.height/R),j(B.metadata,"webglRenderer",g.renderer),j(B.metadata,"webglVendor",g.vendor),j(B.metadata,"sdkVersion",I),j(B.metadata,"sdkIdentifier","mapbox-gl-js"),B})(l);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(i,f,(()=>{}),a)}},xi=Kr.postPerformanceEvent.bind(Kr),No=new class extends qn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,i,l,f){if(!L.API_URL||!L.SESSION_PATH)return;const g=Qt(L.API_URL+L.SESSION_PATH);g.params.push(`sku=${i||""}`),g.params.push(`access_token=${f||L.ACCESS_TOKEN||""}`);const x={url:$t(g),headers:{"Content-Type":"text/plain"}};this.pendingRequest=(function(w,C){return ri(Dt(w,{method:"GET"}),C)})(x,(w=>{this.pendingRequest=null,l(w),this.saveEventData(),this.processRequests(f)}))}getSessionAPI(a,i,l,f){this.skuToken=i,this.errorCb=f,L.SESSION_PATH&&L.API_URL&&(l||L.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},l):this.errorCb(new Error(Fe)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,(f=>{f?this.errorCb(f):i&&(this.success[i]=!0)}),a)}},Cs=No.getSessionAPI.bind(No),Hs=new Set,lc={create:"create",load:"load",fullLoad:"fullLoad"},Ul={mark(a){T.performance.mark(a)},measure(a,i,l){T.performance.measure(a,i,l)}};function Nu(a){const i=a.name.split("?")[0];return rt(i)&&i.includes("mapbox-gl.js")?"javascript":rt(i)&&i.includes("mapbox-gl.css")?"css":(function(l){return L.API_FONTS_REGEX.test(l)})(i)?"fontRange":ut(i)?"sprite":Ye(i)?"style":(function(l){return L.API_TILEJSON_REGEX.test(l)})(i)?"tilejson":"other"}const _r=T.performance;function ea(a){const i=a?a.url.toString():void 0;return _r.getEntriesByName(i)}let io,Na,hs,ta;const ma={now:()=>hs!==void 0?hs:T.performance.now(),setNow(a){hs=a},restoreNow(){hs=void 0},frame(a){const i=T.requestAnimationFrame(a);return{cancel:()=>T.cancelAnimationFrame(i)}},getImageData(a,i=0){const{width:l,height:f}=a;ta||(ta=T.document.createElement("canvas"));const g=ta.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(l>ta.width||f>ta.height)&&(ta.width=l,ta.height=f),g.clearRect(-i,-i,l+2*i,f+2*i),g.drawImage(a,0,0,l,f),g.getImageData(-i,-i,l+2*i,f+2*i)},resolveURL:a=>(io||(io=T.document.createElement("a")),io.href=a,io.href),get devicePixelRatio(){return T.devicePixelRatio},get prefersReducedMotion(){return!!T.matchMedia&&(Na==null&&(Na=T.matchMedia("(prefers-reduced-motion: reduce)")),Na.matches)}};function Ba(a,i,l){l[a]&&l[a].indexOf(i)!==-1||(l[a]=l[a]||[],l[a].push(i))}function Fa(a,i,l){if(l&&l[a]){const f=l[a].indexOf(i);f!==-1&&l[a].splice(f,1)}}class yl{constructor(i,l={}){Dt(this,l),this.type=i}}class ga extends yl{constructor(i,l={}){super("error",Dt({error:i},l))}}class cc{on(i,l){return this._listeners=this._listeners||{},Ba(i,l,this._listeners),this}off(i,l){return Fa(i,l,this._listeners),Fa(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ba(i,l,this._oneTimeListeners),this):new Promise((f=>this.once(i,f)))}fire(i,l){typeof i=="string"&&(i=new yl(i,l||{}));const f=i.type;if(this.listens(f)){i.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const C of g)C.call(this,i);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const C of x)Fa(f,C,this._oneTimeListeners),C.call(this,i);const w=this._eventedParent;w&&(Dt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(i))}else i instanceof ga&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var xt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function na(a,...i){for(const l of i)for(const f in l)a[f]=l[f];return a}function Zr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function zr(a){if(Array.isArray(a))return a.map(zr);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const l in a)i[l]=zr(a[l]);return i}return Zr(a)}class zs extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var so=zs;class Bu{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[f,g]of l)this.bindings[f]=g}concat(i){return new Bu(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var mi=Bu;const Va={kind:"null"},nn={kind:"number"},sr={kind:"string"},Hn={kind:"boolean"},Gs={kind:"color"},ra={kind:"object"},or={kind:"value"},As={kind:"collator"},qc={kind:"formatted"},ia={kind:"resolvedImage"};function Ji(a,i){return{kind:"array",itemType:a,N:i}}function bi(a){if(a.kind==="array"){const i=bi(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const Nh=[Va,nn,sr,Hn,Gs,qc,ra,Ji(or),ia];function ya(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!ya(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const l of Nh)if(!ya(l,i))return null}}return`Expected ${bi(a)} but found ${bi(i)} instead.`}function jl(a,i){return i.some((l=>l.kind===a.kind))}function Hc(a,i){return i.some((l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a))}var $l,Fu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Bo(a){return(a=Math.round(a))<0?0:a>255?255:a}function uc(a){return Bo(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function Fo(a){return(i=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:i>1?1:i;var i}function _a(a,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?a+(i-a)*l*6:2*l<1?i:3*l<2?a+(i-a)*(2/3-l)*6:a}try{$l={}.parseCSSColor=function(a){var i,l=a.replace(/ /g,"").toLowerCase();if(l in Fu)return Fu[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var f=l.indexOf("("),g=l.indexOf(")");if(f!==-1&&g+1===l.length){var x=l.substr(0,f),w=l.substr(f+1,g-(f+1)).split(","),C=1;switch(x){case"rgba":if(w.length!==4)return null;C=Fo(w.pop());case"rgb":return w.length!==3?null:[uc(w[0]),uc(w[1]),uc(w[2]),C];case"hsla":if(w.length!==4)return null;C=Fo(w.pop());case"hsl":if(w.length!==3)return null;var R=(parseFloat(w[0])%360+360)%360/360,k=Fo(w[1]),B=Fo(w[2]),j=B<=.5?B*(k+1):B+k-B*k,G=2*B-j;return[Bo(255*_a(G,j,R+1/3)),Bo(255*_a(G,j,R)),Bo(255*_a(G,j,R-1/3)),C];default:return null}}return null}}catch{}class ds{constructor(i,l,f,g=1){this.r=i,this.g=l,this.b=f,this.a=g}static parse(i){if(!i)return;if(i instanceof ds)return i;if(typeof i!="string")return;const l=$l(i);return l?new ds(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,f,g]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(f)},${g})`}toArray(){const{r:i,g:l,b:f,a:g}=this;return g===0?[0,0,0,0]:[255*i/g,255*l/g,255*f/g,g]}toArray01(){const{r:i,g:l,b:f,a:g}=this;return g===0?[0,0,0,0]:[i/g,l/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:f,a:g}=this;return[i,l,f,g]}}ds.black=new ds(0,0,0,1),ds.white=new ds(1,1,1,1),ds.transparent=new ds(0,0,0,0),ds.red=new ds(1,0,0,1),ds.blue=new ds(0,0,1,1);var Ii=ds;class Gc{constructor(i,l,f){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ql{constructor(i,l,f,g,x){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=f,this.fontStack=g,this.textColor=x}}class as{constructor(i){this.sections=i}static fromString(i){return new as([new ql(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((i=>i.text.length!==0||i.image&&i.image.name.length!==0))}static factory(i){return i instanceof as?i:as.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map((i=>i.text)).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const f={};l.fontStack&&(f["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(f["font-scale"]=l.scale),l.textColor&&(f["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(f)}return i}}class fs{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new fs({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Wc(a,i,l,f){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[a,i,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[a,i,l,f]:[a,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ii(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ii||a instanceof Gc||a instanceof as||a instanceof fs)return!0;if(Array.isArray(a)){for(const i of a)if(!ii(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!ii(a[i]))return!1;return!0}return!1}function si(a){if(a===null)return Va;if(typeof a=="string")return sr;if(typeof a=="boolean")return Hn;if(typeof a=="number")return nn;if(a instanceof Ii)return Gs;if(a instanceof Gc)return As;if(a instanceof as)return qc;if(a instanceof fs)return ia;if(Array.isArray(a)){const i=a.length;let l;for(const f of a){const g=si(f);if(l){if(l===g)continue;l=or;break}l=g}return Ji(l||or,i)}return ra}function hc(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Ii||a instanceof as||a instanceof fs?a.toString():JSON.stringify(a)}class dc{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!ii(i[1]))return l.error("invalid value");const f=i[1];let g=si(f);const x=l.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new dc(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ii?["rgba"].concat(this.value.toArray()):this.value instanceof as?this.value.serialize():this.value}}var _l=dc,ps=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const vl={string:sr,number:nn,boolean:Hn,object:ra};class va{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let f,g=1;const x=i[0];if(x==="array"){let C,R;if(i.length>2){const k=i[1];if(typeof k!="string"||!(k in vl)||k==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=vl[k],g++}else C=or;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);R=i[2],g++}f=Ji(C,R)}else f=vl[x];const w=[];for(;g<i.length;g++){const C=l.parse(i[g],g,or);if(!C)return null;w.push(C)}return new va(f,w)}evaluate(i){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(i);if(!ya(this.type,si(f)))return f;if(l===this.args.length-1)throw new ps(`Expected value to be of type ${bi(this.type)}, but found ${bi(si(f))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const f=i.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){l.push(f.kind);const g=i.N;(typeof g=="number"||this.args.length>1)&&l.push(g)}}return l.concat(this.args.map((f=>f.serialize())))}}var es=va;class yo{constructor(i){this.type=qc,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=i.length-1;++w){const C=i[w];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let R=null;if(C["font-scale"]&&(R=l.parse(C["font-scale"],1,nn),!R))return null;let k=null;if(C["text-font"]&&(k=l.parse(C["text-font"],1,Ji(sr)),!k))return null;let B=null;if(C["text-color"]&&(B=l.parse(C["text-color"],1,Gs),!B))return null;const j=g[g.length-1];j.scale=R,j.font=k,j.textColor=B}else{const R=l.parse(i[w],1,or);if(!R)return null;const k=R.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:R,scale:null,font:null,textColor:null})}}return new yo(g)}evaluate(i){return new as(this.sections.map((l=>{const f=l.content.evaluate(i);return si(f)===ia?new ql("",f,null,null,null):new ql(hc(f),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)})))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const f={};l.scale&&(f["font-scale"]=l.scale.serialize()),l.font&&(f["text-font"]=l.font.serialize()),l.textColor&&(f["text-color"]=l.textColor.serialize()),i.push(f)}return i}}class xa{constructor(i){this.type=ia,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const f=l.parse(i[1],1,sr);return f?new xa(f):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),f=fs.fromString(l);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(l)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Yc={"to-boolean":Hn,"to-color":Gs,"to-number":nn,"to-string":sr};class Vu{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[0];if((f==="to-boolean"||f==="to-string")&&i.length!==2)return l.error("Expected one argument.");const g=Yc[f],x=[];for(let w=1;w<i.length;w++){const C=l.parse(i[w],w,or);if(!C)return null;x.push(C)}return new Vu(g,x)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let l,f;for(const g of this.args){if(l=g.evaluate(i),f=null,l instanceof Ii)return l;if(typeof l=="string"){const x=i.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Wc(l[0],l[1],l[2],l[3]),!f))return new Ii(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new ps(f||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const f of this.args){if(l=f.evaluate(i),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new ps(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?as.fromString(hc(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?fs.fromString(hc(this.args[0].evaluate(i))):hc(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}serialize(){if(this.type.kind==="formatted")return new yo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new xa(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild((l=>{i.push(l.serialize())})),i}}var ba=Vu;const Vo=["Unknown","Point","LineString","Polygon"];var Ua=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-a[0])+this.featureDistanceData.bearing[1]*(f*i-a[1])}return 0}parseColor(a){let i=this._parseColorCache[a];return i||(i=this._parseColorCache[a]=Ii.parse(a)),i}};class ja{constructor(i,l,f,g){this.name=i,this.type=l,this._evaluate=f,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((i=>i.serialize())))}static parse(i,l){const f=i[0],g=ja.definitions[f];if(!g)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=w.filter((([k])=>!Array.isArray(k)||k.length===i.length-1));let R=null;for(const[k,B]of C){R=new hn(l.registry,l.path,null,l.scope);const j=[];let G=!1;for(let Z=1;Z<i.length;Z++){const J=i[Z],ue=Array.isArray(k)?k[Z-1]:k.type,ve=R.parse(J,1+j.length,ue);if(!ve){G=!0;break}j.push(ve)}if(!G)if(Array.isArray(k)&&k.length!==j.length)R.error(`Expected ${k.length} arguments, but found ${j.length} instead.`);else{for(let Z=0;Z<j.length;Z++){const J=Array.isArray(k)?k[Z]:k.type,ue=j[Z];R.concat(Z+1).checkSubtype(J,ue.type)}if(R.errors.length===0)return new ja(f,x,B,j)}}if(C.length===1)l.errors.push(...R.errors);else{const k=(C.length?C:w).map((([j])=>{return G=j,Array.isArray(G)?`(${G.map(bi).join(", ")})`:`(${bi(G.type)}...)`;var G})).join(" | "),B=[];for(let j=1;j<i.length;j++){const G=l.parse(i[j],1+B.length);if(!G)return null;B.push(bi(G.type))}l.error(`Expected arguments of type ${k}, but found (${B.join(", ")}) instead.`)}return null}static register(i,l){ja.definitions=l;for(const f in l)i[f]=ja}}var wa=ja;class xl{constructor(i,l,f){this.type=As,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const g=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Hn);if(!g)return null;const x=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Hn);if(!x)return null;let w=null;return f.locale&&(w=l.parse(f.locale,1,sr),!w)?null:new xl(g,x,w)}evaluate(i){return new Gc(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const $a=8192;function Uu(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function qa(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function fc(a,i){const l=(180+a[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(l*g*$a),Math.round(f*g*$a)]}function uf(a,i,l){const f=a[0]-i[0],g=a[1]-i[1],x=a[0]-l[0],w=a[1]-l[1];return f*w-x*g==0&&f*x<=0&&g*w<=0}function pc(a,i){let l=!1;for(let w=0,C=i.length;w<C;w++){const R=i[w];for(let k=0,B=R.length;k<B-1;k++){if(uf(a,R[k],R[k+1]))return!1;(g=R[k])[1]>(f=a)[1]!=(x=R[k+1])[1]>f[1]&&f[0]<(x[0]-g[0])*(f[1]-g[1])/(x[1]-g[1])+g[0]&&(l=!l)}}var f,g,x;return l}function Bh(a,i){for(let l=0;l<i.length;l++)if(pc(a,i[l]))return!0;return!1}function Fh(a,i,l,f){const g=f[0]-l[0],x=f[1]-l[1],w=(a[0]-l[0])*x-g*(a[1]-l[1]),C=(i[0]-l[0])*x-g*(i[1]-l[1]);return w>0&&C<0||w<0&&C>0}function Uo(a,i,l){for(const k of l)for(let B=0;B<k.length-1;++B)if((C=[(w=k[B+1])[0]-(x=k[B])[0],w[1]-x[1]])[0]*(R=[(g=i)[0]-(f=a)[0],g[1]-f[1]])[1]-C[1]*R[0]!=0&&Fh(f,g,x,w)&&Fh(x,w,f,g))return!0;var f,g,x,w,C,R;return!1}function Nr(a,i){for(let l=0;l<a.length;++l)if(!pc(a[l],i))return!1;for(let l=0;l<a.length-1;++l)if(Uo(a[l],a[l+1],i))return!1;return!0}function Ap(a,i){for(let l=0;l<i.length;l++)if(Nr(a,i[l]))return!0;return!1}function Vh(a,i,l){const f=[];for(let g=0;g<a.length;g++){const x=[];for(let w=0;w<a[g].length;w++){const C=fc(a[g][w],l);Uu(i,C),x.push(C)}f.push(x)}return f}function hf(a,i,l){const f=[];for(let g=0;g<a.length;g++){const x=Vh(a[g],i,l);f.push(x)}return f}function Hl(a,i,l,f){if(a[0]<l[0]||a[0]>l[2]){const g=.5*f;let x=a[0]-l[0]>g?-f:l[0]-a[0]>g?f:0;x===0&&(x=a[0]-l[2]>g?-f:l[2]-a[0]>g?f:0),a[0]+=x}Uu(i,a)}function _o(a,i,l,f){const g=Math.pow(2,f.z)*$a,x=[f.x*$a,f.y*$a],w=[];if(!a)return w;for(const C of a)for(const R of C){const k=[R.x+x[0],R.y+x[1]];Hl(k,i,l,g),w.push(k)}return w}function Uh(a,i,l,f){const g=Math.pow(2,f.z)*$a,x=[f.x*$a,f.y*$a],w=[];if(!a)return w;for(const R of a){const k=[];for(const B of R){const j=[B.x+x[0],B.y+x[1]];Uu(i,j),k.push(j)}w.push(k)}if(i[2]-i[0]<=g/2){(C=i)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const R of w)for(const k of R)Hl(k,i,l,g)}var C;return w}class mc{constructor(i,l){this.type=Hn,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(ii(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const x=f.features[g].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new mc(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new mc(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new mc(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(l,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const C=Vh(f.coordinates,x,w),R=_o(l.geometry(),g,x,w);if(!qa(g,x))return!1;for(const k of R)if(!pc(k,C))return!1}if(f.type==="MultiPolygon"){const C=hf(f.coordinates,x,w),R=_o(l.geometry(),g,x,w);if(!qa(g,x))return!1;for(const k of R)if(!Bh(k,C))return!1}return!0})(i,this.geometries);if(i.geometryType()==="LineString")return(function(l,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if(!w)return!1;if(f.type==="Polygon"){const C=Vh(f.coordinates,x,w),R=Uh(l.geometry(),g,x,w);if(!qa(g,x))return!1;for(const k of R)if(!Nr(k,C))return!1}if(f.type==="MultiPolygon"){const C=hf(f.coordinates,x,w),R=Uh(l.geometry(),g,x,w);if(!qa(g,x))return!1;for(const k of R)if(!Ap(k,C))return!1}return!0})(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ha=mc;function D(a){if(a instanceof wa&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Ha)return!1;let i=!0;return a.eachChild((l=>{i&&!D(l)&&(i=!1)})),i}function K(a){if(a instanceof wa&&a.name==="feature-state")return!1;let i=!0;return a.eachChild((l=>{i&&!K(l)&&(i=!1)})),i}function ae(a,i){if(a instanceof wa&&i.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild((f=>{l&&!ae(f,i)&&(l=!1)})),l}class Ie{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=i[1];return l.scope.has(f)?new Ie(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var dt=Ie;class _t{constructor(i,l=[],f,g=new mi,x=[]){this.registry=i,this.path=l,this.key=l.map((w=>`[${w}]`)).join(""),this.scope=g,this.errors=x,this.expectedType=f}parse(i,l,f,g,x={}){return l?this.concat(l,f,g)._parse(i,x):this._parse(i,x)}_parse(i,l){function f(g,x,w){return w==="assert"?new es(x,[g]):w==="coerce"?new ba(x,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(i,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,R=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||R.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string"){if(this.checkSubtype(C,R))return null}else w=f(w,C,l.typeAnnotation||"coerce");else w=f(w,C,l.typeAnnotation||"assert")}if(!(w instanceof _l)&&w.type.kind!=="resolvedImage"&&gr(w)){const C=new Ua;try{w=new _l(w.type,w.evaluate(C))}catch(R){return this.error(R.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,f){const g=typeof i=="number"?this.path.concat(i):this.path,x=f?this.scope.concat(f):this.scope;return new _t(this.registry,g,l||null,x,this.errors)}error(i,...l){const f=`${this.key}${l.map((g=>`[${g}]`)).join("")}`;this.errors.push(new so(f,i))}checkSubtype(i,l){const f=ya(i,l);return f&&this.error(f),f}}var hn=_t;function gr(a){if(a instanceof dt)return gr(a.boundExpression);if(a instanceof wa&&a.name==="error"||a instanceof xl||a instanceof Ha)return!1;const i=a instanceof ba||a instanceof es;let l=!0;return a.eachChild((f=>{l=i?l&&gr(f):l&&f instanceof _l})),!!l&&D(a)&&ae(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function ls(a,i){const l=a.length-1;let f,g,x=0,w=l,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),f=a[C],g=a[C+1],f<=i){if(C===l||i<g)return C;x=C+1}else{if(!(f>i))throw new ps("Input is not a number.");w=C-1}return 0}class Hr{constructor(i,l,f){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(i[1],1,nn);if(!f)return null;const g=[];let x=null;l.expectedType&&l.expectedType.kind!=="value"&&(x=l.expectedType);for(let w=1;w<i.length;w+=2){const C=w===1?-1/0:i[w],R=i[w+1],k=w,B=w+1;if(typeof C!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(g.length&&g[g.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const j=l.parse(R,B,x);if(!j)return null;x=x||j.type,g.push([C,j])}return new Hr(x,f,g)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return f[0].evaluate(i);const x=l.length;return g>=l[x-1]?f[x-1].evaluate(i):f[ls(l,g)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var Gi=Hr;function rr(a,i,l){return a*(1-l)+i*l}var sa=Object.freeze({__proto__:null,array:function(a,i,l){return a.map(((f,g)=>rr(f,i[g],l)))},color:function(a,i,l){return new Ii(rr(a.r,i.r,l),rr(a.g,i.g,l),rr(a.b,i.b,l),rr(a.a,i.a,l))},number:rr});const Ga=.95047,Ta=1.08883,Xc=4/29,Wa=6/29,Kc=3*Wa*Wa,r0=Wa*Wa*Wa,i0=Math.PI/180,s0=180/Math.PI;function Ip(a){return a>r0?Math.pow(a,1/3):a/Kc+Xc}function Mp(a){return a>Wa?a*a*a:Kc*(a-Xc)}function ju(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Zc(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function $y(a){const i=Zc(a.r),l=Zc(a.g),f=Zc(a.b),g=Ip((.4124564*i+.3575761*l+.1804375*f)/Ga),x=Ip((.2126729*i+.7151522*l+.072175*f)/1);return{l:116*x-16,a:500*(g-x),b:200*(x-Ip((.0193339*i+.119192*l+.9503041*f)/Ta)),alpha:a.a}}function df(a){let i=(a.l+16)/116,l=isNaN(a.a)?i:i+a.a/500,f=isNaN(a.b)?i:i-a.b/200;return i=1*Mp(i),l=Ga*Mp(l),f=Ta*Mp(f),new Ii(ju(3.2404542*l-1.5371385*i-.4985314*f),ju(-.969266*l+1.8760108*i+.041556*f),ju(.0556434*l-.2040259*i+1.0572252*f),a.alpha)}function qy(a,i,l){const f=i-a;return a+l*(f>180||f<-180?f-360*Math.round(f/360):f)}const jh={forward:$y,reverse:df,interpolate:function(a,i,l){return{l:rr(a.l,i.l,l),a:rr(a.a,i.a,l),b:rr(a.b,i.b,l),alpha:rr(a.alpha,i.alpha,l)}}},Qc={forward:function(a){const{l:i,a:l,b:f}=$y(a),g=Math.atan2(f,l)*s0;return{h:g<0?g+360:g,c:Math.sqrt(l*l+f*f),l:i,alpha:a.a}},reverse:function(a){const i=a.h*i0,l=a.c;return df({l:a.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:a.alpha})},interpolate:function(a,i,l){return{h:qy(a.h,i.h,l),c:rr(a.c,i.c,l),l:rr(a.l,i.l,l),alpha:rr(a.alpha,i.alpha,l)}}};var ff=Object.freeze({__proto__:null,hcl:Qc,lab:jh});class $h{constructor(i,l,f,g,x){this.type=i,this.operator=l,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(i,l,f,g){let x=0;if(i.name==="exponential")x=Rp(l,i.base,f,g);else if(i.name==="linear")x=Rp(l,1,f,g);else if(i.name==="cubic-bezier"){const w=i.controlPoints;x=new ce(w[0],w[1],w[2],w[3]).solve(Rp(l,1,f,g))}return x}static parse(i,l){let[f,g,x,...w]=i;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const k=g[1];if(typeof k!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:k}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const k=g.slice(1);if(k.length!==4||k.some((B=>typeof B!="number"||B<0||B>1)))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:k}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,nn),!x)return null;const C=[];let R=null;f==="interpolate-hcl"||f==="interpolate-lab"?R=Gs:l.expectedType&&l.expectedType.kind!=="value"&&(R=l.expectedType);for(let k=0;k<w.length;k+=2){const B=w[k],j=w[k+1],G=k+3,Z=k+4;if(typeof B!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(C.length&&C[C.length-1][0]>=B)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const J=l.parse(j,Z,R);if(!J)return null;R=R||J.type,C.push([B,J])}return R.kind==="number"||R.kind==="color"||R.kind==="array"&&R.itemType.kind==="number"&&typeof R.N=="number"?new $h(R,f,g,x,C):l.error(`Type ${bi(R)} is not interpolatable.`)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return f[0].evaluate(i);const x=l.length;if(g>=l[x-1])return f[x-1].evaluate(i);const w=ls(l,g),C=$h.interpolationFactor(this.interpolation,g,l[w],l[w+1]),R=f[w].evaluate(i),k=f[w+1].evaluate(i);return this.operator==="interpolate"?sa[this.type.kind.toLowerCase()](R,k,C):this.operator==="interpolate-hcl"?Qc.reverse(Qc.interpolate(Qc.forward(R),Qc.forward(k),C)):jh.reverse(jh.interpolate(jh.forward(R),jh.forward(k),C))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let f=0;f<this.labels.length;f++)l.push(this.labels[f],this.outputs[f].serialize());return l}}function Rp(a,i,l,f){const g=f-l,x=a-l;return g===0?0:i===1?x/g:(Math.pow(i,x)-1)/(Math.pow(i,g)-1)}var bl=$h;class Dp{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let f=null;const g=l.expectedType;g&&g.kind!=="value"&&(f=g);const x=[];for(const C of i.slice(1)){const R=l.parse(C,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!R)return null;f=f||R.type,x.push(R)}const w=g&&x.some((C=>ya(g,C.type)));return new Dp(w?or:f,x)}evaluate(i){let l,f=null,g=0;for(const x of this.args){if(g++,f=x.evaluate(i),f&&f instanceof fs&&!f.available&&(l||(l=f),f=null,g===this.args.length))return l;if(f!==null)break}return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}serialize(){const i=["coalesce"];return this.eachChild((l=>{i.push(l.serialize())})),i}}var ug=Dp;class kp{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let x=1;x<i.length-1;x+=2){const w=i[x];if(typeof w!="string")return l.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=l.parse(i[x+1],x+1);if(!C)return null;f.push([w,C])}const g=l.parse(i[i.length-1],i.length-1,l.expectedType,f);return g?new kp(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,f]of this.bindings)i.push(l,f.serialize());return i.push(this.result.serialize()),i}}var Hy=kp;class hg{constructor(i,l,f){this.type=i,this.index=l,this.input=f}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,nn),g=l.parse(i[2],2,Ji(l.expectedType||or));return f&&g?new hg(g.type.itemType,f,g):null}evaluate(i){const l=this.index.evaluate(i),f=this.input.evaluate(i);if(l<0)throw new ps(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new ps(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new ps(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ea=hg;class $u{constructor(i,l){this.type=Hn,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,or),g=l.parse(i[2],2,or);return f&&g?jl(f.type,[Hn,sr,nn,Va,or])?new $u(f,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(f==null)return!1;if(!Hc(l,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${bi(si(l))} instead.`);if(!Hc(f,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${bi(si(f))} instead.`);return f.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var pf=$u;class qh{constructor(i,l,f){this.type=nn,this.needle=i,this.haystack=l,this.fromIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,or),g=l.parse(i[2],2,or);if(!f||!g)return null;if(!jl(f.type,[Hn,sr,nn,Va,or]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(f.type)} instead`);if(i.length===4){const x=l.parse(i[3],3,nn);return x?new qh(f,g,x):null}return new qh(f,g)}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!Hc(l,["boolean","string","number","null"]))throw new ps(`Expected first argument to be of type boolean, string, number or null, but found ${bi(si(l))} instead.`);if(!Hc(f,["string","array"]))throw new ps(`Expected second argument to be of type array or string, but found ${bi(si(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(i);return f.indexOf(l,g)}return f.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var dg=qh;class Pp{constructor(i,l,f,g,x,w){this.inputType=i,this.type=l,this.input=f,this.cases=g,this.outputs=x,this.otherwise=w}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let f,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const x={},w=[];for(let k=2;k<i.length-1;k+=2){let B=i[k];const j=i[k+1];Array.isArray(B)||(B=[B]);const G=l.concat(k);if(B.length===0)return G.error("Expected at least one branch label.");for(const J of B){if(typeof J!="number"&&typeof J!="string")return G.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return G.error("Numeric branch labels must be integer values.");if(f){if(G.checkSubtype(f,si(J)))return null}else f=si(J);if(x[String(J)]!==void 0)return G.error("Branch labels must be unique.");x[String(J)]=w.length}const Z=l.parse(j,k,g);if(!Z)return null;g=g||Z.type,w.push(Z)}const C=l.parse(i[1],1,or);if(!C)return null;const R=l.parse(i[i.length-1],i.length-1,g);return R?C.type.kind!=="value"&&l.concat(1).checkSubtype(f,C.type)?null:new Pp(f,g,C,x,w,R):null}evaluate(i){const l=this.input.evaluate(i);return(si(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),f=[],g={};for(const w of l){const C=g[this.cases[w]];C===void 0?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[C][1].push(w)}const x=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,C]of f)i.push(C.length===1?x(C[0]):C.map(x)),i.push(this.outputs[w].serialize());return i.push(this.otherwise.serialize()),i}}var fg=Pp;class pg{constructor(i,l,f){this.type=i,this.branches=l,this.otherwise=f}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const g=[];for(let w=1;w<i.length-1;w+=2){const C=l.parse(i[w],w,Hn);if(!C)return null;const R=l.parse(i[w+1],w+1,f);if(!R)return null;g.push([C,R]),f=f||R.type}const x=l.parse(i[i.length-1],i.length-1,f);return x?new pg(f,g,x):null}evaluate(i){for(const[l,f]of this.branches)if(l.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,f]of this.branches)i(l),i(f);i(this.otherwise)}outputDefined(){return this.branches.every((([i,l])=>l.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild((l=>{i.push(l.serialize())})),i}}var qu=pg;class Hu{constructor(i,l,f,g){this.type=i,this.input=l,this.beginIndex=f,this.endIndex=g}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,or),g=l.parse(i[2],2,nn);if(!f||!g)return null;if(!jl(f.type,[Ji(or),sr,or]))return l.error(`Expected first argument to be of type array or string, but found ${bi(f.type)} instead`);if(i.length===4){const x=l.parse(i[3],3,nn);return x?new Hu(f.type,f,g,x):null}return new Hu(f.type,f,g)}evaluate(i){const l=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!Hc(l,["string","array"]))throw new ps(`Expected first argument to be of type array or string, but found ${bi(si(l))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(i);return l.slice(f,g)}return l.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Hh=Hu;function Gh(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function mg(a,i,l,f){return f.compare(i,l)===0}function Ya(a,i,l){const f=a!=="=="&&a!=="!=";return class wU{constructor(x,w,C){this.type=Hn,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const C=x[0];let R=w.parse(x[1],1,or);if(!R)return null;if(!Gh(C,R.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${bi(R.type)}'.`);let k=w.parse(x[2],2,or);if(!k)return null;if(!Gh(C,k.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${bi(k.type)}'.`);if(R.type.kind!==k.type.kind&&R.type.kind!=="value"&&k.type.kind!=="value")return w.error(`Cannot compare types '${bi(R.type)}' and '${bi(k.type)}'.`);f&&(R.type.kind==="value"&&k.type.kind!=="value"?R=new es(k.type,[R]):R.type.kind!=="value"&&k.type.kind==="value"&&(k=new es(R.type,[k])));let B=null;if(x.length===4){if(R.type.kind!=="string"&&k.type.kind!=="string"&&R.type.kind!=="value"&&k.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(B=w.parse(x[3],3,As),!B)return null}return new wU(R,k,B)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const R=si(w),k=si(C);if(R.kind!==k.kind||R.kind!=="string"&&R.kind!=="number")throw new ps(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${R.kind}, ${k.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const R=si(w),k=si(C);if(R.kind!=="string"||k.kind!=="string")return i(x,w,C)}return this.collator?l(x,w,C,this.collator.evaluate(x)):i(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[a];return this.eachChild((w=>{x.push(w.serialize())})),x}}}const Wh=Ya("==",(function(a,i,l){return i===l}),mg),gg=Ya("!=",(function(a,i,l){return i!==l}),(function(a,i,l,f){return!mg(0,i,l,f)})),Gy=Ya("<",(function(a,i,l){return i<l}),(function(a,i,l,f){return f.compare(i,l)<0})),Gu=Ya(">",(function(a,i,l){return i>l}),(function(a,i,l,f){return f.compare(i,l)>0})),Wy=Ya("<=",(function(a,i,l){return i<=l}),(function(a,i,l,f){return f.compare(i,l)<=0})),yg=Ya(">=",(function(a,i,l){return i>=l}),(function(a,i,l,f){return f.compare(i,l)>=0}));class mf{constructor(i,l,f,g,x,w){this.type=sr,this.number=i,this.locale=l,this.currency=f,this.unit=g,this.minFractionDigits=x,this.maxFractionDigits=w}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const f=l.parse(i[1],1,nn);if(!f)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=l.parse(g.locale,1,sr),!x))return null;let w=null;if(g.currency&&(w=l.parse(g.currency,1,sr),!w))return null;let C=null;if(g.unit&&(C=l.parse(g.unit,1,sr),!C))return null;let R=null;if(g["min-fraction-digits"]&&(R=l.parse(g["min-fraction-digits"],1,nn),!R))return null;let k=null;return g["max-fraction-digits"]&&(k=l.parse(g["max-fraction-digits"],1,nn),!k)?null:new mf(f,x,w,C,R,k)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class Yh{constructor(i){this.type=nn,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=l.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${bi(f.type)} instead.`):new Yh(f):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new ps(`Expected value to be of type string or array, but found ${bi(si(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild((l=>{i.push(l.serialize())})),i}}const Yy={"==":Wh,"!=":gg,">":Gu,"<":Gy,">=":yg,"<=":Wy,array:es,at:Ea,boolean:es,case:qu,coalesce:ug,collator:xl,format:yo,image:xa,in:pf,"index-of":dg,interpolate:bl,"interpolate-hcl":bl,"interpolate-lab":bl,length:Yh,let:Hy,literal:_l,match:fg,number:es,"number-format":mf,object:es,slice:Hh,step:Gi,string:es,"to-boolean":ba,"to-color":ba,"to-number":ba,"to-string":ba,var:dt,within:Ha};function Xy(a,[i,l,f,g]){i=i.evaluate(a),l=l.evaluate(a),f=f.evaluate(a);const x=g?g.evaluate(a):1,w=Wc(i,l,f,x);if(w)throw new ps(w);return new Ii(i/255*x,l/255*x,f/255*x,x)}function Gl(a,i){return a in i}function gf(a,i){const l=i[a];return l===void 0?null:l}function oa(a){return{type:a}}wa.register(Yy,{error:[{kind:"error"},[sr],(a,[i])=>{throw new ps(i.evaluate(a))}],typeof:[sr,[or],(a,[i])=>bi(si(i.evaluate(a)))],"to-rgba":[Ji(nn,4),[Gs],(a,[i])=>i.evaluate(a).toArray()],rgb:[Gs,[nn,nn,nn],Xy],rgba:[Gs,[nn,nn,nn,nn],Xy],has:{type:Hn,overloads:[[[sr],(a,[i])=>Gl(i.evaluate(a),a.properties())],[[sr,ra],(a,[i,l])=>Gl(i.evaluate(a),l.evaluate(a))]]},get:{type:or,overloads:[[[sr],(a,[i])=>gf(i.evaluate(a),a.properties())],[[sr,ra],(a,[i,l])=>gf(i.evaluate(a),l.evaluate(a))]]},"feature-state":[or,[sr],(a,[i])=>gf(i.evaluate(a),a.featureState||{})],properties:[ra,[],a=>a.properties()],"geometry-type":[sr,[],a=>a.geometryType()],id:[or,[],a=>a.id()],zoom:[nn,[],a=>a.globals.zoom],pitch:[nn,[],a=>a.globals.pitch||0],"distance-from-center":[nn,[],a=>a.distanceFromCenter()],"heatmap-density":[nn,[],a=>a.globals.heatmapDensity||0],"line-progress":[nn,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[nn,[],a=>a.globals.skyRadialProgress||0],accumulated:[or,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[nn,oa(nn),(a,i)=>{let l=0;for(const f of i)l+=f.evaluate(a);return l}],"*":[nn,oa(nn),(a,i)=>{let l=1;for(const f of i)l*=f.evaluate(a);return l}],"-":{type:nn,overloads:[[[nn,nn],(a,[i,l])=>i.evaluate(a)-l.evaluate(a)],[[nn],(a,[i])=>-i.evaluate(a)]]},"/":[nn,[nn,nn],(a,[i,l])=>i.evaluate(a)/l.evaluate(a)],"%":[nn,[nn,nn],(a,[i,l])=>i.evaluate(a)%l.evaluate(a)],ln2:[nn,[],()=>Math.LN2],pi:[nn,[],()=>Math.PI],e:[nn,[],()=>Math.E],"^":[nn,[nn,nn],(a,[i,l])=>Math.pow(i.evaluate(a),l.evaluate(a))],sqrt:[nn,[nn],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[nn,[nn],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[nn,[nn],(a,[i])=>Math.log(i.evaluate(a))],log2:[nn,[nn],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[nn,[nn],(a,[i])=>Math.sin(i.evaluate(a))],cos:[nn,[nn],(a,[i])=>Math.cos(i.evaluate(a))],tan:[nn,[nn],(a,[i])=>Math.tan(i.evaluate(a))],asin:[nn,[nn],(a,[i])=>Math.asin(i.evaluate(a))],acos:[nn,[nn],(a,[i])=>Math.acos(i.evaluate(a))],atan:[nn,[nn],(a,[i])=>Math.atan(i.evaluate(a))],min:[nn,oa(nn),(a,i)=>Math.min(...i.map((l=>l.evaluate(a))))],max:[nn,oa(nn),(a,i)=>Math.max(...i.map((l=>l.evaluate(a))))],abs:[nn,[nn],(a,[i])=>Math.abs(i.evaluate(a))],round:[nn,[nn],(a,[i])=>{const l=i.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[nn,[nn],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[nn,[nn],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[Hn,[sr,or],(a,[i,l])=>a.properties()[i.value]===l.value],"filter-id-==":[Hn,[or],(a,[i])=>a.id()===i.value],"filter-type-==":[Hn,[sr],(a,[i])=>a.geometryType()===i.value],"filter-<":[Hn,[sr,or],(a,[i,l])=>{const f=a.properties()[i.value],g=l.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Hn,[or],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l<f}],"filter->":[Hn,[sr,or],(a,[i,l])=>{const f=a.properties()[i.value],g=l.value;return typeof f==typeof g&&f>g}],"filter-id->":[Hn,[or],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l>f}],"filter-<=":[Hn,[sr,or],(a,[i,l])=>{const f=a.properties()[i.value],g=l.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Hn,[or],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l<=f}],"filter->=":[Hn,[sr,or],(a,[i,l])=>{const f=a.properties()[i.value],g=l.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Hn,[or],(a,[i])=>{const l=a.id(),f=i.value;return typeof l==typeof f&&l>=f}],"filter-has":[Hn,[or],(a,[i])=>i.value in a.properties()],"filter-has-id":[Hn,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Hn,[Ji(sr)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[Hn,[Ji(or)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[Hn,[sr,Ji(or)],(a,[i,l])=>l.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[Hn,[sr,Ji(or)],(a,[i,l])=>(function(f,g,x,w){for(;x<=w;){const C=x+w>>1;if(g[C]===f)return!0;g[C]>f?w=C-1:x=C+1}return!1})(a.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Hn,overloads:[[[Hn,Hn],(a,[i,l])=>i.evaluate(a)&&l.evaluate(a)],[oa(Hn),(a,i)=>{for(const l of i)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],(a,[i,l])=>i.evaluate(a)||l.evaluate(a)],[oa(Hn),(a,i)=>{for(const l of i)if(l.evaluate(a))return!0;return!1}]]},"!":[Hn,[Hn],(a,[i])=>!i.evaluate(a)],"is-supported-script":[Hn,[sr],(a,[i])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(i.evaluate(a))}],upcase:[sr,[sr],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[sr,[sr],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[sr,oa(or),(a,i)=>i.map((l=>hc(l.evaluate(a)))).join("")],"resolved-locale":[sr,[As],(a,[i])=>i.evaluate(a).resolvedLocale()]});var jo=Yy;function yf(a){return{result:"success",value:a}}function Ws(a){return{result:"error",value:a}}function wl(a){return a["property-type"]==="data-driven"}function Xh(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Wu(a){return!!a.expression&&a.expression.interpolated}function Dr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Yu(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Jc(a){return a}function _f(a,i){const l=i.type==="color",f=a.stops&&typeof a.stops[0][0]=="object",g=f||!(f||a.property!==void 0),x=a.type||(Wu(i)?"exponential":"interval");if(l&&((a=na({},a)).stops&&(a.stops=a.stops.map((k=>[k[0],Ii.parse(k[1])]))),a.default=Ii.parse(a.default?a.default:i.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!ff[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let w,C,R;if(x==="exponential")w=bs;else if(x==="interval")w=Lp;else if(x==="categorical"){w=Xu,C=Object.create(null);for(const k of a.stops)C[k[0]]=k[1];R=typeof a.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);w=Op}if(f){const k={},B=[];for(let Z=0;Z<a.stops.length;Z++){const J=a.stops[Z],ue=J[0].zoom;k[ue]===void 0&&(k[ue]={zoom:ue,type:a.type,property:a.property,default:a.default,stops:[]},B.push(ue)),k[ue].stops.push([J[0].value,J[1]])}const j=[];for(const Z of B)j.push([k[Z].zoom,_f(k[Z],i)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:bl.interpolationFactor.bind(void 0,G),zoomStops:j.map((Z=>Z[0])),evaluate:({zoom:Z},J)=>bs({stops:j,base:a.base},i,Z).evaluate(Z,J)}}if(g){const k=x==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:bl.interpolationFactor.bind(void 0,k),zoomStops:a.stops.map((B=>B[0])),evaluate:({zoom:B})=>w(a,i,B,C,R)}}return{kind:"source",evaluate(k,B){const j=B&&B.properties?B.properties[a.property]:void 0;return j===void 0?gc(a.default,i.default):w(a,i,j,C,R)}}}function gc(a,i,l){return a!==void 0?a:i!==void 0?i:l!==void 0?l:void 0}function Xu(a,i,l,f,g){return gc(typeof l===g?f[l]:void 0,a.default,i.default)}function Lp(a,i,l){if(Dr(l)!=="number")return gc(a.default,i.default);const f=a.stops.length;if(f===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[f-1][0])return a.stops[f-1][1];const g=ls(a.stops.map((x=>x[0])),l);return a.stops[g][1]}function bs(a,i,l){const f=a.base!==void 0?a.base:1;if(Dr(l)!=="number")return gc(a.default,i.default);const g=a.stops.length;if(g===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[g-1][0])return a.stops[g-1][1];const x=ls(a.stops.map((B=>B[0])),l),w=(function(B,j,G,Z){const J=Z-G,ue=B-G;return J===0?0:j===1?ue/J:(Math.pow(j,ue)-1)/(Math.pow(j,J)-1)})(l,f,a.stops[x][0],a.stops[x+1][0]),C=a.stops[x][1],R=a.stops[x+1][1];let k=sa[i.type]||Jc;if(a.colorSpace&&a.colorSpace!=="rgb"){const B=ff[a.colorSpace];k=(j,G)=>B.reverse(B.interpolate(B.forward(j),B.forward(G),w))}return typeof C.evaluate=="function"?{evaluate(...B){const j=C.evaluate.apply(void 0,B),G=R.evaluate.apply(void 0,B);if(j!==void 0&&G!==void 0)return k(j,G,w)}}:k(C,R,w)}function Op(a,i,l){return i.type==="color"?l=Ii.parse(l):i.type==="formatted"?l=as.fromString(l.toString()):i.type==="resolvedImage"?l=fs.fromString(l.toString()):Dr(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),gc(l,a.default,i.default)}class Xa{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Ua,this._defaultValue=l?(function(f){return f.type==="color"&&(Yu(f.default)||Array.isArray(f.default))?new Ii(0,0,0,0):f.type==="color"?Ii.parse(f.default)||null:f.default===void 0?null:f.default})(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,f,g,x,w,C,R){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=R||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,f,g,x,w,C,R){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=R||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new ps(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Ku(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in jo}function yc(a,i){const l=new hn(jo,[],i?(function(g){const x={color:Gs,string:sr,number:nn,enum:sr,boolean:Hn,formatted:qc,resolvedImage:ia};return g.type==="array"?Ji(x[g.value]||or,g.length):x[g.type]})(i):void 0),f=l.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?yf(new Xa(f,i)):Ws(l.errors)}class _c{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!K(l.expression)}evaluateWithoutErrorHandling(i,l,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(i,l,f,g,x,w)}evaluate(i,l,f,g,x,w){return this._styleExpression.evaluate(i,l,f,g,x,w)}}class Zu{constructor(i,l,f,g){this.kind=i,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!K(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,l,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(i,l,f,g,x,w)}evaluate(i,l,f,g,x,w){return this._styleExpression.evaluate(i,l,f,g,x,w)}interpolationFactor(i,l,f){return this.interpolationType?bl.interpolationFactor(this.interpolationType,i,l,f):0}}function Kh(a,i){if((a=yc(a,i)).result==="error")return a;const l=a.value.expression,f=D(l);if(!f&&!wl(i))return Ws([new so("","data expressions not supported")]);const g=ae(l,["zoom","pitch","distance-from-center"]);if(!g&&!Xh(i))return Ws([new so("","zoom expressions not supported")]);const x=vf(l);return x||g?x instanceof so?Ws([x]):x instanceof bl&&!Wu(i)?Ws([new so("",'"interpolate" expressions cannot be used with this property')]):yf(x?new Zu(f?"camera":"composite",a.value,x.labels,x instanceof bl?x.interpolation:void 0):new _c(f?"constant":"source",a.value)):Ws([new so("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zh{constructor(i,l){this._parameters=i,this._specification=l,na(this,_f(this._parameters,this._specification))}static deserialize(i){return new Zh(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function vf(a){let i=null;if(a instanceof Hy)i=vf(a.result);else if(a instanceof ug){for(const l of a.args)if(i=vf(l),i)break}else(a instanceof Gi||a instanceof bl)&&a.input instanceof wa&&a.input.name==="zoom"&&(i=a);return i instanceof so||a.eachChild((l=>{const f=vf(l);f instanceof so?i=f:!i&&f?i=new so("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new so("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}class rn{constructor(i,l,f,g){this.message=(i?`${i}: `:"")+f,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function vo(a){const i=a.key,l=a.value,f=a.valueSpec||{},g=a.objectElementValidators||{},x=a.style,w=a.styleSpec;let C=[];const R=Dr(l);if(R!=="object")return[new rn(i,l,`object expected, ${R} found`)];for(const k in l){const B=k.split(".")[0];let j;g[B]?j=g[B]:f[B]?j=ws:g["*"]?j=g["*"]:f["*"]&&(j=ws),j?C=C.concat(j({key:(i&&`${i}.`)+k,value:l[k],valueSpec:f[B]||f["*"],style:x,styleSpec:w,object:l,objectKey:k},l)):C.push(new rn(i,l[k],`unknown property "${k}"`))}for(const k in f)g[k]||f[k].required&&f[k].default===void 0&&l[k]===void 0&&C.push(new rn(i,l,`missing required property "${k}"`));return C}function Qu(a){const i=a.value,l=a.valueSpec,f=a.style,g=a.styleSpec,x=a.key,w=a.arrayElementValidator||ws;if(Dr(i)!=="array")return[new rn(x,i,`array expected, ${Dr(i)} found`)];if(l.length&&i.length!==l.length)return[new rn(x,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new rn(x,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let C={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};g.$version<7&&(C.function=l.function),Dr(l.value)==="object"&&(C=l.value);let R=[];for(let k=0;k<i.length;k++)R=R.concat(w({array:i,arrayIndex:k,value:i[k],valueSpec:C,style:f,styleSpec:g,key:`${x}[${k}]`}));return R}function eu(a){const i=a.key,l=a.value,f=a.valueSpec;let g=Dr(l);if(g==="number"&&l!=l&&(g="NaN"),g!=="number")return[new rn(i,l,`number expected, ${g} found`)];if("minimum"in f){let x=f.minimum;if(Dr(f.minimum)==="array"&&(x=f.minimum[a.arrayIndex]),l<x)return[new rn(i,l,`${l} is less than the minimum value ${x}`)]}if("maximum"in f){let x=f.maximum;if(Dr(f.maximum)==="array"&&(x=f.maximum[a.arrayIndex]),l>x)return[new rn(i,l,`${l} is greater than the maximum value ${x}`)]}return[]}function vc(a){const i=a.valueSpec,l=Zr(a.value.type);let f,g,x,w={};const C=l!=="categorical"&&a.value.property===void 0,R=!C,k=Dr(a.value.stops)==="array"&&Dr(a.value.stops[0])==="array"&&Dr(a.value.stops[0][0])==="object",B=vo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Z){if(l==="identity")return[new rn(Z.key,Z.value,'identity function may not have a "stops" property')];let J=[];const ue=Z.value;return J=J.concat(Qu({key:Z.key,value:ue,valueSpec:Z.valueSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:j})),Dr(ue)==="array"&&ue.length===0&&J.push(new rn(Z.key,ue,"array must have at least one stop")),J},default:function(Z){return ws({key:Z.key,value:Z.value,valueSpec:i,style:Z.style,styleSpec:Z.styleSpec})}}});return l==="identity"&&C&&B.push(new rn(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||B.push(new rn(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!Wu(a.valueSpec)&&B.push(new rn(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(R&&!wl(a.valueSpec)?B.push(new rn(a.key,a.value,"property functions not supported")):C&&!Xh(a.valueSpec)&&B.push(new rn(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!k||a.value.property!==void 0||B.push(new rn(a.key,a.value,'"property" property is required')),B;function j(Z){let J=[];const ue=Z.value,ve=Z.key;if(Dr(ue)!=="array")return[new rn(ve,ue,`array expected, ${Dr(ue)} found`)];if(ue.length!==2)return[new rn(ve,ue,`array length 2 expected, length ${ue.length} found`)];if(k){if(Dr(ue[0])!=="object")return[new rn(ve,ue,`object expected, ${Dr(ue[0])} found`)];if(ue[0].zoom===void 0)return[new rn(ve,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new rn(ve,ue,"object stop key must have value")];const Re=Zr(ue[0].zoom);if(typeof Re!="number")return[new rn(ve,ue[0].zoom,"stop zoom values must be numbers")];if(x&&x>Re)return[new rn(ve,ue[0].zoom,"stop zoom values must appear in ascending order")];Re!==x&&(x=Re,g=void 0,w={}),J=J.concat(vo({key:`${ve}[0]`,value:ue[0],valueSpec:{zoom:{}},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:eu,value:G}}))}else J=J.concat(G({key:`${ve}[0]`,value:ue[0],style:Z.style,styleSpec:Z.styleSpec},ue));return Ku(zr(ue[1]))?J.concat([new rn(`${ve}[1]`,ue[1],"expressions are not allowed in function stops.")]):J.concat(ws({key:`${ve}[1]`,value:ue[1],valueSpec:i,style:Z.style,styleSpec:Z.styleSpec}))}function G(Z,J){const ue=Dr(Z.value),ve=Zr(Z.value),Re=Z.value!==null?Z.value:J;if(f){if(ue!==f)return[new rn(Z.key,Re,`${ue} stop domain type must match previous stop domain type ${f}`)]}else f=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean"&&typeof ve!="number"&&typeof ve!="string"&&typeof ve!="boolean")return[new rn(Z.key,Re,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&l!=="categorical"){let Ne=`number expected, ${ue} found`;return wl(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rn(Z.key,Re,Ne)]}return l!=="categorical"||ue!=="number"||typeof ve=="number"&&isFinite(ve)&&Math.floor(ve)===ve?l!=="categorical"&&ue==="number"&&typeof ve=="number"&&typeof g=="number"&&g!==void 0&&ve<g?[new rn(Z.key,Re,"stop domain values must appear in ascending order")]:(g=ve,l==="categorical"&&ve in w?[new rn(Z.key,Re,"stop domain values must be unique")]:(w[ve]=!0,[])):[new rn(Z.key,Re,`integer expected, found ${String(ve)}`)]}}function wi(a){const i=(a.expressionContext==="property"?Kh:yc)(zr(a.value),a.valueSpec);if(i.result==="error")return i.value.map((f=>new rn(`${a.key}${f.key}`,a.value,f.message)));const l=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new rn(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!K(l))return[new rn(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return xo(l,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!ae(l,["zoom","feature-state"]))return[new rn(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!D(l))return[new rn(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(a,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const g of i.valueSpec.expression.parameters)l.delete(g);if(l.size===0)return[];const f=[];return a instanceof wa&&l.has(a.name)?[new rn(i.key,i.value,`["${a.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(a.eachChild((g=>{f.push(...xo(g,i))})),f)}function Tl(a){const i=a.key,l=a.value,f=a.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Zr(l))===-1&&g.push(new rn(i,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(Zr(l))===-1&&g.push(new rn(i,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Ka(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!Ka(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function Sa(a,i="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ka(a)||(a=gi(a));const l=a;let f=!0;try{f=(function(k){if(!tu(k))return k;let B=zr(k);return xf(B),B=Wl(B),B})(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const g=xt[`filter_${i}`],x=yc(f,g);let w=null;if(x.result==="error")throw new Error(x.value.map((k=>`${k.key}: ${k.message}`)).join(", "));w=(k,B,j)=>x.value.evaluate(k,B,{},j);let C=null,R=null;if(f!==l){const k=yc(l,g);if(k.result==="error")throw new Error(k.value.map((B=>`${B.key}: ${B.message}`)).join(", "));C=(B,j,G,Z,J)=>k.value.evaluate(B,j,{},G,void 0,void 0,Z,J),R=!D(k.value.expression)}return{filter:w,dynamicFilter:C||void 0,needGeometry:Ys(f),needFeature:!!R}}function Wl(a){if(!Array.isArray(a))return a;const i=(function(l){if(bf.has(l[0])){for(let f=1;f<l.length;f++)if(tu(l[f]))return!0}return l})(a);return i===!0?i:i.map((l=>Wl(l)))}function xf(a){let i=!1;const l=[];if(a[0]==="case"){for(let f=1;f<a.length-1;f+=2)i=i||tu(a[f]),l.push(a[f+1]);l.push(a[a.length-1])}else if(a[0]==="match"){i=i||tu(a[1]);for(let f=2;f<a.length-1;f+=2)l.push(a[f+1]);l.push(a[a.length-1])}else if(a[0]==="step"){i=i||tu(a[1]);for(let f=1;f<a.length-1;f+=2)l.push(a[f+1])}i&&(a.length=0,a.push("any",...l));for(let f=1;f<a.length;f++)xf(a[f])}function tu(a){if(!Array.isArray(a))return!1;if((i=a[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<a.length;l++)if(tu(a[l]))return!0;return!1}const bf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ky(a,i){return a<i?-1:a>i?1:0}function Ys(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let i=1;i<a.length;i++)if(Ys(a[i]))return!0;return!1}function gi(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?Br(a[1],a[2],"=="):i==="!="?Qh(Br(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Br(a[1],a[2],i):i==="any"?(l=a.slice(1),["any"].concat(l.map(gi))):i==="all"?["all"].concat(a.slice(1).map(gi)):i==="none"?["all"].concat(a.slice(1).map(gi).map(Qh)):i==="in"?Yl(a[1],a.slice(2)):i==="!in"?Qh(Yl(a[1],a.slice(2))):i==="has"?aa(a[1]):i==="!has"?Qh(aa(a[1])):i!=="within"||a;var l}function Br(a,i,l){switch(a){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,a,i]}}function Yl(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some((l=>typeof l!=typeof i[0]))?["filter-in-large",a,["literal",i.sort(Ky)]]:["filter-in-small",a,["literal",i]]}}function aa(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Qh(a){return["!",a]}function Za(a){return Ka(zr(a.value))?wi(na({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):Jh(a)}function Jh(a){const i=a.value,l=a.key;if(Dr(i)!=="array")return[new rn(l,i,`array expected, ${Dr(i)} found`)];const f=a.styleSpec;let g,x=[];if(i.length<1)return[new rn(l,i,"filter array must have at least 1 element")];switch(x=x.concat(Tl({key:`${l}[0]`,value:i[0],valueSpec:f.filter_operator,style:a.style,styleSpec:a.styleSpec})),Zr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Zr(i[1])==="$type"&&x.push(new rn(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&x.push(new rn(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=Dr(i[1]),g!=="string"&&x.push(new rn(`${l}[1]`,i[1],`string expected, ${g} found`)));for(let w=2;w<i.length;w++)g=Dr(i[w]),Zr(i[1])==="$type"?x=x.concat(Tl({key:`${l}[${w}]`,value:i[w],valueSpec:f.geometry_type,style:a.style,styleSpec:a.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new rn(`${l}[${w}]`,i[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<i.length;w++)x=x.concat(Jh({key:`${l}[${w}]`,value:i[w],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":g=Dr(i[1]),i.length!==2?x.push(new rn(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new rn(`${l}[1]`,i[1],`string expected, ${g} found`));break;case"within":g=Dr(i[1]),i.length!==2?x.push(new rn(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="object"&&x.push(new rn(`${l}[1]`,i[1],`object expected, ${g} found`))}return x}function zp(a,i){const l=a.key,f=a.style,g=a.styleSpec,x=a.value,w=a.objectKey,C=g[`${i}_${a.layerType}`];if(!C)return[];const R=w.match(/^(.*)-transition$/);if(i==="paint"&&R&&C[R[1]]&&C[R[1]].transition)return ws({key:l,value:x,valueSpec:g.transition,style:f,styleSpec:g});const k=a.valueSpec||C[w];if(!k)return[new rn(l,x,`unknown property "${w}"`)];let B;if(Dr(x)==="string"&&wl(k)&&!k.tokens&&(B=/^{([^}]+)}$/.exec(x))){const G=`\`{ "type": "identity", "property": ${B?JSON.stringify(B[1]):'"_"'} }\``;return[new rn(l,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: ${G}.`)]}const j=[];return a.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&j.push(new rn(l,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Yu(zr(x))&&Zr(x.type)==="identity"&&j.push(new rn(l,x,'"text-font" does not support identity functions'))),j.concat(ws({key:a.key,value:x,valueSpec:k,style:f,styleSpec:g,expressionContext:"property",propertyType:i,propertyKey:w}))}function Ju(a){return zp(a,"paint")}function xc(a){return zp(a,"layout")}function Np(a){let i=[];const l=a.value,f=a.key,g=a.style,x=a.styleSpec;l.type||l.ref||i.push(new rn(f,l,'either "type" or "ref" is required'));let w=Zr(l.type);const C=Zr(l.ref);if(l.id){const R=Zr(l.id);for(let k=0;k<a.arrayIndex;k++){const B=g.layers[k];Zr(B.id)===R&&i.push(new rn(f,l.id,`duplicate layer id "${l.id}", previously used at line ${B.id.__line__}`))}}if("ref"in l){let R;["type","source","source-layer","filter","layout"].forEach((k=>{k in l&&i.push(new rn(f,l[k],`"${k}" is prohibited for ref layers`))})),g.layers.forEach((k=>{Zr(k.id)===C&&(R=k)})),R?R.ref?i.push(new rn(f,l.ref,"ref cannot reference another ref layer")):w=Zr(R.type):typeof C=="string"&&i.push(new rn(f,l.ref,`ref layer "${C}" not found`))}else if(w!=="background"&&w!=="sky")if(l.source){const R=g.sources&&g.sources[l.source],k=R&&Zr(R.type);R?k==="vector"&&w==="raster"?i.push(new rn(f,l.source,`layer "${l.id}" requires a raster source`)):k==="raster"&&w!=="raster"?i.push(new rn(f,l.source,`layer "${l.id}" requires a vector source`)):k!=="vector"||l["source-layer"]?k==="raster-dem"&&w!=="hillshade"?i.push(new rn(f,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||k==="geojson"&&R.lineMetrics||i.push(new rn(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new rn(f,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new rn(f,l.source,`source "${l.source}" not found`))}else i.push(new rn(f,l,'missing required property "source"'));return i=i.concat(vo({key:f,value:l,valueSpec:x.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ws({key:`${f}.type`,value:l.type,valueSpec:x.layer.type,style:a.style,styleSpec:a.styleSpec,object:l,objectKey:"type"}),filter:R=>Za(na({layerType:w},R)),layout:R=>vo({layer:l,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":k=>xc(na({layerType:w},k))}}),paint:R=>vo({layer:l,key:R.key,value:R.value,valueSpec:{},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":k=>Ju(na({layerType:w},k))}})}})),i}function Qa(a){const i=a.value,l=a.key,f=Dr(i);return f!=="string"?[new rn(l,i,`string expected, ${f} found`)]:[]}const Bp={promoteId:function({key:a,value:i}){if(Dr(i)==="string")return Qa({key:a,value:i});{const l=[];for(const f in i)l.push(...Qa({key:`${a}.${f}`,value:i[f]}));return l}}};function nu(a){const i=a.value,l=a.key,f=a.styleSpec,g=a.style;if(!i.type)return[new rn(l,i,'"type" is required')];const x=Zr(i.type);let w;switch(x){case"vector":case"raster":case"raster-dem":return w=vo({key:l,value:i,valueSpec:f[`source_${x.replace("-","_")}`],style:a.style,styleSpec:f,objectElementValidators:Bp}),w;case"geojson":if(w=vo({key:l,value:i,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:Bp}),i.cluster)for(const C in i.clusterProperties){const[R,k]=i.clusterProperties[C],B=typeof R=="string"?[R,["accumulated"],["get",C]]:R;w.push(...wi({key:`${l}.${C}.map`,value:k,expressionContext:"cluster-map"})),w.push(...wi({key:`${l}.${C}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return w;case"video":return vo({key:l,value:i,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return vo({key:l,value:i,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new rn(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Tl({key:`${l}.type`,value:i.type,valueSpec:{values:bc(f)}})}}function bc(a){return a.source.reduce(((i,l)=>{const f=a[l];return f.type.type==="enum"&&(i=i.concat(Object.keys(f.type.values))),i}),[])}function wc(a){const i=a.value,l=a.styleSpec,f=l.light,g=a.style;let x=[];const w=Dr(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new rn("light",i,`object expected, ${w} found`)]),x;for(const C in i){const R=C.match(/^(.*)-transition$/);x=x.concat(R&&f[R[1]]&&f[R[1]].transition?ws({key:C,value:i[C],valueSpec:l.transition,style:g,styleSpec:l}):f[C]?ws({key:C,value:i[C],valueSpec:f[C],style:g,styleSpec:l}):[new rn(C,i[C],`unknown property "${C}"`)])}return x}function El(a){const i=a.value,l=a.key,f=a.style,g=a.styleSpec,x=g.terrain;let w=[];const C=Dr(i);if(i===void 0)return w;if(C!=="object")return w=w.concat([new rn("terrain",i,`object expected, ${C} found`)]),w;for(const R in i){const k=R.match(/^(.*)-transition$/);w=w.concat(k&&x[k[1]]&&x[k[1]].transition?ws({key:R,value:i[R],valueSpec:g.transition,style:f,styleSpec:g}):x[R]?ws({key:R,value:i[R],valueSpec:x[R],style:f,styleSpec:g}):[new rn(R,i[R],`unknown property "${R}"`)])}if(i.source){const R=f.sources&&f.sources[i.source],k=R&&Zr(R.type);R?k!=="raster-dem"&&w.push(new rn(l,i.source,`terrain cannot be used with a source of type ${String(k)}, it only be used with a "raster-dem" source type`)):w.push(new rn(l,i.source,`source "${i.source}" not found`))}else w.push(new rn(l,i,'terrain is missing required property "source"'));return w}function Fp(a){const i=a.value,l=a.style,f=a.styleSpec,g=f.fog;let x=[];const w=Dr(i);if(i===void 0)return x;if(w!=="object")return x=x.concat([new rn("fog",i,`object expected, ${w} found`)]),x;for(const C in i){const R=C.match(/^(.*)-transition$/);x=x.concat(R&&g[R[1]]&&g[R[1]].transition?ws({key:C,value:i[C],valueSpec:f.transition,style:l,styleSpec:f}):g[C]?ws({key:C,value:i[C],valueSpec:g[C],style:l,styleSpec:f}):[new rn(C,i[C],`unknown property "${C}"`)])}return x}const Vp={"*":()=>[],array:Qu,boolean:function(a){const i=a.value,l=a.key,f=Dr(i);return f!=="boolean"?[new rn(l,i,`boolean expected, ${f} found`)]:[]},number:eu,color:function(a){const i=a.key,l=a.value,f=Dr(l);return f!=="string"?[new rn(i,l,`color expected, ${f} found`)]:$l(l)===null?[new rn(i,l,`color expected, "${l}" found`)]:[]},enum:Tl,filter:Za,function:vc,layer:Np,object:vo,source:nu,light:wc,terrain:El,fog:Fp,string:Qa,formatted:function(a){return Qa(a).length===0?[]:wi(a)},resolvedImage:function(a){return Qa(a).length===0?[]:wi(a)},projection:function(a){const i=a.value,l=a.styleSpec,f=l.projection,g=a.style;let x=[];const w=Dr(i);if(w==="object")for(const C in i)x=x.concat(ws({key:C,value:i[C],valueSpec:f[C],style:g,styleSpec:l}));else w!=="string"&&(x=x.concat([new rn("projection",i,`object or string expected, ${w} found`)]));return x}};function ws(a){const i=a.value,l=a.valueSpec,f=a.styleSpec;return l.expression&&Yu(Zr(i))?vc(a):l.expression&&Ku(zr(i))?wi(a):l.type&&Vp[l.type]?Vp[l.type](a):vo(na({},a,{valueSpec:l.type?f[l.type]:l}))}function Up(a){const i=a.value,l=a.key,f=Qa(a);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new rn(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new rn(l,i,'"glyphs" url must include a "{range}" token'))),f}function ru(a,i=xt){return Ca(ws({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,objectElementValidators:{glyphs:Up,"*":()=>[]}}))}const oo=a=>Ca(Ju(a)),jp=a=>Ca(xc(a));function Ca(a){return a.slice().sort(((i,l)=>i.line&&l.line?i.line-l.line:0))}function Zy(a,i){let l=!1;if(i&&i.length)for(const f of i)a.fire(new ga(new Error(f.message))),l=!0;return l}var o0=Ti,Sl=3;function Ti(a,i,l){var f=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var g=new Int32Array(this.arrayBuffer);a=g[0],this.d=(i=g[1])+2*(l=g[2]);for(var x=0;x<this.d*this.d;x++){var w=g[Sl+x],C=g[Sl+x+1];f.push(w===C?null:g.subarray(w,C))}var R=g[Sl+f.length+1];this.keys=g.subarray(g[Sl+f.length],R),this.bboxes=g.subarray(R),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var k=0;k<this.d*this.d;k++)f.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=a,this.padding=l,this.scale=i/a,this.uid=0;var B=l/i*a;this.min=-B,this.max=a+B}Ti.prototype.insert=function(a,i,l,f,g){this._forEachCell(i,l,f,g,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g)},Ti.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ti.prototype._insertCell=function(a,i,l,f,g,x){this.cells[g].push(x)},Ti.prototype.query=function(a,i,l,f,g){var x=this.min,w=this.max;if(a<=x&&i<=x&&w<=l&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(a,i,l,f,this._queryCell,C,{},g),C},Ti.prototype._queryCell=function(a,i,l,f,g,x,w,C){var R=this.cells[g];if(R!==null)for(var k=this.keys,B=this.bboxes,j=0;j<R.length;j++){var G=R[j];if(w[G]===void 0){var Z=4*G;(C?C(B[Z+0],B[Z+1],B[Z+2],B[Z+3]):a<=B[Z+2]&&i<=B[Z+3]&&l>=B[Z+0]&&f>=B[Z+1])?(w[G]=!0,x.push(k[G])):w[G]=!1}}},Ti.prototype._forEachCell=function(a,i,l,f,g,x,w,C){for(var R=this._convertToCellCoord(a),k=this._convertToCellCoord(i),B=this._convertToCellCoord(l),j=this._convertToCellCoord(f),G=R;G<=B;G++)for(var Z=k;Z<=j;Z++){var J=this.d*Z+G;if((!C||C(this._convertFromCellCoord(G),this._convertFromCellCoord(Z),this._convertFromCellCoord(G+1),this._convertFromCellCoord(Z+1)))&&g.call(this,a,i,l,f,J,x,w,C))return}},Ti.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Ti.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Ti.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,i=Sl+this.cells.length+1+1,l=0,f=0;f<this.cells.length;f++)l+=this.cells[f].length;var g=new Int32Array(i+l+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var x=i,w=0;w<a.length;w++){var C=a[w];g[Sl+w]=x,g.set(C,x),x+=C.length}return g[Sl+a.length]=x,g.set(this.keys,x),g[Sl+a.length+1]=x+=this.keys.length,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer};var Tc=me(o0);const iu={};function fn(a,i,l={}){Object.defineProperty(a,"_classRegistryKey",{value:i,writeable:!1}),iu[i]={klass:a,omit:l.omit||[]}}fn(Object,"Object"),Tc.serialize=function(a,i){const l=a.toArrayBuffer();return i&&i.push(l),{buffer:l}},Tc.deserialize=function(a){return new Tc(a.buffer)},Object.defineProperty(Tc,"name",{value:"Grid"}),fn(Tc,"Grid"),fn(Ii,"Color"),fn(Error,"Error"),fn(vn,"AJAXError"),fn(fs,"ResolvedImage"),fn(Zh,"StylePropertyFunction"),fn(Xa,"StyleExpression",{omit:["_evaluator"]}),fn(Zu,"ZoomDependentExpression"),fn(_c,"ZoomConstantExpression"),fn(wa,"CompoundExpression",{omit:["_evaluate"]});for(const a in jo)iu[jo[a]._classRegistryKey]||fn(jo[a],`Expression${a}`);function wf(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function su(a){return T.ImageBitmap&&a instanceof T.ImageBitmap}function Cl(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(wf(a)||su(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return i&&i.push(l.buffer),l}if(a instanceof T.ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const f of a)l.push(Cl(f,i));return l}if(typeof a=="object"){const l=a.constructor,f=l._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=l.serialize?l.serialize(a,i):{};if(!l.serialize){for(const x in a)a.hasOwnProperty(x)&&(iu[f].omit.indexOf(x)>=0||(g[x]=Cl(a[x],i)));a instanceof Error&&(g.message=a.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof a)}function eh(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||wf(a)||su(a)||ArrayBuffer.isView(a)||a instanceof T.ImageData)return a;if(Array.isArray(a))return a.map(eh);if(typeof a=="object"){const i=a.$name||"Object",{klass:l}=iu[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(a);const f=Object.create(l.prototype);for(const g of Object.keys(a))g!=="$name"&&(f[g]=eh(a[g]));return f}throw new Error("can't deserialize object of type "+typeof a)}const an={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function _g(a){for(const i of a)if(Tf(i.charCodeAt(0)))return!0;return!1}function Qy(a){for(const i of a)if(!ou(i.charCodeAt(0)))return!1;return!0}function ou(a){return!(an.Arabic(a)||an["Arabic Supplement"](a)||an["Arabic Extended-A"](a)||an["Arabic Presentation Forms-A"](a)||an["Arabic Presentation Forms-B"](a))}function Tf(a){return!(a!==746&&a!==747&&(a<4352||!(an["Bopomofo Extended"](a)||an.Bopomofo(a)||an["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||an["CJK Compatibility Ideographs"](a)||an["CJK Compatibility"](a)||an["CJK Radicals Supplement"](a)||an["CJK Strokes"](a)||!(!an["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||an["CJK Unified Ideographs Extension A"](a)||an["CJK Unified Ideographs"](a)||an["Enclosed CJK Letters and Months"](a)||an["Hangul Compatibility Jamo"](a)||an["Hangul Jamo Extended-A"](a)||an["Hangul Jamo Extended-B"](a)||an["Hangul Jamo"](a)||an["Hangul Syllables"](a)||an.Hiragana(a)||an["Ideographic Description Characters"](a)||an.Kanbun(a)||an["Kangxi Radicals"](a)||an["Katakana Phonetic Extensions"](a)||an.Katakana(a)&&a!==12540||!(!an["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!an["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||an["Unified Canadian Aboriginal Syllabics"](a)||an["Unified Canadian Aboriginal Syllabics Extended"](a)||an["Vertical Forms"](a)||an["Yijing Hexagram Symbols"](a)||an["Yi Syllables"](a)||an["Yi Radicals"](a))))}function Ef(a){return!(Tf(a)||(function(i){return!!(an["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||an["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||an["Letterlike Symbols"](i)||an["Number Forms"](i)||an["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||an["Control Pictures"](i)&&i!==9251||an["Optical Character Recognition"](i)||an["Enclosed Alphanumerics"](i)||an["Geometric Shapes"](i)||an["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||an["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||an["CJK Symbols and Punctuation"](i)||an.Katakana(i)||an["Private Use Area"](i)||an["CJK Compatibility Forms"](i)||an["Small Form Variants"](i)||an["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)})(a))}function vg(a){return a>=1424&&a<=2303||an["Arabic Presentation Forms-A"](a)||an["Arabic Presentation Forms-B"](a)}function ed(a,i){return!(!i&&vg(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||an.Khmer(a))}function xg(a){for(const i of a)if(vg(i.charCodeAt(0)))return!0;return!1}const td="deferred",nd="loading",$p="loaded";let th=null,v="unavailable",c=null;const m=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(v="error"),th&&th(a)};function b(){S.fire(new yl("pluginStateChange",{pluginStatus:v,pluginURL:c}))}const S=new cc,A=function(){return v},O=function(){if(v!==td||!c)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");v=nd,b(),c&&Ss({url:c},(a=>{a?m(a):(v=$p,b())}))},z={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>v===$p||z.applyArabicShaping!=null,isLoading:()=>v===nd,setState(a){v=a.pluginStatus,c=a.pluginURL},isParsed:()=>z.applyArabicShaping!=null&&z.processBidirectionalText!=null&&z.processStyledBidirectionalText!=null,getPluginURL:()=>c};class U{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return(function(l,f){for(const g of l)if(!ed(g.charCodeAt(0),f))return!1;return!0})(i,z.isLoaded())}}class Y{constructor(i,l){this.property=i,this.value=l,this.expression=(function(f,g){if(Yu(f))return new Zh(f,g);if(Ku(f)){const x=Kh(f,g);if(x.result==="error")throw new Error(x.value.map((w=>`${w.key}: ${w.message}`)).join(", "));return x.value}{let x=f;return typeof f=="string"&&g.type==="color"&&(x=Ii.parse(f)),{kind:"constant",evaluate:()=>x}}})(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,f){return this.property.possiblyEvaluate(this,i,l,f)}}class W{constructor(i){this.property=i,this.value=new Y(i,void 0)}transitioned(i,l){return new ye(this.property,this.value,l,Dt({},i.transition,this.transition),i.now)}untransitioned(){return new ye(this.property,this.value,null,{},0)}}class re{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return mn(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new W(this._values[i].property)),this._values[i].value=new Y(this._values[i].property,l===null?void 0:mn(l))}getTransition(i){return mn(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new W(this._values[i].property)),this._values[i].transition=mn(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f);const g=this.getTransition(l);g!==void 0&&(i[`${l}-transition`]=g)}return i}transitioned(i,l){const f=new we(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(i,l._values[g]);return f}untransitioned(){const i=new we(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class ye{constructor(i,l,f,g,x){const w=g.delay||0,C=g.duration||0;x=x||0,this.property=i,this.value=l,this.begin=x+w,this.end=this.begin+C,i.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(i,l,f){const g=i.now||0,x=this.value.possiblyEvaluate(i,l,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(i,l,f);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(i,l,f),x,Ce(C))}}return x}}class we{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,f){const g=new Ae(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(i,l,f);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Se{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return mn(this._values[i].value)}setValue(i,l){this._values[i]=new Y(this._values[i].property,l===null?void 0:mn(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f)}return i}possiblyEvaluate(i,l,f){const g=new Ae(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(i,l,f);return g}}class Te{constructor(i,l,f){this.property=i,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,f,g){return this.property.evaluate(this.value,this.parameters,i,l,f,g)}}class Ae{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class oe{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,f){const g=sa[this.specification.type];return g?g(i,l,f):i}}class be{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,f,g){return new Te(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},f,g)}:i.expression,l)}interpolate(i,l,f){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Te(this,{kind:"constant",value:void 0},i.parameters);const g=sa[this.specification.type];return g?new Te(this,{kind:"constant",value:g(i.value.value,l.value.value,f)},i.parameters):i}evaluate(i,l,f,g,x,w){return i.kind==="constant"?i.value:i.evaluate(l,f,g,x,w)}}class Pe{constructor(i){this.specification=i}possiblyEvaluate(i,l,f,g){return!!i.expression.evaluate(l,null,{},f,g)}interpolate(){return!1}}class Le{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new U(0,{});for(const f in i){const g=i[f];g.specification.overridable&&this.overridableProperties.push(f);const x=this.defaultPropertyValues[f]=new Y(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new W(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate(l)}}}function $e(a,i){return 256*(a=Be(Math.floor(a),0,255))+Be(Math.floor(i),0,255)}fn(be,"DataDrivenProperty"),fn(oe,"DataConstantProperty"),fn(Pe,"ColorRampProperty");const He={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qe{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Je{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Qe(a,i=1){let l=0,f=0;return{members:a.map((g=>{const x=He[g.type].BYTES_PER_ELEMENT,w=l=ct(l,Math.max(i,x)),C=g.components||1;return f=Math.max(f,x),l+=x*C,{name:g.name,type:g.type,components:C,offset:w}})),size:ct(l,Math.max(f,i)),alignment:i}}function ct(a,i){return Math.ceil(a/i)*i}class Ut extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const g=2*i;return this.int16[g+0]=l,this.int16[g+1]=f,i}}Ut.prototype.bytesPerElement=4,fn(Ut,"StructArrayLayout2i4");class it extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,f)}emplace(i,l,f,g){const x=3*i;return this.int16[x+0]=l,this.int16[x+1]=f,this.int16[x+2]=g,i}}it.prototype.bytesPerElement=6,fn(it,"StructArrayLayout3i6");class vt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,g)}emplace(i,l,f,g,x){const w=4*i;return this.int16[w+0]=l,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=x,i}}vt.prototype.bytesPerElement=8,fn(vt,"StructArrayLayout4i8");class lt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C){const R=this.length;return this.resize(R+1),this.emplace(R,i,l,f,g,x,w,C)}emplace(i,l,f,g,x,w,C,R){const k=6*i,B=12*i,j=3*i;return this.int16[k+0]=l,this.int16[k+1]=f,this.uint8[B+4]=g,this.uint8[B+5]=x,this.uint8[B+6]=w,this.uint8[B+7]=C,this.float32[j+2]=R,i}}lt.prototype.bytesPerElement=12,fn(lt,"StructArrayLayout2i4ub1f12");class zt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,g)}emplace(i,l,f,g,x){const w=4*i;return this.float32[w+0]=l,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=x,i}}zt.prototype.bytesPerElement=16,fn(zt,"StructArrayLayout4f16");class ot extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,g,x)}emplace(i,l,f,g,x,w){const C=6*i,R=3*i;return this.uint16[C+0]=l,this.uint16[C+1]=f,this.uint16[C+2]=g,this.uint16[C+3]=x,this.float32[R+2]=w,i}}ot.prototype.bytesPerElement=12,fn(ot,"StructArrayLayout4ui1f12");class Et extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,g)}emplace(i,l,f,g,x){const w=4*i;return this.uint16[w+0]=l,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=x,i}}Et.prototype.bytesPerElement=8,fn(Et,"StructArrayLayout4ui8");class Nt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,f,g,x,w)}emplace(i,l,f,g,x,w,C){const R=6*i;return this.int16[R+0]=l,this.int16[R+1]=f,this.int16[R+2]=g,this.int16[R+3]=x,this.int16[R+4]=w,this.int16[R+5]=C,i}}Nt.prototype.bytesPerElement=12,fn(Nt,"StructArrayLayout6i12");class St extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C,R,k,B,j,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,l,f,g,x,w,C,R,k,B,j,G)}emplace(i,l,f,g,x,w,C,R,k,B,j,G,Z){const J=12*i;return this.int16[J+0]=l,this.int16[J+1]=f,this.int16[J+2]=g,this.int16[J+3]=x,this.uint16[J+4]=w,this.uint16[J+5]=C,this.uint16[J+6]=R,this.uint16[J+7]=k,this.int16[J+8]=B,this.int16[J+9]=j,this.int16[J+10]=G,this.int16[J+11]=Z,i}}St.prototype.bytesPerElement=24,fn(St,"StructArrayLayout4i4ui4i24");class It extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,f,g,x,w)}emplace(i,l,f,g,x,w,C){const R=10*i,k=5*i;return this.int16[R+0]=l,this.int16[R+1]=f,this.int16[R+2]=g,this.float32[k+2]=x,this.float32[k+3]=w,this.float32[k+4]=C,i}}It.prototype.bytesPerElement=20,fn(It,"StructArrayLayout3i3f20");class Sn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Sn.prototype.bytesPerElement=4,fn(Sn,"StructArrayLayout1ul4");class zn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C,R,k,B,j,G,Z){const J=this.length;return this.resize(J+1),this.emplace(J,i,l,f,g,x,w,C,R,k,B,j,G,Z)}emplace(i,l,f,g,x,w,C,R,k,B,j,G,Z,J){const ue=20*i,ve=10*i;return this.int16[ue+0]=l,this.int16[ue+1]=f,this.int16[ue+2]=g,this.int16[ue+3]=x,this.int16[ue+4]=w,this.float32[ve+3]=C,this.float32[ve+4]=R,this.float32[ve+5]=k,this.float32[ve+6]=B,this.int16[ue+14]=j,this.uint32[ve+8]=G,this.uint16[ue+18]=Z,this.uint16[ue+19]=J,i}}zn.prototype.bytesPerElement=40,fn(zn,"StructArrayLayout5i4f1i1ul2ui40");class Bt extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C){const R=this.length;return this.resize(R+1),this.emplace(R,i,l,f,g,x,w,C)}emplace(i,l,f,g,x,w,C,R){const k=8*i;return this.int16[k+0]=l,this.int16[k+1]=f,this.int16[k+2]=g,this.int16[k+4]=x,this.int16[k+5]=w,this.int16[k+6]=C,this.int16[k+7]=R,i}}Bt.prototype.bytesPerElement=16,fn(Bt,"StructArrayLayout3i2i2i16");class ln extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,g,x)}emplace(i,l,f,g,x,w){const C=4*i,R=8*i;return this.float32[C+0]=l,this.float32[C+1]=f,this.float32[C+2]=g,this.int16[R+6]=x,this.int16[R+7]=w,i}}ln.prototype.bytesPerElement=16,fn(ln,"StructArrayLayout2f1f2i16");class Ln extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,g)}emplace(i,l,f,g,x){const w=12*i,C=3*i;return this.uint8[w+0]=l,this.uint8[w+1]=f,this.float32[C+1]=g,this.float32[C+2]=x,i}}Ln.prototype.bytesPerElement=12,fn(Ln,"StructArrayLayout2ub2f12");class ar extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,f)}emplace(i,l,f,g){const x=3*i;return this.float32[x+0]=l,this.float32[x+1]=f,this.float32[x+2]=g,i}}ar.prototype.bytesPerElement=12,fn(ar,"StructArrayLayout3f12");class xn extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,f)}emplace(i,l,f,g){const x=3*i;return this.uint16[x+0]=l,this.uint16[x+1]=f,this.uint16[x+2]=g,i}}xn.prototype.bytesPerElement=6,fn(xn,"StructArrayLayout3ui6");class kr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je)}emplace(i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je,Ue){const ht=30*i,at=15*i,wt=60*i;return this.int16[ht+0]=l,this.int16[ht+1]=f,this.int16[ht+2]=g,this.float32[at+2]=x,this.float32[at+3]=w,this.uint16[ht+8]=C,this.uint16[ht+9]=R,this.uint32[at+5]=k,this.uint32[at+6]=B,this.uint32[at+7]=j,this.uint16[ht+16]=G,this.uint16[ht+17]=Z,this.uint16[ht+18]=J,this.float32[at+10]=ue,this.float32[at+11]=ve,this.uint8[wt+48]=Re,this.uint8[wt+49]=Ne,this.uint8[wt+50]=De,this.uint32[at+13]=ze,this.int16[ht+28]=je,this.uint8[wt+58]=Ue,i}}kr.prototype.bytesPerElement=60,fn(kr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Qr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je,Ue,ht,at,wt,qt,pt,Mt,Rt,Vt){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je,Ue,ht,at,wt,qt,pt,Mt,Rt,Vt)}emplace(i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve,Re,Ne,De,ze,je,Ue,ht,at,wt,qt,pt,Mt,Rt,Vt,Xt){const bt=38*i,cn=19*i;return this.int16[bt+0]=l,this.int16[bt+1]=f,this.int16[bt+2]=g,this.float32[cn+2]=x,this.float32[cn+3]=w,this.int16[bt+8]=C,this.int16[bt+9]=R,this.int16[bt+10]=k,this.int16[bt+11]=B,this.int16[bt+12]=j,this.int16[bt+13]=G,this.uint16[bt+14]=Z,this.uint16[bt+15]=J,this.uint16[bt+16]=ue,this.uint16[bt+17]=ve,this.uint16[bt+18]=Re,this.uint16[bt+19]=Ne,this.uint16[bt+20]=De,this.uint16[bt+21]=ze,this.uint16[bt+22]=je,this.uint16[bt+23]=Ue,this.uint16[bt+24]=ht,this.uint16[bt+25]=at,this.uint16[bt+26]=wt,this.uint16[bt+27]=qt,this.uint16[bt+28]=pt,this.uint32[cn+15]=Mt,this.float32[cn+16]=Rt,this.float32[cn+17]=Vt,this.float32[cn+18]=Xt,i}}Qr.prototype.bytesPerElement=76,fn(Qr,"StructArrayLayout3i2f6i15ui1ul3f76");class Gr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}Gr.prototype.bytesPerElement=4,fn(Gr,"StructArrayLayout1f4");class Ur extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,l,f,g,x)}emplace(i,l,f,g,x,w){const C=5*i;return this.float32[C+0]=l,this.float32[C+1]=f,this.float32[C+2]=g,this.float32[C+3]=x,this.float32[C+4]=w,i}}Ur.prototype.bytesPerElement=20,fn(Ur,"StructArrayLayout5f20");class bo extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,f,g)}emplace(i,l,f,g,x){const w=6*i;return this.uint32[3*i+0]=l,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=x,i}}bo.prototype.bytesPerElement=12,fn(bo,"StructArrayLayout1ul3ui12");class Pr extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const g=2*i;return this.uint16[g+0]=l,this.uint16[g+1]=f,i}}Pr.prototype.bytesPerElement=4,fn(Pr,"StructArrayLayout2ui4");class la extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}la.prototype.bytesPerElement=2,fn(la,"StructArrayLayout1ui2");class Ja extends Je{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const g=2*i;return this.float32[g+0]=l,this.float32[g+1]=f,i}}Ja.prototype.bytesPerElement=8,fn(Ja,"StructArrayLayout2f8");class Oi extends qe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Oi.prototype.size=40;class fi extends zn{get(i){return new Oi(this,i)}}fn(fi,"CollisionBoxArray");class jr extends qe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}jr.prototype.size=60;class ms extends kr{get(i){return new jr(this,i)}}fn(ms,"PlacedSymbolArray");class ao extends qe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}ao.prototype.size=76;class Ei extends Qr{get(i){return new ao(this,i)}}fn(Ei,"SymbolInstanceArray");class Mi extends Gr{getoffsetX(i){return this.float32[1*i+0]}}fn(Mi,"GlyphOffsetArray");class cs extends Ut{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}fn(cs,"SymbolLineVertexArray");class Xl extends qe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Xl.prototype.size=12;class Ec extends bo{get(i){return new Xl(this,i)}}fn(Ec,"FeatureIndexArray");class el extends Pr{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}fn(el,"FillExtrusionCentroidArray");const Kl=Qe([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),$o=Qe([{name:"a_dash",components:4,type:"Uint16"}]);var nh={exports:{}},rh={exports:{}};rh.exports=function(a,i){var l,f,g,x,w,C,R,k;for(f=a.length-(l=3&a.length),g=i,w=3432918353,C=461845907,k=0;k<f;)R=255&a.charCodeAt(k)|(255&a.charCodeAt(++k))<<8|(255&a.charCodeAt(++k))<<16|(255&a.charCodeAt(++k))<<24,++k,g=27492+(65535&(x=5*(65535&(g=(g^=R=(65535&(R=(R=(65535&R)*w+(((R>>>16)*w&65535)<<16)&4294967295)<<15|R>>>17))*C+(((R>>>16)*C&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(R=0,l){case 3:R^=(255&a.charCodeAt(k+2))<<16;case 2:R^=(255&a.charCodeAt(k+1))<<8;case 1:g^=R=(65535&(R=(R=(65535&(R^=255&a.charCodeAt(k)))*w+(((R>>>16)*w&65535)<<16)&4294967295)<<15|R>>>17))*C+(((R>>>16)*C&65535)<<16)&4294967295}return g^=a.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Sf=rh.exports,a0={exports:{}};a0.exports=function(a,i){for(var l,f=a.length,g=i^f,x=0;f>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(x)|(255&a.charCodeAt(++x))<<8|(255&a.charCodeAt(++x))<<16|(255&a.charCodeAt(++x))<<24))+((1540483477*(l>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:g^=(255&a.charCodeAt(x+2))<<16;case 2:g^=(255&a.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&a.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var l0=Sf,I1=a0.exports;nh.exports=l0,nh.exports.murmur3=l0,nh.exports.murmur2=I1;var Jy=me(nh.exports);class bg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,f,g){this.ids.push(c0(i)),this.positions.push(l,f,g)}getPositions(i){const l=c0(i);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=l?g=w:f=w+1}const x=[];for(;this.ids[f]===l;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(i,l){const f=new Float64Array(i.ids),g=new Uint32Array(i.positions);return wg(f,g,0,f.length-1),l&&l.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(i){const l=new bg;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function c0(a){const i=+a;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:Jy(String(a))}function wg(a,i,l,f){for(;l<f;){const g=a[l+f>>1];let x=l-1,w=f+1;for(;;){do x++;while(a[x]<g);do w--;while(a[w]>g);if(x>=w)break;Tg(a,x,w),Tg(i,3*x,3*w),Tg(i,3*x+1,3*w+1),Tg(i,3*x+2,3*w+2)}w-l<f-w?(wg(a,i,l,w),l=w+1):(wg(a,i,w+1,f),f=w)}}function Tg(a,i,l){const f=a[i];a[i]=a[l],a[l]=f}fn(bg,"FeaturePositionMap");class ih{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class Eg extends ih{constructor(i){super(i),this.current=0}set(i,l,f){this.fetchUniformLocation(i,l)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class u0 extends ih{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,f){this.fetchUniformLocation(i,l)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class h0 extends ih{constructor(i){super(i),this.current=Ii.transparent}set(i,l,f){this.fetchUniformLocation(i,l)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const d0=new Float32Array(16),M1=new Float32Array(9),R1=new Float32Array(4);function e_(a){return[$e(255*a.r,255*a.g),$e(255*a.b,255*a.a)]}class qp{constructor(i,l,f){this.value=i,this.uniformNames=l.map((g=>`u_${g}`)),this.type=f}setUniform(i,l,f,g,x){l.set(i,x,g.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new h0(i):new Eg(i)}}class Cf{constructor(i,l){this.uniformNames=l.map((f=>`u_${f}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,f,g,x){const w=x==="u_pattern"||x==="u_dash"?this.pattern:x==="u_pixel_ratio"?this.pixelRatio:null;w&&l.set(i,x,w)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new u0(i):new Eg(i)}}class sh{constructor(i,l,f,g){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new g}populatePaintArray(i,l,f,g,x,w){const C=this.paintVertexArray.length,R=this.expression.evaluate(new U(0),l,{},x,g,w);this.paintVertexArray.resize(i),this._setPaintValue(C,i,R)}updatePaintArray(i,l,f,g,x){const w=this.expression.evaluate({zoom:0},f,g,void 0,x);this._setPaintValue(i,l,w)}_setPaintValue(i,l,f){if(this.type==="color"){const g=e_(f);for(let x=i;x<l;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=i;g<l;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Zl{constructor(i,l,f,g,x,w){this.expression=i,this.uniformNames=l.map((C=>`u_${C}_t`)),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=l.map((C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new w}populatePaintArray(i,l,f,g,x,w){const C=this.expression.evaluate(new U(this.zoom),l,{},x,g,w),R=this.expression.evaluate(new U(this.zoom+1),l,{},x,g,w),k=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(k,i,C,R)}updatePaintArray(i,l,f,g,x){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,x),C=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,x);this._setPaintValue(i,l,w,C)}_setPaintValue(i,l,f,g){if(this.type==="color"){const x=e_(f),w=e_(g);for(let C=i;C<l;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=i;x<l;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,f,g,x){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,C=Be(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);l.set(i,x,C)}getBinding(i,l){return new Eg(i)}}class Al{constructor(i,l,f,g,x){this.expression=i,this.layerId=x,this.paintVertexAttributes=(f==="array"?$o:Kl).members;for(let w=0;w<l.length;++w);this.paintVertexArray=new g}populatePaintArray(i,l,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(g,i,l.patterns&&l.patterns[this.layerId],f)}updatePaintArray(i,l,f,g,x,w){this._setPaintValues(i,l,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(i,l,f,g){if(!g||!f)return;const x=g[f];if(!x)return;const{tl:w,br:C,pixelRatio:R}=x;for(let k=i;k<l;k++)this.paintVertexArray.emplace(k,w[0],w[1],C[0],C[1],R)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oh{constructor(i,l,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const x in i.paint._values){if(!f(x))continue;const w=i.paint.get(x);if(!(w instanceof Te&&wl(w.property.specification)))continue;const C=D1(x,i.type),R=w.value,k=w.property.specification.type,B=!!w.property.useIntegerZoom,j=x==="line-dasharray"||x.endsWith("pattern"),G=x==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(R.kind!=="constant"||G)if(R.kind==="source"||G||j){const Z=p0(x,k,"source");this.binders[x]=j?new Al(R,C,k,Z,i.id):new sh(R,C,k,Z),g.push(`/a_${x}`)}else{const Z=p0(x,k,"composite");this.binders[x]=new Zl(R,C,k,B,l,Z),g.push(`/z_${x}`)}else this.binders[x]=j?new Cf(R.value,C):new qp(R.value,C,k),g.push(`/u_${x}`)}this.cacheKey=g.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof sh||l instanceof Zl?l.maxValue:0}populatePaintArrays(i,l,f,g,x,w){for(const C in this.binders){const R=this.binders[C];(R instanceof sh||R instanceof Zl||R instanceof Al)&&R.populatePaintArray(i,l,f,g,x,w)}}setConstantPatternPositions(i){for(const l in this.binders){const f=this.binders[l];f instanceof Cf&&f.setConstantPatternPositions(i)}}updatePaintArrays(i,l,f,g,x,w){let C=!1;for(const R in i){const k=l.getPositions(R);for(const B of k){const j=f.feature(B.index);for(const G in this.binders){const Z=this.binders[G];if((Z instanceof sh||Z instanceof Zl||Z instanceof Al)&&Z.expression.isStateDependent===!0){const J=g.paint.get(G);Z.expression=J.value,Z.updatePaintArray(B.start,B.end,j,i[R],x,w),C=!0}}}}return C}defines(){const i=[];for(const l in this.binders){const f=this.binders[l];(f instanceof qp||f instanceof Cf)&&i.push(...f.uniformNames.map((g=>`#define HAS_UNIFORM_${g}`)))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof sh||f instanceof Zl||f instanceof Al)for(let g=0;g<f.paintVertexAttributes.length;g++)i.push(f.paintVertexAttributes[g].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof qp||f instanceof Cf||f instanceof Zl)for(const g of f.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof qp||g instanceof Cf||g instanceof Zl)for(const x of g.uniformNames)l.push({name:x,property:f,binding:g.getBinding(i,x)})}return l}setUniforms(i,l,f,g,x){for(const{name:w,property:C,binding:R}of f)this.binders[C].setUniform(i,R,x,g.get(C),w)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof sh||l instanceof Zl||l instanceof Al)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const f=this.binders[l];(f instanceof sh||f instanceof Zl||f instanceof Al)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof sh||l instanceof Zl||l instanceof Al)&&l.destroy()}}}class au{constructor(i,l,f=(()=>!0)){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new oh(g,l,f);this.needsUpload=!1,this._featureMap=new bg,this._bufferOffset=0}populatePaintArrays(i,l,f,g,x,w,C){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(i,l,g,x,w,C);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,f,g,x){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(i,this._featureMap,l,w,g,x)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const t_={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function D1(a,i){return t_[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}const f0={"line-pattern":{source:ot,composite:ot},"fill-pattern":{source:ot,composite:ot},"fill-extrusion-pattern":{source:ot,composite:ot},"line-dasharray":{source:Et,composite:Et}},sC={color:{source:Ja,composite:zt},number:{source:Gr,composite:Ja}};function p0(a,i,l){const f=f0[a];return f&&f[l]||sC[i][l]}fn(qp,"ConstantBinder"),fn(Cf,"PatternConstantBinder"),fn(sh,"SourceExpressionBinder"),fn(Al,"PatternCompositeBinder"),fn(Zl,"CompositeExpressionBinder"),fn(oh,"ProgramConfiguration",{omit:["_buffers"]}),fn(au,"ProgramConfigurationSet");const m0="-transition";class Ql extends cc{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Se(l.layout)),l.paint)){this._transitionablePaint=new re(l.paint);for(const f in i.paint)this.setPaintProperty(f,i.paint[f],{validate:!1});for(const f in i.layout)this.setLayoutProperty(f,i.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ae(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,f={}){l!=null&&this._validate(jp,`layers.${this.id}.layout.${i}`,i,l,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return Lt(i,m0)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,f={}){if(l!=null&&this._validate(oo,`layers.${this.id}.paint.${i}`,i,l,f))return!1;if(Lt(i,m0))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[i],x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value,R=C.isDataDriven(),k=Lt(i,"pattern")||i==="line-dasharray";return R||x||k||this._handleOverridablePaintPropertyUpdate(i,w,C)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),gn(i,((l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length)))}_validate(i,l,f,g,x={}){return(!x||x.validate!==!1)&&Zy(this,i.call(ru,{key:l,layerType:this.type,objectKey:f,value:g,styleSpec:xt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Te&&wl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Sa(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const k1=Qe([{name:"a_pos",components:2,type:"Int16"}],4),P1=Qe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class gs{constructor(i=[]){this.segments=i}prepareSegment(i,l,f,g){let x=this.segments[this.segments.length-1];return i>gs.MAX_VERTEX_ARRAY_LENGTH&&On(`Max vertices per segment is ${gs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!x||x.vertexLength+i>gs.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g)&&(x={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(x.sortKey=g),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,f,g){return new gs([{vertexOffset:i,primitiveOffset:l,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}gs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fn(gs,"SegmentVector");var Rn=8192;class ah{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Jr?new Jr(i.lng,i.lat):Jr.convert(i),this}setSouthWest(i){return this._sw=i instanceof Jr?new Jr(i.lng,i.lat):Jr.convert(i),this}extend(i){const l=this._sw,f=this._ne;let g,x;if(i instanceof Jr)g=i,x=i;else{if(!(i instanceof ah))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(ah.convert(i)):this.extend(Jr.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Jr.convert(i)):this;if(g=i._sw,x=i._ne,!g||!x)return this}return l||f?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new Jr(g.lng,g.lat),this._ne=new Jr(x.lng,x.lat)),this}getCenter(){return new Jr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Jr(this.getWest(),this.getNorth())}getSouthEast(){return new Jr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:f}=Jr.convert(i);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return!i||i instanceof ah?i:new ah(i)}}var Hp=1e-6,Aa=typeof Float32Array<"u"?Float32Array:Array;function g0(){var a=new Aa(9);return Aa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function L1(a,i,l){var f=i[0],g=i[1],x=i[2],w=i[3],C=i[4],R=i[5],k=i[6],B=i[7],j=i[8],G=l[0],Z=l[1],J=l[2],ue=l[3],ve=l[4],Re=l[5],Ne=l[6],De=l[7],ze=l[8];return a[0]=G*f+Z*w+J*k,a[1]=G*g+Z*C+J*B,a[2]=G*x+Z*R+J*j,a[3]=ue*f+ve*w+Re*k,a[4]=ue*g+ve*C+Re*B,a[5]=ue*x+ve*R+Re*j,a[6]=Ne*f+De*w+ze*k,a[7]=Ne*g+De*C+ze*B,a[8]=Ne*x+De*R+ze*j,a}function Il(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function n_(a,i){var l=i[0],f=i[1],g=i[2],x=i[3],w=i[4],C=i[5],R=i[6],k=i[7],B=i[8],j=i[9],G=i[10],Z=i[11],J=i[12],ue=i[13],ve=i[14],Re=i[15],Ne=l*C-f*w,De=l*R-g*w,ze=l*k-x*w,je=f*R-g*C,Ue=f*k-x*C,ht=g*k-x*R,at=B*ue-j*J,wt=B*ve-G*J,qt=B*Re-Z*J,pt=j*ve-G*ue,Mt=j*Re-Z*ue,Rt=G*Re-Z*ve,Vt=Ne*Rt-De*Mt+ze*pt+je*qt-Ue*wt+ht*at;return Vt?(a[0]=(C*Rt-R*Mt+k*pt)*(Vt=1/Vt),a[1]=(g*Mt-f*Rt-x*pt)*Vt,a[2]=(ue*ht-ve*Ue+Re*je)*Vt,a[3]=(G*Ue-j*ht-Z*je)*Vt,a[4]=(R*qt-w*Rt-k*wt)*Vt,a[5]=(l*Rt-g*qt+x*wt)*Vt,a[6]=(ve*ze-J*ht-Re*De)*Vt,a[7]=(B*ht-G*ze+Z*De)*Vt,a[8]=(w*Mt-C*qt+k*at)*Vt,a[9]=(f*qt-l*Mt-x*at)*Vt,a[10]=(J*Ue-ue*ze+Re*Ne)*Vt,a[11]=(j*ze-B*Ue-Z*Ne)*Vt,a[12]=(C*wt-w*pt-R*at)*Vt,a[13]=(l*pt-f*wt+g*at)*Vt,a[14]=(ue*De-J*je-ve*Ne)*Vt,a[15]=(B*je-j*De+G*Ne)*Vt,a):null}function rd(a,i,l){var f=i[0],g=i[1],x=i[2],w=i[3],C=i[4],R=i[5],k=i[6],B=i[7],j=i[8],G=i[9],Z=i[10],J=i[11],ue=i[12],ve=i[13],Re=i[14],Ne=i[15],De=l[0],ze=l[1],je=l[2],Ue=l[3];return a[0]=De*f+ze*C+je*j+Ue*ue,a[1]=De*g+ze*R+je*G+Ue*ve,a[2]=De*x+ze*k+je*Z+Ue*Re,a[3]=De*w+ze*B+je*J+Ue*Ne,a[4]=(De=l[4])*f+(ze=l[5])*C+(je=l[6])*j+(Ue=l[7])*ue,a[5]=De*g+ze*R+je*G+Ue*ve,a[6]=De*x+ze*k+je*Z+Ue*Re,a[7]=De*w+ze*B+je*J+Ue*Ne,a[8]=(De=l[8])*f+(ze=l[9])*C+(je=l[10])*j+(Ue=l[11])*ue,a[9]=De*g+ze*R+je*G+Ue*ve,a[10]=De*x+ze*k+je*Z+Ue*Re,a[11]=De*w+ze*B+je*J+Ue*Ne,a[12]=(De=l[12])*f+(ze=l[13])*C+(je=l[14])*j+(Ue=l[15])*ue,a[13]=De*g+ze*R+je*G+Ue*ve,a[14]=De*x+ze*k+je*Z+Ue*Re,a[15]=De*w+ze*B+je*J+Ue*Ne,a}function Af(a,i,l){var f,g,x,w,C,R,k,B,j,G,Z,J,ue=l[0],ve=l[1],Re=l[2];return i===a?(a[12]=i[0]*ue+i[4]*ve+i[8]*Re+i[12],a[13]=i[1]*ue+i[5]*ve+i[9]*Re+i[13],a[14]=i[2]*ue+i[6]*ve+i[10]*Re+i[14],a[15]=i[3]*ue+i[7]*ve+i[11]*Re+i[15]):(g=i[1],x=i[2],w=i[3],C=i[4],R=i[5],k=i[6],B=i[7],j=i[8],G=i[9],Z=i[10],J=i[11],a[0]=f=i[0],a[1]=g,a[2]=x,a[3]=w,a[4]=C,a[5]=R,a[6]=k,a[7]=B,a[8]=j,a[9]=G,a[10]=Z,a[11]=J,a[12]=f*ue+C*ve+j*Re+i[12],a[13]=g*ue+R*ve+G*Re+i[13],a[14]=x*ue+k*ve+Z*Re+i[14],a[15]=w*ue+B*ve+J*Re+i[15]),a}function id(a,i,l){var f=l[0],g=l[1],x=l[2];return a[0]=i[0]*f,a[1]=i[1]*f,a[2]=i[2]*f,a[3]=i[3]*f,a[4]=i[4]*g,a[5]=i[5]*g,a[6]=i[6]*g,a[7]=i[7]*g,a[8]=i[8]*x,a[9]=i[9]*x,a[10]=i[10]*x,a[11]=i[11]*x,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}function r_(a,i,l){var f=Math.sin(l),g=Math.cos(l),x=i[4],w=i[5],C=i[6],R=i[7],k=i[8],B=i[9],j=i[10],G=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=x*g+k*f,a[5]=w*g+B*f,a[6]=C*g+j*f,a[7]=R*g+G*f,a[8]=k*g-x*f,a[9]=B*g-w*f,a[10]=j*g-C*f,a[11]=G*g-R*f,a}function i_(a,i,l){var f=Math.sin(l),g=Math.cos(l),x=i[0],w=i[1],C=i[2],R=i[3],k=i[8],B=i[9],j=i[10],G=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=x*g-k*f,a[1]=w*g-B*f,a[2]=C*g-j*f,a[3]=R*g-G*f,a[8]=x*f+k*g,a[9]=w*f+B*g,a[10]=C*f+j*g,a[11]=R*f+G*g,a}function O1(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function y0(a,i,l){var f,g,x,w=l[0],C=l[1],R=l[2],k=Math.hypot(w,C,R);return k<Hp?null:(w*=k=1/k,C*=k,R*=k,f=Math.sin(i),g=Math.cos(i),a[0]=w*w*(x=1-g)+g,a[1]=C*w*x+R*f,a[2]=R*w*x-C*f,a[3]=0,a[4]=w*C*x-R*f,a[5]=C*C*x+g,a[6]=R*C*x+w*f,a[7]=0,a[8]=w*R*x+C*f,a[9]=C*R*x-w*f,a[10]=R*R*x+g,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var Sg=rd;function Cg(){var a=new Aa(3);return Aa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Ag(a){var i=new Aa(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}function Gp(a){return Math.hypot(a[0],a[1],a[2])}function If(a,i,l){var f=new Aa(3);return f[0]=a,f[1]=i,f[2]=l,f}function Ml(a,i,l){return a[0]=i[0]+l[0],a[1]=i[1]+l[1],a[2]=i[2]+l[2],a}function s_(a,i,l){return a[0]=i[0]-l[0],a[1]=i[1]-l[1],a[2]=i[2]-l[2],a}function o_(a,i,l){return a[0]=i[0]*l[0],a[1]=i[1]*l[1],a[2]=i[2]*l[2],a}function Wp(a,i,l){return a[0]=Math.min(i[0],l[0]),a[1]=Math.min(i[1],l[1]),a[2]=Math.min(i[2],l[2]),a}function Mf(a,i,l){return a[0]=Math.max(i[0],l[0]),a[1]=Math.max(i[1],l[1]),a[2]=Math.max(i[2],l[2]),a}function Ia(a,i,l){return a[0]=i[0]*l,a[1]=i[1]*l,a[2]=i[2]*l,a}function Yp(a,i,l,f){return a[0]=i[0]+l[0]*f,a[1]=i[1]+l[1]*f,a[2]=i[2]+l[2]*f,a}function qo(a,i){var l=i[0],f=i[1],g=i[2],x=l*l+f*f+g*g;return x>0&&(x=1/Math.sqrt(x)),a[0]=i[0]*x,a[1]=i[1]*x,a[2]=i[2]*x,a}function wo(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}function a_(a,i,l){var f=i[0],g=i[1],x=i[2],w=l[0],C=l[1],R=l[2];return a[0]=g*R-x*C,a[1]=x*w-f*R,a[2]=f*C-g*w,a}function ys(a,i,l){var f=i[0],g=i[1],x=i[2],w=l[3]*f+l[7]*g+l[11]*x+l[15];return a[0]=(l[0]*f+l[4]*g+l[8]*x+l[12])/(w=w||1),a[1]=(l[1]*f+l[5]*g+l[9]*x+l[13])/w,a[2]=(l[2]*f+l[6]*g+l[10]*x+l[14])/w,a}function _0(a,i,l){var f=l[0],g=l[1],x=l[2],w=i[0],C=i[1],R=i[2],k=g*R-x*C,B=x*w-f*R,j=f*C-g*w,G=g*j-x*B,Z=x*k-f*j,J=f*B-g*k,ue=2*l[3];return B*=ue,j*=ue,Z*=2,J*=2,a[0]=w+(k*=ue)+(G*=2),a[1]=C+B+Z,a[2]=R+j+J,a}var sd,Jl=s_,v0=o_,z1=Gp;function x0(a,i,l){return a[0]=i[0]*l,a[1]=i[1]*l,a[2]=i[2]*l,a[3]=i[3]*l,a}function N1(a,i){var l=i[0],f=i[1],g=i[2],x=i[3],w=l*l+f*f+g*g+x*x;return w>0&&(w=1/Math.sqrt(w)),a[0]=l*w,a[1]=f*w,a[2]=g*w,a[3]=x*w,a}function lh(a,i,l){var f=i[0],g=i[1],x=i[2],w=i[3];return a[0]=l[0]*f+l[4]*g+l[8]*x+l[12]*w,a[1]=l[1]*f+l[5]*g+l[9]*x+l[13]*w,a[2]=l[2]*f+l[6]*g+l[10]*x+l[14]*w,a[3]=l[3]*f+l[7]*g+l[11]*x+l[15]*w,a}function Ns(){var a=new Aa(4);return Aa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function To(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function b0(a,i,l){l*=.5;var f=i[0],g=i[1],x=i[2],w=i[3],C=Math.sin(l),R=Math.cos(l);return a[0]=f*R+w*C,a[1]=g*R+x*C,a[2]=x*R-g*C,a[3]=w*R-f*C,a}function w0(a,i,l){l*=.5;var f=i[0],g=i[1],x=i[2],w=i[3],C=Math.sin(l),R=Math.cos(l);return a[0]=f*R-x*C,a[1]=g*R+w*C,a[2]=x*R+f*C,a[3]=w*R-g*C,a}Cg(),sd=new Aa(4),Aa!=Float32Array&&(sd[0]=0,sd[1]=0,sd[2]=0,sd[3]=0);var B1=N1;Cg(),If(1,0,0),If(0,1,0),Ns(),Ns(),g0();const F1=Qe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Xp}=F1,T0=Qe([{name:"a_pos_3",components:3,type:"Int16"}]);var od=Qe([{name:"a_pos",type:"Int16",components:2}]);class l_{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,f){const g=wo(l,this.dir);if(Math.abs(g)<1e-6)return!1;const x=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/g;return f[0]=this.pos[0]+this.dir[0]*x,f[1]=this.pos[1]+this.dir[1]*x,f[2]=this.pos[2]+this.dir[2]*x,!0}closestPointOnSphere(i,l,f){if((function(Z,J){var ue=Z[0],ve=Z[1],Re=Z[2],Ne=J[0],De=J[1],ze=J[2];return Math.abs(ue-Ne)<=Hp*Math.max(1,Math.abs(ue),Math.abs(Ne))&&Math.abs(ve-De)<=Hp*Math.max(1,Math.abs(ve),Math.abs(De))&&Math.abs(Re-ze)<=Hp*Math.max(1,Math.abs(Re),Math.abs(ze))})(this.pos,i)||l===0)return f[0]=f[1]=f[2]=0,!1;const[g,x,w]=this.dir,C=this.pos[0]-i[0],R=this.pos[1]-i[1],k=this.pos[2]-i[2],B=g*g+x*x+w*w,j=2*(C*g+R*x+k*w),G=j*j-4*B*(C*C+R*R+k*k-l*l);if(G<0){const Z=Math.max(-j/2,0),J=C+g*Z,ue=R+x*Z,ve=k+w*Z,Re=Math.hypot(J,ue,ve);return f[0]=J*l/Re,f[1]=ue*l/Re,f[2]=ve*l/Re,!1}{const Z=(-j-Math.sqrt(G))/(2*B);if(Z<0){const J=Math.hypot(C,R,k);return f[0]=C*l/J,f[1]=R*l/J,f[2]=k*l/J,!1}return f[0]=C+g*Z,f[1]=R+x*Z,f[2]=k+w*Z,!0}}}class E0{constructor(i,l,f,g,x){this.TL=i,this.TR=l,this.BR=f,this.BL=g,this.horizon=x}static fromInvProjectionMatrix(i,l,f){const g=[-1,1,1],x=[1,1,1],w=[1,-1,1],C=[-1,-1,1],R=ys(g,g,i),k=ys(x,x,i),B=ys(w,w,i),j=ys(C,C,i);return new E0(R,k,B,j,l/f)}}class Kp{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,f,g){const x=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((R=>{const k=lh([],R,i),B=1/k[3]/l*x;return(function(j,G,Z){return j[0]=G[0]*Z[0],j[1]=G[1]*Z[1],j[2]=G[2]*Z[2],j[3]=G[3]*Z[3],j})(k,k,[B,B,g?1/k[3]:B,B])})),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((R=>{const k=qo([],a_([],Jl([],w[R[0]],w[R[1]]),Jl([],w[R[2]],w[R[1]]))),B=-wo(k,w[R[1]]);return k.concat(B)}));return new Kp(w,C)}}class Eo{static fromPoints(i){const l=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of i)Wp(l,l,g),Mf(f,f,g);return new Eo(l,f)}static applyTransform(i,l){const f=i.getCorners();for(let g=0;g<f.length;++g)ys(f[g],f[g],l);return Eo.fromPoints(f)}constructor(i,l){this.min=i,this.max=l,this.center=Ia([],Ml([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],f=Ag(this.min),g=Ag(this.max);for(let x=0;x<l.length;x++)f[x]=l[x]?this.min[x]:this.center[x],g[x]=l[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Eo(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let f=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let w=0;for(let C=0;C<l.length;C++)w+=wo(x,l[C])+x[3]>=0;if(w===0)return 0;w!==l.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const R=i.points[C][g]-this.min[g];x=Math.min(x,R),w=Math.max(w,R)}if(w<0||x>this.max[g]-this.min[g])return 0}return 1}}const c_=5,S0=6,Sc=Rn/Math.PI/2,C0=16383,ch=64,Rf=[ch,32,16],Rl=-Sc,tl=Sc,u_=[new Eo([Rl,Rl,Rl],[tl,tl,tl]),new Eo([Rl,Rl,Rl],[0,0,tl]),new Eo([0,Rl,Rl],[tl,0,tl]),new Eo([Rl,0,Rl],[0,tl,tl]),new Eo([0,0,Rl],[tl,tl,tl])];function Zp(a){return a*Sc/em}function A0(a,i,l,f=!0){const g=Ia([],a._camera.position,a.worldSize),x=[i,l,1,1];lh(x,x,a.pixelMatrixInverse),x0(x,x,1/x[3]);const w=qo([],Jl([],x,g)),C=a.globeMatrix,R=[C[12],C[13],C[14]],k=Jl([],R,g),B=Gp(k),j=qo([],k),G=a.worldSize/(2*Math.PI),Z=wo(j,w),J=Math.asin(G/B);if(J<Math.acos(Z)){if(!f)return null;const qt=[],pt=[];Ia(qt,w,B/Z),qo(pt,Jl(pt,qt,k)),qo(w,Ml(w,k,Ia(w,pt,Math.tan(J)*B)))}const ue=[];new l_(g,w).closestPointOnSphere(R,G,ue);const ve=qo([],nr(C,0)),Re=qo([],nr(C,1)),Ne=qo([],nr(C,2)),De=wo(ve,ue),ze=wo(Re,ue),je=wo(Ne,ue),Ue=Ve(Math.asin(-ze/G));let ht=Ve(Math.atan2(De,je));ht=a.center.lng+(function(qt,pt){const Mt=(pt-qt+180)%360-180;return Mt<-180?Mt+360:Mt})(a.center.lng,ht);const at=Co(ht),wt=Be(Ni(Ue),0,1);return new Bi(at,wt)}class I0{constructor(i,l,f){this.a=Jl([],i,f),this.b=Jl([],l,f),this.center=f;const g=qo([],this.a),x=qo([],this.b);this.angle=Math.acos(wo(g,x))}}function h_(a,i){if(a.angle===0)return null;let l;return l=a.a[i]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[i]/a.a[i]/Math.sin(a.angle)-1/Math.tan(a.angle)),l<0||l>1?null:(function(f,g,x,w){const C=Math.sin(x);return f*(Math.sin((1-w)*x)/C)+g*(Math.sin(w*x)/C)})(a.a[i],a.b[i],a.angle,Be(l,0,1))+a.center[i]}function So(a){if(a.z<=1)return u_[a.z+2*a.y+a.x];const i=d_(Qp(a));return Eo.fromPoints(i)}function uh(a,i,l){return Ia(a,a,1-l),Yp(a,a,i,l)}function V1(a,i){const l=kf(i.zoom);if(l===0)return So(a);const f=Qp(a),g=d_(f),x=Co(f.getWest())*i.worldSize,w=Co(f.getEast())*i.worldSize,C=Ni(f.getNorth())*i.worldSize,R=Ni(f.getSouth())*i.worldSize,k=[x,C,0],B=[w,C,0],j=[x,R,0],G=[w,R,0],Z=n_([],i.globeMatrix);return ys(k,k,Z),ys(B,B,Z),ys(j,j,Z),ys(G,G,Z),g[0]=uh(g[0],j,l),g[1]=uh(g[1],G,l),g[2]=uh(g[2],B,l),g[3]=uh(g[3],k,l),Eo.fromPoints(g)}function M0(a,i,l){for(const f of a)ys(f,f,i),Ia(f,f,l)}function hh(a,i,l){const f=i/a.worldSize,g=a.globeMatrix;if(l.z<=1){const at=So(l).getCorners();return M0(at,g,f),Eo.fromPoints(at)}const x=Qp(l),w=d_(x);M0(w,g,f);const C=Number.MAX_VALUE,R=[-C,-C,-C],k=[C,C,C];if(x.contains(a.center)){for(const qt of w)Wp(k,k,qt),Mf(R,R,qt);R[2]=0;const at=a.point,wt=[at.x*f,at.y*f,0];return Wp(k,k,wt),Mf(R,R,wt),new Eo(k,R)}const B=[g[12]*f,g[13]*f,g[14]*f],j=x.getCenter(),G=Be(a.center.lat,-lo,lo),Z=Be(j.lat,-lo,lo),J=Co(a.center.lng),ue=Ni(G);let ve=J-Co(j.lng);const Re=ue-Ni(Z);ve>.5?ve-=1:ve<-.5&&(ve+=1);let Ne=0;Math.abs(ve)>Math.abs(Re)?Ne=ve>=0?1:3:(Ne=Re>=0?0:2,Yp(B,B,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(de(Re>=0?x.getSouth():x.getNorth()))*Sc));const De=w[Ne],ze=w[(Ne+1)%4],je=new I0(De,ze,B),Ue=[h_(je,0)||De[0],h_(je,1)||De[1],h_(je,2)||De[2]],ht=kf(a.zoom);if(ht>0){const at=(function({x:qt,y:pt,z:Mt},Rt,Vt,Xt,bt){const cn=1/(1<<Mt);let _n=qt*cn,un=_n+cn,lr=pt*cn,Zt=lr+cn,kn=0;const cr=(_n+un)/2-Xt;return cr>.5?kn=-1:cr<-.5&&(kn=1),_n=((_n+kn)*Rt-(Xt*=Rt))*Vt+Xt,un=((un+kn)*Rt-Xt)*Vt+Xt,lr=(lr*Rt-(bt*=Rt))*Vt+bt,Zt=(Zt*Rt-bt)*Vt+bt,[[_n,Zt,0],[un,Zt,0],[un,lr,0],[_n,lr,0]]})(l,i,a._pixelsPerMercatorPixel,J,ue);for(let qt=0;qt<w.length;qt++)uh(w[qt],at[qt],ht);const wt=Ml([],at[Ne],at[(Ne+1)%4]);Ia(wt,wt,.5),uh(Ue,wt,ht)}for(const at of w)Wp(k,k,at),Mf(R,R,at);return k[2]=Math.min(De[2],ze[2]),Wp(k,k,Ue),Mf(R,R,Ue),new Eo(k,R)}function Qp({x:a,y:i,z:l}){const f=1/(1<<l),g=new Jr(nl(a*f),ei((i+1)*f)),x=new Jr(nl((a+1)*f),ei(i*f));return new ah(g,x)}function d_(a){const i=de(a.getNorth()),l=de(a.getSouth()),f=Math.cos(i),g=Math.cos(l),x=Math.sin(i),w=Math.sin(l),C=a.getWest(),R=a.getEast();return[dh(g,w,C),dh(g,w,R),dh(f,x,R),dh(f,x,C)]}function dh(a,i,l,f=Sc){return l=de(l),[a*Math.sin(l)*f,-i*f,a*Math.cos(l)*f]}function lu(a,i,l){return dh(Math.cos(de(a)),Math.sin(de(a)),i,l)}function zi(a,i,l,f){const g=1<<l.z,x=(a/Rn+l.x)/g;return lu(ei((i/Rn+l.y)/g),nl(x),f)}function f_({min:a,max:i}){return C0/Math.max(i[0]-a[0],i[1]-a[1],i[2]-a[2])}const U1=new Float64Array(16);function Jp(a){const i=f_(a),l=O1(U1,[i,i,i]);return Af(l,l,((f=[])[0]=-(g=a.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function Df(a){const i=(f=a.min,(l=U1)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=f[0],l[13]=f[1],l[14]=f[2],l[15]=1,l);var l,f;const g=1/f_(a);return id(i,i,[g,g,g])}function fh(a,i,l,f,g){const x=(function(R){const k=Rn/(2*Math.PI);return R/(2*Math.PI)/k})(l),w=[a,i,-l/(2*Math.PI)],C=Il(new Float64Array(16));return Af(C,C,w),id(C,C,[x,x,x]),r_(C,C,de(-g)),i_(C,C,de(-f)),C}function kf(a){return yt(c_,S0,a)}function R0(a,i){const l=lu(i.lat,i.lng),f=(function(J){const ue=lu(J._center.lat,J._center.lng);let ve=a_([],If(0,1,0),ue);const Re=y0([],-J.angle,ue);ve=ys(ve,ve,Re),y0(Re,-J._pitch,ve);const Ne=qo([],ue);return Ia(Ne,Ne,Zp(J.cameraToCenterDistance/J.pixelsPerMeter)),ys(Ne,Ne,Re),Ml([],ue,Ne)})(a);return w=(g=s_([],f,l))[0],C=g[1],R=g[2],k=(x=l)[0],B=x[1],j=x[2],Z=(G=Math.sqrt(w*w+C*C+R*R)*Math.sqrt(k*k+B*B+j*j))&&wo(g,x)/G,Math.acos(Math.min(Math.max(Z,-1),1));var g,x,w,C,R,k,B,j,G,Z}function Pf(a,i){return R0(a,i)>Math.PI/2*1.01}const Cc=de(85),j1=Math.cos(Cc),D0=Math.sin(Cc),em=63710088e-1,p_=2*Math.PI*em;class cu{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cu(Me(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,f=this.lat*l,g=i.lat*l,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((i.lng-this.lng)*l);return em*Math.acos(Math.min(x,1))}toBounds(i=0){const l=360*i/40075017,f=l/Math.cos(Math.PI/180*this.lat);return new ah(new cu(this.lng-f,this.lat-l),new cu(this.lng+f,this.lat+l))}toEcef(i){const l=Zp(i);return lu(this.lat,this.lng,Sc+l)}static convert(i){if(i instanceof cu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new cu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new cu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Jr=cu;function m_(a){return p_*Math.cos(a*Math.PI/180)}function Co(a){return(180+a)/360}function Ni(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Dl(a,i){return a/m_(i)}function nl(a){return 360*a-180}function ei(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function $1(a,i){return a*m_(ei(i))}const lo=85.051129;function k0(a){return 1/Math.cos(a*Math.PI/180)}class Bi{constructor(i,l,f=0){this.x=+i,this.y=+l,this.z=+f}static fromLngLat(i,l=0){const f=Jr.convert(i);return new Bi(Co(f.lng),Ni(f.lat),Dl(l,f.lat))}toLngLat(){return new Jr(nl(this.x),ei(this.y))}toAltitude(){return $1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/p_*k0(ei(this.y))}}function ca(a,i,l,f,g,x,w,C,R){const k=(i+f)/2,B=(l+g)/2,j=new se(k,B);C(j),(function(G,Z,J,ue,ve,Re){const Ne=J-ve,De=ue-Re;return Math.abs((ue-Z)*Ne-(J-G)*De)/Math.hypot(Ne,De)})(j.x,j.y,x.x,x.y,w.x,w.y)>=R?(ca(a,i,l,k,B,x,j,C,R),ca(a,k,B,f,g,j,w,C,R)):a.push(w)}function uu(a,i,l){let f=a[0],g=f.x,x=f.y;i(f);const w=[f];for(let C=1;C<a.length;C++){const R=a[C],{x:k,y:B}=R;i(R),ca(w,g,x,k,B,f,R,i,l),g=k,x=B,f=R}return w}function g_(a,i,l,f){if(f(i,l)){const g=i.add(l)._mult(.5);g_(a,i,g,f),g_(a,g,l,f)}else a.push(l)}function q1(a,i){let l=a[0];const f=[l];for(let g=1;g<a.length;g++){const x=a[g];g_(f,l,x,i),l=x}return f}const y_=Math.pow(2,14)-1,H1=-y_-1;function __(a,i){const l=Math.round(a.x*i),f=Math.round(a.y*i);return a.x=Be(l,H1,y_),a.y=Be(f,H1,y_),(l<a.x||l>a.x+1||f<a.y||f>a.y+1)&&On("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Is(a,i,l){const f=a.loadGeometry(),g=a.extent,x=Rn/g;if(i&&l&&l.projection.isReprojectedInTileSpace){const w=1<<i.z,{scale:C,x:R,y:k,projection:B}=l,j=G=>{const Z=nl((i.x+G.x/g)/w),J=ei((i.y+G.y/g)/w),ue=B.project(Z,J);G.x=(ue.x*C-R)*g,G.y=(ue.y*C-k)*g};for(let G=0;G<f.length;G++)if(a.type!==1)f[G]=uu(f[G],j,1);else{const Z=[];for(const J of f[G])J.x<0||J.x>=g||J.y<0||J.y>=g||(j(J),Z.push(J));f[G]=Z}}for(const w of f)for(const C of w)__(C,x);return f}function Ho(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?Is(a):[]}}function Ig(a,i,l,f,g){a.emplaceBack(2*i+(f+1)/2,2*l+(g+1)/2)}function Go(a,i,l){a.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class v_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Ut,this.indexArray=new xn,this.segments=new gs,this.programConfigurations=new au(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f,g){const x=this.layers[0],w=[];let C=null;x.type==="circle"&&(C=x.layout.get("circle-sort-key"));for(const{feature:k,id:B,index:j,sourceLayerIndex:G}of i){const Z=this.layers[0]._featureFilter.needGeometry,J=Ho(k,Z);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),J,f))continue;const ue=C?C.evaluate(J,{},f):void 0,ve={id:B,properties:k.properties,type:k.type,sourceLayerIndex:G,index:j,geometry:Z?J.geometry:Is(k,f,g),patterns:{},sortKey:ue};w.push(ve)}C&&w.sort(((k,B)=>k.sortKey-B.sortKey));let R=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Nt,R=g.projection);for(const k of w){const{geometry:B,index:j,sourceLayerIndex:G}=k,Z=i[j].feature;this.addFeature(k,B,j,l.availableImages,f,R),l.featureIndex.insert(Z,B,j,G,this.index)}}update(i,l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,k1.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,P1.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,f,g,x,w){for(const C of l)for(const R of C){const k=R.x,B=R.y;if(k<0||k>=Rn||B<0||B>=Rn)continue;if(w){const Z=w.projectTilePoint(k,B,x),J=w.upVector(x,k,B),ue=this.globeExtVertexArray;Go(ue,Z,J),Go(ue,Z,J),Go(ue,Z,J),Go(ue,Z,J)}const j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),G=j.vertexLength;Ig(this.layoutVertexArray,k,B,-1,-1),Ig(this.layoutVertexArray,k,B,1,-1),Ig(this.layoutVertexArray,k,B,1,1),Ig(this.layoutVertexArray,k,B,-1,1),this.indexArray.emplaceBack(G,G+1,G+2),this.indexArray.emplaceBack(G,G+2,G+3),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},g,x)}}function hu(a,i){for(let l=0;l<a.length;l++)if(Ic(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(Ic(a,i[l]))return!0;return!!Mg(a,i)}function Lf(a,i,l){return!!Ic(a,i)||!!x_(i,a,l)}function du(a,i){if(a.length===1)return tm(i,a[0]);for(let l=0;l<i.length;l++){const f=i[l];for(let g=0;g<f.length;g++)if(Ic(a,f[g]))return!0}for(let l=0;l<a.length;l++)if(tm(i,a[l]))return!0;for(let l=0;l<i.length;l++)if(Mg(a,i[l]))return!0;return!1}function P0(a,i,l){if(a.length>1){if(Mg(a,i))return!0;for(let f=0;f<i.length;f++)if(x_(i[f],a,l))return!0}for(let f=0;f<a.length;f++)if(x_(a[f],i,l))return!0;return!1}function Mg(a,i){if(a.length===0||i.length===0)return!1;for(let l=0;l<a.length-1;l++){const f=a[l],g=a[l+1];for(let x=0;x<i.length-1;x++)if(Ac(f,g,i[x],i[x+1]))return!0}return!1}function Ac(a,i,l,f){return jn(a,l,f)!==jn(i,l,f)&&jn(a,i,l)!==jn(a,i,f)}function x_(a,i,l){const f=l*l;if(i.length===1)return a.distSqr(i[0])<f;for(let g=1;g<i.length;g++)if(Of(a,i[g-1],i[g])<f)return!0;return!1}function Of(a,i,l){const f=i.distSqr(l);if(f===0)return a.distSqr(i);const g=((a.x-i.x)*(l.x-i.x)+(a.y-i.y)*(l.y-i.y))/f;return a.distSqr(g<0?i:g>1?l:l.sub(i)._mult(g)._add(i))}function tm(a,i){let l,f,g,x=!1;for(let w=0;w<a.length;w++){l=a[w];for(let C=0,R=l.length-1;C<l.length;R=C++)f=l[C],g=l[R],f.y>i.y!=g.y>i.y&&i.x<(g.x-f.x)*(i.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function Ic(a,i){let l=!1;for(let f=0,g=a.length-1;f<a.length;g=f++){const x=a[f],w=a[g];x.y>i.y!=w.y>i.y&&i.x<(w.x-x.x)*(i.y-x.y)/(w.y-x.y)+x.x&&(l=!l)}return l}function zf(a,i,l,f,g){for(const w of a)if(i<=w.x&&l<=w.y&&f>=w.x&&g>=w.y)return!0;const x=[new se(i,l),new se(i,g),new se(f,g),new se(f,l)];if(a.length>2){for(const w of x)if(Ic(a,w))return!0}for(let w=0;w<a.length-1;w++)if(G1(a[w],a[w+1],x))return!0;return!1}function G1(a,i,l){const f=l[0],g=l[2];if(a.x<f.x&&i.x<f.x||a.x>g.x&&i.x>g.x||a.y<f.y&&i.y<f.y||a.y>g.y&&i.y>g.y)return!1;const x=jn(a,i,l[0]);return x!==jn(a,i,l[1])||x!==jn(a,i,l[2])||x!==jn(a,i,l[3])}function Nf(a,i,l){const f=i.paint.get(a).value;return f.kind==="constant"?f.value:l.programConfigurations.get(i.id).getMaxValue(a)}function ad(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function L0(a,i,l,f,g){if(!i[0]&&!i[1])return a;const x=se.convert(i)._mult(g);l==="viewport"&&x._rotate(-f);const w=[];for(let C=0;C<a.length;C++)w.push(a[C].sub(x));return w}function Rg(a,i,l,f){const g=se.convert(a)._mult(f);return i==="viewport"&&g._rotate(-l),g}fn(v_,"CircleBucket",{omit:["layers"]});const W1=new Le({"circle-sort-key":new be(xt.layout_circle["circle-sort-key"])});var oC={paint:new Le({"circle-radius":new be(xt.paint_circle["circle-radius"]),"circle-color":new be(xt.paint_circle["circle-color"]),"circle-blur":new be(xt.paint_circle["circle-blur"]),"circle-opacity":new be(xt.paint_circle["circle-opacity"]),"circle-translate":new oe(xt.paint_circle["circle-translate"]),"circle-translate-anchor":new oe(xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new oe(xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new oe(xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new be(xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new be(xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new be(xt.paint_circle["circle-stroke-opacity"])}),layout:W1};function Y1(a,i,l,f,g,x,w,C,R){if(x&&a.queryGeometry.isAboveHorizon)return!1;x&&(R*=a.pixelToTileUnitsFactor);const k=a.tileID.canonical,B=l.projection.upVectorScale(k,l.center.lat,l.worldSize).metersToTile;for(const j of i)for(const G of j){const Z=G.add(C),J=g&&l.elevation?l.elevation.exaggeration()*g.getElevationAt(Z.x,Z.y,!0):0,ue=l.projection.projectTilePoint(Z.x,Z.y,k);if(J>0){const De=l.projection.upVector(k,Z.x,Z.y);ue.x+=De[0]*B*J,ue.y+=De[1]*B*J,ue.z+=De[2]*B*J}const ve=x?Z:Si(ue.x,ue.y,ue.z,f),Re=x?a.tilespaceRays.map((De=>Wr(De,J))):a.queryGeometry.screenGeometry,Ne=lh([],[ue.x,ue.y,ue.z,1],f);if(!w&&x?R*=Ne[3]/l.cameraToCenterDistance:w&&!x&&(R*=l.cameraToCenterDistance/Ne[3]),x){const De=ei((G.y/Rn+k.y)/(1<<k.z));R/=l.projection.pixelsPerMeter(De,1)/Dl(1,De)}if(Lf(Re,ve,R))return!0}return!1}function Si(a,i,l,f){const g=lh([],[a,i,l,1],f);return new se(g[0]/g[3],g[1]/g[3])}const Wi=If(0,0,0),$r=If(0,0,1);function Wr(a,i){const l=Cg();return Wi[2]=i,a.intersectsPlane(Wi,$r,l),new se(l[0],l[1])}class Ri extends v_{}function rl(a,{width:i,height:l},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*l*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(i*l*f);return a.width=i,a.height=l,a.data=g,a}function ph(a,i,l){const{width:f,height:g}=i;f===a.width&&g===a.height||(ld(a,i,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,f),height:Math.min(a.height,g)},l),a.width=f,a.height=g,a.data=i.data)}function ld(a,i,l,f,g,x){if(g.width===0||g.height===0)return i;if(g.width>a.width||g.height>a.height||l.x>a.width-g.width||l.y>a.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||f.x>i.width-g.width||f.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=a.data,C=i.data;for(let R=0;R<g.height;R++){const k=((l.y+R)*a.width+l.x)*x,B=((f.y+R)*i.width+f.x)*x;for(let j=0;j<g.width*x;j++)C[B+j]=w[k+j]}return i}fn(Ri,"HeatmapBucket",{omit:["layers"]});class Mc{constructor(i,l){rl(this,i,1,l)}resize(i){ph(this,new Mc(i),1)}clone(){return new Mc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,g,x){ld(i,l,f,g,x,1)}}class Ms{constructor(i,l){rl(this,i,4,l)}resize(i){ph(this,new Ms(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Ms({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,g,x){ld(i,l,f,g,x,4)}}fn(Mc,"AlphaImage"),fn(Ms,"RGBAImage");var Rs={paint:new Le({"heatmap-radius":new be(xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new be(xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new oe(xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pe(xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new oe(xt.paint_heatmap["heatmap-opacity"])})};function fu(a){const i={},l=a.resolution||256,f=a.clips?a.clips.length:1,g=a.image||new Ms({width:l,height:f}),x=(w,C,R)=>{i[a.evaluationKey]=R;const k=a.expression.evaluate(i);g.data[w+C+0]=Math.floor(255*k.r/k.a),g.data[w+C+1]=Math.floor(255*k.g/k.a),g.data[w+C+2]=Math.floor(255*k.b/k.a),g.data[w+C+3]=Math.floor(255*k.a)};if(a.clips)for(let w=0,C=0;w<f;++w,C+=4*l)for(let R=0,k=0;R<l;R++,k+=4){const B=R/(l-1),{start:j,end:G}=a.clips[w];x(C,k,j*(1-B)+G*B)}else for(let w=0,C=0;w<l;w++,C+=4)x(0,C,w/(l-1));return g}var Bf={paint:new Le({"hillshade-illumination-direction":new oe(xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new oe(xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new oe(xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new oe(xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new oe(xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new oe(xt.paint_hillshade["hillshade-accent-color"])})};const O0=Qe([{name:"a_pos",components:2,type:"Int16"}],4),{members:kl}=O0;var cd={exports:{}};function ud(a,i,l){l=l||2;var f,g,x,w,C,R,k,B=i&&i.length,j=B?i[0]*l:a.length,G=Ma(a,0,j,l,!0),Z=[];if(!G||G.next===G.prev)return Z;if(B&&(G=(function(ue,ve,Re,Ne){var De,ze,je,Ue=[];for(De=0,ze=ve.length;De<ze;De++)(je=Ma(ue,ve[De]*Ne,De<ze-1?ve[De+1]*Ne:ue.length,Ne,!1))===je.next&&(je.steiner=!0),Ue.push(z0(je));for(Ue.sort(co),De=0;De<Ue.length;De++)Re=fd(Ue[De],Re);return Re})(a,i,G,l)),a.length>80*l){f=x=a[0],g=w=a[1];for(var J=l;J<j;J+=l)(C=a[J])<f&&(f=C),(R=a[J+1])<g&&(g=R),C>x&&(x=C),R>w&&(w=R);k=(k=Math.max(x-f,w-g))!==0?32767/k:0}return hd(G,Z,l,f,g,k,0),Z}function Ma(a,i,l,f,g){var x,w;if(g===kg(a,i,l,f)>0)for(x=i;x<l;x+=f)w=Z1(x,a[x],a[x+1],w);else for(x=l-f;x>=i;x-=f)w=Z1(x,a[x],a[x+1],w);return w&&rm(w,w.next)&&(ec(w),w=w.next),w}function mh(a,i){if(!a)return a;i||(i=a);var l,f=a;do if(l=!1,f.steiner||!rm(f,f.next)&&ts(f.prev,f,f.next)!==0)f=f.next;else{if(ec(f),(f=i=f.prev)===f.next)break;l=!0}while(l||f!==i);return i}function hd(a,i,l,f,g,x,w){if(a){!w&&x&&(function(B,j,G,Z){var J=B;do J.z===0&&(J.z=Rc(J.x,J.y,j,G,Z)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==B);J.prevZ.nextZ=null,J.prevZ=null,(function(ue){var ve,Re,Ne,De,ze,je,Ue,ht,at=1;do{for(Re=ue,ue=null,ze=null,je=0;Re;){for(je++,Ne=Re,Ue=0,ve=0;ve<at&&(Ue++,Ne=Ne.nextZ);ve++);for(ht=at;Ue>0||ht>0&&Ne;)Ue!==0&&(ht===0||!Ne||Re.z<=Ne.z)?(De=Re,Re=Re.nextZ,Ue--):(De=Ne,Ne=Ne.nextZ,ht--),ze?ze.nextZ=De:ue=De,De.prevZ=ze,ze=De;Re=Ne}ze.nextZ=null,at*=2}while(je>1)})(J)})(a,f,g,x);for(var C,R,k=a;a.prev!==a.next;)if(C=a.prev,R=a.next,x?b_(a,f,g,x):X1(a))i.push(C.i/l|0),i.push(a.i/l|0),i.push(R.i/l|0),ec(a),a=R.next,k=R.next;else if((a=R)===k){w?w===1?hd(a=w_(mh(a),i,l),i,l,f,g,x,2):w===2&&dd(a,i,l,f,g,x):hd(mh(a),i,l,f,g,x,1);break}}}function X1(a){var i=a.prev,l=a,f=a.next;if(ts(i,l,f)>=0)return!1;for(var g=i.x,x=l.x,w=f.x,C=i.y,R=l.y,k=f.y,B=g<x?g<w?g:w:x<w?x:w,j=C<R?C<k?C:k:R<k?R:k,G=g>x?g>w?g:w:x>w?x:w,Z=C>R?C>k?C:k:R>k?R:k,J=f.next;J!==i;){if(J.x>=B&&J.x<=G&&J.y>=j&&J.y<=Z&&pd(g,C,x,R,w,k,J.x,J.y)&&ts(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function b_(a,i,l,f){var g=a.prev,x=a,w=a.next;if(ts(g,x,w)>=0)return!1;for(var C=g.x,R=x.x,k=w.x,B=g.y,j=x.y,G=w.y,Z=C<R?C<k?C:k:R<k?R:k,J=B<j?B<G?B:G:j<G?j:G,ue=C>R?C>k?C:k:R>k?R:k,ve=B>j?B>G?B:G:j>G?j:G,Re=Rc(Z,J,i,l,f),Ne=Rc(ue,ve,i,l,f),De=a.prevZ,ze=a.nextZ;De&&De.z>=Re&&ze&&ze.z<=Ne;){if(De.x>=Z&&De.x<=ue&&De.y>=J&&De.y<=ve&&De!==g&&De!==w&&pd(C,B,R,j,k,G,De.x,De.y)&&ts(De.prev,De,De.next)>=0||(De=De.prevZ,ze.x>=Z&&ze.x<=ue&&ze.y>=J&&ze.y<=ve&&ze!==g&&ze!==w&&pd(C,B,R,j,k,G,ze.x,ze.y)&&ts(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;De&&De.z>=Re;){if(De.x>=Z&&De.x<=ue&&De.y>=J&&De.y<=ve&&De!==g&&De!==w&&pd(C,B,R,j,k,G,De.x,De.y)&&ts(De.prev,De,De.next)>=0)return!1;De=De.prevZ}for(;ze&&ze.z<=Ne;){if(ze.x>=Z&&ze.x<=ue&&ze.y>=J&&ze.y<=ve&&ze!==g&&ze!==w&&pd(C,B,R,j,k,G,ze.x,ze.y)&&ts(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function w_(a,i,l){var f=a;do{var g=f.prev,x=f.next.next;!rm(g,x)&&il(g,f,f.next,x)&&im(g,x)&&im(x,g)&&(i.push(g.i/l|0),i.push(f.i/l|0),i.push(x.i/l|0),ec(f),ec(f.next),f=a=x),f=f.next}while(f!==a);return mh(f)}function dd(a,i,l,f,g,x){var w=a;do{for(var C=w.next.next;C!==w.prev;){if(w.i!==C.i&&K1(w,C)){var R=N0(w,C);return w=mh(w,w.next),R=mh(R,R.next),hd(w,i,l,f,g,x,0),void hd(R,i,l,f,g,x,0)}C=C.next}w=w.next}while(w!==a)}function co(a,i){return a.x-i.x}function fd(a,i){var l=(function(g,x){var w,C=x,R=g.x,k=g.y,B=-1/0;do{if(k<=C.y&&k>=C.next.y&&C.next.y!==C.y){var j=C.x+(k-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(j<=R&&j>B&&(B=j,w=C.x<C.next.x?C:C.next,j===R))return w}C=C.next}while(C!==x);if(!w)return null;var G,Z=w,J=w.x,ue=w.y,ve=1/0;C=w;do R>=C.x&&C.x>=J&&R!==C.x&&pd(k<ue?R:B,k,J,ue,k<ue?B:R,k,C.x,C.y)&&(G=Math.abs(k-C.y)/(R-C.x),im(C,g)&&(G<ve||G===ve&&(C.x>w.x||C.x===w.x&&nm(w,C)))&&(w=C,ve=G)),C=C.next;while(C!==Z);return w})(a,i);if(!l)return i;var f=N0(l,a);return mh(f,f.next),mh(l,l.next)}function nm(a,i){return ts(a.prev,a,i.prev)<0&&ts(i.next,a,a.next)<0}function Rc(a,i,l,f,g){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function z0(a){var i=a,l=a;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==a);return l}function pd(a,i,l,f,g,x,w,C){return(g-w)*(i-C)>=(a-w)*(x-C)&&(a-w)*(f-C)>=(l-w)*(i-C)&&(l-w)*(x-C)>=(g-w)*(f-C)}function K1(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!(function(l,f){var g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==f.i&&g.next.i!==f.i&&il(g,g.next,l,f))return!0;g=g.next}while(g!==l);return!1})(a,i)&&(im(a,i)&&im(i,a)&&(function(l,f){var g=l,x=!1,w=(l.x+f.x)/2,C=(l.y+f.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&w<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==l);return x})(a,i)&&(ts(a.prev,a,i.prev)||ts(a,i.prev,i))||rm(a,i)&&ts(a.prev,a,a.next)>0&&ts(i.prev,i,i.next)>0)}function ts(a,i,l){return(i.y-a.y)*(l.x-i.x)-(i.x-a.x)*(l.y-i.y)}function rm(a,i){return a.x===i.x&&a.y===i.y}function il(a,i,l,f){var g=Wo(ts(a,i,l)),x=Wo(ts(a,i,f)),w=Wo(ts(l,f,a)),C=Wo(ts(l,f,i));return g!==x&&w!==C||!(g!==0||!Dg(a,l,i))||!(x!==0||!Dg(a,f,i))||!(w!==0||!Dg(l,a,f))||!(C!==0||!Dg(l,i,f))}function Dg(a,i,l){return i.x<=Math.max(a.x,l.x)&&i.x>=Math.min(a.x,l.x)&&i.y<=Math.max(a.y,l.y)&&i.y>=Math.min(a.y,l.y)}function Wo(a){return a>0?1:a<0?-1:0}function im(a,i){return ts(a.prev,a,a.next)<0?ts(a,i,a.next)>=0&&ts(a,a.prev,i)>=0:ts(a,i,a.prev)<0||ts(a,a.next,i)<0}function N0(a,i){var l=new sm(a.i,a.x,a.y),f=new sm(i.i,i.x,i.y),g=a.next,x=i.prev;return a.next=i,i.prev=a,l.next=g,g.prev=l,f.next=l,l.prev=f,x.next=f,f.prev=x,f}function Z1(a,i,l,f){var g=new sm(a,i,l);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function ec(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function sm(a,i,l){this.i=a,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kg(a,i,l,f){for(var g=0,x=i,w=l-f;x<l;x+=f)g+=(a[w]-a[x])*(a[x+1]+a[w+1]),w=x;return g}cd.exports=ud,cd.exports.default=ud,ud.deviation=function(a,i,l,f){var g=i&&i.length,x=Math.abs(kg(a,0,g?i[0]*l:a.length,l));if(g)for(var w=0,C=i.length;w<C;w++)x-=Math.abs(kg(a,i[w]*l,w<C-1?i[w+1]*l:a.length,l));var R=0;for(w=0;w<f.length;w+=3){var k=f[w]*l,B=f[w+1]*l,j=f[w+2]*l;R+=Math.abs((a[k]-a[j])*(a[B+1]-a[k+1])-(a[k]-a[B])*(a[j+1]-a[k+1]))}return x===0&&R===0?0:Math.abs((R-x)/x)},ud.flatten=function(a){for(var i=a[0][0].length,l={vertices:[],holes:[],dimensions:i},f=0,g=0;g<a.length;g++){for(var x=0;x<a[g].length;x++)for(var w=0;w<i;w++)l.vertices.push(a[g][x][w]);g>0&&l.holes.push(f+=a[g-1].length)}return l};var md=me(cd.exports);function Q1(a,i,l,f,g){B0(a,i,l,f||a.length-1,g||J1)}function B0(a,i,l,f,g){for(;f>l;){if(f-l>600){var x=f-l+1,w=i-l+1,C=Math.log(x),R=.5*Math.exp(2*C/3),k=.5*Math.sqrt(C*R*(x-R)/x)*(w-x/2<0?-1:1);B0(a,i,Math.max(l,Math.floor(i-w*R/x+k)),Math.min(f,Math.floor(i+(x-w)*R/x+k)),g)}var B=a[i],j=l,G=f;for(om(a,l,i),g(a[f],B)>0&&om(a,l,f);j<G;){for(om(a,j,G),j++,G--;g(a[j],B)<0;)j++;for(;g(a[G],B)>0;)G--}g(a[l],B)===0?om(a,l,G):om(a,++G,f),G<=i&&(l=G+1),i<=G&&(f=G-1)}}function om(a,i,l){var f=a[i];a[i]=a[l],a[l]=f}function J1(a,i){return a<i?-1:a>i?1:0}function am(a,i){const l=a.length;if(l<=1)return[a];const f=[];let g,x;for(let w=0;w<l;w++){const C=Lr(a[w]);C!==0&&(a[w].area=Math.abs(C),x===void 0&&(x=C<0),x===C<0?(g&&f.push(g),g=[a[w]]):g.push(a[w]))}if(g&&f.push(g),i>1)for(let w=0;w<f.length;w++)f[w].length<=i||(Q1(f[w],i,1,f[w].length-1,F0),f[w]=f[w].slice(0,i));return f}function F0(a,i){return i.area-a.area}function V0(a,i,l){const f=l.patternDependencies;let g=!1;for(const x of i){const w=x.paint.get(`${a}-pattern`);w.isConstant()||(g=!0);const C=w.constantOr(null);C&&(g=!0,f[C]=!0)}return g}function U0(a,i,l,f,g){const x=g.patternDependencies;for(const w of i){const C=w.paint.get(`${a}-pattern`).value;if(C.kind!=="constant"){let R=C.evaluate({zoom:f},l,{},g.availableImages);R=R&&R.name?R.name:R,x[R]=!0,l.patterns[w.id]=R}}return l}class T_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ut,this.indexArray=new xn,this.indexArray2=new Pr,this.programConfigurations=new au(i.layers,i.zoom),this.segments=new gs,this.segments2=new gs,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id)),this.projection=i.projection}populate(i,l,f,g){this.hasPattern=V0("fill",this.layers,l);const x=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:C,id:R,index:k,sourceLayerIndex:B}of i){const j=this.layers[0]._featureFilter.needGeometry,G=Ho(C,j);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),G,f))continue;const Z=x?x.evaluate(G,{},f,l.availableImages):void 0,J={id:R,properties:C.properties,type:C.type,sourceLayerIndex:B,index:k,geometry:j?G.geometry:Is(C,f,g),patterns:{},sortKey:Z};w.push(J)}x&&w.sort(((C,R)=>C.sortKey-R.sortKey));for(const C of w){const{geometry:R,index:k,sourceLayerIndex:B}=C;if(this.hasPattern){const j=U0("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(j)}else this.addFeature(C,R,k,f,{},l.availableImages);l.featureIndex.insert(i[k].feature,R,k,B,this.index)}}update(i,l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f,g)}addFeatures(i,l,f,g,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,l,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,kl),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,f,g,x,w=[]){for(const C of am(l,500)){let R=0;for(const J of C)R+=J.length;const k=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),B=k.vertexLength,j=[],G=[];for(const J of C){if(J.length===0)continue;J!==C[0]&&G.push(j.length/2);const ue=this.segments2.prepareSegment(J.length,this.layoutVertexArray,this.indexArray2),ve=ue.vertexLength;this.layoutVertexArray.emplaceBack(J[0].x,J[0].y),this.indexArray2.emplaceBack(ve+J.length-1,ve),j.push(J[0].x),j.push(J[0].y);for(let Re=1;Re<J.length;Re++)this.layoutVertexArray.emplaceBack(J[Re].x,J[Re].y),this.indexArray2.emplaceBack(ve+Re-1,ve+Re),j.push(J[Re].x),j.push(J[Re].y);ue.vertexLength+=J.length,ue.primitiveLength+=J.length}const Z=md(j,G);for(let J=0;J<Z.length;J+=3)this.indexArray.emplaceBack(B+Z[J],B+Z[J+1],B+Z[J+2]);k.vertexLength+=R,k.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,w,g)}}fn(T_,"FillBucket",{omit:["layers","patternFeatures"]});const ew=new Le({"fill-sort-key":new be(xt.layout_fill["fill-sort-key"])});var tw={paint:new Le({"fill-antialias":new oe(xt.paint_fill["fill-antialias"]),"fill-opacity":new be(xt.paint_fill["fill-opacity"]),"fill-color":new be(xt.paint_fill["fill-color"]),"fill-outline-color":new be(xt.paint_fill["fill-outline-color"]),"fill-translate":new oe(xt.paint_fill["fill-translate"]),"fill-translate-anchor":new oe(xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new be(xt.paint_fill["fill-pattern"])}),layout:ew};const lm=Qe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),E_=Qe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),nw=Qe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:rw}=lm;var Pg={},iw=ee,j0=Ff;function Ff(a,i,l,f,g){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=f,this._values=g,a.readFields(S_,this,i)}function S_(a,i,l){a==1?i.id=l.readVarint():a==2?(function(f,g){for(var x=f.readVarint()+f.pos;f.pos<x;){var w=g._keys[f.readVarint()],C=g._values[f.readVarint()];g.properties[w]=C}})(l,i):a==3?i.type=l.readVarint():a==4&&(i._geometry=l.pos)}function sw(a){for(var i,l,f=0,g=0,x=a.length,w=x-1;g<x;w=g++)f+=((l=a[w]).x-(i=a[g]).x)*(i.y+l.y);return f}Ff.types=["Unknown","Point","LineString","Polygon"],Ff.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,l=a.readVarint()+a.pos,f=1,g=0,x=0,w=0,C=[];a.pos<l;){if(g<=0){var R=a.readVarint();f=7&R,g=R>>3}if(g--,f===1||f===2)x+=a.readSVarint(),w+=a.readSVarint(),f===1&&(i&&C.push(i),i=[]),i.push(new iw(x,w));else{if(f!==7)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&C.push(i),C},Ff.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,l=1,f=0,g=0,x=0,w=1/0,C=-1/0,R=1/0,k=-1/0;a.pos<i;){if(f<=0){var B=a.readVarint();l=7&B,f=B>>3}if(f--,l===1||l===2)(g+=a.readSVarint())<w&&(w=g),g>C&&(C=g),(x+=a.readSVarint())<R&&(R=x),x>k&&(k=x);else if(l!==7)throw new Error("unknown command "+l)}return[w,R,C,k]},Ff.prototype.toGeoJSON=function(a,i,l){var f,g,x=this.extent*Math.pow(2,l),w=this.extent*a,C=this.extent*i,R=this.loadGeometry(),k=Ff.types[this.type];function B(Z){for(var J=0;J<Z.length;J++){var ue=Z[J];Z[J]=[360*(ue.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+C)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(f=0;f<R.length;f++)j[f]=R[f][0];B(R=j);break;case 2:for(f=0;f<R.length;f++)B(R[f]);break;case 3:for(R=(function(Z){var J=Z.length;if(J<=1)return[Z];for(var ue,ve,Re=[],Ne=0;Ne<J;Ne++){var De=sw(Z[Ne]);De!==0&&(ve===void 0&&(ve=De<0),ve===De<0?(ue&&Re.push(ue),ue=[Z[Ne]]):ue.push(Z[Ne]))}return ue&&Re.push(ue),Re})(R),f=0;f<R.length;f++)for(g=0;g<R[f].length;g++)B(R[f][g])}R.length===1?R=R[0]:k="Multi"+k;var G={type:"Feature",geometry:{type:k,coordinates:R},properties:this.properties};return"id"in this&&(G.id=this.id),G};var ow=j0,Di=C_;function C_(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(aC,this,i),this.length=this._features.length}function aC(a,i,l){a===15?i.version=l.readVarint():a===1?i.name=l.readString():a===5?i.extent=l.readVarint():a===2?i._features.push(l.pos):a===3?i._keys.push(l.readString()):a===4&&i._values.push((function(f){for(var g=null,x=f.readVarint()+f.pos;f.pos<x;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g})(l))}C_.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new ow(this._pbf,i,this.extent,this._keys,this._values)};var aw=Di;function lC(a,i,l){if(a===3){var f=new aw(l,l.readVarint()+l.pos);f.length&&(i[f.name]=f)}}var $0=Pg.VectorTile=function(a,i){this.layers=a.readFields(lC,{},i)},A_=Pg.VectorTileFeature=j0;function Vf(a,i,l,f){const g=[],x=f===0?(w,C,R,k,B,j)=>{w.push(new se(j,R+(j-C)/(k-C)*(B-R)))}:(w,C,R,k,B,j)=>{w.push(new se(C+(j-R)/(B-R)*(k-C),j))};for(const w of a){const C=[];for(const R of w){if(R.length<=2)continue;const k=[];for(let G=0;G<R.length-1;G++){const Z=R[G].x,J=R[G].y,ue=R[G+1].x,ve=R[G+1].y,Re=f===0?Z:J,Ne=f===0?ue:ve;Re<i?Ne>i&&x(k,Z,J,ue,ve,i):Re>l?Ne<l&&x(k,Z,J,ue,ve,l):k.push(R[G]),Ne<i&&Re>=i&&x(k,Z,J,ue,ve,i),Ne>l&&Re<=l&&x(k,Z,J,ue,ve,l)}let B=R[R.length-1];const j=f===0?B.x:B.y;j>=i&&j<=l&&k.push(B),k.length&&(B=k[k.length-1],k[0].x===B.x&&k[0].y===B.y||k.push(k[0]),C.push(k))}C.length&&g.push(C)}return g}Pg.VectorTileLayer=Di;const cm=A_.types,q0=Math.pow(2,13);function gd(a,i,l,f,g,x,w,C){a.emplaceBack((i<<1)+w,(l<<1)+x,(Math.floor(f*q0)<<1)+g,Math.round(C))}function Uf(a,i,l){a.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class gh{constructor(){this.acc=new se(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new se(i.x,i.y),this.max=new se(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const f=this.min,g=this.max;i.x<f.x?f.x=i.x:i.x>g.x&&(g.x=i.x),i.y<f.y?f.y=i.y:i.y>g.y&&(g.y=i.y),((i.x===0||i.x===Rn)&&i.x===l.x)!=((i.y===0||i.y===Rn)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,rr(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>Rn!=i.x>Rn&&this.addBorderIntersection(1,rr(l.y,i.y,(Rn-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,rr(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>Rn!=i.y>Rn&&this.addBorderIntersection(3,rr(l.x,i.x,(Rn-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[i];l<f[0]&&(f[0]=l),l>f[1]&&(f[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const f=i.x===0?0:1;this.addBorderIntersection(f,l.y),this.addBorderIntersection(f,i.y)}else{const f=i.y===0?2:3;this.addBorderIntersection(f,l.x),this.addBorderIntersection(f,i.x)}}centroid(){const i=this.polyCount.reduce(((l,f)=>l+f.edges),0);return i!==0?this.acc.div(i)._round():new se(0,0)}span(){return new se(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((i,l)=>i+ +(l[0]!==Number.MAX_VALUE)),0)}}class sl{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new vt,this.centroidVertexArray=new el,this.indexArray=new xn,this.programConfigurations=new au(i.layers,i.zoom),this.segments=new gs,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id)),this.enableTerrain=i.enableTerrain}populate(i,l,f,g){this.features=[],this.hasPattern=V0("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=(function(x){const w=Math.exp(Math.PI*(1-x.y/(1<<x.z)*2));return 80150034*w/(w*w+1)/Rn/(1<<x.z)})(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:x,id:w,index:C,sourceLayerIndex:R}of i){const k=this.layers[0]._featureFilter.needGeometry,B=Ho(x,k);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),B,f))continue;const j={id:w,sourceLayerIndex:R,index:C,geometry:k?B.geometry:Is(x,f,g),properties:x.properties,type:x.type,patterns:{}},G=this.layoutVertexArray.length;this.hasPattern?this.features.push(U0("fill-extrusion",this.layers,j,this.zoom,l)):this.addFeature(j,j.geometry,C,f,{},l.availableImages,g),l.featureIndex.insert(x,j.geometry,C,R,this.index,G)}this.sortBorders()}addFeatures(i,l,f,g,x){for(const w of this.features){const{geometry:C}=w;this.addFeature(w,C,w.index,l,f,g,x)}this.sortBorders()}update(i,l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rw),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,nw.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,E_.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,f,g,x,w,C){const R=[new se(0,0),new se(Rn,Rn)],k=C.projection,B=k.name==="globe",j=this.enableTerrain&&!B?new gh:null,G=cm[i.type]==="Polygon";B&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Nt);const Z=am(l,500);for(let Re=Z.length-1;Re>=0;Re--){const Ne=Z[Re];(Ne.length===0||(J=Ne[0]).every((De=>De.x<=0))||J.every((De=>De.x>=Rn))||J.every((De=>De.y<=0))||J.every((De=>De.y>=Rn)))&&Z.splice(Re,1)}var J;let ue;if(B)ue=I_(Z,R,g);else{ue=[];for(const Re of Z)ue.push({polygon:Re,bounds:R})}const ve=G?this.edgeRadius:0;for(const{polygon:Re,bounds:Ne}of ue){let De=0,ze=0;for(const Ue of Re)G&&!Ue[0].equals(Ue[Ue.length-1])&&Ue.push(Ue[0]),ze+=G?Ue.length-1:Ue.length;const je=this.segments.prepareSegment((G?5:4)*ze,this.layoutVertexArray,this.indexArray);if(G){const Ue=[],ht=[];De=je.vertexLength;for(const wt of Re){let qt,pt;wt.length&&wt!==Re[0]&&ht.push(Ue.length/2),qt=wt[1].sub(wt[0])._perp()._unit();for(let Mt=1;Mt<wt.length;Mt++){const Rt=wt[Mt],Vt=wt[Mt===wt.length-1?1:Mt+1];let{x:Xt,y:bt}=Rt;if(ve){pt=Vt.sub(Rt)._perp()._unit();const cn=qt.add(pt)._unit(),_n=ve*Math.min(4,1/(qt.x*cn.x+qt.y*cn.y));Xt+=_n*cn.x,bt+=_n*cn.y,qt=pt}gd(this.layoutVertexArray,Xt,bt,0,0,1,1,0),je.vertexLength++,Ue.push(Rt.x,Rt.y),B&&Uf(this.layoutVertexExtArray,k.projectTilePoint(Xt,bt,g),k.upVector(g,Xt,bt))}}const at=md(Ue,ht);for(let wt=0;wt<at.length;wt+=3)this.indexArray.emplaceBack(De+at[wt],De+at[wt+2],De+at[wt+1]),je.primitiveLength++}for(const Ue of Re){j&&Ue.length&&j.startRing(Ue[0]);let ht,at,wt,qt=Ue.length>4&&W0(Ue[Ue.length-2],Ue[0],Ue[1]),pt=ve?cC(Ue[Ue.length-2],Ue[0],Ue[1],ve):0;at=Ue[1].sub(Ue[0])._perp()._unit();let Mt=!0;for(let Rt=1,Vt=0;Rt<Ue.length;Rt++){let Xt=Ue[Rt-1],bt=Ue[Rt];const cn=Ue[Rt===Ue.length-1?1:Rt+1];if(j&&G&&j.currentPolyCount.top++,G0(bt,Xt,Ne)){ve&&(at=cn.sub(bt)._perp()._unit(),Mt=!Mt);continue}j&&j.append(bt,Xt);const _n=bt.sub(Xt)._perp(),un=_n.x/(Math.abs(_n.x)+Math.abs(_n.y)),lr=_n.y>0?1:0,Zt=Xt.dist(bt);if(Vt+Zt>32768&&(Vt=0),ve){wt=cn.sub(bt)._perp()._unit();let ur=H0(Xt,bt,cn,um(at,wt),ve);isNaN(ur)&&(ur=0);const Un=bt.sub(Xt)._unit();Xt=Xt.add(Un.mult(pt))._round(),bt=bt.add(Un.mult(-ur))._round(),pt=ur,at=wt}const kn=je.vertexLength,cr=Ue.length>4&&W0(Xt,bt,cn);let Xr=Y0(Vt,qt,Mt);if(gd(this.layoutVertexArray,Xt.x,Xt.y,un,lr,0,0,Xr),gd(this.layoutVertexArray,Xt.x,Xt.y,un,lr,0,1,Xr),Vt+=Zt,Xr=Y0(Vt,cr,!Mt),qt=cr,gd(this.layoutVertexArray,bt.x,bt.y,un,lr,0,0,Xr),gd(this.layoutVertexArray,bt.x,bt.y,un,lr,0,1,Xr),je.vertexLength+=4,this.indexArray.emplaceBack(kn+0,kn+1,kn+2),this.indexArray.emplaceBack(kn+1,kn+3,kn+2),je.primitiveLength+=2,ve){const ur=De+(Rt===1?Ue.length-2:Rt-2),Un=Rt===1?De:ur+1;if(this.indexArray.emplaceBack(kn+1,ur,kn+3),this.indexArray.emplaceBack(ur,Un,kn+3),je.primitiveLength+=2,ht===void 0&&(ht=kn),!G0(cn,Ue[Rt],Ne)){const Xi=Rt===Ue.length-1?ht:je.vertexLength;this.indexArray.emplaceBack(kn+2,kn+3,Xi),this.indexArray.emplaceBack(kn+3,Xi+1,Xi),this.indexArray.emplaceBack(kn+3,Un,Xi+1),je.primitiveLength+=3}Mt=!Mt}if(B){const ur=this.layoutVertexExtArray,Un=k.projectTilePoint(Xt.x,Xt.y,g),Xi=k.projectTilePoint(bt.x,bt.y,g),dr=k.upVector(g,Xt.x,Xt.y),fr=k.upVector(g,bt.x,bt.y);Uf(ur,Un,dr),Uf(ur,Un,dr),Uf(ur,Xi,fr),Uf(ur,Xi,fr)}}G&&(De+=Ue.length-1)}}if(j&&j.polyCount.length>0){if(j.borders){j.vertexArrayOffset=this.centroidVertexArray.length;const Re=j.borders,Ne=this.featuresOnBorder.push(j)-1;for(let De=0;De<4;De++)Re[De][0]!==Number.MAX_VALUE&&this.borders[De].push(Ne)}this.encodeCentroid(j.borders?void 0:j.centroid(),j)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,w,g)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort(((l,f)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[f].borders[i][0]))}encodeCentroid(i,l,f=!0){let g,x;if(i)if(i.y!==0){const C=l.span()._mult(this.tileToMeter);g=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(C.x/10)),x=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else g=Math.ceil(7*(i.x+450)),x=0;else g=0,x=+f;let w=f?this.centroidVertexArray.length:l.vertexArrayOffset;for(const C of l.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let R=0;R<C.top;R++)this.centroidVertexArray.emplace(w++,g,x);for(let R=0;R<2*C.edges;R++)this.centroidVertexArray.emplace(w++,0,x),this.centroidVertexArray.emplace(w++,g,x)}}}function um(a,i){const l=a.add(i)._unit();return a.x*l.x+a.y*l.y}function cC(a,i,l,f){const g=i.sub(a)._perp()._unit(),x=l.sub(i)._perp()._unit();return H0(a,i,l,um(g,x),f)}function H0(a,i,l,f,g){const x=Math.sqrt(1-f*f);return Math.min(a.dist(i)/3,i.dist(l)/3,g*x/f)}function G0(a,i,l){return a.x<l[0].x&&i.x<l[0].x||a.x>l[1].x&&i.x>l[1].x||a.y<l[0].y&&i.y<l[0].y||a.y>l[1].y&&i.y>l[1].y}function W0(a,i,l){if(a.x<0||a.x>=Rn||i.x<0||i.x>=Rn||l.x<0||l.x>=Rn)return!1;const f=l.sub(i),g=f.perp(),x=a.sub(i);return(f.x*x.x+f.y*x.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(x.x*x.x+x.y*x.y))>-.866&&g.x*x.x+g.y*x.y<0}function Y0(a,i,l){const f=i?2|a:-3&a;return l?1|f:-2&f}function lw(){const a=Math.PI/32,i=Math.tan(a),l=em;return l*Math.sqrt(1+2*i*i)-l}function I_(a,i,l){const f=1<<l.z,g=nl(l.x/f),x=nl((l.x+1)/f),w=ei(l.y/f),C=ei((l.y+1)/f);return(function(R,k,B,j,G=0,Z){const J=[];if(!R.length||!B||!j)return J;const ue=(Ue,ht)=>{for(const at of Ue)J.push({polygon:at,bounds:ht})},ve=Math.ceil(Math.log2(B)),Re=Math.ceil(Math.log2(j)),Ne=ve-Re,De=[];for(let Ue=0;Ue<Math.abs(Ne);Ue++)De.push(Ne>0?0:1);for(let Ue=0;Ue<Math.min(ve,Re);Ue++)De.push(0),De.push(1);let ze=R;if(ze=Vf(ze,k[0].y-G,k[1].y+G,1),ze=Vf(ze,k[0].x-G,k[1].x+G,0),!ze.length)return J;const je=[];for(De.length?je.push({polygons:ze,bounds:k,depth:0}):ue(ze,k);je.length;){const Ue=je.pop(),ht=Ue.depth,at=De[ht],wt=Ue.bounds[0],qt=Ue.bounds[1],pt=at===0?wt.x:wt.y,Mt=at===0?qt.x:qt.y,Rt=Z?Z(at,pt,Mt):.5*(pt+Mt),Vt=Vf(Ue.polygons,pt-G,Rt+G,at),Xt=Vf(Ue.polygons,Rt-G,Mt+G,at);if(Vt.length){const bt=[wt,new se(at===0?Rt:qt.x,at===1?Rt:qt.y)];De.length>ht+1?je.push({polygons:Vt,bounds:bt,depth:ht+1}):ue(Vt,bt)}if(Xt.length){const bt=[new se(at===0?Rt:wt.x,at===1?Rt:wt.y),qt];De.length>ht+1?je.push({polygons:Xt,bounds:bt,depth:ht+1}):ue(Xt,bt)}}return J})(a,i,Math.ceil((x-g)/11.25),Math.ceil((w-C)/11.25),1,((R,k,B)=>{if(R===0)return .5*(k+B);{const j=ei((l.y+k/Rn)/f);return(Ni(.5*(ei((l.y+B/Rn)/f)+j))*f-l.y)*Rn}}))}fn(sl,"FillExtrusionBucket",{omit:["layers","features"]}),fn(gh,"PartMetadata");const cw=new Le({"fill-extrusion-edge-radius":new oe(xt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var uw={paint:new Le({"fill-extrusion-opacity":new oe(xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new be(xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new oe(xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new oe(xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new be(xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new be(xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new be(xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new oe(xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new oe(xt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new oe(xt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new oe(xt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:cw};function hw(a,i,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[a*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class hm{constructor(i,l,f){this.z=i,this.x=l,this.y=f,this.key=Lg(0,i,i,l,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const f=(function(x,w,C){var R=hw(256*x,256*(w=Math.pow(2,C)-w-1),C),k=hw(256*(x+1),256*(w+1),C);return R[0]+","+R[1]+","+k[0]+","+k[1]})(this.x,this.y,this.z),g=(function(x,w,C){let R,k="";for(let B=x;B>0;B--)R=1<<B-1,k+=(w&R?1:0)+(C&R?2:0);return k})(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class M_{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Lg(i,l.z,l.z,l.x,l.y)}}class ua{constructor(i,l,f,g,x){this.overscaledZ=i,this.wrap=l,this.canonical=new hm(f,+g,+x),this.key=l===0&&i===f?this.canonical.key:Lg(l,i,f,g,x)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new ua(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ua(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return Lg(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-i;return Lg(this.wrap*+l,i,i,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new ua(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new ua(l,this.wrap,l,f,g),new ua(l,this.wrap,l,f+1,g),new ua(l,this.wrap,l,f,g+1),new ua(l,this.wrap,l,f+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new ua(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new ua(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new M_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Lg(a,i,l,f,g){const x=1<<Math.min(l,22);let w=x*(g%x)+f%x;return a&&l<22&&(w+=x*x*((a<0?-2*a-1:2*a)%(1<<2*(22-l)))),16*(32*w+l)+(i-l)}fn(hm,"CanonicalTileID"),fn(ua,"OverscaledTileID",{omit:["projMatrix"]});class pu extends se{constructor(i,l,f){super(i,l),this.z=f}}function Og(a,i){return a.x*i.x+a.y*i.y}function X0(a,i){if(a.length===1){let l=0;const f=i[l++];let g;for(;!g||f.equals(g);)if(g=i[l++],!g)return 1/0;for(;l<i.length;l++){const x=i[l],w=a[0],C=g.sub(f),R=x.sub(f),k=w.sub(f),B=Og(C,C),j=Og(C,R),G=Og(R,R),Z=Og(k,C),J=Og(k,R),ue=B*G-j*j,ve=(G*Z-j*J)/ue,Re=(B*J-j*Z)/ue,Ne=f.z*(1-ve-Re)+g.z*ve+x.z*Re;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const f of i)l=Math.min(l,f.z);return l}}function Fr(a,i,l,f,g,x,w,C){const R=w*g.getElevationAt(a,i,!0,!0),k=x[0]!==0,B=k?x[1]===0?w*(x[0]/7-450):w*(function(j,G,Z){const J=Math.floor(G[0]/8),ue=Math.floor(G[1]/8),ve=10*(G[0]-8*J),Re=10*(G[1]-8*ue),Ne=j.getElevationAt(J,ue,!0,!0),De=j.getMeterToDEM(Z),ze=Math.floor(.5*(ve*De-1)),je=Math.floor(.5*(Re*De-1)),Ue=j.tileCoordToPixel(J,ue),ht=2*ze+1,at=2*je+1,wt=(function(Xt,bt,cn,_n,un){return[Xt.getElevationAtPixel(bt,cn,!0),Xt.getElevationAtPixel(bt+un,cn,!0),Xt.getElevationAtPixel(bt,cn+un,!0),Xt.getElevationAtPixel(bt+_n,cn+un,!0)]})(j,Ue.x-ze,Ue.y-je,ht,at),qt=Math.abs(wt[0]-wt[1]),pt=Math.abs(wt[2]-wt[3]),Mt=Math.abs(wt[0]-wt[2])+Math.abs(wt[1]-wt[3]),Rt=Math.min(.25,.5*De*(qt+pt)/ht),Vt=Math.min(.25,.5*De*Mt/at);return Ne+Math.max(Rt*ve,Vt*Re)})(g,x,C):R;return{base:R+(l===0)?-1:l,top:k?Math.max(B+f,R+l+2):R+f}}const K0=Qe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:R_}=K0,Z0=Qe([{name:"a_packed",components:4,type:"Float32"}]),{members:dw}=Z0,Q0=A_.types,zg=Math.cos(Math.PI/180*37.5);class jf{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((l=>{this.gradients[l.id]={}})),this.layoutVertexArray=new lt,this.layoutVertexArray2=new zt,this.indexArray=new xn,this.programConfigurations=new au(i.layers,i.zoom),this.segments=new gs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f,g){this.hasPattern=V0("line",this.layers,l);const x=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:B,id:j,index:G,sourceLayerIndex:Z}of i){const J=this.layers[0]._featureFilter.needGeometry,ue=Ho(B,J);if(!this.layers[0]._featureFilter.filter(new U(this.zoom),ue,f))continue;const ve=x?x.evaluate(ue,{},f):void 0,Re={id:j,properties:B.properties,type:B.type,sourceLayerIndex:Z,index:G,geometry:J?ue.geometry:Is(B,f,g),patterns:{},sortKey:ve};w.push(Re)}x&&w.sort(((B,j)=>B.sortKey-j.sortKey));const{lineAtlas:C,featureIndex:R}=l,k=this.addConstantDashes(C);for(const B of w){const{geometry:j,index:G,sourceLayerIndex:Z}=B;if(k&&this.addFeatureDashes(B,C),this.hasPattern){const J=U0("line",this.layers,B,this.zoom,l);this.patternFeatures.push(J)}else this.addFeature(B,j,G,f,C.positions,l.availableImages);R.insert(i[G].feature,j,G,Z,this.index)}}addConstantDashes(i){let l=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(g.kind!=="constant"||x.kind!=="constant")l=!0;else{const w=x.value,C=g.value;if(!C)continue;i.addDash(C,w)}}return l}addFeatureDashes(i,l){const f=this.zoom;for(const g of this.layers){const x=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if(x.kind==="constant"&&w.kind==="constant")continue;let C,R;if(x.kind==="constant"){if(C=x.value,!C)continue}else C=x.evaluate({zoom:f},i);R=w.kind==="constant"?w.value:w.evaluate({zoom:f},i),l.addDash(C,R),i.patterns[g.id]=l.getKey(C,R)}}update(i,l,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,f,g)}addFeatures(i,l,f,g,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,l,f,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,dw)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,f,g,x,w){const C=this.layers[0].layout,R=C.get("line-join").evaluate(i,{}),k=C.get("line-cap").evaluate(i,{}),B=C.get("line-miter-limit"),j=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const G of l)this.addLine(G,i,R,k,B,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,x,w,g)}addLine(i,l,f,g,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<i.length-1;Re++)this.totalDistance+=i[Re].dist(i[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=Q0[l.type]==="Polygon";let R=i.length;for(;R>=2&&i[R-1].equals(i[R-2]);)R--;let k=0;for(;k<R-1&&i[k].equals(i[k+1]);)k++;if(R<(C?3:2))return;f==="bevel"&&(x=1.05);const B=this.overscaling<=16?15*Rn/(512*this.overscaling):0,j=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let G,Z,J,ue,ve;this.e1=this.e2=-1,C&&(G=i[R-2],ve=i[k].sub(G)._unit()._perp());for(let Re=k;Re<R;Re++){if(J=Re===R-1?C?i[k+1]:void 0:i[Re+1],J&&i[Re].equals(J))continue;ve&&(ue=ve),G&&(Z=G),G=i[Re],ve=J?J.sub(G)._unit()._perp():ue,ue=ue||ve;let Ne=ue.add(ve);Ne.x===0&&Ne.y===0||Ne._unit();const De=ue.x*ve.x+ue.y*ve.y,ze=Ne.x*ve.x+Ne.y*ve.y,je=ze!==0?1/ze:1/0,Ue=2*Math.sqrt(2-2*ze),ht=ze<zg&&Z&&J,at=ue.x*ve.y-ue.y*ve.x>0;if(ht&&Re>k){const pt=G.dist(Z);if(pt>2*B){const Mt=G.sub(G.sub(Z)._mult(B/pt)._round());this.updateDistance(Z,Mt),this.addCurrentVertex(Mt,ue,0,0,j),Z=Mt}}const wt=Z&&J;let qt=wt?f:C?"butt":g;if(wt&&qt==="round"&&(je<w?qt="miter":je<=2&&(qt="fakeround")),qt==="miter"&&je>x&&(qt="bevel"),qt==="bevel"&&(je>2&&(qt="flipbevel"),je<x&&(qt="miter")),Z&&this.updateDistance(Z,G),qt==="miter")Ne._mult(je),this.addCurrentVertex(G,Ne,0,0,j);else if(qt==="flipbevel"){if(je>100)Ne=ve.mult(-1);else{const pt=je*ue.add(ve).mag()/ue.sub(ve).mag();Ne._perp()._mult(pt*(at?-1:1))}this.addCurrentVertex(G,Ne,0,0,j),this.addCurrentVertex(G,Ne.mult(-1),0,0,j)}else if(qt==="bevel"||qt==="fakeround"){const pt=-Math.sqrt(je*je-1),Mt=at?pt:0,Rt=at?0:pt;if(Z&&this.addCurrentVertex(G,ue,Mt,Rt,j),qt==="fakeround"){const Vt=Math.round(180*Ue/Math.PI/20);for(let Xt=1;Xt<Vt;Xt++){let bt=Xt/Vt;if(bt!==.5){const _n=bt-.5;bt+=bt*_n*(bt-1)*((1.0904+De*(De*(3.55645-1.43519*De)-3.2452))*_n*_n+(.848013+De*(.215638*De-1.06021)))}const cn=ve.sub(ue)._mult(bt)._add(ue)._unit()._mult(at?-1:1);this.addHalfVertex(G,cn.x,cn.y,!1,at,0,j)}}J&&this.addCurrentVertex(G,ve,-Mt,-Rt,j)}else if(qt==="butt")this.addCurrentVertex(G,Ne,0,0,j);else if(qt==="square"){const pt=Z?1:-1;Z||this.addCurrentVertex(G,Ne,pt,pt,j),this.addCurrentVertex(G,Ne,0,0,j),Z&&this.addCurrentVertex(G,Ne,pt,pt,j)}else qt==="round"&&(Z&&(this.addCurrentVertex(G,ue,0,0,j),this.addCurrentVertex(G,ue,1,1,j,!0)),J&&(this.addCurrentVertex(G,ve,-1,-1,j,!0),this.addCurrentVertex(G,ve,0,0,j)));if(ht&&Re<R-1){const pt=G.dist(J);if(pt>2*B){const Mt=G.add(J.sub(G)._mult(B/pt)._round());this.updateDistance(G,Mt),this.addCurrentVertex(Mt,ve,0,0,j),G=Mt}}}}addCurrentVertex(i,l,f,g,x,w=!1){const C=l.y*g-l.x,R=-l.y-l.x*g;this.addHalfVertex(i,l.x+l.y*f,l.y-l.x*f,w,!1,f,x),this.addHalfVertex(i,C,R,w,!0,-g,x)}addHalfVertex({x:i,y:l},f,g,x,w,C,R){this.layoutVertexArray.emplaceBack((i<<1)+(x?1:0),(l<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const k=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),R.primitiveLength++),w?this.e2=k:this.e1=k}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}fn(jf,"LineBucket",{omit:["layers","patternFeatures"]});const uC=new Le({"line-cap":new be(xt.layout_line["line-cap"]),"line-join":new be(xt.layout_line["line-join"]),"line-miter-limit":new oe(xt.layout_line["line-miter-limit"]),"line-round-limit":new oe(xt.layout_line["line-round-limit"]),"line-sort-key":new be(xt.layout_line["line-sort-key"])});var J0={paint:new Le({"line-opacity":new be(xt.paint_line["line-opacity"]),"line-color":new be(xt.paint_line["line-color"]),"line-translate":new oe(xt.paint_line["line-translate"]),"line-translate-anchor":new oe(xt.paint_line["line-translate-anchor"]),"line-width":new be(xt.paint_line["line-width"]),"line-gap-width":new be(xt.paint_line["line-gap-width"]),"line-offset":new be(xt.paint_line["line-offset"]),"line-blur":new be(xt.paint_line["line-blur"]),"line-dasharray":new be(xt.paint_line["line-dasharray"]),"line-pattern":new be(xt.paint_line["line-pattern"]),"line-gradient":new Pe(xt.paint_line["line-gradient"]),"line-trim-offset":new oe(xt.paint_line["line-trim-offset"])}),layout:uC};const fw=new class extends be{possiblyEvaluate(a,i){return i=new U(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(a,i)}evaluate(a,i,l,f){return i=Dt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(a,i,l,f)}}(J0.paint.properties["line-width"].specification);function pw(a,i){return i>0?i+2*a:a}fw.useIntegerZoom=!0;const mw=Qe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gw=Qe([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Yi=Qe([{name:"a_projected_pos",components:4,type:"Float32"}],4);Qe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ex=Qe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Yo=Qe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yw=Qe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),_w=Qe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Qe([{name:"triangle",components:3,type:"Uint16"}]),Qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Qe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qe([{type:"Float32",name:"offsetX"}]),Qe([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var uo=24;const Pl=128;function Ng(a,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new U(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=l;let x=0;for(;x<f.length&&f[x]<=a;)x++;x=Math.max(0,x-1);let w=x;for(;w<f.length&&f[w]<a+1;)w++;w=Math.min(f.length-1,w);const C=f[x],R=f[w];return l.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:R,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:R,minSize:l.evaluate(new U(C)),maxSize:l.evaluate(new U(R)),interpolationType:g}}}function $f(a,{uSize:i,uSizeT:l},{lowerSize:f,upperSize:g}){return a.kind==="source"?f/Pl:a.kind==="composite"?rr(f/Pl,g/Pl,l):i}function qf(a,i){let l=0,f=0;if(a.kind==="constant")f=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:w}=a,C=g?Be(bl.interpolationFactor(g,i,x,w),0,1):0;a.kind==="camera"?f=rr(a.minSize,a.maxSize,C):l=C}return{uSizeT:l,uSize:f}}var vw=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Pl,evaluateSizeForFeature:$f,evaluateSizeForZoom:qf,getSizeData:Ng});function tx(a,i,l){return a.sections.forEach((f=>{f.text=(function(g,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),z.applyArabicShaping&&(g=z.applyArabicShaping(g)),g})(f.text,i,l)})),a}const Hf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function hC(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}function xw(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}var bw=Ci,nx=function(a,i,l,f,g){var x,w,C=8*g-f-1,R=(1<<C)-1,k=R>>1,B=-7,j=g-1,G=-1,Z=a[i+j];for(j+=G,x=Z&(1<<-B)-1,Z>>=-B,B+=C;B>0;x=256*x+a[i+j],j+=G,B-=8);for(w=x&(1<<-B)-1,x>>=-B,B+=f;B>0;w=256*w+a[i+j],j+=G,B-=8);if(x===0)x=1-k;else{if(x===R)return w?NaN:1/0*(Z?-1:1);w+=Math.pow(2,f),x-=k}return(Z?-1:1)*w*Math.pow(2,x-f)},ww=function(a,i,l,f,g,x){var w,C,R,k=8*x-g-1,B=(1<<k)-1,j=B>>1,G=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=0,J=1,ue=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(C=isNaN(i)?1:0,w=B):(w=Math.floor(Math.log(i)/Math.LN2),i*(R=Math.pow(2,-w))<1&&(w--,R*=2),(i+=w+j>=1?G/R:G*Math.pow(2,1-j))*R>=2&&(w++,R/=2),w+j>=B?(C=0,w=B):w+j>=1?(C=(i*R-1)*Math.pow(2,g),w+=j):(C=i*Math.pow(2,j-1)*Math.pow(2,g),w=0));g>=8;a[l+Z]=255&C,Z+=J,C/=256,g-=8);for(w=w<<g|C,k+=g;k>0;a[l+Z]=255&w,Z+=J,w/=256,k-=8);a[l+Z-J]|=128*ue};function Ci(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Ci.Varint=0,Ci.Fixed64=1,Ci.Bytes=2,Ci.Fixed32=5;var mu=4294967296,rx=1/mu,ix=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dc(a){return a.type===Ci.Bytes?a.readVarint()+a.pos:a.pos+1}function dm(a,i,l){return l?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function Tw(a,i,l){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(f);for(var g=l.pos-1;g>=a;g--)l.buf[g+f]=l.buf[g]}function Ew(a,i){for(var l=0;l<a.length;l++)i.writeVarint(a[l])}function sx(a,i){for(var l=0;l<a.length;l++)i.writeSVarint(a[l])}function ox(a,i){for(var l=0;l<a.length;l++)i.writeFloat(a[l])}function dC(a,i){for(var l=0;l<a.length;l++)i.writeDouble(a[l])}function tc(a,i){for(var l=0;l<a.length;l++)i.writeBoolean(a[l])}function ax(a,i){for(var l=0;l<a.length;l++)i.writeFixed32(a[l])}function Sw(a,i){for(var l=0;l<a.length;l++)i.writeSFixed32(a[l])}function Cw(a,i){for(var l=0;l<a.length;l++)i.writeFixed64(a[l])}function Aw(a,i){for(var l=0;l<a.length;l++)i.writeSFixed64(a[l])}function yd(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function Xo(a,i,l){a[l]=i,a[l+1]=i>>>8,a[l+2]=i>>>16,a[l+3]=i>>>24}function lx(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}Ci.prototype={destroy:function(){this.buf=null},readFields:function(a,i,l){for(l=l||this.length;this.pos<l;){var f=this.readVarint(),g=f>>3,x=this.pos;this.type=7&f,a(g,i,this),this.pos===x&&this.skip(f)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=yd(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=lx(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=yd(this.buf,this.pos)+yd(this.buf,this.pos+4)*mu;return this.pos+=8,a},readSFixed64:function(){var a=yd(this.buf,this.pos)+lx(this.buf,this.pos+4)*mu;return this.pos+=8,a},readFloat:function(){var a=nx(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=nx(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,l,f=this.buf;return i=127&(l=f[this.pos++]),l<128?i:(i|=(127&(l=f[this.pos++]))<<7,l<128?i:(i|=(127&(l=f[this.pos++]))<<14,l<128?i:(i|=(127&(l=f[this.pos++]))<<21,l<128?i:(function(g,x,w){var C,R,k=w.buf;if(C=(112&(R=k[w.pos++]))>>4,R<128||(C|=(127&(R=k[w.pos++]))<<3,R<128)||(C|=(127&(R=k[w.pos++]))<<10,R<128)||(C|=(127&(R=k[w.pos++]))<<17,R<128)||(C|=(127&(R=k[w.pos++]))<<24,R<128)||(C|=(1&(R=k[w.pos++]))<<31,R<128))return dm(g,C,x);throw new Error("Expected varint not more than 10 bytes")})(i|=(15&(l=f[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&ix?(function(l,f,g){return ix.decode(l.subarray(f,g))})(this.buf,i,a):(function(l,f,g){for(var x="",w=f;w<g;){var C,R,k,B=l[w],j=null,G=B>239?4:B>223?3:B>191?2:1;if(w+G>g)break;G===1?B<128&&(j=B):G===2?(192&(C=l[w+1]))==128&&(j=(31&B)<<6|63&C)<=127&&(j=null):G===3?(R=l[w+2],(192&(C=l[w+1]))==128&&(192&R)==128&&((j=(15&B)<<12|(63&C)<<6|63&R)<=2047||j>=55296&&j<=57343)&&(j=null)):G===4&&(R=l[w+2],k=l[w+3],(192&(C=l[w+1]))==128&&(192&R)==128&&(192&k)==128&&((j=(15&B)<<18|(63&C)<<12|(63&R)<<6|63&k)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,G=1):j>65535&&(j-=65536,x+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),x+=String.fromCharCode(j),w+=G}return x})(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Ci.Bytes)return a.push(this.readVarint(i));var l=Dc(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Ci.Bytes)return a.push(this.readSVarint());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Ci.Bytes)return a.push(this.readBoolean());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Ci.Bytes)return a.push(this.readFloat());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Ci.Bytes)return a.push(this.readDouble());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Ci.Bytes)return a.push(this.readFixed32());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Ci.Bytes)return a.push(this.readSFixed32());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Ci.Bytes)return a.push(this.readFixed64());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Ci.Bytes)return a.push(this.readSFixed64());var i=Dc(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Ci.Varint)for(;this.buf[this.pos++]>127;);else if(i===Ci.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Ci.Fixed32)this.pos+=4;else{if(i!==Ci.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Xo(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Xo(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Xo(this.buf,-1&a,this.pos),Xo(this.buf,Math.floor(a*rx),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Xo(this.buf,-1&a,this.pos),Xo(this.buf,Math.floor(a*rx),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?(function(i,l){var f,g;if(i>=0?(f=i%4294967296|0,g=i/4294967296|0):(g=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),(function(x,w,C){C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,C.buf[C.pos]=127&(x>>>=7)})(f,0,l),(function(x,w){var C=(7&x)<<4;w.buf[w.pos++]|=C|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))})(g,l)})(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=(function(f,g,x){for(var w,C,R=0;R<g.length;R++){if((w=g.charCodeAt(R))>55295&&w<57344){if(!C){w>56319||R+1===g.length?(f[x++]=239,f[x++]=191,f[x++]=189):C=w;continue}if(w<56320){f[x++]=239,f[x++]=191,f[x++]=189,C=w;continue}w=C-55296<<10|w-56320|65536,C=null}else C&&(f[x++]=239,f[x++]=191,f[x++]=189,C=null);w<128?f[x++]=w:(w<2048?f[x++]=w>>6|192:(w<65536?f[x++]=w>>12|224:(f[x++]=w>>18|240,f[x++]=w>>12&63|128),f[x++]=w>>6&63|128),f[x++]=63&w|128)}return x})(this.buf,a,this.pos);var l=this.pos-i;l>=128&&Tw(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),ww(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),ww(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,i){this.pos++;var l=this.pos;a(i,this);var f=this.pos-l;f>=128&&Tw(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeMessage:function(a,i,l){this.writeTag(a,Ci.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,Ew,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,sx,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,tc,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,ox,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,dC,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,ax,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,Sw,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,Cw,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,Aw,i)},writeBytesField:function(a,i){this.writeTag(a,Ci.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Ci.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Ci.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Ci.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Ci.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Ci.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Ci.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Ci.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Ci.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Ci.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var Gf=me(bw);const kc=3;function fC(a,i,l){i.glyphs=[],a===1&&l.readMessage(pC,i)}function pC(a,i,l){if(a===3){const{id:f,bitmap:g,width:x,height:w,left:C,top:R,advance:k}=l.readMessage(fm,{});i.glyphs.push({id:f,bitmap:new Mc({width:x+2*kc,height:w+2*kc},g),metrics:{width:x,height:w,left:C,top:R,advance:k}})}else a===4?i.ascender=l.readSVarint():a===5&&(i.descender=l.readSVarint())}function fm(a,i,l){a===1?i.id=l.readVarint():a===2?i.bitmap=l.readBytes():a===3?i.width=l.readVarint():a===4?i.height=l.readVarint():a===5?i.left=l.readSVarint():a===6?i.top=l.readSVarint():a===7&&(i.advance=l.readVarint())}const cx=kc;function ux(a){let i=0,l=0;for(const w of a)i+=w.w*w.h,l=Math.max(l,w.w);a.sort(((w,C)=>C.h-w.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let g=0,x=0;for(const w of a)for(let C=f.length-1;C>=0;C--){const R=f[C];if(!(w.w>R.w||w.h>R.h)){if(w.x=R.x,w.y=R.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===R.w&&w.h===R.h){const k=f.pop();C<f.length&&(f[C]=k)}else w.h===R.h?(R.x+=w.w,R.w-=w.w):w.w===R.w?(R.y+=w.h,R.h-=w.h):(f.push({x:R.x+w.w,y:R.y,w:R.w-w.w,h:w.h}),R.y+=w.h,R.h-=w.h);break}}return{w:g,h:x,fill:i/(g*x)||0}}const Ra=1;class hx{constructor(i,{pixelRatio:l,version:f,stretchX:g,stretchY:x,content:w}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=g,this.stretchY=x,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+Ra,this.paddedRect.y+Ra]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ra,this.paddedRect.y+this.paddedRect.h-Ra]}get displaySize(){return[(this.paddedRect.w-2*Ra)/this.pixelRatio,(this.paddedRect.h-2*Ra)/this.pixelRatio]}}class Iw{constructor(i,l){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(i,f,x),this.addImages(l,g,x);const{w,h:C}=ux(x),R=new Ms({width:w||1,height:C||1});for(const k in i){const B=i[k],j=f[k].paddedRect;Ms.copy(B.data,R,{x:0,y:0},{x:j.x+Ra,y:j.y+Ra},B.data)}for(const k in l){const B=l[k],j=g[k].paddedRect,G=j.x+Ra,Z=j.y+Ra,J=B.data.width,ue=B.data.height;Ms.copy(B.data,R,{x:0,y:0},{x:G,y:Z},B.data),Ms.copy(B.data,R,{x:0,y:ue-1},{x:G,y:Z-1},{width:J,height:1}),Ms.copy(B.data,R,{x:0,y:0},{x:G,y:Z+ue},{width:J,height:1}),Ms.copy(B.data,R,{x:J-1,y:0},{x:G-1,y:Z},{width:1,height:ue}),Ms.copy(B.data,R,{x:0,y:0},{x:G+J,y:Z},{width:1,height:ue})}this.image=R,this.iconPositions=f,this.patternPositions=g}addImages(i,l,f){for(const g in i){const x=i[g],w={x:0,y:0,w:x.data.width+2*Ra,h:x.data.height+2*Ra};f.push(w),l[g]=new hx(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((f=>i.hasImage(f))),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),l)}patchUpdatedImage(i,l,f){if(!i||!l||i.version===l.version)return;i.version=l.version;const[g,x]=i.tl;f.update(l.data,void 0,{x:g,y:x})}}fn(hx,"ImagePosition"),fn(Iw,"ImageAtlas");const Ll={horizontal:1,vertical:2,horizontalOnly:3},Mw=-17;class Bg{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const f=new Bg;return f.scale=i||1,f.fontStack=l,f}static forImage(i){const l=new Bg;return l.imageName=i,l}}class Wf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const f=new Wf;for(let g=0;g<i.sections.length;g++){const x=i.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,l)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=(function(l,f){let g="";for(let x=0;x<l.length;x++){const w=l.charCodeAt(x+1)||null,C=l.charCodeAt(x-1)||null;g+=!f&&(w&&Ef(w)&&!Hf[l[x+1]]||C&&Ef(C)&&!Hf[l[x-1]])||!Hf[l[x]]?l[x]:Hf[l[x]]}return g})(this.text,i)}trim(){let i=0;for(let f=0;f<this.text.length&&vd[this.text.charCodeAt(f)];f++)i++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&vd[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const f=new Wf;return f.text=this.text.substring(i,l),f.sectionIndex=this.sectionIndex.slice(i,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((i,l)=>Math.max(i,this.sections[l].scale)),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Bg.forText(i.scale,i.fontStack||l));const f=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(f)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void On("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Bg.forImage(l)),this.sectionIndex.push(this.sections.length-1)):On("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _d(a,i,l,f,g,x,w,C,R,k,B,j,G,Z,J){const ue=Wf.fromFeature(a,g);j===Ll.vertical&&ue.verticalizePunctuation(G);let ve=[];const Re=(function(Ue,ht,at,wt,qt,pt){if(!Ue)return[];const Mt=[],Rt=(function(cn,_n,un,lr,Zt,kn){let cr=0;for(let Xr=0;Xr<cn.length();Xr++){const ur=cn.getSection(Xr);cr+=Dw(cn.getCharCode(Xr),ur,lr,Zt,_n,kn)}return cr/Math.max(1,Math.ceil(cr/un))})(Ue,ht,at,wt,qt,pt),Vt=Ue.text.indexOf("")>=0;let Xt=0;for(let cn=0;cn<Ue.length();cn++){const _n=Ue.getSection(cn),un=Ue.getCharCode(cn);if(vd[un]||(Xt+=Dw(un,_n,wt,qt,ht,pt)),cn<Ue.length()-1){const lr=!((bt=un)<11904||!(an["Bopomofo Extended"](bt)||an.Bopomofo(bt)||an["CJK Compatibility Forms"](bt)||an["CJK Compatibility Ideographs"](bt)||an["CJK Compatibility"](bt)||an["CJK Radicals Supplement"](bt)||an["CJK Strokes"](bt)||an["CJK Symbols and Punctuation"](bt)||an["CJK Unified Ideographs Extension A"](bt)||an["CJK Unified Ideographs"](bt)||an["Enclosed CJK Letters and Months"](bt)||an["Halfwidth and Fullwidth Forms"](bt)||an.Hiragana(bt)||an["Ideographic Description Characters"](bt)||an["Kangxi Radicals"](bt)||an["Katakana Phonetic Extensions"](bt)||an.Katakana(bt)||an["Vertical Forms"](bt)||an["Yi Radicals"](bt)||an["Yi Syllables"](bt)));(Rw[un]||lr||_n.imageName)&&Mt.push(dx(cn+1,Xt,Rt,Mt,Fg(un,Ue.getCharCode(cn+1),lr&&Vt),!1))}}var bt;return Vg(dx(Ue.length(),Xt,Rt,Mt,0,!0))})(ue,k,x,i,f,Z),{processBidirectionalText:Ne,processStyledBidirectionalText:De}=z;if(Ne&&ue.sections.length===1){const Ue=Ne(ue.toString(),Re);for(const ht of Ue){const at=new Wf;at.text=ht,at.sections=ue.sections;for(let wt=0;wt<ht.length;wt++)at.sectionIndex.push(0);ve.push(at)}}else if(De){const Ue=De(ue.text,ue.sectionIndex,Re);for(const ht of Ue){const at=new Wf;at.text=ht[0],at.sectionIndex=ht[1],at.sections=ue.sections,ve.push(at)}}else ve=(function(Ue,ht){const at=[],wt=Ue.text;let qt=0;for(const pt of ht)at.push(Ue.substring(qt,pt)),qt=pt;return qt<wt.length&&at.push(Ue.substring(qt,wt.length)),at})(ue,Re);const ze=[],je={positionedLines:ze,text:ue.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:j,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return(function(Ue,ht,at,wt,qt,pt,Mt,Rt,Vt,Xt,bt,cn){let _n=0,un=0,lr=0;const Zt=Rt==="right"?1:Rt==="left"?0:.5;let kn=!1;for(const dr of qt){const fr=dr.getSections();for(const ki of fr){if(ki.imageName)continue;const Fi=ht[ki.fontStack];if(Fi&&(kn=Fi.ascender!==void 0&&Fi.descender!==void 0,!kn))break}if(!kn)break}let cr=0;for(const dr of qt){dr.trim();const fr=dr.getMaxScale(),ki=(fr-1)*uo,Fi={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[cr]=Fi;const Vi=Fi.positionedGlyphs;let Pi=0;if(!dr.length()){un+=pt,++cr;continue}let _s=0,Ts=0;for(let Li=0;Li<dr.length();Li++){const Xs=dr.getSection(Li),Fs=dr.getSectionIndex(Li),vs=dr.getCharCode(Li);let ti=Xs.scale,Vs=null,Ui=null,ol=null,Us=uo,Ko=0;const Ao=!(Vt===Ll.horizontal||!bt&&!Tf(vs)||bt&&(vd[vs]||(Xr=vs,an.Arabic(Xr)||an["Arabic Supplement"](Xr)||an["Arabic Extended-A"](Xr)||an["Arabic Presentation Forms-A"](Xr)||an["Arabic Presentation Forms-B"](Xr))));if(Xs.imageName){const al=wt[Xs.imageName];if(!al)continue;ol=Xs.imageName,Ue.iconsInText=Ue.iconsInText||!0,Ui=al.paddedRect;const Io=al.displaySize;ti=ti*uo/cn,Vs={width:Io[0],height:Io[1],left:Ra,top:-cx,advance:Ao?Io[1]:Io[0],localGlyph:!1},Ko=kn?-Vs.height*ti:Mw+fr*uo-Io[1]*ti,Us=Vs.advance;const bh=(Ao?Io[0]:Io[1])*ti-uo*fr;bh>0&&bh>Pi&&(Pi=bh)}else{const al=at[Xs.fontStack];if(!al)continue;al[vs]&&(Ui=al[vs]);const Io=ht[Xs.fontStack];if(!Io)continue;const bh=Io.glyphs[vs];if(!bh)continue;if(Vs=bh.metrics,Us=vs!==8203?uo:0,kn){const $_=Io.ascender!==void 0?Math.abs(Io.ascender):0,wx=Io.descender!==void 0?Math.abs(Io.descender):0,Tx=($_+wx)*ti;_s<Tx&&(_s=Tx,Ts=($_-wx)/2*ti),Ko=-$_*ti}else Ko=Mw+(fr-ti)*uo}Ao?(Ue.verticalizable=!0,Vi.push({glyph:vs,imageName:ol,x:_n,y:un+Ko,vertical:Ao,scale:ti,localGlyph:Vs.localGlyph,fontStack:Xs.fontStack,sectionIndex:Fs,metrics:Vs,rect:Ui}),_n+=Us*ti+Xt):(Vi.push({glyph:vs,imageName:ol,x:_n,y:un+Ko,vertical:Ao,scale:ti,localGlyph:Vs.localGlyph,fontStack:Xs.fontStack,sectionIndex:Fs,metrics:Vs,rect:Ui}),_n+=Vs.advance*ti+Xt)}Vi.length!==0&&(lr=Math.max(_n-Xt,lr),kn?D_(Vi,Zt,Pi,Ts,pt*fr/2):D_(Vi,Zt,Pi,0,pt/2)),_n=0;const Bs=pt*fr+Pi;Fi.lineOffset=Math.max(Pi,ki),un+=Bs,++cr}var Xr;const ur=un,{horizontalAlign:Un,verticalAlign:Xi}=Ug(Mt);(function(dr,fr,ki,Fi,Vi,Pi){const _s=(fr-ki)*Vi,Ts=-Pi*Fi;for(const Bs of dr)for(const Li of Bs.positionedGlyphs)Li.x+=_s,Li.y+=Ts})(Ue.positionedLines,Zt,Un,Xi,lr,ur),Ue.top+=-Xi*ur,Ue.bottom=Ue.top+ur,Ue.left+=-Un*lr,Ue.right=Ue.left+lr,Ue.hasBaseline=kn})(je,i,l,f,ve,w,C,R,j,k,G,J),!(function(Ue){for(const ht of Ue)if(ht.positionedGlyphs.length!==0)return!1;return!0})(ze)&&je}const vd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rw={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Dw(a,i,l,f,g,x){if(i.imageName){const w=f[i.imageName];return w?w.displaySize[0]*i.scale*uo/x+g:0}{const w=l[i.fontStack],C=w&&w.glyphs[a];return C?C.metrics.advance*i.scale+g:0}}function Yf(a,i,l,f){const g=Math.pow(a-i,2);return f?a<i?g/2:2*g:g+Math.abs(l)*l}function Fg(a,i,l){let f=0;return a===10&&(f-=1e4),l&&(f+=150),a!==40&&a!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function dx(a,i,l,f,g,x){let w=null,C=Yf(i,l,g,x);for(const R of f){const k=Yf(i-R.x,l,g,x)+R.badness;k<=C&&(w=R,C=k)}return{index:a,x:i,priorBreak:w,badness:C}}function Vg(a){return a?Vg(a.priorBreak).concat(a.index):[]}function Ug(a){let i=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function D_(a,i,l,f,g){if(!(i||l||f||g))return;const x=a.length-1,w=a[x],C=(w.x+w.metrics.advance*w.scale)*i;for(let R=0;R<=x;R++)a[R].x-=C,a[R].y+=l+f+g}function k_(a,i,l){const{horizontalAlign:f,verticalAlign:g}=Ug(l),x=i[0]-a.displaySize[0]*f,w=i[1]-a.displaySize[1]*g;return{image:a,top:w,bottom:w+a.displaySize[1],left:x,right:x+a.displaySize[0]}}function fx(a,i,l,f,g,x){const w=a.image;let C;if(w.content){const ve=w.content,Re=w.pixelRatio||1;C=[ve[0]/Re,ve[1]/Re,w.displaySize[0]-ve[2]/Re,w.displaySize[1]-ve[3]/Re]}const R=i.left*x,k=i.right*x;let B,j,G,Z;l==="width"||l==="both"?(Z=g[0]+R-f[3],j=g[0]+k+f[1]):(Z=g[0]+(R+k-w.displaySize[0])/2,j=Z+w.displaySize[0]);const J=i.top*x,ue=i.bottom*x;return l==="height"||l==="both"?(B=g[1]+J-f[0],G=g[1]+ue+f[2]):(B=g[1]+(J+ue-w.displaySize[1])/2,G=B+w.displaySize[1]),{image:w,top:B,right:j,bottom:G,left:Z,collisionPadding:C}}class gu extends se{constructor(i,l,f,g,x){super(i,l),this.angle=g,this.z=f,x!==void 0&&(this.segment=x)}clone(){return new gu(this.x,this.y,this.z,this.angle,this.segment)}}function kw(a,i,l,f,g){if(i.segment===void 0)return!0;let x=i,w=i.segment+1,C=0;for(;C>-l/2;){if(w--,w<0)return!1;C-=a[w].dist(x),x=a[w]}C+=a[w].dist(a[w+1]),w++;const R=[];let k=0;for(;C<l/2;){const B=a[w],j=a[w+1];if(!j)return!1;let G=a[w-1].angleTo(B)-B.angleTo(j);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:C,angleDelta:G}),k+=G;C-R[0].distance>f;)k-=R.shift().angleDelta;if(k>g)return!1;w++,C+=B.dist(j)}return!0}function px(a){let i=0;for(let l=0;l<a.length-1;l++)i+=a[l].dist(a[l+1]);return i}function Pw(a,i,l){return a?.6*i*l:0}function P_(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function mC(a,i,l,f,g,x){const w=Pw(l,g,x),C=P_(l,f)*x;let R=0;const k=px(a)/2;for(let B=0;B<a.length-1;B++){const j=a[B],G=a[B+1],Z=j.dist(G);if(R+Z>k){const J=(k-R)/Z,ue=rr(j.x,G.x,J),ve=rr(j.y,G.y,J),Re=new gu(ue,ve,0,G.angleTo(j),B);return!w||kw(a,Re,C,w,i)?Re:void 0}R+=Z}}function L_(a,i,l,f,g,x,w,C,R){const k=Pw(f,x,w),B=P_(f,g),j=B*w,G=a[0].x===0||a[0].x===R||a[0].y===0||a[0].y===R;return i-j<i/4&&(i=j+i/4),jg(a,G?i/2*C%i:(B/2+2*x)*w*C%i,i,k,l,j,G,!1,R)}function jg(a,i,l,f,g,x,w,C,R){const k=x/2,B=px(a);let j=0,G=i-l,Z=[];for(let J=0;J<a.length-1;J++){const ue=a[J],ve=a[J+1],Re=ue.dist(ve),Ne=ve.angleTo(ue);for(;G+l<j+Re;){G+=l;const De=(G-j)/Re,ze=rr(ue.x,ve.x,De),je=rr(ue.y,ve.y,De);if(ze>=0&&ze<R&&je>=0&&je<R&&G-k>=0&&G+k<=B){const Ue=new gu(ze,je,0,Ne,J);Ue._round(),f&&!kw(a,Ue,x,f,g)||Z.push(Ue)}}j+=Re}return C||Z.length||w||(Z=jg(a,j/2,l,f,g,x,w,!0,R)),Z}function $g(a,i,l,f,g){const x=[];for(let w=0;w<a.length;w++){const C=a[w];let R;for(let k=0;k<C.length-1;k++){let B=C[k],j=C[k+1];B.x<i&&j.x<i||(B.x<i?B=new se(i,B.y+(i-B.x)/(j.x-B.x)*(j.y-B.y))._round():j.x<i&&(j=new se(i,B.y+(i-B.x)/(j.x-B.x)*(j.y-B.y))._round()),B.y<l&&j.y<l||(B.y<l?B=new se(B.x+(l-B.y)/(j.y-B.y)*(j.x-B.x),l)._round():j.y<l&&(j=new se(B.x+(l-B.y)/(j.y-B.y)*(j.x-B.x),l)._round()),B.x>=f&&j.x>=f||(B.x>=f?B=new se(f,B.y+(f-B.x)/(j.x-B.x)*(j.y-B.y))._round():j.x>=f&&(j=new se(f,B.y+(f-B.x)/(j.x-B.x)*(j.y-B.y))._round()),B.y>=g&&j.y>=g||(B.y>=g?B=new se(B.x+(g-B.y)/(j.y-B.y)*(j.x-B.x),g)._round():j.y>=g&&(j=new se(B.x+(g-B.y)/(j.y-B.y)*(j.x-B.x),g)._round()),R&&B.equals(R[R.length-1])||(R=[B],x.push(R)),R.push(j)))))}}return x}fn(gu,"Anchor");const qg=1e20;function pm(a,i,l,f,g,x,w,C,R){for(let k=i;k<i+f;k++)Lw(a,l*x+k,x,g,w,C,R);for(let k=l;k<l+g;k++)Lw(a,k*x+i,1,f,w,C,R)}function Lw(a,i,l,f,g,x,w){x[0]=0,w[0]=-qg,w[1]=qg,g[0]=a[i];for(let C=1,R=0,k=0;C<f;C++){g[C]=a[i+C*l];const B=C*C;do{const j=x[R];k=(g[C]-g[j]+B-j*j)/(C-j)/2}while(k<=w[R]&&--R>-1);R++,x[R]=C,w[R]=k,w[R+1]=qg}for(let C=0,R=0;C<f;C++){for(;w[R+1]<C;)R++;const k=x[R],B=C-k;a[i+C*l]=g[k]+B*B}}const nc=2,O_={none:0,ideographs:1,all:2};class Xf{constructor(i,l,f){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const f=[];for(const g in i)for(const x of i[g])f.push({stack:g,id:x});et(f,(({stack:g,id:x},w)=>{let C=this.entries[g];C||(C=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let R=C.glyphs[x];if(R!==void 0)return void w(null,{stack:g,id:x,glyph:R});if(R=this._tinySDF(C,g,x),R)return C.glyphs[x]=R,void w(null,{stack:g,id:x,glyph:R});const k=Math.floor(x/256);if(256*k>65535)return void w(new Error("glyphs > 65535 not supported"));if(C.ranges[k])return void w(null,{stack:g,id:x,glyph:R});let B=C.requests[k];B||(B=C.requests[k]=[],Xf.loadGlyphRange(g,k,this.url,this.requestManager,((j,G)=>{if(G){C.ascender=G.ascender,C.descender=G.descender;for(const Z in G.glyphs)this._doesCharSupportLocalGlyph(+Z)||(C.glyphs[+Z]=G.glyphs[+Z]);C.ranges[k]=!0}for(const Z of B)Z(j,G);delete C.requests[k]}))),B.push(((j,G)=>{j?w(j):G&&w(null,{stack:g,id:x,glyph:G.glyphs[x]||null})}))}),((g,x)=>{if(g)l(g);else if(x){const w={};for(const{stack:C,id:R,glyph:k}of x)w[C]===void 0&&(w[C]={}),w[C].glyphs===void 0&&(w[C].glyphs={}),w[C].glyphs[R]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics},w[C].ascender=this.entries[C].ascender,w[C].descender=this.entries[C].descender;l(null,w)}}))}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==O_.none&&(this.localGlyphMode===O_.all?!!this.localFontFamily:!!this.localFontFamily&&(an["CJK Unified Ideographs"](i)||an["Hangul Syllables"](i)||an.Hiragana(i)||an.Katakana(i)||an["CJK Symbols and Punctuation"](i)))}_tinySDF(i,l,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=i.tinySDF;if(!x){let ue="400";/bold/i.test(l)?ue="900":/medium/i.test(l)?ue="500":/light/i.test(l)&&(ue="200"),x=i.tinySDF=new Xf.TinySDF({fontFamily:g,fontWeight:ue,fontSize:24*nc,buffer:3*nc,radius:8*nc}),x.fontWeight=ue}if(this.localGlyphs[x.fontWeight][f])return this.localGlyphs[x.fontWeight][f];const w=String.fromCharCode(f),{data:C,width:R,height:k,glyphWidth:B,glyphHeight:j,glyphLeft:G,glyphTop:Z,glyphAdvance:J}=x.draw(w);return this.localGlyphs[x.fontWeight][f]={id:f,bitmap:new Mc({width:R,height:k},C),metrics:{width:B/nc,height:j/nc,left:G/nc,top:Z/nc-27,advance:J/nc,localGlyph:!0}}}}Xf.loadGlyphRange=function(a,i,l,f,g){const x=256*i,w=x+255,C=f.transformRequest(f.normalizeGlyphsURL(l).replace("{fontstack}",a).replace("{range}",`${x}-${w}`),Or.Glyphs);Ss(C,((R,k)=>{if(R)g(R);else if(k){const B={},j=(function(G){return new Gf(G).readFields(fC,{})})(k);for(const G of j.glyphs)B[G.id]=G;g(null,{glyphs:B,ascender:j.ascender,descender:j.descender})}}))},Xf.TinySDF=class{constructor({fontSize:a=24,buffer:i=3,radius:l=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=l;const C=this.size=a+4*i,R=this._createCanvas(C),k=this.ctx=R.getContext("2d",{willReadFrequently:!0});k.font=`${w} ${x} ${a}px ${g}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(a){const i=document.createElement("canvas");return i.width=i.height=a,i}draw(a){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(a),w=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),R=Math.min(this.size-this.buffer,w+Math.ceil(f)),k=C+2*this.buffer,B=R+2*this.buffer,j=Math.max(k*B,0),G=new Uint8ClampedArray(j),Z={data:G,width:k,height:B,glyphWidth:C,glyphHeight:R,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(C===0||R===0)return Z;const{ctx:J,buffer:ue,gridInner:ve,gridOuter:Re}=this;J.clearRect(ue,ue,C,R),J.fillText(a,ue,ue+w);const Ne=J.getImageData(ue,ue,C,R);Re.fill(qg,0,j),ve.fill(0,0,j);for(let De=0;De<R;De++)for(let ze=0;ze<C;ze++){const je=Ne.data[4*(De*C+ze)+3]/255;if(je===0)continue;const Ue=(De+ue)*k+ze+ue;if(je===1)Re[Ue]=0,ve[Ue]=qg;else{const ht=.5-je;Re[Ue]=ht>0?ht*ht:0,ve[Ue]=ht<0?ht*ht:0}}pm(Re,0,0,k,B,k,this.f,this.v,this.z),pm(ve,ue,ue,C,R,k,this.f,this.v,this.z);for(let De=0;De<j;De++){const ze=Math.sqrt(Re[De])-Math.sqrt(ve[De]);G[De]=Math.round(255-255*(ze/this.radius+this.cutoff))}return Z}};const Kf=Ra;function z_(a,i,l,f){const g=[],x=a.image,w=x.pixelRatio,C=x.paddedRect.w-2*Kf,R=x.paddedRect.h-2*Kf,k=a.right-a.left,B=a.bottom-a.top,j=x.stretchX||[[0,C]],G=x.stretchY||[[0,R]],Z=(pt,Mt)=>pt+Mt[1]-Mt[0],J=j.reduce(Z,0),ue=G.reduce(Z,0),ve=C-J,Re=R-ue;let Ne=0,De=J,ze=0,je=ue,Ue=0,ht=ve,at=0,wt=Re;if(x.content&&f){const pt=x.content;Ne=Hg(j,0,pt[0]),ze=Hg(G,0,pt[1]),De=Hg(j,pt[0],pt[2]),je=Hg(G,pt[1],pt[3]),Ue=pt[0]-Ne,at=pt[1]-ze,ht=pt[2]-pt[0]-De,wt=pt[3]-pt[1]-je}const qt=(pt,Mt,Rt,Vt)=>{const Xt=Zf(pt.stretch-Ne,De,k,a.left),bt=N_(pt.fixed-Ue,ht,pt.stretch,J),cn=Zf(Mt.stretch-ze,je,B,a.top),_n=N_(Mt.fixed-at,wt,Mt.stretch,ue),un=Zf(Rt.stretch-Ne,De,k,a.left),lr=N_(Rt.fixed-Ue,ht,Rt.stretch,J),Zt=Zf(Vt.stretch-ze,je,B,a.top),kn=N_(Vt.fixed-at,wt,Vt.stretch,ue),cr=new se(Xt,cn),Xr=new se(un,cn),ur=new se(un,Zt),Un=new se(Xt,Zt),Xi=new se(bt/w,_n/w),dr=new se(lr/w,kn/w),fr=i*Math.PI/180;if(fr){const Vi=Math.sin(fr),Pi=Math.cos(fr),_s=[Pi,-Vi,Vi,Pi];cr._matMult(_s),Xr._matMult(_s),Un._matMult(_s),ur._matMult(_s)}const ki=pt.stretch+pt.fixed,Fi=Mt.stretch+Mt.fixed;return{tl:cr,tr:Xr,bl:Un,br:ur,tex:{x:x.paddedRect.x+Kf+ki,y:x.paddedRect.y+Kf+Fi,w:Rt.stretch+Rt.fixed-ki,h:Vt.stretch+Vt.fixed-Fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:dr,minFontScaleX:ht/w/k,minFontScaleY:wt/w/B,isSDF:l}};if(f&&(x.stretchX||x.stretchY)){const pt=mx(j,ve,J),Mt=mx(G,Re,ue);for(let Rt=0;Rt<pt.length-1;Rt++){const Vt=pt[Rt],Xt=pt[Rt+1];for(let bt=0;bt<Mt.length-1;bt++)g.push(qt(Vt,Mt[bt],Xt,Mt[bt+1]))}}else g.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:R+1}));return g}function Hg(a,i,l){let f=0;for(const g of a)f+=Math.max(i,Math.min(l,g[1]))-Math.max(i,Math.min(l,g[0]));return f}function mx(a,i,l){const f=[{fixed:-Kf,stretch:0}];for(const[g,x]of a){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return f.push({fixed:i+Kf,stretch:l}),f}function Zf(a,i,l,f){return a/i*l+f}function N_(a,i,l,f){return a-i*l/f}function gC(a,i,l,f){const g=i+a.positionedLines[f].lineOffset;return f===0?l+g/2:l+(g+(i+a.positionedLines[f-1].lineOffset))/2}class gx{constructor(i=[],l=yx){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:f}=this,g=l[i];for(;i>0;){const x=i-1>>1,w=l[x];if(f(g,w)>=0)break;l[i]=w,i=x}l[i]=g}_down(i){const{data:l,compare:f}=this,g=this.length>>1,x=l[i];for(;i<g;){let w=1+(i<<1),C=l[w];const R=w+1;if(R<this.length&&f(l[R],C)<0&&(w=R,C=l[R]),f(C,x)>=0)break;l[i]=C,i=w}l[i]=x}}function yx(a,i){return a<i?-1:a>i?1:0}function B_(a,i=1,l=!1){let f=1/0,g=1/0,x=-1/0,w=-1/0;const C=a[0];for(let Z=0;Z<C.length;Z++){const J=C[Z];(!Z||J.x<f)&&(f=J.x),(!Z||J.y<g)&&(g=J.y),(!Z||J.x>x)&&(x=J.x),(!Z||J.y>w)&&(w=J.y)}const R=Math.min(x-f,w-g);let k=R/2;const B=new gx([],_x);if(R===0)return new se(f,g);for(let Z=f;Z<x;Z+=R)for(let J=g;J<w;J+=R)B.push(new Qf(Z+k,J+k,k,a));let j=(function(Z){let J=0,ue=0,ve=0;const Re=Z[0];for(let Ne=0,De=Re.length,ze=De-1;Ne<De;ze=Ne++){const je=Re[Ne],Ue=Re[ze],ht=je.x*Ue.y-Ue.x*je.y;ue+=(je.x+Ue.x)*ht,ve+=(je.y+Ue.y)*ht,J+=3*ht}return new Qf(ue/J,ve/J,0,Z)})(a),G=B.length;for(;B.length;){const Z=B.pop();(Z.d>j.d||!j.d)&&(j=Z,l&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,G)),Z.max-j.d<=i||(k=Z.h/2,B.push(new Qf(Z.p.x-k,Z.p.y-k,k,a)),B.push(new Qf(Z.p.x+k,Z.p.y-k,k,a)),B.push(new Qf(Z.p.x-k,Z.p.y+k,k,a)),B.push(new Qf(Z.p.x+k,Z.p.y+k,k,a)),G+=4)}return l&&(console.log(`num probes: ${G}`),console.log(`best distance: ${j.d}`)),j.p}function _x(a,i){return i.max-a.max}class Qf{constructor(i,l,f,g){this.p=new se(i,l),this.h=f,this.d=(function(x,w){let C=!1,R=1/0;for(let k=0;k<w.length;k++){const B=w[k];for(let j=0,G=B.length,Z=G-1;j<G;Z=j++){const J=B[j],ue=B[Z];J.y>x.y!=ue.y>x.y&&x.x<(ue.x-J.x)*(x.y-J.y)/(ue.y-J.y)+J.x&&(C=!C),R=Math.min(R,Of(x,J,ue))}}return(C?1:-1)*Math.sqrt(R)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const xd=7,yu=Number.POSITIVE_INFINITY,bd=Math.sqrt(2);function yh(a,[i,l]){let f=0,g=0;if(l===yu){i<0&&(i=0);const x=i/bd;switch(a){case"top-right":case"top-left":g=x-xd;break;case"bottom-right":case"bottom-left":g=-x+xd;break;case"bottom":g=-i+xd;break;case"top":g=i-xd}switch(a){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=i;break;case"right":f=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),a){case"top-right":case"top-left":case"top":g=l-xd;break;case"bottom-right":case"bottom-left":case"bottom":g=-l+xd}switch(a){case"top-right":case"bottom-right":case"right":f=-i;break;case"top-left":case"bottom-left":case"left":f=i}}return[f,g]}function Gg(a,i,l,f,g,x,w,C,R,k){a.createArrays(),a.tilePixelRatio=Rn/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const B=a.layers[0].layout,j=a.layers[0]._unevaluatedLayout._values,G={};if(a.textSizeData.kind==="composite"){const{minZoom:ue,maxZoom:ve}=a.textSizeData;G.compositeTextSizes=[j["text-size"].possiblyEvaluate(new U(ue),C),j["text-size"].possiblyEvaluate(new U(ve),C)]}if(a.iconSizeData.kind==="composite"){const{minZoom:ue,maxZoom:ve}=a.iconSizeData;G.compositeIconSizes=[j["icon-size"].possiblyEvaluate(new U(ue),C),j["icon-size"].possiblyEvaluate(new U(ve),C)]}G.layoutTextSize=j["text-size"].possiblyEvaluate(new U(R+1),C),G.layoutIconSize=j["icon-size"].possiblyEvaluate(new U(R+1),C),G.textMaxSize=j["text-size"].possiblyEvaluate(new U(18),C);const Z=B.get("text-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",J=B.get("text-size");for(const ue of a.features){const ve=B.get("text-font").evaluate(ue,{},C).join(","),Re=J.evaluate(ue,{},C),Ne=G.layoutTextSize.evaluate(ue,{},C),De=(G.layoutIconSize.evaluate(ue,{},C),{horizontal:{},vertical:void 0}),ze=ue.text;let je,Ue=[0,0];if(ze){const wt=ze.toString(),qt=B.get("text-letter-spacing").evaluate(ue,{},C)*uo,pt=B.get("text-line-height").evaluate(ue,{},C)*uo,Mt=Qy(wt)?qt:0,Rt=B.get("text-anchor").evaluate(ue,{},C),Vt=B.get("text-variable-anchor");if(!Vt){const un=B.get("text-radial-offset").evaluate(ue,{},C);Ue=un?yh(Rt,[un*uo,yu]):B.get("text-offset").evaluate(ue,{},C).map((lr=>lr*uo))}let Xt=Z?"center":B.get("text-justify").evaluate(ue,{},C);const bt=B.get("symbol-placement")==="point",cn=bt?B.get("text-max-width").evaluate(ue,{},C)*uo:1/0,_n=un=>{a.allowVerticalPlacement&&_g(wt)&&(De.vertical=_d(ze,i,l,g,ve,cn,pt,Rt,un,Mt,Ue,Ll.vertical,!0,Ne,Re))};if(!Z&&Vt){const un=Xt==="auto"?Vt.map((Zt=>Jf(Zt))):[Xt];let lr=!1;for(let Zt=0;Zt<un.length;Zt++){const kn=un[Zt];if(!De.horizontal[kn])if(lr)De.horizontal[kn]=De.horizontal[0];else{const cr=_d(ze,i,l,g,ve,cn,pt,"center",kn,Mt,Ue,Ll.horizontal,!1,Ne,Re);cr&&(De.horizontal[kn]=cr,lr=cr.positionedLines.length===1)}}_n("left")}else{if(Xt==="auto"&&(Xt=Jf(Rt)),bt||B.get("text-writing-mode").indexOf("horizontal")>=0||!_g(wt)){const un=_d(ze,i,l,g,ve,cn,pt,Rt,Xt,Mt,Ue,Ll.horizontal,!1,Ne,Re);un&&(De.horizontal[Xt]=un)}_n(bt?"left":Xt)}}let ht=!1;if(ue.icon&&ue.icon.name){const wt=f[ue.icon.name];wt&&(je=k_(g[ue.icon.name],B.get("icon-offset").evaluate(ue,{},C),B.get("icon-anchor").evaluate(ue,{},C)),ht=wt.sdf,a.sdfIcons===void 0?a.sdfIcons=wt.sdf:a.sdfIcons!==wt.sdf&&On("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(wt.pixelRatio!==a.pixelRatio||B.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const at=Ow(De.horizontal)||De.vertical;a.iconsInText||(a.iconsInText=!!at&&at.iconsInText),(at||je)&&wd(a,ue,De,je,f,G,Ne,0,Ue,ht,w,C,k)}x&&a.generateCollisionDebugBuffers(R,a.collisionBoxArray)}function Jf(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wd(a,i,l,f,g,x,w,C,R,k,B,j,G){let Z=x.textMaxSize.evaluate(i,{},j);Z===void 0&&(Z=w);const J=a.layers[0].layout,ue=J.get("icon-offset").evaluate(i,{},j),ve=Ow(l.horizontal)||l.vertical,Re=G.name==="globe",Ne=uo,De=w/Ne,ze=a.tilePixelRatio*Z/Ne,je=(Rt=a.overscaling,a.zoom>18&&Rt>2&&(Rt>>=1),Math.max(Rn/(512*Rt),1)*J.get("symbol-spacing")),Ue=J.get("text-padding")*a.tilePixelRatio,ht=J.get("icon-padding")*a.tilePixelRatio,at=de(J.get("text-max-angle")),wt=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",qt=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",pt=J.get("symbol-placement"),Mt=je/2;var Rt;const Vt=J.get("icon-text-fit");let Xt;f&&Vt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Xt=fx(f,l.vertical,Vt,J.get("icon-text-fit-padding"),ue,De)),ve&&(f=fx(f,ve,Vt,J.get("icon-text-fit-padding"),ue,De)));const bt=(cn,_n,un)=>{if(_n.x<0||_n.x>=Rn||_n.y<0||_n.y>=Rn)return;let lr=null;if(Re){const{x:Zt,y:kn,z:cr}=G.projectTilePoint(_n.x,_n.y,un);lr={anchor:new gu(Zt,kn,cr,0,void 0),up:G.upVector(un,_n.x,_n.y)}}(function(Zt,kn,cr,Xr,ur,Un,Xi,dr,fr,ki,Fi,Vi,Pi,_s,Ts,Bs,Li,Xs,Fs,vs,ti,Vs,Ui,ol,Us){const Ko=Zt.addToLineVertexArray(kn,Xr);let Ao,al,Io,bh,$_,wx,Tx,Yk=0,Xk=0,Kk=0,Zk=0,IC=-1,MC=-1;const Id={};let Qk=Jy("");const Kg=cr?cr.anchor:kn;let RC=0,DC=0;if(fr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[RC,DC]=fr.layout.get("text-offset").evaluate(ti,{},Us).map((rc=>rc*uo)):(RC=fr.layout.get("text-radial-offset").evaluate(ti,{},Us)*uo,DC=yu),Zt.allowVerticalPlacement&&ur.vertical){const rc=ur.vertical;if(Ts)wx=gm(rc),dr&&(Tx=gm(dr));else{const ic=fr.layout.get("text-rotate").evaluate(ti,{},Us)+90;Io=Yg(ki,Kg,kn,Fi,Vi,Pi,rc,_s,ic,Bs),dr&&(bh=Yg(ki,Kg,kn,Fi,Vi,Pi,dr,Xs,ic))}}if(Un){const rc=fr.layout.get("icon-rotate").evaluate(ti,{},Us),ic=fr.layout.get("icon-text-fit")!=="none",Ex=z_(Un,rc,Ui,ic),PC=dr?z_(dr,rc,Ui,ic):void 0;al=Yg(ki,Kg,kn,Fi,Vi,Pi,Un,Xs,rc),Yk=4*Ex.length;const Jk=Zt.iconSizeData;let Zg=null;Jk.kind==="source"?(Zg=[Pl*fr.layout.get("icon-size").evaluate(ti,{},Us)],Zg[0]>_h&&On(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Wg}. Reduce your "icon-size".`)):Jk.kind==="composite"&&(Zg=[Pl*Vs.compositeIconSizes[0].evaluate(ti,{},Us),Pl*Vs.compositeIconSizes[1].evaluate(ti,{},Us)],(Zg[0]>_h||Zg[1]>_h)&&On(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Wg}. Reduce your "icon-size".`)),Zt.addSymbols(Zt.icon,Ex,Zg,vs,Fs,ti,!1,cr,kn,Ko.lineStartIndex,Ko.lineLength,-1,ol,Us),IC=Zt.icon.placedSymbolArray.length-1,PC&&(Xk=4*PC.length,Zt.addSymbols(Zt.icon,PC,Zg,vs,Fs,ti,Ll.vertical,cr,kn,Ko.lineStartIndex,Ko.lineLength,-1,ol,Us),MC=Zt.icon.placedSymbolArray.length-1)}for(const rc in ur.horizontal){const ic=ur.horizontal[rc];Ao||(Qk=Jy(ic.text),Ts?$_=gm(ic):Ao=Yg(ki,Kg,kn,Fi,Vi,Pi,ic,_s,fr.layout.get("text-rotate").evaluate(ti,{},Us),Bs));const Ex=ic.positionedLines.length===1;if(Kk+=mm(Zt,cr,kn,ic,Xi,fr,Ts,ti,Bs,Ko,ur.vertical?Ll.horizontal:Ll.horizontalOnly,Ex?Object.keys(ur.horizontal):[rc],Id,IC,Vs,ol,Us),Ex)break}ur.vertical&&(Zk+=mm(Zt,cr,kn,ur.vertical,Xi,fr,Ts,ti,Bs,Ko,Ll.vertical,["vertical"],Id,MC,Vs,ol,Us));let Tm=-1;const kC=(rc,ic)=>rc?Math.max(rc,ic):ic;Tm=kC($_,Tm),Tm=kC(wx,Tm),Tm=kC(Tx,Tm);const PU=Tm>-1?1:0;Zt.glyphOffsetArray.length>=Pt.MAX_GLYPHS&&On("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ti.sortKey!==void 0&&Zt.addToSortKeyRanges(Zt.symbolInstances.length,ti.sortKey),Zt.symbolInstances.emplaceBack(Kg.x,Kg.y,Kg.z,kn.x,kn.y,Id.right>=0?Id.right:-1,Id.center>=0?Id.center:-1,Id.left>=0?Id.left:-1,Id.vertical>=0?Id.vertical:-1,IC,MC,Qk,Ao!==void 0?Ao:Zt.collisionBoxArray.length,Ao!==void 0?Ao+1:Zt.collisionBoxArray.length,Io!==void 0?Io:Zt.collisionBoxArray.length,Io!==void 0?Io+1:Zt.collisionBoxArray.length,al!==void 0?al:Zt.collisionBoxArray.length,al!==void 0?al+1:Zt.collisionBoxArray.length,bh||Zt.collisionBoxArray.length,bh?bh+1:Zt.collisionBoxArray.length,Fi,Kk,Zk,Yk,Xk,PU,0,RC,DC,Tm)})(a,_n,lr,cn,l,f,g,Xt,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,Ue,wt,R,0,ht,qt,ue,i,x,k,B,j)};if(pt==="line")for(const cn of $g(i.geometry,0,0,Rn,Rn)){const _n=L_(cn,je,at,l.vertical||ve,f,Ne,ze,a.overscaling,Rn);for(const un of _n)ve&&zw(a,ve.text,Mt,un)||bt(cn,un,j)}else if(pt==="line-center"){for(const cn of i.geometry)if(cn.length>1){const _n=mC(cn,at,l.vertical||ve,f,Ne,ze);_n&&bt(cn,_n,j)}}else if(i.type==="Polygon")for(const cn of am(i.geometry,0)){const _n=B_(cn,16);bt(cn[0],new gu(_n.x,_n.y,0,0,void 0),j)}else if(i.type==="LineString")for(const cn of i.geometry)bt(cn,new gu(cn[0].x,cn[0].y,0,0,void 0),j);else if(i.type==="Point")for(const cn of i.geometry)for(const _n of cn)bt([_n],new gu(_n.x,_n.y,0,0,void 0),j)}const Wg=255,_h=Wg*Pl;function mm(a,i,l,f,g,x,w,C,R,k,B,j,G,Z,J,ue,ve){const Re=(function(ze,je,Ue,ht,at,wt,qt,pt){const Mt=[];if(je.positionedLines.length===0)return Mt;const Rt=ht.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,Vt=(function(un){const lr=un[0],Zt=un[1],kn=lr*Zt;return kn>0?[lr,-Zt]:kn<0?[-lr,Zt]:lr===0?[Zt,lr]:[Zt,-lr]})(Ue);let Xt=Math.abs(je.top-je.bottom);for(const un of je.positionedLines)Xt-=un.lineOffset;const bt=je.positionedLines.length,cn=Xt/bt;let _n=je.top-Ue[1];for(let un=0;un<bt;++un){const lr=je.positionedLines[un];_n=gC(je,cn,_n,un);for(const Zt of lr.positionedGlyphs){if(!Zt.rect)continue;const kn=Zt.rect||{};let cr=cx+1,Xr=!0,ur=1,Un=0;if(Zt.imageName){const Ui=qt[Zt.imageName];if(!Ui)continue;if(Ui.sdf){On("SDF images are not supported in formatted text and will be ignored.");continue}Xr=!1,ur=Ui.pixelRatio,cr=Ra/ur}const Xi=(at||pt)&&Zt.vertical,dr=Zt.metrics.advance*Zt.scale/2,fr=Zt.metrics,ki=Zt.rect;if(ki===null)continue;pt&&je.verticalizable&&(Un=Zt.imageName?dr-Zt.metrics.width*Zt.scale/2:0);const Fi=at?[Zt.x+dr,Zt.y]:[0,0];let Vi=[0,0],Pi=[0,0],_s=!1;at||(Xi?(Pi=[Zt.x+dr+Vt[0],Zt.y+Vt[1]-Un],_s=!0):Vi=[Zt.x+dr+Ue[0],Zt.y+Ue[1]-Un]);const Ts=ki.w*Zt.scale/(ur*(Zt.localGlyph?nc:1)),Bs=ki.h*Zt.scale/(ur*(Zt.localGlyph?nc:1));let Li,Xs,Fs,vs;if(Xi){const Ui=Zt.y-_n,ol=new se(-dr,dr-Ui),Us=-Math.PI/2,Ko=new se(...Pi);Li=new se(-dr+Vi[0],Vi[1]),Li._rotateAround(Us,ol)._add(Ko),Li.x+=-Ui+dr,Li.y-=(fr.left-cr)*Zt.scale;const Ao=Zt.imageName?fr.advance*Zt.scale:uo*Zt.scale,al=String.fromCharCode(Zt.glyph);hC(al)?Li.x+=(1-cr)*Zt.scale:xw(al)?Li.x+=Ao-fr.height*Zt.scale+(-cr-1)*Zt.scale:Li.x+=Zt.imageName||fr.width+2*cr===ki.w&&fr.height+2*cr===ki.h?(Ao-Bs)/2:(Ao-(fr.height+2*cr)*Zt.scale)/2,Xs=new se(Li.x,Li.y-Ts),Fs=new se(Li.x+Bs,Li.y),vs=new se(Li.x+Bs,Li.y-Ts)}else{const Ui=(fr.left-cr)*Zt.scale-dr+Vi[0],ol=(-fr.top-cr)*Zt.scale+Vi[1],Us=Ui+Ts,Ko=ol+Bs;Li=new se(Ui,ol),Xs=new se(Us,ol),Fs=new se(Ui,Ko),vs=new se(Us,Ko)}if(Rt){let Ui;Ui=at?new se(0,0):_s?new se(Vt[0],Vt[1]):new se(Ue[0],Ue[1]),Li._rotateAround(Rt,Ui),Xs._rotateAround(Rt,Ui),Fs._rotateAround(Rt,Ui),vs._rotateAround(Rt,Ui)}const ti=new se(0,0),Vs=new se(0,0);Mt.push({tl:Li,tr:Xs,bl:Fs,br:vs,tex:kn,writingMode:je.writingMode,glyphOffset:Fi,sectionIndex:Zt.sectionIndex,isSDF:Xr,pixelOffsetTL:ti,pixelOffsetBR:Vs,minFontScaleX:0,minFontScaleY:0})}}return Mt})(0,f,R,x,w,C,g,a.allowVerticalPlacement),Ne=a.textSizeData;let De=null;Ne.kind==="source"?(De=[Pl*x.layout.get("text-size").evaluate(C,{},ve)],De[0]>_h&&On(`${a.layerIds[0]}: Value for "text-size" is >= ${Wg}. Reduce your "text-size".`)):Ne.kind==="composite"&&(De=[Pl*J.compositeTextSizes[0].evaluate(C,{},ve),Pl*J.compositeTextSizes[1].evaluate(C,{},ve)],(De[0]>_h||De[1]>_h)&&On(`${a.layerIds[0]}: Value for "text-size" is >= ${Wg}. Reduce your "text-size".`)),a.addSymbols(a.text,Re,De,R,w,C,B,i,l,k.lineStartIndex,k.lineLength,Z,ue,ve);for(const ze of j)G[ze]=a.text.placedSymbolArray.length-1;return 4*Re.length}function Ow(a){for(const i in a)return a[i];return null}function Yg(a,i,l,f,g,x,w,C,R,k){let B=w.top,j=w.bottom,G=w.left,Z=w.right;const J=w.collisionPadding;if(J&&(G-=J[0],B-=J[1],Z+=J[2],j+=J[3]),R){const ue=new se(G,B),ve=new se(Z,B),Re=new se(G,j),Ne=new se(Z,j),De=de(R);let ze=new se(0,0);k&&(ze=new se(k[0],k[1])),ue._rotateAround(De,ze),ve._rotateAround(De,ze),Re._rotateAround(De,ze),Ne._rotateAround(De,ze),G=Math.min(ue.x,ve.x,Re.x,Ne.x),Z=Math.max(ue.x,ve.x,Re.x,Ne.x),B=Math.min(ue.y,ve.y,Re.y,Ne.y),j=Math.max(ue.y,ve.y,Re.y,Ne.y)}return a.emplaceBack(i.x,i.y,i.z,l.x,l.y,G,B,Z,j,C,f,g,x),a.length-1}function gm(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const i=a.bottom-a.top;return i>0?Math.max(10,i):null}function zw(a,i,l,f){const g=a.compareText;if(i in g){const x=g[i];for(let w=x.length-1;w>=0;w--)if(f.dist(x[w])<l)return!0}else g[i]=[];return g[i].push(f),!1}function Nw(a,i){const l=a.fovAboveCenter,f=a.elevation?a.elevation.getMinElevationBelowMSL()*i:0,g=(a._camera.position[2]*a.worldSize-f)/Math.cos(a._pitch),x=Math.sin(l)*g/Math.sin(Math.max(Math.PI/2-a._pitch-l,.01)),w=Math.sin(a._pitch)*x+g;return Math.min(1.01*w,g*(1/a._horizonShift))}function _u(a,i){if(!i.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:i};const l=Math.pow(2,-a.z),f=a.x*l,g=(a.x+1)*l,x=a.y*l,w=(a.y+1)*l,C=nl(f),R=nl(g),k=ei(x),B=ei(w),j=i.project(C,k),G=i.project(R,k),Z=i.project(R,B),J=i.project(C,B);let ue=Math.min(j.x,G.x,Z.x,J.x),ve=Math.min(j.y,G.y,Z.y,J.y),Re=Math.max(j.x,G.x,Z.x,J.x),Ne=Math.max(j.y,G.y,Z.y,J.y);const De=l/16;function ze(Ue,ht,at,wt,qt,pt){const Mt=(at+qt)/2,Rt=(wt+pt)/2,Vt=i.project(nl(Mt),ei(Rt)),Xt=Math.max(0,ue-Vt.x,ve-Vt.y,Vt.x-Re,Vt.y-Ne);ue=Math.min(ue,Vt.x),Re=Math.max(Re,Vt.x),ve=Math.min(ve,Vt.y),Ne=Math.max(Ne,Vt.y),Xt>De&&(ze(Ue,Vt,at,wt,Mt,Rt),ze(Vt,ht,Mt,Rt,qt,pt))}ze(j,G,f,x,g,x),ze(G,Z,g,x,g,w),ze(Z,J,g,w,f,w),ze(J,j,f,w,f,x),ue-=De,ve-=De,Re+=De,Ne+=De;const je=1/Math.max(Re-ue,Ne-ve);return{scale:je,x:ue*je,y:ve*je,x2:Re*je,y2:Ne*je,projection:i}}const F_=Il(new Float32Array(16));class vh{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new Jr(0,0)}projectTilePoint(i,l,f){return{x:i,y:l,z:0}}locationPoint(i,l,f=!0){return i._coordinatePoint(i.locationCoordinate(l),f)}pixelsPerMeter(i,l){return Dl(1,i)*l}pixelSpaceConversion(i,l,f){return 1}farthestPixelDistance(i){return Nw(i,i.pixelsPerMeter)}pointCoordinate(i,l,f,g){const x=i.horizonLineFromTop(!1),w=new se(l,Math.max(x,f));return i.rayIntersectionCoordinate(i.pointRayIntersection(w,g))}pointCoordinate3D(i,l,f){const g=new se(l,f);if(i.elevation)return i.elevation.pointCoordinate(g);{const x=this.pointCoordinate(i,g.x,g.y,0);return[x.x,x.y,x.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const f=i.horizonLineFromTop();return l.y<f}createInversionMatrix(i,l){return F_}createTileMatrix(i,l,f){let g,x,w;const C=f.canonical,R=Il(new Float64Array(16));if(this.isReprojectedInTileSpace){const k=_u(C,this);g=1,x=k.x+f.wrap*k.scale,w=k.y,id(R,R,[g/k.scale,g/k.scale,i.pixelsPerMeter/l])}else g=l/i.zoomScale(C.z),x=(C.x+Math.pow(2,C.z)*f.wrap)*g,w=C.y*g;return Af(R,R,[x,w,0]),id(R,R,[g/Rn,g/Rn,1]),R}upVector(i,l,f){return[0,0,1]}upVectorScale(i,l,f){return{metersToTile:1}}}class ym extends vh{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,f]=this.parallels=i.parallels||[29.5,45.5],g=Math.sin(de(l));this.n=(g+Math.sin(de(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:f,c:g,r0:x}=this,w=de(i-this.center[0]),C=de(l),R=Math.sqrt(g-2*f*Math.sin(C))/f;return{x:R*Math.sin(w*f),y:R*Math.cos(w*f)-x,z:0}}unproject(i,l){const{n:f,c:g,r0:x}=this,w=x+l;let C=Math.atan2(i,Math.abs(w))*Math.sign(w);w*f<0&&(C-=Math.PI*Math.sign(i)*Math.sign(w));const R=de(this.center[0])*f;C=Me(C,-Math.PI-R,Math.PI-R);const k=Be(Ve(C/f)+this.center[0],-180,180),B=Math.asin(Be((g-(i*i+w*w)*f*f)/(2*f),-1,1)),j=Be(Ve(B),-lo,lo);return new Jr(k,j)}}const _m=1.340264,ep=-.081106,Td=893e-6,vm=.003796,V_=Math.sqrt(3)/2;class U_ extends vh{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const f=Math.asin(V_*Math.sin(l)),g=f*f,x=g*g*g;return{x:.5*(i*Math.cos(f)/(V_*(_m+3*ep*g+x*(7*Td+9*vm*g)))/Math.PI+.5),y:1-.5*(f*(_m+ep*g+x*(Td+vm*g))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,g=f*f,x=g*g*g;for(let B,j,G,Z=0;Z<12&&(j=f*(_m+ep*g+x*(Td+vm*g))-l,G=_m+3*ep*g+x*(7*Td+9*vm*g),B=j/G,f=Be(f-B,-Math.PI/3,Math.PI/3),g=f*f,x=g*g*g,!(Math.abs(B)<1e-12));++Z);const w=V_*i*(_m+3*ep*g+x*(7*Td+9*vm*g))/Math.cos(f),C=Math.asin(Math.sin(f)/V_),R=Be(180*w/Math.PI,-180,180),k=Be(180*C/Math.PI,-lo,lo);return new Jr(R,k)}}class u extends vh{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const f=360*(i-.5),g=Be(360*(.5-l),-lo,lo);return new Jr(f,g)}}const d=Math.PI/2;function y(a){return Math.tan((d+a)/2)}class E extends vh{constructor(i){super(i),this.center=i.center||[0,30];const[l,f]=this.parallels=i.parallels||[30,30];let g=de(l),x=de(f);this.southernCenter=g+x<0,this.southernCenter&&(g=-g,x=-x);const w=Math.cos(g),C=y(g);this.n=g===x?Math.sin(g):Math.log(w/Math.cos(x))/Math.log(y(x)/C),this.f=w*Math.pow(y(g),this.n)/this.n}project(i,l){l=de(l),this.southernCenter&&(l=-l),i=de(i-this.center[0]);const f=1e-6,{n:g,f:x}=this;x>0?l<-d+f&&(l=-d+f):l>d-f&&(l=d-f);const w=x/Math.pow(y(l),g);let C=w*Math.sin(g*i),R=x-w*Math.cos(g*i);return C=.5*(C/Math.PI+.5),R=.5*(R/Math.PI+.5),{x:C,y:this.southernCenter?R:1-R,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:f,f:g}=this,x=g-l,w=Math.sign(x),C=Math.sign(f)*Math.sqrt(i*i+x*x);let R=Math.atan2(i,Math.abs(x))*w;x*f<0&&(R-=Math.PI*Math.sign(i)*w);const k=Be(Ve(R/f)+this.center[0],-180,180),B=Be(Ve(2*Math.atan(Math.pow(g/C,1/f))-d),-lo,lo);return new Jr(k,this.southernCenter?-B:B)}}class P extends vh{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:Co(i),y:Ni(l),z:0}}unproject(i,l){const f=nl(i),g=ei(l);return new Jr(f,g)}}const N=de(lo);class ne extends vh{project(i,l){const f=(l=de(l))*l,g=f*f;return{x:.5*((i=de(i))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let f=l=(2*(1-l)-1)*Math.PI,g=25,x=0,w=f*f;do{w=f*f;const k=w*w;x=(f*(1.007226+w*(.015085+k*(.028874*w-.044475-.005916*k)))-l)/(1.007226+w*(.045255+k*(.259866*w-.311325-.005916*11*k))),f=Be(f-x,-N,N)}while(Math.abs(x)>1e-6&&--g>0);w=f*f;const C=Be(Ve(i/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),R=Ve(f);return new Jr(C,R)}}const xe=de(lo);class We extends vh{project(i,l){l=de(l),i=de(i);const f=Math.cos(l),g=2/Math.PI,x=Math.acos(f*Math.cos(i/2)),w=Math.sin(x)/x,C=.5*(i*g+2*f*Math.sin(i/2)/w)||0,R=.5*(l+Math.sin(l)/w)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(R/Math.PI+1),z:0}}unproject(i,l){let f=i=(2*i-.5)*Math.PI,g=l=(2*(1-l)-1)*Math.PI,x=25;const w=1e-6;let C=0,R=0;do{const k=Math.cos(g),B=Math.sin(g),j=2*B*k,G=B*B,Z=k*k,J=Math.cos(f/2),ue=Math.sin(f/2),ve=2*J*ue,Re=ue*ue,Ne=1-Z*J*J,De=Ne?1/Ne:0,ze=Ne?Math.acos(k*J)*Math.sqrt(1/Ne):0,je=.5*(2*ze*k*ue+2*f/Math.PI)-i,Ue=.5*(ze*B+g)-l,ht=.5*De*(Z*Re+ze*k*J*G)+1/Math.PI,at=De*(ve*j/4-ze*B*ue),wt=.125*De*(j*ue-ze*B*Z*ve),qt=.5*De*(G*J+ze*Re*k)+.5,pt=at*wt-qt*ht;C=(Ue*at-je*qt)/pt,R=(je*wt-Ue*ht)/pt,f=Be(f-C,-Math.PI,Math.PI),g=Be(g-R,-xe,xe)}while((Math.abs(C)>w||Math.abs(R)>w)&&--x>0);return new Jr(Ve(f),Ve(g))}}class mt extends vh{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(de(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:f,cosPhi:g}=this;return{x:de(i)*g*f+.5,y:-Math.sin(de(l))/g*f+.5,z:0}}unproject(i,l){const{scale:f,cosPhi:g}=this,x=-(l-.5)/f,w=Be(Ve((i-.5)/f)/g,-180,180),C=Math.asin(Be(x*g,-1,1)),R=Be(Ve(C),-lo,lo);return new Jr(w,R)}}class kt extends P{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,f){const g=zi(i,l,f);return ys(g,g,Jp(So(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(i,l){const f=lu(l.lat,l.lng),g=qo([],f),x=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;Yp(f,f,g,Dl(1,0)*Rn*x);const w=Il(new Float64Array(16));return rd(w,i.pixelMatrix,i.globeMatrix),ys(f,f,w),new se(f[0],f[1])}pixelsPerMeter(i,l){return Dl(1,0)*l}pixelSpaceConversion(i,l,f){const g=Dl(1,i)*l,x=rr(Dl(1,45)*l,g,f);return this.pixelsPerMeter(i,l)/x}createTileMatrix(i,l,f){const g=Df(So(f.canonical));return rd(new Float64Array(16),i.globeMatrix,g)}createInversionMatrix(i,l){const{center:f}=i,g=Jp(So(l));return i_(g,g,de(f.lng)),r_(g,g,de(f.lat)),id(g,g,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(i,l,f,g){return A0(i,l,f,!0)||new Bi(0,0)}pointCoordinate3D(i,l,f){const g=this.pointCoordinate(i,l,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(i,l){return!A0(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=(function(g,x){const w=g.cameraToCenterDistance,C=g._centerAltitude*x,R=g._camera,k=g._camera.forward(),B=Ml([],Ia([],k,-w),[0,0,C]),j=g.worldSize/(2*Math.PI),G=[0,0,-j],Z=g.width/g.height,J=Math.tan(g.fovAboveCenter),ue=Ia([],R.up(),J),ve=Ia([],R.right(),J*Z),Re=qo([],Ml([],Ml([],k,ue),ve)),Ne=[];let De;if(new l_(B,Re).closestPointOnSphere(G,j,Ne)){const ze=Ml([],Ne,G),je=Jl([],ze,B);De=Math.cos(g.fovAboveCenter)*Gp(je)}else{const ze=Jl([],B,G),je=Jl([],G,B);qo(je,je);const Ue=Gp(ze)-j;De=Math.sqrt(Ue*(Ue+2*j));const ht=Math.acos(De/(j+Ue))-Math.acos(wo(k,je));De*=Math.cos(ht)}return 1.01*De})(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),f=kf(i.zoom);if(f>0){const g=Nw(i,Dl(1,i.center.lat)*i.worldSize),x=i.worldSize/(2*Math.PI),w=Math.max(i.width,i.height)/i.worldSize*Math.PI;return rr(l,g+x*(1-Math.cos(w)),Math.pow(f,10))}return l}upVector(i,l,f){return zi(l,f,i,1)}upVectorScale(i){return{metersToTile:Zp(f_(So(i)))}}}function jt(a){const i=a.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(a.name){case"mercator":return new P(a);case"equirectangular":return new u(a);case"naturalEarth":return new ne(a);case"equalEarth":return new U_(a);case"winkelTripel":return new We(a);case"albers":return l?new mt(a):new ym(a);case"lambertConformalConic":return l?new mt(a):new E(a);case"globe":return new kt(a)}throw new Error(`Invalid projection name: ${a.name}`)}const gt=A_.types,Tt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function In(a,i,l,f,g,x,w,C,R,k,B,j,G){const Z=C?Math.min(_h,Math.round(C[0])):0,J=C?Math.min(_h,Math.round(C[1])):0;a.emplaceBack(i,l,Math.round(32*f),Math.round(32*g),x,w,(Z<<1)+(R?1:0),J,16*k,16*B,256*j,256*G)}function Kn(a,i,l,f,g,x,w){a.emplaceBack(i,l,f,g,x,w)}function Ai(a,i,l,f,g){a.emplaceBack(i,l,f,g),a.emplaceBack(i,l,f,g),a.emplaceBack(i,l,f,g),a.emplaceBack(i,l,f,g)}function st(a){for(const i of a.sections)if(xg(i.text))return!0;return!1}class Ze{constructor(i){this.layoutVertexArray=new St,this.indexArray=new xn,this.programConfigurations=i,this.segments=new gs,this.dynamicLayoutVertexArray=new zt,this.opacityVertexArray=new Sn,this.placedSymbolArray=new ms,this.globeExtVertexArray=new It}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,mw.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Yi.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,Tt,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,gw.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}fn(Ze,"SymbolBuffers");class ft{constructor(i,l,f){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new f,this.segments=new gs,this.collisionVertexArray=new Ln,this.collisionVertexArrayExt=new ar}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,ex.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,Yo.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}fn(ft,"CollisionBuffers");class Pt{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((w=>w.id)),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Il([]),this.placementViewportMatrix=Il([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ng(this.zoom,l["text-size"]),this.iconSizeData=Ng(this.zoom,l["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map((w=>Ll[w])),this.stateDependentLayerIds=this.layers.filter((w=>w.isStateDependent())).map((w=>w.id)),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new Ze(new au(this.layers,this.zoom,(i=>/^text/.test(i)))),this.icon=new Ze(new au(this.layers,this.zoom,(i=>/^icon/.test(i)))),this.glyphOffsetArray=new Mi,this.lineVertexArray=new cs,this.symbolInstances=new Ei}calculateGlyphDependencies(i,l,f,g,x){for(let w=0;w<i.length;w++)if(l[i.charCodeAt(w)]=!0,g&&x){const C=Hf[i.charAt(w)];C&&(l[C.charCodeAt(0)]=!0)}}populate(i,l,f,g){const x=this.layers[0],w=x.layout,C=this.projection.name==="globe",R=w.get("text-font"),k=w.get("text-field"),B=w.get("icon-image"),j=(k.value.kind!=="constant"||k.value.value instanceof as&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(R.value.kind!=="constant"||R.value.value.length>0),G=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,Z=w.get("symbol-sort-key");if(this.features=[],!j&&!G)return;const J=l.iconDependencies,ue=l.glyphDependencies,ve=l.availableImages,Re=new U(this.zoom);for(const{feature:Ne,id:De,index:ze,sourceLayerIndex:je}of i){const Ue=x._featureFilter.needGeometry,ht=Ho(Ne,Ue);if(!x._featureFilter.filter(Re,ht,f))continue;if(Ue||(ht.geometry=Is(Ne,f,g)),C&&Ne.type!==1&&f.z<=5){const pt=ht.geometry,Mt=.98078528056,Rt=(Vt,Xt)=>wo(zi(Vt.x,Vt.y,f,1),zi(Xt.x,Xt.y,f,1))<Mt;for(let Vt=0;Vt<pt.length;Vt++)pt[Vt]=q1(pt[Vt],Rt)}let at,wt;if(j){const pt=x.getValueAndResolveTokens("text-field",ht,f,ve),Mt=as.factory(pt);st(Mt)&&(this.hasRTLText=!0),(!this.hasRTLText||A()==="unavailable"||this.hasRTLText&&z.isParsed())&&(at=tx(Mt,x,ht))}if(G){const pt=x.getValueAndResolveTokens("icon-image",ht,f,ve);wt=pt instanceof fs?pt:fs.fromString(pt)}if(!at&&!wt)continue;const qt=this.sortFeaturesByKey?Z.evaluate(ht,{},f):void 0;if(this.features.push({id:De,text:at,icon:wt,index:ze,sourceLayerIndex:je,geometry:ht.geometry,properties:Ne.properties,type:gt[Ne.type],sortKey:qt}),wt&&(J[wt.name]=!0),at){const pt=R.evaluate(ht,{},f).join(","),Mt=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ll.vertical)>=0;for(const Rt of at.sections)if(Rt.image)J[Rt.image.name]=!0;else{const Vt=_g(at.toString()),Xt=Rt.fontStack||pt,bt=ue[Xt]=ue[Xt]||{};this.calculateGlyphDependencies(Rt.text,bt,Mt,this.allowVerticalPlacement,Vt)}}}w.get("symbol-placement")==="line"&&(this.features=(function(Ne){const De={},ze={},je=[];let Ue=0;function ht(pt){je.push(Ne[pt]),Ue++}function at(pt,Mt,Rt){const Vt=ze[pt];return delete ze[pt],ze[Mt]=Vt,je[Vt].geometry[0].pop(),je[Vt].geometry[0]=je[Vt].geometry[0].concat(Rt[0]),Vt}function wt(pt,Mt,Rt){const Vt=De[Mt];return delete De[Mt],De[pt]=Vt,je[Vt].geometry[0].shift(),je[Vt].geometry[0]=Rt[0].concat(je[Vt].geometry[0]),Vt}function qt(pt,Mt,Rt){const Vt=Rt?Mt[0][Mt[0].length-1]:Mt[0][0];return`${pt}:${Vt.x}:${Vt.y}`}for(let pt=0;pt<Ne.length;pt++){const Mt=Ne[pt],Rt=Mt.geometry,Vt=Mt.text?Mt.text.toString():null;if(!Vt){ht(pt);continue}const Xt=qt(Vt,Rt),bt=qt(Vt,Rt,!0);if(Xt in ze&&bt in De&&ze[Xt]!==De[bt]){const cn=wt(Xt,bt,Rt),_n=at(Xt,bt,je[cn].geometry);delete De[Xt],delete ze[bt],ze[qt(Vt,je[_n].geometry,!0)]=_n,je[cn].geometry=null}else Xt in ze?at(Xt,bt,Rt):bt in De?wt(Xt,bt,Rt):(ht(pt),De[Xt]=Ue-1,ze[bt]=Ue-1)}return je.filter((pt=>pt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ne,De)=>Ne.sortKey-De.sortKey))}update(i,l,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,f,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=jt(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const f=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:g,y:x}of l)this.lineVertexArray.emplaceBack(g,x);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,l,f,g,x,w,C,R,k,B,j,G,Z,J){const ue=i.indexArray,ve=i.layoutVertexArray,Re=i.globeExtVertexArray,Ne=i.segments.prepareSegment(4*l.length,ve,ue,this.canOverlap?w.sortKey:void 0),De=this.glyphOffsetArray.length,ze=Ne.vertexLength,je=this.allowVerticalPlacement&&C===Ll.vertical?Math.PI/2:0,Ue=w.text&&w.text.sections;for(let at=0;at<l.length;at++){const{tl:wt,tr:qt,bl:pt,br:Mt,tex:Rt,pixelOffsetTL:Vt,pixelOffsetBR:Xt,minFontScaleX:bt,minFontScaleY:cn,glyphOffset:_n,isSDF:un,sectionIndex:lr}=l[at],Zt=Ne.vertexLength,kn=_n[1];if(In(ve,k.x,k.y,wt.x,kn+wt.y,Rt.x,Rt.y,f,un,Vt.x,Vt.y,bt,cn),In(ve,k.x,k.y,qt.x,kn+qt.y,Rt.x+Rt.w,Rt.y,f,un,Xt.x,Vt.y,bt,cn),In(ve,k.x,k.y,pt.x,kn+pt.y,Rt.x,Rt.y+Rt.h,f,un,Vt.x,Xt.y,bt,cn),In(ve,k.x,k.y,Mt.x,kn+Mt.y,Rt.x+Rt.w,Rt.y+Rt.h,f,un,Xt.x,Xt.y,bt,cn),R){const{x:cr,y:Xr,z:ur}=R.anchor,[Un,Xi,dr]=R.up;Kn(Re,cr,Xr,ur,Un,Xi,dr),Kn(Re,cr,Xr,ur,Un,Xi,dr),Kn(Re,cr,Xr,ur,Un,Xi,dr),Kn(Re,cr,Xr,ur,Un,Xi,dr),Ai(i.dynamicLayoutVertexArray,cr,Xr,ur,je)}else Ai(i.dynamicLayoutVertexArray,k.x,k.y,k.z,je);ue.emplaceBack(Zt,Zt+1,Zt+2),ue.emplaceBack(Zt+1,Zt+2,Zt+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_n[0]),at!==l.length-1&&lr===l[at+1].sectionIndex||i.programConfigurations.populatePaintArrays(ve.length,w,w.index,{},Z,J,Ue&&Ue[lr])}const ht=R?R.anchor:k;i.placedSymbolArray.emplaceBack(ht.x,ht.y,ht.z,k.x,k.y,De,this.glyphOffsetArray.length-De,ze,B,j,k.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],C,0,!1,0,G,0)}_commitLayoutVertex(i,l,f,g,x,w,C){i.emplaceBack(l,f,g,x,w,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(i,l,f,g,x,w,C){const R=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),k=R.vertexLength,B=C.tileAnchorX,j=C.tileAnchorY;for(let Z=0;Z<4;Z++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),f.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),f.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),f.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,B,j,new se(i.x1,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,B,j,new se(i.x2,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,B,j,new se(i.x2,i.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,B,j,new se(i.x1,i.y2)),R.vertexLength+=4;const G=f.indexArray;G.emplaceBack(k,k+1),G.emplaceBack(k+1,k+2),G.emplaceBack(k+2,k+3),G.emplaceBack(k+3,k),R.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,f,g,x,w){for(let C=g;C<x;C++){const R=f.get(C),k=this.getSymbolInstanceTextSize(i,w,l,C);this._addCollisionDebugVertices(R,k,this.textCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(i,l,f,g,x,w){for(let C=g;C<x;C++){const R=f.get(C),k=this.getSymbolInstanceIconSize(i,l,w.placedIconSymbolIndex);this._addCollisionDebugVertices(R,k,this.iconCollisionBox,R.projectedAnchorX,R.projectedAnchorY,R.projectedAnchorZ,w)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ft(Bt,yw.members,Pr),this.iconCollisionBox=new ft(Bt,yw.members,Pr);const f=qf(this.iconSizeData,i),g=qf(this.textSizeData,i);for(let x=0;x<this.symbolInstances.length;x++){const w=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(g,i,l,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,i,l,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,i,l,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,i,l,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(i,l,f,g){const x=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:g),w=$f(this.textSizeData,i,x)/uo;return this.tilePixelRatio*w}getSymbolInstanceIconSize(i,l,f){const g=this.icon.placedSymbolArray.get(f),x=$f(this.iconSizeData,i,g);return this.tilePixelRatio*x}_commitDebugCollisionVertexUpdate(i,l,f){i.emplaceBack(l,-f,-f),i.emplaceBack(l,f,-f),i.emplaceBack(l,f,f),i.emplaceBack(l,-f,f)}_updateTextDebugCollisionBoxes(i,l,f,g,x,w){for(let C=g;C<x;C++){const R=f.get(C),k=this.getSymbolInstanceTextSize(i,w,l,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,k,R.padding)}}_updateIconDebugCollisionBoxes(i,l,f,g,x,w){for(let C=g;C<x;C++){const R=f.get(C),k=this.getSymbolInstanceIconSize(i,l,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,k,R.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=qf(this.iconSizeData,i),g=qf(this.textSizeData,i);for(let x=0;x<this.symbolInstances.length;x++){const w=this.symbolInstances.get(x);this._updateTextDebugCollisionBoxes(g,i,l,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,i,l,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,i,l,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,i,l,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,f,g,x,w,C,R,k){const B={};if(l<f){const{x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze,featureIndex:je}=i.get(l);B.textBox={x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze},B.textFeatureIndex=je}if(g<x){const{x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze,featureIndex:je}=i.get(g);B.verticalTextBox={x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze},B.verticalTextFeatureIndex=je}if(w<C){const{x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze,featureIndex:je}=i.get(w);B.iconBox={x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze},B.iconFeatureIndex=je}if(R<k){const{x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze,featureIndex:je}=i.get(R);B.verticalIconBox={x1:j,y1:G,x2:Z,y2:J,padding:ue,projectedAnchorX:ve,projectedAnchorY:Re,projectedAnchorZ:Ne,tileAnchorX:De,tileAnchorY:ze},B.verticalIconFeatureIndex=je}return B}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const f=i.placedSymbolArray.get(l),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)i.indexArray.emplaceBack(x,x+1,x+2),i.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),f=Math.cos(i),g=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const R=this.symbolInstances.get(C);g.push(0|Math.round(l*R.tileAnchorX+f*R.tileAnchorY)),x.push(R.featureIndex)}return w.sort(((C,R)=>g[C]-g[R]||x[R]-x[C])),w}addToSortKeyRanges(i,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:x,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:R,verticalPlacedIconSymbolIndex:k}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),x>=0&&x!==g&&this.addIndicesForPlacedSymbol(this.text,x),w>=0&&w!==x&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R),k>=0&&this.addIndicesForPlacedSymbol(this.icon,k)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}fn(Pt,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Pt.MAX_GLYPHS=65535,Pt.addDynamicAttributes=Ai;const Yn=new Le({"symbol-placement":new oe(xt.layout_symbol["symbol-placement"]),"symbol-spacing":new oe(xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new oe(xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new be(xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new oe(xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new oe(xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new oe(xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new oe(xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new oe(xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new be(xt.layout_symbol["icon-size"]),"icon-text-fit":new oe(xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new oe(xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new be(xt.layout_symbol["icon-image"]),"icon-rotate":new be(xt.layout_symbol["icon-rotate"]),"icon-padding":new oe(xt.layout_symbol["icon-padding"]),"icon-keep-upright":new oe(xt.layout_symbol["icon-keep-upright"]),"icon-offset":new be(xt.layout_symbol["icon-offset"]),"icon-anchor":new be(xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new oe(xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new oe(xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new oe(xt.layout_symbol["text-rotation-alignment"]),"text-field":new be(xt.layout_symbol["text-field"]),"text-font":new be(xt.layout_symbol["text-font"]),"text-size":new be(xt.layout_symbol["text-size"]),"text-max-width":new be(xt.layout_symbol["text-max-width"]),"text-line-height":new be(xt.layout_symbol["text-line-height"]),"text-letter-spacing":new be(xt.layout_symbol["text-letter-spacing"]),"text-justify":new be(xt.layout_symbol["text-justify"]),"text-radial-offset":new be(xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new oe(xt.layout_symbol["text-variable-anchor"]),"text-anchor":new be(xt.layout_symbol["text-anchor"]),"text-max-angle":new oe(xt.layout_symbol["text-max-angle"]),"text-writing-mode":new oe(xt.layout_symbol["text-writing-mode"]),"text-rotate":new be(xt.layout_symbol["text-rotate"]),"text-padding":new oe(xt.layout_symbol["text-padding"]),"text-keep-upright":new oe(xt.layout_symbol["text-keep-upright"]),"text-transform":new be(xt.layout_symbol["text-transform"]),"text-offset":new be(xt.layout_symbol["text-offset"]),"text-allow-overlap":new oe(xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new oe(xt.layout_symbol["text-ignore-placement"]),"text-optional":new oe(xt.layout_symbol["text-optional"])});var oi={paint:new Le({"icon-opacity":new be(xt.paint_symbol["icon-opacity"]),"icon-color":new be(xt.paint_symbol["icon-color"]),"icon-halo-color":new be(xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new be(xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new be(xt.paint_symbol["icon-halo-blur"]),"icon-translate":new oe(xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new oe(xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new be(xt.paint_symbol["text-opacity"]),"text-color":new be(xt.paint_symbol["text-color"],{runtimeType:Gs,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new be(xt.paint_symbol["text-halo-color"]),"text-halo-width":new be(xt.paint_symbol["text-halo-width"]),"text-halo-blur":new be(xt.paint_symbol["text-halo-blur"]),"text-translate":new oe(xt.paint_symbol["text-translate"]),"text-translate-anchor":new oe(xt.paint_symbol["text-translate-anchor"])}),layout:Yn};class Nn{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Va,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fn(Nn,"FormatSectionOverride",{omit:["defaultValue"]});class xr extends Ql{constructor(i){super(i,oi)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,f,g){const x=this.layout.get(i).evaluate(l,{},f,g),w=this._unevaluatedLayout._values[i];return w.isDataDriven()||Ku(w.value)||!x?x:(function(C,R){return R.replace(/{([^{}]+)}/g,((k,B)=>B in C?String(C[B]):""))})(l.properties,x)}createBucket(i){return new Pt(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of oi.paint.overridableProperties){if(!xr.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),f=new Nn(l),g=new Xa(f,l.property.specification);let x=null;x=l.value.kind==="constant"||l.value.kind==="source"?new _c("source",g):new Zu("composite",g,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new Te(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&xr.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const f=i.get("text-field"),g=oi.paint.properties[l];let x=!1;const w=C=>{for(const R of C)if(g.overrides&&g.overrides.hasOverride(R))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof as)w(f.value.value.sections);else if(f.value.kind==="source"){const C=k=>{x||(k instanceof _l&&si(k.value)===qc?w(k.value.sections):k instanceof yo?w(k.sections):k.eachChild(C))},R=f.value;R._styleExpression&&C(R._styleExpression.expression)}return x}getProgramConfiguration(i){return new oh(this,i)}}var Yr={paint:new Le({"background-color":new oe(xt.paint_background["background-color"]),"background-pattern":new oe(xt.paint_background["background-pattern"]),"background-opacity":new oe(xt.paint_background["background-opacity"])})},yi={paint:new Le({"raster-opacity":new oe(xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new oe(xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new oe(xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new oe(xt.paint_raster["raster-brightness-max"]),"raster-saturation":new oe(xt.paint_raster["raster-saturation"]),"raster-contrast":new oe(xt.paint_raster["raster-contrast"]),"raster-resampling":new oe(xt.paint_raster["raster-resampling"]),"raster-fade-duration":new oe(xt.paint_raster["raster-fade-duration"])})};class Ed extends Ql{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var yC={paint:new Le({"sky-type":new oe(xt.paint_sky["sky-type"]),"sky-atmosphere-sun":new oe(xt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new oe(xt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new oe(xt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new oe(xt.paint_sky["sky-gradient-radius"]),"sky-gradient":new Pe(xt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new oe(xt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new oe(xt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new oe(xt.paint_sky["sky-opacity"])})};function _C(a,i,l){const f=[0,0,1],g=To([]);return w0(g,g,l?-de(a)+Math.PI:de(a)),b0(g,g,-de(i)),_0(f,f,g),qo(f,f)}const TU={circle:class extends Ql{constructor(a){super(a,oC)}createBucket(a){return new v_(a)}queryRadius(a){const i=a;return Nf("circle-radius",this,i)+Nf("circle-stroke-width",this,i)+ad(this.paint.get("circle-translate"))}queryIntersectsFeature(a,i,l,f,g,x,w,C){const R=Rg(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,a.pixelToTileUnitsFactor),k=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return Y1(a,f,x,w,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",R,k)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new oh(this,a)}},heatmap:class extends Ql{createBucket(a){return new Ri(a)}constructor(a){super(a,Rs),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Nf("heatmap-radius",this,a)}queryIntersectsFeature(a,i,l,f,g,x,w,C){const R=this.paint.get("heatmap-radius").evaluate(i,l);return Y1(a,f,x,w,C,!0,!0,new se(0,0),R)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new oh(this,a)}},hillshade:class extends Ql{constructor(a){super(a,Bf)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ql{constructor(a){super(a,tw)}getProgramIds(){const a=this.paint.get("fill-pattern"),i=a&&a.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(a){return new oh(this,a)}recalculate(a,i){super.recalculate(a,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new T_(a)}queryRadius(){return ad(this.paint.get("fill-translate"))}queryIntersectsFeature(a,i,l,f,g,x){return!a.queryGeometry.isAboveHorizon&&du(L0(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,a.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Ql{constructor(a){super(a,uw)}createBucket(a){return new sl(a)}queryRadius(){return ad(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new oh(this,a)}queryIntersectsFeature(a,i,l,f,g,x,w,C,R){const k=Rg(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,a.pixelToTileUnitsFactor),B=this.paint.get("fill-extrusion-height").evaluate(i,l),j=this.paint.get("fill-extrusion-base").evaluate(i,l),G=[0,0],Z=C&&x.elevation,J=x.elevation?x.elevation.exaggeration():1,ue=a.tile.getBucket(this);if(Z&&ue instanceof sl){const ze=ue.centroidVertexArray,je=R+1;je<ze.length&&(G[0]=ze.geta_centroid_pos0(je),G[1]=ze.geta_centroid_pos1(je))}if(G[0]===0&&G[1]===1)return!1;x.projection.name==="globe"&&(f=I_([f],[new se(0,0),new se(Rn,Rn)],a.tileID.canonical).map((ze=>ze.polygon)).flat());const ve=Z?C:null,[Re,Ne]=(function(ze,je,Ue,ht,at,wt,qt,pt,Mt,Rt,Vt){return ze.projection.name==="globe"?(function(Xt,bt,cn,_n,un,lr,Zt,kn,cr,Xr,ur){const Un=[],Xi=[],dr=Xt.projection.upVectorScale(ur,Xt.center.lat,Xt.worldSize).metersToTile,fr=[0,0,0,1],ki=[0,0,0,1],Fi=(Pi,_s,Ts,Bs)=>{Pi[0]=_s,Pi[1]=Ts,Pi[2]=Bs,Pi[3]=1},Vi=lw();cn>0&&(cn+=Vi),_n+=Vi;for(const Pi of bt){const _s=[],Ts=[];for(const Bs of Pi){const Li=Bs.x+un.x,Xs=Bs.y+un.y,Fs=Xt.projection.projectTilePoint(Li,Xs,ur),vs=Xt.projection.upVector(ur,Bs.x,Bs.y);let ti=cn,Vs=_n;if(Zt){const Ui=Fr(Li,Xs,cn,_n,Zt,kn,cr,Xr);ti+=Ui.base,Vs+=Ui.top}cn!==0?Fi(fr,Fs.x+vs[0]*dr*ti,Fs.y+vs[1]*dr*ti,Fs.z+vs[2]*dr*ti):Fi(fr,Fs.x,Fs.y,Fs.z),Fi(ki,Fs.x+vs[0]*dr*Vs,Fs.y+vs[1]*dr*Vs,Fs.z+vs[2]*dr*Vs),ys(fr,fr,lr),ys(ki,ki,lr),_s.push(new pu(fr[0],fr[1],fr[2])),Ts.push(new pu(ki[0],ki[1],ki[2]))}Un.push(_s),Xi.push(Ts)}return[Un,Xi]})(ze,je,Ue,ht,at,wt,qt,pt,Mt,Rt,Vt):qt?(function(Xt,bt,cn,_n,un,lr,Zt,kn,cr){const Xr=[],ur=[],Un=[0,0,0,1];for(const Xi of Xt){const dr=[],fr=[];for(const ki of Xi){const Fi=ki.x+_n.x,Vi=ki.y+_n.y,Pi=Fr(Fi,Vi,bt,cn,lr,Zt,kn,cr);Un[0]=Fi,Un[1]=Vi,Un[2]=Pi.base,Un[3]=1,lh(Un,Un,un),Un[3]=Math.max(Un[3],1e-5);const _s=new pu(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);Un[0]=Fi,Un[1]=Vi,Un[2]=Pi.top,Un[3]=1,lh(Un,Un,un),Un[3]=Math.max(Un[3],1e-5);const Ts=new pu(Un[0]/Un[3],Un[1]/Un[3],Un[2]/Un[3]);dr.push(_s),fr.push(Ts)}Xr.push(dr),ur.push(fr)}return[Xr,ur]})(je,Ue,ht,at,wt,qt,pt,Mt,Rt):(function(Xt,bt,cn,_n,un){const lr=[],Zt=[],kn=un[8]*bt,cr=un[9]*bt,Xr=un[10]*bt,ur=un[11]*bt,Un=un[8]*cn,Xi=un[9]*cn,dr=un[10]*cn,fr=un[11]*cn;for(const ki of Xt){const Fi=[],Vi=[];for(const Pi of ki){const _s=Pi.x+_n.x,Ts=Pi.y+_n.y,Bs=un[0]*_s+un[4]*Ts+un[12],Li=un[1]*_s+un[5]*Ts+un[13],Xs=un[2]*_s+un[6]*Ts+un[14],Fs=un[3]*_s+un[7]*Ts+un[15],vs=Bs+kn,ti=Li+cr,Vs=Xs+Xr,Ui=Math.max(Fs+ur,1e-5),ol=Bs+Un,Us=Li+Xi,Ko=Xs+dr,Ao=Math.max(Fs+fr,1e-5);Fi.push(new pu(vs/Ui,ti/Ui,Vs/Ui)),Vi.push(new pu(ol/Ao,Us/Ao,Ko/Ao))}lr.push(Fi),Zt.push(Vi)}return[lr,Zt]})(je,Ue,ht,at,wt)})(x,f,j,B,k,w,ve,G,J,x.center.lat,a.tileID.canonical),De=a.queryGeometry;return(function(ze,je,Ue){let ht=1/0;du(Ue,je)&&(ht=X0(Ue,je[0]));for(let at=0;at<je.length;at++){const wt=je[at],qt=ze[at];for(let pt=0;pt<wt.length-1;pt++){const Mt=wt[pt],Rt=[Mt,wt[pt+1],qt[pt+1],qt[pt],Mt];hu(Ue,Rt)&&(ht=Math.min(ht,X0(Ue,Rt)))}}return ht!==1/0&&ht})(Re,Ne,De.isPointQuery()?De.screenBounds:De.screenGeometry)}},line:class extends Ql{constructor(a){super(a,J0),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Gi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,i){super.recalculate(a,i),this.paint._values["line-floorwidth"]=fw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new jf(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new oh(this,a)}queryRadius(a){const i=a,l=pw(Nf("line-width",this,i),Nf("line-gap-width",this,i)),f=Nf("line-offset",this,i);return l/2+Math.abs(f)+ad(this.paint.get("line-translate"))}queryIntersectsFeature(a,i,l,f,g,x){if(a.queryGeometry.isAboveHorizon)return!1;const w=L0(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,a.pixelToTileUnitsFactor),C=a.pixelToTileUnitsFactor/2*pw(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),R=this.paint.get("line-offset").evaluate(i,l);return R&&(f=(function(k,B){const j=[],G=new se(0,0);for(let Z=0;Z<k.length;Z++){const J=k[Z],ue=[];for(let ve=0;ve<J.length;ve++){const Re=J[ve],Ne=J[ve+1],De=ve===0?G:Re.sub(J[ve-1])._unit()._perp(),ze=ve===J.length-1?G:Ne.sub(Re)._unit()._perp(),je=De._add(ze)._unit();je._mult(1/(je.x*ze.x+je.y*ze.y)),ue.push(je._mult(B)._add(Re))}j.push(ue)}return j})(f,R*a.pixelToTileUnitsFactor)),(function(k,B,j){for(let G=0;G<B.length;G++){const Z=B[G];if(k.length>=3){for(let J=0;J<Z.length;J++)if(Ic(k,Z[J]))return!0}if(P0(k,Z,j))return!0}return!1})(w,f,C)}isTileClipped(){return!0}},symbol:xr,background:class extends Ql{constructor(a){super(a,Yr)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ql{constructor(a){super(a,yi)}getProgramIds(){return["raster"]}},sky:class extends Ql{constructor(a){super(a,yC),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=fu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(a,i){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),g=!f,x=a.style.light,w=x.properties.get("position");return g&&x.properties.get("anchor")==="viewport"&&On("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?_C(w.azimuthal,90-w.polar,i):_C(f[0],90-f[1],i)}const l=this.paint.get("sky-gradient-center");return _C(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class vx{constructor(i,l,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(l,g)}update(i,l,f){const{width:g,height:x}=i,{context:w}=this,{gl:C}=w,{HTMLImageElement:R,HTMLCanvasElement:k,HTMLVideoElement:B,ImageData:j,ImageBitmap:G}=T;if(C.bindTexture(C.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!l||l.premultiply!==!1)),f||this.size&&this.size[0]===g&&this.size[1]===x){const{x:Z,y:J}=f||{x:0,y:0};i instanceof R||i instanceof k||i instanceof B||i instanceof j||G&&i instanceof G?C.texSubImage2D(C.TEXTURE_2D,0,Z,J,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,Z,J,g,x,C.RGBA,C.UNSIGNED_BYTE,i.data)}else this.size=[g,x],i instanceof R||i instanceof k||i instanceof B||i instanceof j||G&&i instanceof G?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,g,x,0,this.format,C.UNSIGNED_BYTE,i.data);this.useMipmap=!!(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&C.generateMipmap(C.TEXTURE_2D)}bind(i,l){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),i!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?i===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,l),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class EU{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class SU{constructor(){this.tasks={},this.taskQueue=[],Tn(["process"],this),this.invoker=new EU(this.process),this.nextId=0}add(i,l){const f=this.nextId++,g=(function({type:x,isSymbolTile:w,zoom:C}){return C=C||0,x==="message"?0:x!=="maybePrepare"||w?x!=="parseTile"||w?x==="parseTile"&&w?300-C:x==="maybePrepare"&&w?400-C:500:200-C:100-C})(l);if(g===0){$n();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:i,metadata:l,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){$n();try{if(this.taskQueue=this.taskQueue.filter((f=>!!this.tasks[f])),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let g=0;g<this.taskQueue.length;g++){const x=this.tasks[this.taskQueue[g]];x.priority<l&&(l=x.priority,i=g)}if(i===null)return null;const f=this.taskQueue[i];return this.taskQueue.splice(i,1),f}remove(){this.invoker.remove()}}class Tk{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const f=i[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const CU=["tile","layer","source","sourceLayer","state"];class Ek{constructor(i,l,f,g,x){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=f,this._y=g,this.properties=i.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of CU)this[l]!==void 0&&(i[l]=this[l]);return i}}const vu=32,Sd=33,xm=new Uint16Array(8184);for(let a=0;a<2046;a++){let i=a+2,l=0,f=0,g=0,x=0,w=0,C=0;for(1&i?g=x=w=vu:l=f=C=vu;(i>>=1)>1;){const k=l+g>>1,B=f+x>>1;1&i?(g=l,x=f,l=w,f=C):(l=g,f=x,g=w,x=C),w=k,C=B}const R=4*a;xm[R+0]=l,xm[R+1]=f,xm[R+2]=g,xm[R+3]=x}const Cd=new Uint16Array(2178),bm=new Uint8Array(1089),Bw=new Uint16Array(1089);function Sk(a){return a===0?-.03125:a===32?.03125:0}var Ck=Qe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Ak={type:2,extent:Rn,loadGeometry:()=>[[new se(0,0),new se(Rn+1,0),new se(Rn+1,Rn+1),new se(0,Rn+1),new se(0,0)]]};class vC{constructor(i,l,f,g,x){this.tileID=i,this.uid=Kt(),this.uses=0,this.tileSize=l,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=x,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<ma.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=_u(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,f){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=(function(g,x){const w={};if(!x)return w;for(const C of g){const R=C.layerIds.map((k=>x.getLayer(k))).filter(Boolean);if(R.length!==0){C.layers=R,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map((k=>R.filter((B=>B.id===k))[0])));for(const k of R)w[k.id]=C}}return w})(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof Pt){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof Pt&&x.hasRTLText){this.hasRTLText=!0,z.isLoading()||z.isLoaded()||A()!=="deferred"||O();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new fi}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vx(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vx(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vx(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,f,g,x,w,C,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:C,transform:w,params:x,tileTransform:this.tileTransform},i,l,f):{}}querySourceFeatures(i,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=l?l.sourceLayer:"",w=g._geojsonTileLayer||g[x];if(!w)return;const C=Sa(l&&l.filter),{z:R,x:k,y:B}=this.tileID.canonical,j={z:R,x:k,y:B};for(let G=0;G<w.length;G++){const Z=w.feature(G);if(C.needGeometry){const ve=Ho(Z,!0);if(!C.filter(new U(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!C.filter(new U(this.tileID.overscaledZ),Z))continue;const J=f.getId(Z,x),ue=new Ek(Z,R,k,B,J);ue.tile=j,i.push(ue)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const f=Vn(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const x=this.expirationTime-l;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const f=this.latestFeatureIndex.loadVTLayers(),g=l.style.listImages();for(const x in this.buckets){if(!l.style.hasLayer(x))continue;const w=this.buckets[x],C=w.layers[0].sourceLayer||"_geojsonTileLayer",R=f[C],k=i[C];if(!R||!k||Object.keys(k).length===0)continue;if(w.update(k,R,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof jf||w instanceof T_){const j=l.style._getSourceCache(w.layers[0].source);l._terrain&&l._terrain.enabled&&j&&w.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(j.id,this.tileID)}const B=l&&l.style&&l.style.getLayer(x);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ma.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=ma.now()+i}setTexture(i,l){const f=l.context,g=f.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new vx(f,i,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE))}setDependencies(i,l){const f={};for(const g of l)f[g]=!0;this.dependencies[i]=f}hasDependency(i,l){for(const f of i){const g=this.dependencies[f];if(g){for(const x of l)if(g[x])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const f=Is(Ak,this.tileID.canonical,this.tileTransform)[0],g=new Ut,x=new la;for(let w=0;w<f.length;w++){const{x:C,y:R}=f[w];g.emplaceBack(C,R),x.emplaceBack(w)}x.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(x),this._tileDebugBuffer=i.createVertexBuffer(g,od.members),this._tileDebugSegments=gs.simpleSegment(0,0,g.length,x.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const f=Is(Ak,this.tileID.canonical,this.tileTransform)[0];let g,x;if(this.isRaster){const w=(function(C,R){const k=_u(C,R),B=Math.pow(2,C.z);for(let ve=0;ve<Sd;ve++)for(let Re=0;Re<Sd;Re++){const Ne=nl((C.x+(Re+Sk(Re))/vu)/B),De=ei((C.y+(ve+Sk(ve))/vu)/B),ze=R.project(Ne,De),je=ve*Sd+Re;Cd[2*je+0]=Math.round((ze.x*k.scale-k.x)*Rn),Cd[2*je+1]=Math.round((ze.y*k.scale-k.y)*Rn)}bm.fill(0),Bw.fill(0);for(let ve=2045;ve>=0;ve--){const Re=4*ve,Ne=xm[Re+0],De=xm[Re+1],ze=xm[Re+2],je=xm[Re+3],Ue=Ne+ze>>1,ht=De+je>>1,at=Ue+ht-De,wt=ht+Ne-Ue,qt=De*Sd+Ne,pt=je*Sd+ze,Mt=ht*Sd+Ue,Rt=Math.hypot((Cd[2*qt+0]+Cd[2*pt+0])/2-Cd[2*Mt+0],(Cd[2*qt+1]+Cd[2*pt+1])/2-Cd[2*Mt+1])>=16;bm[Mt]=bm[Mt]||(Rt?1:0),ve<1022&&(bm[Mt]=bm[Mt]||bm[(De+wt>>1)*Sd+(Ne+at>>1)]||bm[(je+wt>>1)*Sd+(ze+at>>1)])}const j=new vt,G=new xn;let Z=0;function J(ve,Re){const Ne=Re*Sd+ve;return Bw[Ne]===0&&(j.emplaceBack(Cd[2*Ne+0],Cd[2*Ne+1],ve*Rn/vu,Re*Rn/vu),Bw[Ne]=++Z),Bw[Ne]-1}function ue(ve,Re,Ne,De,ze,je){const Ue=ve+Ne>>1,ht=Re+De>>1;if(Math.abs(ve-ze)+Math.abs(Re-je)>1&&bm[ht*Sd+Ue])ue(ze,je,ve,Re,Ue,ht),ue(Ne,De,ze,je,Ue,ht);else{const at=J(ve,Re),wt=J(Ne,De),qt=J(ze,je);G.emplaceBack(at,wt,qt)}}return ue(0,0,vu,vu,vu,0),ue(vu,vu,0,0,0,vu),{vertices:j,indices:G}})(this.tileID.canonical,l);g=w.vertices,x=w.indices}else{g=new vt,x=new xn;for(const{x:C,y:R}of f)g.emplaceBack(C,R,0,0);const w=md(g.int16,void 0,4);for(let C=0;C<w.length;C+=3)x.emplaceBack(w[C],w[C+1],w[C+2])}this._tileBoundsBuffer=i.createVertexBuffer(g,Ck.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(x),this._tileBoundsSegments=gs.simpleSegment(0,0,g.length,x.length)}_makeGlobeTileDebugBuffers(i,l){const f=l.projection;if(!f||f.name!=="globe"||l.freezeTileCoverage)return;const g=this.tileID.canonical,x=Jp(V1(g,l)),w=kf(l.zoom);let C;w>0&&(C=n_(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,g,l,x,C,w),this._makeGlobeTileDebugTextBuffer(i,g,l,x,C,w)}_globePoint(i,l,f,g,x,w,C){let R=zi(i,l,f);if(w){const k=1<<f.z,B=Co(g.center.lng),j=Ni(g.center.lat),G=(f.x+.5)/k-B;let Z=0;G>.5?Z=-1:G<-.5&&(Z=1);let J=(i/Rn+f.x)/k+Z,ue=(l/Rn+f.y)/k;J=(J-B)*g._pixelsPerMercatorPixel+B,ue=(ue-j)*g._pixelsPerMercatorPixel+j;const ve=[J*g.worldSize,ue*g.worldSize,0];ys(ve,ve,w),R=uh(R,ve,C)}return ys(R,R,x)}_makeGlobeTileDebugBorderBuffer(i,l,f,g,x,w){const C=new Ut,R=new la,k=new it,B=(G,Z,J,ue,ve)=>{const Re=(J-G)/(ve-1),Ne=(ue-Z)/(ve-1),De=C.length;for(let ze=0;ze<ve;ze++){const je=G+ze*Re,Ue=Z+ze*Ne;C.emplaceBack(je,Ue);const ht=this._globePoint(je,Ue,l,f,g,x,w);k.emplaceBack(ht[0],ht[1],ht[2]),R.emplaceBack(De+ze)}},j=Rn;B(0,0,j,0,16),B(j,0,j,j,16),B(j,j,0,j,16),B(0,j,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(R),this._tileDebugBuffer=i.createVertexBuffer(C,od.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(k,T0.members),this._tileDebugSegments=gs.simpleSegment(0,0,C.length,R.length)}_makeGlobeTileDebugTextBuffer(i,l,f,g,x,w){const C=Rn/4,R=new Ut,k=new xn,B=new it,j=25;k.reserve(32),R.reserve(j),B.reserve(j);const G=(Z,J)=>j*Z+J;for(let Z=0;Z<j;Z++){const J=Z*C;for(let ue=0;ue<j;ue++){const ve=ue*C;R.emplaceBack(ve,J);const Re=this._globePoint(ve,J,l,f,g,x,w);B.emplaceBack(Re[0],Re[1],Re[2])}}for(let Z=0;Z<4;Z++)for(let J=0;J<4;J++){const ue=G(Z,J),ve=G(Z,J+1),Re=G(Z+1,J),Ne=G(Z+1,J+1);k.emplaceBack(ue,ve,Re),k.emplaceBack(Re,ve,Ne)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(k),this._tileDebugTextBuffer=i.createVertexBuffer(R,od.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(B,T0.members),this._tileDebugTextSegments=gs.simpleSegment(0,0,j,32)}}class AU{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,f){const g=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},Dt(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])f[x]||(this.deletedStates[i][g][x]=null)}else for(const x in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,l,f){if(this.deletedStates[i]===null)return;const g=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&l!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,l){const f=String(l),g=Dt({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][l];if(x===null)return{};for(const w in x)delete g[w]}return g}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),Dt(this.state[g][w],this.stateChanges[g][w]),x[w]=this.state[g][w];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const w in this.state[g])x[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(this.deletedStates[g][w]===null)this.state[g][w]={};else if(this.state[g][w])for(const C of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][C];x[w]=this.state[g][w]}f[g]=f[g]||{},Dt(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,l)}}class Ik{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const f=this.toIdx(i,l);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function Mk(a,i,l,f){let g=0,x=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(l[w]<a[w]||l[w]>i[w])return null}else{const C=1/f[w];let R=(a[w]-l[w])*C,k=(i[w]-l[w])*C;if(R>k){const B=R;R=k,k=B}if(R>g&&(g=R),k<x&&(x=k),g>x)return null}return g}function Rk(a,i,l,f,g,x,w,C,R,k,B){const j=f-a,G=g-i,Z=x-l,J=w-a,ue=C-i,ve=R-l,Re=B[1]*ve-B[2]*ue,Ne=B[2]*J-B[0]*ve,De=B[0]*ue-B[1]*J,ze=j*Re+G*Ne+Z*De;if(Math.abs(ze)<1e-15)return null;const je=1/ze,Ue=k[0]-a,ht=k[1]-i,at=k[2]-l,wt=(Ue*Re+ht*Ne+at*De)*je;if(wt<0||wt>1)return null;const qt=ht*Z-at*G,pt=at*j-Ue*Z,Mt=Ue*G-ht*j,Rt=(B[0]*qt+B[1]*pt+B[2]*Mt)*je;return Rt<0||wt+Rt>1?null:(J*qt+ue*pt+ve*Mt)*je}function Dk(a,i,l){return(a-i)/(l-i)}function kk(a,i,l,f,g,x,w,C,R){const k=1<<l,B=x-f,j=w-g,G=(a+1)/k*B+f,Z=(i+0)/k*j+g,J=(i+1)/k*j+g;C[0]=(a+0)/k*B+f,C[1]=Z,R[0]=G,R[1]=J}class Pk{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=(function(x){const w=Math.ceil(Math.log2(x.dim/8)),C=[];let R=Math.ceil(Math.pow(2,w));const k=1/R,B=(Z,J,ue,ve,Re)=>{const Ne=ve?1:0,De=(Z+1)*ue-Ne,ze=J*ue,je=(J+1)*ue-Ne;Re[0]=Z*ue,Re[1]=ze,Re[2]=De,Re[3]=je};let j=new Ik(R);const G=[];for(let Z=0;Z<R*R;Z++){B(Z%R,Math.floor(Z/R),k,!1,G);const J=wm(G[0],G[1],x),ue=wm(G[2],G[1],x),ve=wm(G[2],G[3],x),Re=wm(G[0],G[3],x);j.minimums.push(Math.min(J,ue,ve,Re)),j.maximums.push(Math.max(J,ue,ve,Re)),j.leaves.push(1)}for(C.push(j),R/=2;R>=1;R/=2){const Z=C[C.length-1];j=new Ik(R);for(let J=0;J<R*R;J++){B(J%R,Math.floor(J/R),2,!0,G);const ue=Z.getElevation(G[0],G[1]),ve=Z.getElevation(G[2],G[1]),Re=Z.getElevation(G[2],G[3]),Ne=Z.getElevation(G[0],G[3]),De=Z.isLeaf(G[0],G[1]),ze=Z.isLeaf(G[2],G[1]),je=Z.isLeaf(G[2],G[3]),Ue=Z.isLeaf(G[0],G[3]),ht=Math.min(ue.min,ve.min,Re.min,Ne.min),at=Math.max(ue.max,ve.max,Re.max,Ne.max),wt=De&&ze&&je&&Ue;j.maximums.push(at),j.minimums.push(ht),j.leaves.push(at-ht<=5&&wt?1:0)}C.push(j)}return C})(this.dem),f=l.length-1,g=l[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(l,0,0,f,0)}raycastRoot(i,l,f,g,x,w,C=1){return Mk([i,l,-100],[f,g,this.maximums[0]*C],x,w)}raycast(i,l,f,g,x,w,C=1){if(!this.nodeCount)return null;const R=this.raycastRoot(i,l,f,g,x,w,C);if(R==null)return null;const k=[],B=[],j=[],G=[],Z=[{idx:0,t:R,nodex:0,nodey:0,depth:0}];for(;Z.length>0;){const{idx:J,t:ue,nodex:ve,nodey:Re,depth:Ne}=Z.pop();if(this.leaves[J]){kk(ve,Re,Ne,i,l,f,g,j,G);const ze=1<<Ne,je=(ve+0)/ze,Ue=(ve+1)/ze,ht=(Re+0)/ze,at=(Re+1)/ze,wt=wm(je,ht,this.dem)*C,qt=wm(Ue,ht,this.dem)*C,pt=wm(Ue,at,this.dem)*C,Mt=wm(je,at,this.dem)*C,Rt=Rk(j[0],j[1],wt,G[0],j[1],qt,G[0],G[1],pt,x,w),Vt=Rk(G[0],G[1],pt,j[0],G[1],Mt,j[0],j[1],wt,x,w),Xt=Math.min(Rt!==null?Rt:Number.MAX_VALUE,Vt!==null?Vt:Number.MAX_VALUE);if(Xt!==Number.MAX_VALUE)return Xt;{const bt=Yp([],x,w,ue);if(Lk(wt,qt,Mt,pt,Dk(bt[0],j[0],G[0]),Dk(bt[1],j[1],G[1]))>=bt[2])return ue}continue}let De=0;for(let ze=0;ze<this._siblingOffset.length;ze++){kk((ve<<1)+this._siblingOffset[ze][0],(Re<<1)+this._siblingOffset[ze][1],Ne+1,i,l,f,g,j,G),j[2]=-100,G[2]=this.maximums[this.childOffsets[J]+ze]*C;const je=Mk(j,G,x,w);if(je!=null){const Ue=je;k[ze]=Ue;let ht=!1;for(let at=0;at<De&&!ht;at++)Ue>=k[B[at]]&&(B.splice(at,0,ze),ht=!0);ht||(B[De]=ze),De++}}for(let ze=0;ze<De;ze++){const je=B[ze];Z.push({idx:this.childOffsets[J]+je,t:k[je],nodex:(ve<<1)+this._siblingOffset[je][0],nodey:(Re<<1)+this._siblingOffset[je][1],depth:Ne+1})}}return null}_addNode(i,l,f){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,f,g,x){if(i[g].isLeaf(l,f)===1)return;this.childOffsets[x]||(this.childOffsets[x]=this.nodeCount);const w=g-1,C=i[w];let R=0,k=0;for(let B=0;B<this._siblingOffset.length;B++){const j=2*l+this._siblingOffset[B][0],G=2*f+this._siblingOffset[B][1],Z=C.getElevation(j,G),J=C.isLeaf(j,G),ue=this._addNode(Z.min,Z.max,J);J&&(R|=1<<B),k||(k=ue)}for(let B=0;B<this._siblingOffset.length;B++)R&1<<B||this._construct(i,2*l+this._siblingOffset[B][0],2*f+this._siblingOffset[B][1],w,k+B)}}function Lk(a,i,l,f,g,x){return rr(rr(a,l,x),rr(i,f,x),g)}function wm(a,i,l){const f=l.dim,g=Be(a*f-.5,0,f-1),x=Be(i*f-.5,0,f-1),w=Math.floor(g),C=Math.floor(x),R=Math.min(w+1,f-1),k=Math.min(C+1,f-1);return Lk(l.get(w,C),l.get(R,C),l.get(w,k),l.get(R,k),g-w,x-C)}const Ok={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function IU(a,i,l){return(256*a*256+256*i+l)/10-1e4}function MU(a,i,l){return 256*a+i+l/256-32768}class Fw{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,f,g=!1,x=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return On(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const w=this.dim=l.height-2,C=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let R=0;R<w;R++)C[this._idx(-1,R)]=C[this._idx(0,R)],C[this._idx(w,R)]=C[this._idx(w-1,R)],C[this._idx(R,-1)]=C[this._idx(R,0)],C[this._idx(R,w)]=C[this._idx(R,w-1)];C[this._idx(-1,-1)]=C[this._idx(0,0)],C[this._idx(w,-1)]=C[this._idx(w-1,0)],C[this._idx(-1,w)]=C[this._idx(0,w-1)],C[this._idx(w,w)]=C[this._idx(w-1,w-1)],x&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Pk(this)}get(i,l,f=!1){f&&(i=Be(i,-1,this.dim),l=Be(l,-1,this.dim));const g=4*this._idx(i,l);return(this.encoding==="terrarium"?MU:IU)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(i){return Ok[i]}get unpackVector(){return Ok[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const f=[0,0,0,0],g=Fw.getUnpackVector(l);let x=Math.floor((i+g[3])/g[2]);return f[2]=x%256,x=Math.floor(x/256),f[1]=x%256,x=Math.floor(x/256),f[0]=x,f}getPixels(){return new Ms({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,x=l*this.dim+this.dim,w=f*this.dim,C=f*this.dim+this.dim;switch(l){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:w=C-1;break;case 1:C=w+1}const R=-l*this.dim,k=-f*this.dim;for(let B=w;B<C;B++)for(let j=g;j<x;j++){const G=4*this._idx(j,B),Z=4*this._idx(j+R,B+k);this.pixels[G+0]=i.pixels[Z+0],this.pixels[G+1]=i.pixels[Z+1],this.pixels[G+2]=i.pixels[Z+2],this.pixels[G+3]=i.pixels[Z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}fn(Fw,"DEMData"),fn(Pk,"DemMinMaxQuadTree",{omit:["dem"]});class RU{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:l,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout((()=>{this.remove(i,x)}),f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const f=i.wrapped().key,g=l===void 0?0:this.data[f].indexOf(l),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||l.push(g);for(const f of l)this.remove(f.value.tileID,f)}}class j_{constructor(i,l,f){this.func=i,this.mask=l,this.range=f}}j_.ReadOnly=!1,j_.ReadWrite=!0,j_.disabled=new j_(519,j_.ReadOnly,[0,1]);const xC=7680;class bC{constructor(i,l,f,g,x,w){this.test=i,this.ref=l,this.mask=f,this.fail=g,this.depthFail=x,this.pass=w}}bC.disabled=new bC({func:519,mask:0},0,0,xC,xC,xC);class Ad{constructor(i,l,f){this.blendFunction=i,this.blendColor=l,this.mask=f}}Ad.Replace=[1,0],Ad.disabled=new Ad(Ad.Replace,Ii.transparent,[!1,!1,!1,!1]),Ad.unblended=new Ad(Ad.Replace,Ii.transparent,[!0,!0,!0,!0]),Ad.alphaBlended=new Ad([1,771],Ii.transparent,[!0,!0,!0,!0]);const wC=1029,TC=2305;class xh{constructor(i,l,f){this.enable=i,this.mode=l,this.frontFace=f}}xh.disabled=new xh(!1,wC,TC),xh.backCCW=new xh(!0,wC,TC),xh.backCW=new xh(!0,wC,2304),xh.frontCW=new xh(!0,1028,2304),xh.frontCCW=new xh(!0,1028,TC);class Xg extends cc{constructor(i,l,f){super(),this.id=i,this._onlySymbols=f,l.on("data",(g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))})),l.on("error",(()=>{this._sourceErrored=!0})),this._source=l,this._tiles={},this._cache=new RU(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new AU,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,(()=>{}))}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,(()=>{}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const f=this._tiles[l];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return At(this._tiles).map((i=>i.tileID)).sort(zk).map((i=>i.key))}getRenderableIds(i){const l=[];for(const f in this._tiles)this._isIdRenderable(+f,i)&&l.push(this._tiles[f]);return i?l.sort(((f,g)=>{const x=f.tileID,w=g.tileID,C=new se(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),R=new se(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-w.overscaledZ||R.y-C.y||R.x-C.x})).map((f=>f.tileID.key)):l.map((f=>f.tileID)).sort(zk).map((f=>f.key))}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=l),this._loadTile(f,this._tileLoaded.bind(this,f,i,l)))}_tileLoaded(i,l,f,g){if(g)if(i.state="errored",g.status!==404)this._source.fire(new ga(g,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const x=this.map.painter.terrain;this.update(this.transform,x.getScaledDemTileSize(),!0),x.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=ma.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new yl("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const x=l[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const w=this.getTileByID(x);f(i,w),f(w,i)}}function f(g,x){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=x.tileID.canonical.x-g.tileID.canonical.x;const C=x.tileID.canonical.y-g.tileID.canonical.y,R=Math.pow(2,g.tileID.canonical.z),k=x.tileID.key;w===0&&C===0||Math.abs(C)>1||(Math.abs(w)>1&&(Math.abs(w+R)===1?w+=R:Math.abs(w-R)===1&&(w-=R)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,w,C),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,f,g){for(const x in this._tiles){let w=this._tiles[x];if(g[x]||!w.hasData()||w.tileID.overscaledZ<=l||w.tileID.overscaledZ>f)continue;let C=w.tileID;for(;w&&w.tileID.overscaledZ>l+1;){const k=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[k.key],w&&w.hasData()&&(C=k)}let R=C;for(;R.overscaledZ>l;)if(R=R.scaledTo(R.overscaledZ-1),i[R.key]){g[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=i.overscaledZ-1;f>=l;f--){const g=i.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const f=Math.ceil(i.width/l)+1,g=Math.ceil(i.height/l)+1,x=Math.floor(f*g*5),w=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,x):x,C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(C)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(i,l,f){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=i.getVisibleUnwrappedCoordinates(this._source.tileID).map((C=>new ua(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y))):(g=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter((C=>this._source.hasTile(C))))):g=[];const x=this._updateRetainedTiles(g);if(Nk(this._source.type)&&g.length!==0){const C={},R={},k=Object.keys(x);for(const j of k){const G=x[j],Z=this._tiles[j];if(!Z||Z.fadeEndTime&&Z.fadeEndTime<=ma.now())continue;const J=this.findLoadedParent(G,Math.max(G.overscaledZ-Xg.maxOverzooming,this._source.minzoom));J&&(this._addTile(J.tileID),C[J.tileID.key]=J.tileID),R[j]=G}const B=g[g.length-1].overscaledZ;for(const j in this._tiles){const G=this._tiles[j];if(x[j]||!G.hasData())continue;let Z=G.tileID;for(;Z.overscaledZ>B;){Z=Z.scaledTo(Z.overscaledZ-1);const J=this._tiles[Z.key];if(J&&J.hasData()&&R[Z.key]){x[j]=G.tileID;break}}}for(const j in C)x[j]||(this._coveredTiles[j]=!0,x[j]=C[j])}for(const C in x)this._tiles[C].clearFadeHold();const w=(function(C,R){const k=[];for(const B in C)B in R||k.push(B);return k})(this._tiles,x);for(const C of w){const R=this._tiles[C];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const f={},g=i.reduce(((k,B)=>Math.min(k,B.overscaledZ)),1/0),x=i[0].overscaledZ,w=Math.max(x-Xg.maxOverzooming,this._source.minzoom),C=Math.max(x+Xg.maxUnderzooming,this._source.minzoom),R={};for(const k of i){const B=this._addTile(k);l[k.key]=k,B.hasData()||g<this._source.maxzoom&&(R[k.key]=k)}this._retainLoadedChildren(R,g,C,l);for(const k of i){let B=this._tiles[k.key];if(B.hasData())continue;if(k.canonical.z>=this._source.maxzoom){const G=k.children(this._source.maxzoom)[0],Z=this.getTile(G);if(Z&&Z.hasData()){l[G.key]=G;continue}}else{const G=k.children(this._source.maxzoom);if(l[G[0].key]&&l[G[1].key]&&l[G[2].key]&&l[G[3].key])continue}let j=B.wasRequested();for(let G=k.overscaledZ-1;G>=w;--G){const Z=k.scaledTo(G);if(f[Z.key]||(f[Z.key]=!0,B=this.getTile(Z),!B&&j&&(B=this._addTile(Z)),B&&(l[Z.key]=Z,j=B.wasRequested(),B.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}l.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of l)this._loadedParentTiles[x]=f}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const f=!!l;if(!f){const g=this.map?this.map.painter:null;l=new vC(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,f||this._source.fire(new yl("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=l.getExpiryTimeout();f&&(this._timers[i]=setTimeout((()=>{this._reloadTile(i,"expired"),delete this._timers[i]}),f))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,f){const g=[],x=this.transform;if(!x)return g;const w=x.projection.name==="globe",C=Co(x.center.lng);for(const R in this._tiles){const k=this._tiles[R];if(f&&k.clearQueryDebugViz(),k.holdingForFade())continue;let B;if(w){const j=k.tileID.canonical;if(j.z===0){const G=[Math.abs(Be(C,...xx(j,-1))-C),Math.abs(Be(C,...xx(j,1))-C)];B=[0,2*G.indexOf(Math.min(...G))-1]}else{const G=[Math.abs(Be(C,...xx(j,-1))-C),Math.abs(Be(C,...xx(j,0))-C),Math.abs(Be(C,...xx(j,1))-C)];B=[G.indexOf(Math.min(...G))-1]}}else B=[0];for(const j of B){const G=i.containsTile(k,x,l,j);G&&g.push(G)}}return g}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map((f=>this._tiles[f].tileID));for(const f of l)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Nk(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=ma.now())return!0}return!1}setFeatureState(i,l,f){this._state.updateState(i=i||"_geojsonTileLayer",l,f)}removeFeatureState(i,l,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,f)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,f){const g=this._tiles[i];g&&g.setDependencies(l,f)}reloadTilesForDependencies(i,l){for(const f in this._tiles)this._tiles[f].hasDependency(i,l)&&this._reloadTile(+f,"reloading");this._cache.filter((f=>!f.hasDependency(i,l)))}_preloadTiles(i,l){if(!this._sourceLoaded){const C=()=>{this._sourceLoaded&&(this._source.off("data",C),this._preloadTiles(i,l))};return void this._source.on("data",C)}const f=new Map,g=Array.isArray(i)?i:[i],x=this.map.painter.terrain,w=this.usedForTerrain&&x?x.getScaledDemTileSize():this._source.tileSize;for(const C of g){const R=C.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const k of R)f.set(k.key,k);this.usedForTerrain&&C.updateElevation(!1)}et(Array.from(f.values()),((C,R)=>{const k=new vC(C,this._source.tileSize*C.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(k,(B=>{this._source.type==="raster-dem"&&k.dem&&this._backfillDEM(k),R(B,k)}))}),l)}}function zk(a,i){const l=Math.abs(2*a.wrap)-+(a.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return a.overscaledZ-i.overscaledZ||f-l||i.canonical.y-a.canonical.y||i.canonical.x-a.canonical.x}function Nk(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function xx(a,i){const l=1<<a.z;return[a.x/l+i,(a.x+1)/l+i]}Xg.maxOverzooming=10,Xg.maxUnderzooming=3;class Vw{constructor(i,l,f){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=f}static create(i,l,f){const g=f||i.findDEMTileFor(l);if(!g||!g.dem)return;const x=g.dem,w=g.tileID,C=1<<l.canonical.z-w.canonical.z;return new Vw(g,g.tileSize/Rn/C,[(l.canonical.x/C-w.canonical.x)*x.dim,(l.canonical.y/C-w.canonical.y)*x.dim])}tileCoordToPixel(i,l){const f=l*this._scale+this._offset[1],g=Math.floor(i*this._scale+this._offset[0]),x=Math.floor(f);return new se(g,x)}getElevationAt(i,l,f,g){const x=i*this._scale+this._offset[0],w=l*this._scale+this._offset[1],C=Math.floor(x),R=Math.floor(w),k=this._dem;return g=!!g,f?rr(rr(k.get(C,R,g),k.get(C,R+1,g),w-R),rr(k.get(C+1,R,g),k.get(C+1,R+1,g),w-R),x-C):k.get(C,R,g)}getElevationAtPixel(i,l,f){return this._dem.get(i,l,!!f)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Dl(1,i)*this._dem.stride}}class Bk{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Tc(Rn,16,0),this.featureIndexArray=new Ec,this.promoteId=l}insert(i,l,f,g,x,w=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x,w);const R=this.grid;for(let k=0;k<l.length;k++){const B=l[k],j=[1/0,1/0,-1/0,-1/0];for(let G=0;G<B.length;G++){const Z=B[G];j[0]=Math.min(j[0],Z.x),j[1]=Math.min(j[1],Z.y),j[2]=Math.max(j[2],Z.x),j[3]=Math.max(j[3],Z.y)}j[0]<Rn&&j[1]<Rn&&j[2]>=0&&j[3]>=0&&R.insert(C,j[0],j[1],j[2],j[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new $0(new Gf(this.rawTileData)).layers,this.sourceLayerCoder=new Tk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,f,g){this.loadVTLayers();const x=i.params||{},w=Sa(x.filter),C=i.tileResult,R=i.transform,k=C.bufferedTilespaceBounds,B=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,((J,ue,ve,Re)=>zf(C.bufferedTilespaceGeometry,J,ue,ve,Re)));B.sort(DU);let j=null;R.elevation&&B.length>0&&(j=Vw.create(R.elevation,this.tileID));const G={};let Z;for(let J=0;J<B.length;J++){const ue=B[J];if(ue===Z)continue;Z=ue;const ve=this.featureIndexArray.get(ue);let Re=null;this.loadMatchingFeature(G,ve,w,x.layers,x.availableImages,l,f,g,((Ne,De,ze,je=0)=>(Re||(Re=Is(Ne,this.tileID.canonical,i.tileTransform)),De.queryIntersectsFeature(C,Ne,ze,Re,this.z,i.transform,i.pixelPosMatrix,j,je))))}return G}loadMatchingFeature(i,l,f,g,x,w,C,R,k){const{featureIndex:B,bucketIndex:j,sourceLayerIndex:G,layoutVertexArrayOffset:Z}=l,J=this.bucketLayerIDs[j];if(g&&!(function(Ne,De){for(let ze=0;ze<Ne.length;ze++)if(De.indexOf(Ne[ze])>=0)return!0;return!1})(g,J))return;const ue=this.sourceLayerCoder.decode(G),ve=this.vtLayers[ue].feature(B);if(f.needGeometry){const Ne=Ho(ve,!0);if(!f.filter(new U(this.tileID.overscaledZ),Ne,this.tileID.canonical))return}else if(!f.filter(new U(this.tileID.overscaledZ),ve))return;const Re=this.getId(ve,ue);for(let Ne=0;Ne<J.length;Ne++){const De=J[Ne];if(g&&g.indexOf(De)<0)continue;const ze=w[De];if(!ze)continue;let je={};Re!==void 0&&R&&(je=R.getState(ze.sourceLayer||"_geojsonTileLayer",Re));const Ue=Dt({},C[De]);Ue.paint=Fk(Ue.paint,ze.paint,ve,je,x),Ue.layout=Fk(Ue.layout,ze.layout,ve,je,x);const ht=!k||k(ve,ze,je,Z);if(!ht)continue;const at=new Ek(ve,this.z,this.x,this.y,Re);at.layer=Ue;let wt=i[De];wt===void 0&&(wt=i[De]=[]),wt.push({featureIndex:B,feature:at,intersectionZ:ht})}}lookupSymbolFeatures(i,l,f,g,x,w,C,R){const k={};this.loadVTLayers();const B=Sa(x);for(const j of i)this.loadMatchingFeature(k,{bucketIndex:f,sourceLayerIndex:g,featureIndex:j,layoutVertexArrayOffset:0},B,w,C,R,l);return k}loadFeature(i){const{featureIndex:l,sourceLayerIndex:f}=i;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),x=this.vtFeatures[g];if(x[l])return x[l];const w=this.vtLayers[g].feature(l);return x[l]=w,w}hasLayer(i){for(const l of this.bucketLayerIDs)for(const f of l)if(i===f)return!0;return!1}getId(i,l){let f=i.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];g!=null&&(f=i.properties[g]),typeof f=="boolean"&&(f=Number(f))}return f}}function Fk(a,i,l,f,g){return Ft(a,((x,w)=>{const C=i instanceof Ae?i.get(w):null;return C&&C.evaluate?C.evaluate(l,f,g):C}))}function DU(a,i){return i-a}fn(Bk,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Vk{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new Mc({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const f=this.getKey(i,l);return this.positions[f]}trim(){const i=this.width,l=this.height=Fn(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,f){const g=[];let x=i.length%2==1?-i[i.length-1]*f:0,w=i[0]*f,C=!0;g.push({left:x,right:w,isDash:C,zeroLength:i[0]===0});let R=i[0];for(let k=1;k<i.length;k++){C=!C;const B=i[k];x=R*f,R+=B,w=R*f,g.push({left:x,right:w,isDash:C,zeroLength:B===0})}return g}addRoundDash(i,l,f){const g=l/2;for(let x=-f;x<=f;x++){const w=this.width*(this.nextRow+f+x);let C=0,R=i[C];for(let k=0;k<this.width;k++){k/R.right>1&&(R=i[++C]);const B=Math.abs(k-R.left),j=Math.abs(k-R.right),G=Math.min(B,j);let Z;const J=x/f*(g+1);if(R.isDash){const ue=g-Math.abs(J);Z=Math.sqrt(G*G+ue*ue)}else Z=g-Math.sqrt(G*G+J*J);this.image.data[w+k]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(i,l){for(let R=i.length-1;R>=0;--R){const k=i[R],B=i[R+1];k.zeroLength?i.splice(R,1):B&&B.isDash===k.isDash&&(B.left=k.left,i.splice(R,1))}const f=i[0],g=i[i.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const x=this.width*this.nextRow;let w=0,C=i[w];for(let R=0;R<this.width;R++){R/C.right>1&&(C=i[++w]);const k=Math.abs(R-C.left),B=Math.abs(R-C.right),j=Math.min(k,B);this.image.data[x+R]=Math.max(0,Math.min(255,(C.isDash?j:-j)+l+128))}}addDash(i,l){const f=this.getKey(i,l);if(this.positions[f])return this.positions[f];const g=l==="round",x=g?7:0,w=2*x+1;if(this.nextRow+w>this.height)return On("LineAtlas out of space"),null;i.length===0&&i.push(1);let C=0;for(let B=0;B<i.length;B++)i[B]<0&&(On("Negative value is found in line dasharray, replacing values with 0"),i[B]=0),C+=i[B];if(C!==0){const B=this.width/C,j=this.getDashRanges(i,this.width,B);g?this.addRoundDash(j,B,x):this.addRegularDash(j,l==="square"?.5*B:0)}const R=this.nextRow+x;this.nextRow+=w;const k={tl:[R,x],br:[C,0]};return this.positions[f]=k,k}}fn(Vk,"LineAtlas");const Uk=1*nc;class jk{constructor(i){const l={},f=[];for(const C in i){const R=i[C],k=l[C]={};for(const B in R.glyphs){const j=R.glyphs[+B];if(!j||j.bitmap.width===0||j.bitmap.height===0)continue;const G=j.metrics.localGlyph?Uk:1,Z={x:0,y:0,w:j.bitmap.width+2*G,h:j.bitmap.height+2*G};f.push(Z),k[B]=Z}}const{w:g,h:x}=ux(f),w=new Mc({width:g||1,height:x||1});for(const C in i){const R=i[C];for(const k in R.glyphs){const B=R.glyphs[+k];if(!B||B.bitmap.width===0||B.bitmap.height===0)continue;const j=l[C][k],G=B.metrics.localGlyph?Uk:1;Mc.copy(B.bitmap,w,{x:0,y:0},{x:j.x+G,y:j.y+G},B.bitmap)}}this.image=w,this.positions=l}}fn(jk,"GlyphAtlas");class kU{constructor(i){this.tileID=new ua(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=_u(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,f,g,x){this.status="parsing",this.data=i,this.collisionBoxArray=new fi;const w=new Tk(Object.keys(i.layers).sort()),C=new Bk(this.tileID,this.promoteId);C.bucketLayerIDs=[];const R={},k=new Vk(256,256),B={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:k,availableImages:f},j=l.familiesBySource[this.source];for(const je in j){const Ue=i.layers[je];if(!Ue)continue;let ht=!1,at=!1;for(const pt of j[je])pt[0].type==="symbol"?ht=!0:at=!0;if(this.isSymbolTile===!0&&!ht||this.isSymbolTile===!1&&!at)continue;Ue.version===1&&On(`Vector tile source "${this.source}" layer "${je}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wt=w.encode(je),qt=[];for(let pt=0;pt<Ue.length;pt++){const Mt=Ue.feature(pt),Rt=C.getId(Mt,je);qt.push({feature:Mt,id:Rt,index:pt,sourceLayerIndex:wt})}for(const pt of j[je]){const Mt=pt[0];this.isSymbolTile!==void 0&&Mt.type==="symbol"!==this.isSymbolTile||Mt.minzoom&&this.zoom<Math.floor(Mt.minzoom)||Mt.maxzoom&&this.zoom>=Mt.maxzoom||Mt.visibility!=="none"&&(EC(pt,this.zoom,f),(R[Mt.id]=Mt.createBucket({index:C.bucketLayerIDs.length,layers:pt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(qt,B,this.tileID.canonical,this.tileTransform),C.bucketLayerIDs.push(pt.map((Rt=>Rt.id))))}}let G,Z,J,ue;k.trim();const ve={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Re=()=>{if(G)return x(G);if(Z&&J&&ue){const je=new jk(Z),Ue=new Iw(J,ue);for(const ht in R){const at=R[ht];at instanceof Pt?(EC(at.layers,this.zoom,f),Gg(at,Z,je.positions,J,Ue.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):at.hasPattern&&(at instanceof jf||at instanceof T_||at instanceof sl)&&(EC(at.layers,this.zoom,f),at.addFeatures(B,this.tileID.canonical,Ue.patternPositions,f,this.tileTransform))}this.status="done",x(null,{buckets:At(R).filter((ht=>!ht.isEmpty())),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:je.image,lineAtlas:k,imageAtlas:Ue,glyphMap:this.returnDependencies?Z:null,iconMap:this.returnDependencies?J:null,glyphPositions:this.returnDependencies?je.positions:null})}},Ne=Ft(B.glyphDependencies,(je=>Object.keys(je).map(Number)));Object.keys(Ne).length?g.send("getGlyphs",{uid:this.uid,stacks:Ne},((je,Ue)=>{G||(G=je,Z=Ue,Re())}),void 0,!1,ve):Z={};const De=Object.keys(B.iconDependencies);De.length?g.send("getImages",{icons:De,source:this.source,tileID:this.tileID,type:"icons"},((je,Ue)=>{G||(G=je,J=Ue,Re())}),void 0,!1,ve):J={};const ze=Object.keys(B.patternDependencies);ze.length?g.send("getImages",{icons:ze,source:this.source,tileID:this.tileID,type:"patterns"},((je,Ue)=>{G||(G=je,ue=Ue,Re())}),void 0,!1,ve):ue={},Re()}}function EC(a,i,l){const f=new U(i);for(const g of a)g.recalculate(f,l)}class $k{constructor(i){this.entries={},this.scheduler=i}request(i,l,f,g){const x=this.entries[i]=this.entries[i]||{callbacks:[]};if(x.result){const[w,C]=x.result;return this.scheduler?this.scheduler.add((()=>{g(w,C)}),l):g(w,C),()=>{}}return x.callbacks.push(g),x.cancel||(x.cancel=f(((w,C)=>{x.result=[w,C];for(const R of x.callbacks)this.scheduler?this.scheduler.add((()=>{R(w,C)}),l):R(w,C);setTimeout((()=>delete this.entries[i]),3e3)}))),()=>{x.result||(x.callbacks=x.callbacks.filter((w=>w!==g)),x.callbacks.length||(x.cancel(),delete this.entries[i]))}}}function qk(a,i,l){const f=JSON.stringify(a.request);return a.data&&(this.deduped.entries[f]={result:[null,a.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},(g=>{const x=Ss(a.request,((w,C,R,k)=>{w?g(w):C&&g(null,{vectorTile:l?void 0:new $0(new Gf(C)),rawData:C,cacheControl:R,expires:k})}));return()=>{x.cancel(),g()}}),i)}const Hk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class SC{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const x=Hk[15&f];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(i,2,1),[C]=new Uint32Array(i,4,1);return new SC(C,w,x,i)}constructor(i,l=64,f=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const x=Hk.indexOf(this.ArrayType),w=2*i*this.ArrayType.BYTES_PER_ELEMENT,C=i*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+R,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+R),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+C+R,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=l,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return CC(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,R=[0,x.length-1,0],k=[];for(;R.length;){const B=R.pop()||0,j=R.pop()||0,G=R.pop()||0;if(j-G<=C){for(let ve=G;ve<=j;ve++){const Re=w[2*ve],Ne=w[2*ve+1];Re>=i&&Re<=f&&Ne>=l&&Ne<=g&&k.push(x[ve])}continue}const Z=G+j>>1,J=w[2*Z],ue=w[2*Z+1];J>=i&&J<=f&&ue>=l&&ue<=g&&k.push(x[Z]),(B===0?i<=J:l<=ue)&&(R.push(G),R.push(Z-1),R.push(1-B)),(B===0?f>=J:g>=ue)&&(R.push(Z+1),R.push(j),R.push(1-B))}return k}within(i,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:w}=this,C=[0,g.length-1,0],R=[],k=f*f;for(;C.length;){const B=C.pop()||0,j=C.pop()||0,G=C.pop()||0;if(j-G<=w){for(let ve=G;ve<=j;ve++)Wk(x[2*ve],x[2*ve+1],i,l)<=k&&R.push(g[ve]);continue}const Z=G+j>>1,J=x[2*Z],ue=x[2*Z+1];Wk(J,ue,i,l)<=k&&R.push(g[Z]),(B===0?i-f<=J:l-f<=ue)&&(C.push(G),C.push(Z-1),C.push(1-B)),(B===0?i+f>=J:l+f>=ue)&&(C.push(Z+1),C.push(j),C.push(1-B))}return R}}function CC(a,i,l,f,g,x){if(g-f<=l)return;const w=f+g>>1;Gk(a,i,w,f,g,x),CC(a,i,l,f,w-1,1-x),CC(a,i,l,w+1,g,1-x)}function Gk(a,i,l,f,g,x){for(;g>f;){if(g-f>600){const k=g-f+1,B=l-f+1,j=Math.log(k),G=.5*Math.exp(2*j/3),Z=.5*Math.sqrt(j*G*(k-G)/k)*(B-k/2<0?-1:1);Gk(a,i,l,Math.max(f,Math.floor(l-B*G/k+Z)),Math.min(g,Math.floor(l+(k-B)*G/k+Z)),x)}const w=i[2*l+x];let C=f,R=g;for(bx(a,i,f,l),i[2*g+x]>w&&bx(a,i,f,g);C<R;){for(bx(a,i,C,R),C++,R--;i[2*C+x]<w;)C++;for(;i[2*R+x]>w;)R--}i[2*f+x]===w?bx(a,i,f,R):(R++,bx(a,i,R,g)),R<=l&&(f=R+1),l<=R&&(g=R-1)}}function bx(a,i,l,f){AC(a,l,f),AC(i,2*l,2*f),AC(i,2*l+1,2*f+1)}function AC(a,i,l){const f=a[i];a[i]=a[l],a[l]=f}function Wk(a,i,l,f){const g=a-l,x=i-f;return g*g+x*x}o.ARRAY_TYPE=Aa,o.AUTH_ERR_MSG=Fe,o.Aabb=Eo,o.Actor=class{constructor(a,i,l){this.target=a,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},Tn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=$n()?a:T,this.scheduler=new SU}send(a,i,l,f,g=!1,x){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=x,this.callbacks[w]=l);const C=En(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:a,hasCallback:!!l,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Cl(i,C)},C),{cancel:()=>{l&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(a){const i=a.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const f=this.cancelCallbacks[l];delete this.cancelCallbacks[l],f&&f.cancel()}else if(i.mustQueue||$n()){const f=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add((()=>this.processTask(l,i)),f&&f.metadata||{type:"message"})}else this.processTask(l,i)}processTask(a,i){if(i.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(i.error?l(eh(i.error)):l(null,eh(i.data)))}else{const l=En(this.globalScope)?void 0:[],f=i.hasCallback?(x,w)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:x?Cl(x):null,data:Cl(w,l)},l)}:x=>{},g=eh(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,g,f);else if(this.parent.getWorkerSource){const x=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,x[0],g.source)[x[1]](g,f)}else f(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=hm,o.Color=Ii,o.ColorMode=Ad,o.CullFaceMode=xh,o.DEMData=Fw,o.DataConstantProperty=oe,o.DedupedRequest=$k,o.DepthMode=j_,o.EXTENT=Rn,o.Elevation=class{isDataAvailableAtPoint(a){const i=this._source();if(this.isUsingMockSource()||!i||a.y<0||a.y>1)return!1;const l=i.getSource().maxzoom,f=1<<l,g=Math.floor(a.x),x=Math.floor((a.x-g)*f),w=Math.floor(a.y*f),C=this.findDEMTileFor(new ua(l,g,l,x,w));return!(!C||!C.dem)}getAtPointOrZero(a,i=0){return this.getAtPoint(a,i)||0}getAtPoint(a,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const f=this._source();if(!f||a.y<0||a.y>1)return i;const g=f.getSource().maxzoom,x=1<<g,w=Math.floor(a.x),C=a.x-w,R=new ua(g,w,g,Math.floor(C*x),Math.floor(a.y*x)),k=this.findDEMTileFor(R);if(!k||!k.dem)return i;const B=k.dem,j=1<<k.tileID.canonical.z,G=(C*j-k.tileID.canonical.x)*B.dim,Z=(a.y*j-k.tileID.canonical.y)*B.dim,J=Math.floor(G),ue=Math.floor(Z);return(l?this.exaggeration():1)*rr(rr(B.get(J,ue),B.get(J,ue+1),Z-ue),rr(B.get(J+1,ue),B.get(J+1,ue+1),Z-ue),G-J)}getAtTileOffset(a,i,l){const f=1<<a.canonical.z;return this.getAtPointOrZero(new Bi(a.wrap+(a.canonical.x+i/Rn)/f,(a.canonical.y+l/Rn)/f))}getAtTileOffsetFunc(a,i,l,f){return g=>{const x=this.getAtTileOffset(a,g.x,g.y),w=f.upVector(a.canonical,g.x,g.y);return Ia(w,w,x*f.upVectorScale(a.canonical,i,l).metersToTile),w}}getForTilePoints(a,i,l,f){if(this.isUsingMockSource())return!1;const g=Vw.create(this,a,f);return!!g&&(i.forEach((x=>{x[2]=this.exaggeration()*g.getElevationAt(x[0],x[1],l)})),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(a);if(!i||!i.dem)return null;const l=i.dem.tree,f=i.tileID,g=1<<a.canonical.z-f.canonical.z;let x=a.canonical.x/g-f.canonical.x,w=a.canonical.y/g-f.canonical.y,C=0;for(let R=0;R<a.canonical.z-f.canonical.z&&!l.leaves[C];R++){x*=2,w*=2;const k=2*Math.floor(w)+Math.floor(x);C=l.childOffsets[C]+k,x%=1,w%=1}return{min:this.exaggeration()*l.minimums[C],max:this.exaggeration()*l.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=ga,o.EvaluationParameters=U,o.Event=yl,o.Evented=cc,o.FillExtrusionBucket=sl,o.Frustum=Kp,o.FrustumCorners=E0,o.GLOBE_RADIUS=Sc,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=S0,o.GLOBE_ZOOM_THRESHOLD_MIN=c_,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,i){const l=new Ut,f=new xn,g=[],x=a+1+2,w=i[0]+1,C=i[0]+1+(1+i.length),R=(k,B,j)=>{let G=k===x-1?k-2:k===0?k:k-1;return G+=j?24575:0,[G,B]};for(let k=0;k<x;++k)l.emplaceBack(...R(k,0,!0));for(let k=0;k<w;++k)for(let B=0;B<x;++B)l.emplaceBack(...R(B,k,(B===0||B===x-1)&&!0));for(let k=0;k<i.length;++k){const B=i[k];for(let j=0;j<x;++j)l.emplaceBack(...R(j,B,!0))}for(let k=0;k<i.length;++k){const B=f.length,j=i[k]+1+2,G=new xn;for(let ue=0;ue<j-1;ue++){const ve=ue===j-2,Re=ve?x*(C-i.length+k-ue):x;for(let Ne=0;Ne<x-1;Ne++){const De=ue*x+Ne;ue===0||ve||Ne===0||Ne===x-2?(G.emplaceBack(De+1,De,De+Re),G.emplaceBack(De+Re,De+Re+1,De+1)):(f.emplaceBack(De+1,De,De+Re),f.emplaceBack(De+Re,De+Re+1,De+1))}}const Z=gs.simpleSegment(0,B,l.length,f.length-B);for(let ue=0;ue<G.uint16.length;ue+=3)f.emplaceBack(G.uint16[ue],G.uint16[ue+1],G.uint16[ue+2]);const J=gs.simpleSegment(0,B,l.length,f.length-B);g.push({withoutSkirts:Z,withSkirts:J})}return{vertices:l,indices:f,segments:g}}_createGrid(a){const i=this._fillGridMeshWithLods(ch,Rf);this._gridSegments=i.segments,this._gridBuffer=a.createVertexBuffer(i.vertices,od.members),this._gridIndexBuffer=a.createIndexBuffer(i.indices,!0)}_createPoles(a){const i=new xn;for(let g=0;g<=ch;g++)i.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=a.createIndexBuffer(i,!0);const l=new Ur,f=new Ur;this._poleSegments=[];for(let g=0,x=0;g<c_;g++){const w=360/(1<<g);l.emplaceBack(0,-Sc,0,.5,0),f.emplaceBack(0,-Sc,0,.5,1);for(let C=0;C<=ch;C++){const R=C/ch,k=rr(0,w,R),[B,j,G]=dh(j1,D0,k,Sc);l.emplaceBack(B,j,G,R,0),f.emplaceBack(B,j,G,R,1)}this._poleSegments.push(gs.simpleSegment(x,0,66,64)),x+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(l,Xp,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(f,Xp,!1)}getGridBuffers(a,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,i){if(!this._wireframeSegments){const l=new Pr,f=ch,g=f+1+2,x=1;this._wireframeSegments=[];for(let w=0,C=0;w<Rf.length;w++){const R=Rf[w];for(let B=x;B<R+x;B++)for(let j=x;j<f+x;j++){const G=B*g+j;l.emplaceBack(G,G+1),l.emplaceBack(G,G+g),l.emplaceBack(G,G+g+1)}const k=R*f*3;this._wireframeSegments.push(gs.simpleSegment(0,C,(R+1)*g,k)),C+=k}this._wireframeIndexBuffer=a.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=Xf,o.ImagePosition=hx,o.KDBush=SC,o.LivePerformanceUtils=Ul,o.LngLat=Jr,o.LngLatBounds=ah,o.LocalGlyphMode=O_,o.MAX_MERCATOR_LATITUDE=lo,o.MercatorCoordinate=Bi,o.ONE_EM=uo,o.OverscaledTileID=ua,o.PerformanceMarkers=lc,o.Point=se,o.Properties=Le,o.RGBAImage=Ms,o.Ray=l_,o.RequestManager=class{constructor(a,i,l){this._transformRequestFn=a,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const a=(function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ie,i].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,i){return this._transformRequestFn&&this._transformRequestFn(a,i)||{url:a}}normalizeStyleURL(a,i){if(!Ge(a))return a;const l=Qt(a);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(a,i){if(!Ge(a))return a;const l=Qt(a);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(a,i,l,f){if(!Ge(a))return a;const g=Qt(a);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),l&&g.params.push(`language=${l}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||i)}normalizeSpriteURL(a,i,l,f){const g=Qt(a);return Ge(a)?(g.path=`/styles/v1${g.path}/sprite${i}${l}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${i}${l}`,$t(g))}normalizeTileURL(a,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!Ge(a))return a;const f=Qt(a);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&f.authority!=="raster"&&l===512?"@2x":""}${F.supported?".webp":"$1"}`),f.authority==="raster"?f.path=`/${L.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${L.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||(function(x){for(const w of x){const C=w.match(/^access_token=(.*)$/);if(C)return C[1]}return null})(f.params)||L.ACCESS_TOKEN;return L.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(a,i){const l=Qt(a);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return a;let f="mapbox://";l.path.match(/^\/raster\/v1\//)?f+=`raster/${l.path.replace(`/${L.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${l.path.replace(`/${L.TILE_URL_VERSION}/`,"")}`;let g=l.params;return i&&(g=g.filter((x=>!x.match(/^access_token=/)))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(a,i){const l=!!i&&Ge(i),f=[];for(const g of a.tiles||[])nt(g)?f.push(this.canonicalizeTileURL(g,l)):f.push(g);return f}_makeAPIURL(a,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=Qt(L.API_URL);if(a.protocol=f.protocol,a.authority=f.authority,a.protocol==="http"){const g=a.params.indexOf("secure");g>=0&&a.params.splice(g,1)}if(f.path!=="/"&&(a.path=`${f.path}${a.path}`),!L.REQUIRE_ACCESS_TOKEN)return $t(a);if(i=i||L.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return a.params=a.params.filter((g=>g.indexOf("access_token")===-1)),a.params.push(`access_token=${i||""}`),$t(a)}},o.ResourceType=Or,o.SegmentVector=gs,o.SourceCache=Xg,o.StencilMode=bC,o.StructArrayLayout1ui2=la,o.StructArrayLayout2f1f2i16=ln,o.StructArrayLayout2i4=Ut,o.StructArrayLayout2ui4=Pr,o.StructArrayLayout3f12=ar,o.StructArrayLayout3ui6=xn,o.StructArrayLayout4i8=vt,o.StructArrayLayout5f20=Ur,o.Texture=vx,o.Tile=vC,o.Transitionable=re,o.Uniform1f=Eg,o.Uniform1i=class extends ih{constructor(a){super(a),this.current=0}set(a,i,l){this.fetchUniformLocation(a,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends ih{constructor(a){super(a),this.current=[0,0]}set(a,i,l){this.fetchUniformLocation(a,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends ih{constructor(a){super(a),this.current=[0,0,0]}set(a,i,l){this.fetchUniformLocation(a,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=u0,o.UniformColor=h0,o.UniformMatrix2f=class extends ih{constructor(a){super(a),this.current=R1}set(a,i,l){if(this.fetchUniformLocation(a,i)){for(let f=0;f<4;f++)if(l[f]!==this.current[f]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends ih{constructor(a){super(a),this.current=M1}set(a,i,l){if(this.fetchUniformLocation(a,i)){for(let f=0;f<9;f++)if(l[f]!==this.current[f]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends ih{constructor(a){super(a),this.current=d0}set(a,i,l){if(this.fetchUniformLocation(a,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let f=1;f<16;f++)if(l[f]!==this.current[f]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=M_,o.ValidationError=rn,o.VectorTileFeature=A_,o.VectorTileWorkerSource=class extends cc{constructor(a,i,l,f,g){super(),this.actor=a,this.layerIndex=i,this.availableImages=l,this.loadVectorData=g||qk,this.loading={},this.loaded={},this.deduped=new $k(a.scheduler),this.isSpriteLoaded=f,this.scheduler=a.scheduler}loadTile(a,i){const l=a.uid,f=a&&a.request,g=f&&f.collectResourceTiming,x=this.loading[l]=new kU(a);x.abort=this.loadVectorData(a,((w,C)=>{const R=!this.loading[l];if(delete this.loading[l],R||w||!C)return x.status="done",R||(this.loaded[l]=x),i(w);const k=C.rawData,B={};C.expires&&(B.expires=C.expires),C.cacheControl&&(B.cacheControl=C.cacheControl),x.vectorTile=C.vectorTile||new $0(new Gf(k));const j=()=>{x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,((G,Z)=>{if(G||!Z)return i(G);const J={};if(g){const ue=ea(f);ue.length>0&&(J.resourceTiming=JSON.parse(JSON.stringify(ue)))}i(null,Dt({rawTileData:k.slice(0)},Z,B,J))}))};this.isSpriteLoaded?j():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(j,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):j()})),this.loaded=this.loaded||{},this.loaded[l]=x}))}reloadTile(a,i){const l=this.loaded,f=a.uid,g=this;if(l&&l[f]){const x=l[f];x.showCollisionBoxes=a.showCollisionBoxes,x.enableTerrain=!!a.enableTerrain,x.projection=a.projection,x.tileTransform=_u(a.tileID.canonical,a.projection);const w=(C,R)=>{const k=x.reloadCallback;k&&(delete x.reloadCallback,x.parse(x.vectorTile,g.layerIndex,this.availableImages,g.actor,k)),i(C,R)};x.status==="parsing"?x.reloadCallback=w:x.status==="done"&&(x.vectorTile?x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(a,i){const l=a.uid,f=this.loading[l];f&&(f.abort&&f.abort(),delete this.loading[l]),i()}removeTile(a,i){const l=this.loaded,f=a.uid;l&&l[f]&&delete l[f],i()}},o.WritingMode=Ll,o.ZoomDependentExpression=Zu,o.add=Ml,o.addDynamicAttributes=Ai,o.adjoint=function(a,i){var l=i[0],f=i[1],g=i[2],x=i[3],w=i[4],C=i[5],R=i[6],k=i[7],B=i[8];return a[0]=w*B-C*k,a[1]=g*k-f*B,a[2]=f*C-g*w,a[3]=C*R-x*B,a[4]=l*B-g*R,a[5]=g*x-l*C,a[6]=x*k-w*R,a[7]=f*R-l*k,a[8]=l*w-f*x,a},o.asyncAll=et,o.bezier=Xe,o.bindAll=Tn,o.boundsAttributes=Ck,o.bufferConvexPolygon=function(a,i){const l=[];for(let f=0;f<a.length;f++){const g=Me(f-1,-1,a.length-1),x=Me(f+1,-1,a.length-1),w=a[f],C=a[x],R=a[g].sub(w).unit(),k=C.sub(w).unit(),B=k.angleWithSep(R.x,R.y),j=R.add(k).unit().mult(-1*i/Math.sin(B/2));l.push(w.add(j))}return l},o.cacheEntryPossiblyAdded=function(a){Sr++,Sr>yn&&(a.getActor().send("enforceCacheSizeLimit",en),Sr=0)},o.calculateGlobeLabelMatrix=function(a,i){const{x:l,y:f}=a.point,g=fh(l,f,a.worldSize/a._pixelsPerMercatorPixel,0,0);return rd(g,g,Df(So(i)))},o.calculateGlobeMatrix=function(a){const{x:i,y:l}=a.point,{lng:f,lat:g}=a._center;return fh(i,l,a.worldSize,f,g)},o.calculateGlobeMercatorMatrix=function(a){const i=a.pixelsPerMeter,l=i/Dl(1,a.center.lat),f=Il(new Float64Array(16));return Af(f,f,[a.point.x,a.point.y,0]),id(f,f,[l,l,i]),Float32Array.from(f)},o.circumferenceAtLatitude=m_,o.clamp=Be,o.clearTileCache=function(a){if(!Bn())return;const i=T.caches.delete(on);a&&i.catch(a).then((()=>a()))},o.clipLine=$g,o.clone=function(a){var i=new Aa(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},o.clone$1=mn,o.collisionCircleLayout=_w,o.config=L,o.conjugate=function(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=i[3],a},o.create=function(){var a=new Aa(16);return Aa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=g0,o.createExpression=yc,o.createLayout=Qe,o.createStyleLayer=function(a){return a.type==="custom"?new Ed(a):new TU[a.type](a)},o.cross=a_,o.degToRad=de,o.distance=function(a,i){return Math.hypot(i[0]-a[0],i[1]-a[1],i[2]-a[2])},o.div=function(a,i,l){return a[0]=i[0]/l[0],a[1]=i[1]/l[1],a[2]=i[2]/l[2],a},o.dot=wo,o.earthRadius=em,o.ease=tt,o.easeCubicInOut=Ce,o.ecefToLatLng=function([a,i,l]){const f=Math.hypot(a,i,l),g=Math.atan2(a,l),x=.5*Math.PI-Math.acos(-i/f);return new Jr(Ve(g),Ve(x))},o.emitValidationErrors=Zy,o.endsWith=Lt,o.enforceCacheSizeLimit=function(a){Zn(),bn&&bn.then((i=>{i.keys().then((l=>{for(let f=0;f<l.length-a;f++)i.delete(l[f])}))}))},o.evaluateSizeForFeature=$f,o.evaluateSizeForZoom=qf,o.evaluateVariableOffset=yh,o.evented=S,o.exactEquals=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]},o.exactEquals$1=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]},o.exported=ma,o.exported$1=F,o.extend=Dt,o.extend$1=na,o.fillExtrusionHeightLift=lw,o.filterObject=gn,o.fromMat4=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[4],a[4]=i[5],a[5]=i[6],a[6]=i[8],a[7]=i[9],a[8]=i[10],a},o.fromQuat=function(a,i){var l=i[0],f=i[1],g=i[2],x=i[3],w=l+l,C=f+f,R=g+g,k=l*w,B=f*w,j=f*C,G=g*w,Z=g*C,J=g*R,ue=x*w,ve=x*C,Re=x*R;return a[0]=1-j-J,a[1]=B+Re,a[2]=G-ve,a[3]=0,a[4]=B-Re,a[5]=1-k-J,a[6]=Z+ue,a[7]=0,a[8]=G+ve,a[9]=Z-ue,a[10]=1-k-j,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,i){var l=Math.sin(i),f=Math.cos(i);return a[0]=f,a[1]=l,a[2]=0,a[3]=-l,a[4]=f,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=O1,o.furthestTileCorner=function(a){const i=Math.round((a+45+360)%360/90)%4;return Ke[i]},o.getAABBPointSquareDist=function(a,i,l){let f=0;for(let g=0;g<2;++g){const x=l?l[g]:0;a[g]>x&&(f+=(a[g]-x)*(a[g]-x)),i[g]<x&&(f+=(x-i[g])*(x-i[g]))}return f},o.getAnchorAlignment=Ug,o.getAnchorJustification=Jf,o.getBounds=function(a){let i=1/0,l=1/0,f=-1/0,g=-1/0;for(const x of a)i=Math.min(i,x.x),l=Math.min(l,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return{min:new se(i,l),max:new se(f,g)}},o.getColumn=nr,o.getDefaultExportFromCjs=me,o.getGridMatrix=function(a,i,l,f){const g=i.getNorth(),x=i.getSouth(),w=i.getWest(),C=i.getEast(),R=1<<a.z,k=C-w,B=g-x,j=k/ch,G=-B/Rf[l],Z=[0,j,0,G,0,0,g,w,0];if(a.z>0){const J=180/f;L1(Z,Z,[J/k+1,0,0,0,J/B+1,0,-.5*J/j,.5*J/G,1])}return Z[2]=R,Z[5]=a.x,Z[8]=a.y,Z},o.getImage=ke,o.getJSON=function(a,i){return ri(Dt(a,{type:"json"}),i)},o.getLatitudinalLod=function(a){const i=lo-5;a=Be(a,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(de(a))),3);return Math.round(l*(Rf.length-1))},o.getMapSessionAPI=Cs,o.getPerformanceMeasurement=ea,o.getProjection=jt,o.getRTLTextPluginStatus=A,o.getReferrer=Wn,o.getTilePoint=function(a,{x:i,y:l},f=0){return new se(((i-f)*a.scale-a.x)*Rn,(l*a.scale-a.y)*Rn)},o.getTileVec3=function(a,i,l=0){return If(((i.x-l)*a.scale-a.x)*Rn,(i.y*a.scale-a.y)*Rn,$1(i.z,i.y))},o.getVideo=function(a,i){const l=T.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let f=0;f<a.length;f++){const g=T.document.createElement("source");Jo(a[f])||(l.crossOrigin="Anonymous"),g.src=a[f],l.appendChild(g)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const i=[0,0,0],l=Il(new Float64Array(16));return rd(l,a.pixelMatrix,a.globeMatrix),ys(i,i,l),new se(i[0],i[1])},o.globeDenormalizeECEF=Df,o.globeECEFOrigin=function(a,i){const l=[0,0,0];return ys(l,l,Jp(So(i.canonical))),ys(l,l,a),l},o.globeMetersToEcef=Zp,o.globeNormalizeECEF=Jp,o.globePixelsToTileUnits=function(a,i){return Rn/(512*Math.pow(2,a))*f_(So(i))},o.globePoleMatrixForTile=function(a,i,l){const f=Il(new Float64Array(16)),g=(i/(1<<a)-.5)*Math.PI*2;return i_(f,l.globeMatrix,g),Float32Array.from(f)},o.globeTileBounds=So,o.globeTiltAtLngLat=R0,o.globeToMercatorTransition=kf,o.globeUseCustomAntiAliasing=function(a,i,l){const f=kf(l.zoom),g=a.style.map._antialias,x=!!i.extStandardDerivatives,w=i.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return f===0&&!g&&!w&&x},o.identity=Il,o.identity$1=To,o.invert=n_,o.isFullscreen=function(){return!!T.document.fullscreenElement||!!T.document.webkitFullscreenElement},o.isLngLatBehindGlobe=Pf,o.isMapAuthenticated=function(a){return Hs.has(a)},o.isMapboxURL=Ge,o.isSafariWithAntialiasingBug=function(a){const i=a.navigator?a.navigator.userAgent:null;return!!En(a)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=ei,o.latLngToECEF=lu,o.len=z1,o.length=Gp,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=nl,o.loadVectorTile=qk,o.makeRequest=ri,o.mapValue=function(a,i,l,f,g){return Be((a-i)/(l-i)*(g-f)+f,f,g)},o.mercatorScale=k0,o.mercatorXfromLng=Co,o.mercatorYfromLat=Ni,o.mercatorZfromAltitude=Dl,o.mul=Sg,o.mul$1=v0,o.multiply=rd,o.multiply$1=L1,o.multiply$2=o_,o.nextPowerOfTwo=Fn,o.normalize=qo,o.normalize$1=B1,o.normalize$2=N1,o.number=rr,o.ortho=function(a,i,l,f,g,x,w){var C=1/(i-l),R=1/(f-g),k=1/(x-w);return a[0]=-2*C,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*R,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*k,a[11]=0,a[12]=(i+l)*C,a[13]=(g+f)*R,a[14]=(w+x)*k,a[15]=1,a},o.pbf=bw,o.perspective=function(a,i,l,f,g){var x,w=1/Math.tan(i/2);return a[0]=w/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=w,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,g!=null&&g!==1/0?(a[10]=(g+f)*(x=1/(f-g)),a[14]=2*g*f*x):(a[10]=-1,a[14]=-2*f),a},o.pick=function(a,i){const l={};for(let f=0;f<i.length;f++){const g=i[f];g in a&&(l[g]=a[g])}return l},o.plugin=z,o.pointGeometry=ee,o.polesInViewport=function(a){const i=Il(new Float64Array(16));rd(i,a.pixelMatrix,a.globeMatrix);const l=[0,Rl,0],f=[0,tl,0];return ys(l,l,i),ys(f,f,i),[l[0]>0&&l[0]<=a.width&&l[1]>0&&l[1]<=a.height&&!Pf(a,new Jr(a.center.lat,90)),f[0]>0&&f[0]<=a.width&&f[1]>0&&f[1]<=a.height&&!Pf(a,new Jr(a.center.lat,-90))]},o.polygonContainsPoint=Ic,o.polygonIntersectsBox=zf,o.polygonIntersectsPolygon=hu,o.polygonizeBounds=function(a,i,l=0,f=!0){const g=new se(l,l),x=a.sub(g),w=i.add(g),C=[x,new se(w.x,x.y),w,new se(x.x,w.y)];return f&&C.push(x.clone()),C},o.posAttributes=od,o.postMapLoadEvent=Cr,o.postPerformanceEvent=xi,o.postTurnstileEvent=er,o.potpack=ux,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Ve,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:v,pluginURL:c}),S.on("pluginStateChange",a),a},o.removeAuthState=function(a){Hs.delete(a)},o.renderColorRamp=fu,o.resample=uu,o.rotateX=r_,o.rotateX$1=b0,o.rotateY=i_,o.rotateY$1=w0,o.rotateZ=function(a,i,l){var f=Math.sin(l),g=Math.cos(l),x=i[0],w=i[1],C=i[2],R=i[3],k=i[4],B=i[5],j=i[6],G=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=x*g+k*f,a[1]=w*g+B*f,a[2]=C*g+j*f,a[3]=R*g+G*f,a[4]=k*g-x*f,a[5]=B*g-w*f,a[6]=j*g-C*f,a[7]=G*g-R*f,a},o.rotateZ$1=function(a,i,l){l*=.5;var f=i[0],g=i[1],x=i[2],w=i[3],C=Math.sin(l),R=Math.cos(l);return a[0]=f*R+g*C,a[1]=g*R-f*C,a[2]=x*R+w*C,a[3]=w*R-x*C,a},o.scale=id,o.scale$1=x0,o.scale$2=Ia,o.scaleAndAdd=Yp,o.set=function(a,i,l,f){return a[0]=i,a[1]=l,a[2]=f,a},o.setCacheLimits=function(a,i){en=a,yn=i},o.setColumn=function(a,i,l){a[4*i+0]=l[0],a[4*i+1]=l[1],a[4*i+2]=l[2],a[4*i+3]=l[3]},o.setRTLTextPlugin=function(a,i,l=!1){if(v===td||v===nd||v===$p)throw new Error("setRTLTextPlugin cannot be called multiple times.");c=ma.resolveURL(a),v=td,th=i,b(),l||O()},o.smoothstep=yt,o.spec=xt,o.squaredLength=function(a){var i=a[0],l=a[1],f=a[2];return i*i+l*l+f*f},o.storeAuthState=function(a,i){i?Hs.add(a):Hs.delete(a)},o.sub=Jl,o.subtract=s_,o.symbolSize=vw,o.tileAABB=function(a,i,l,f,g,x,w,C,R){if(R.name==="globe")return hh(a,i,new hm(l,f,g));const k=_u({z:l,x:f,y:g},R);return new Eo([(x+k.x/k.scale)*i,i*(k.y/k.scale),w],[(x+k.x2/k.scale)*i,i*(k.y2/k.scale),C])},o.tileCornersToBounds=Qp,o.tileTransform=_u,o.transformMat3=function(a,i,l){var f=i[0],g=i[1],x=i[2];return a[0]=f*l[0]+g*l[3]+x*l[6],a[1]=f*l[1]+g*l[4]+x*l[7],a[2]=f*l[2]+g*l[5]+x*l[8],a},o.transformMat4=ys,o.transformMat4$1=lh,o.transformQuat=_0,o.transitionTileAABBinECEF=V1,o.translate=Af,o.transpose=function(a,i){if(a===i){var l=i[1],f=i[2],g=i[5];a[1]=i[3],a[2]=i[6],a[3]=l,a[5]=i[7],a[6]=f,a[7]=g}else a[0]=i[0],a[1]=i[3],a[2]=i[6],a[3]=i[1],a[4]=i[4],a[5]=i[7],a[6]=i[2],a[7]=i[5],a[8]=i[8];return a},o.triggerPluginCompletionEvent=m,o.uniqueId=Kt,o.updateGlobeVertexNormal=function(a,i,l,f,g){const x=5*i+2;a.float32[x+0]=l,a.float32[x+1]=f,a.float32[x+2]=g},o.validateCustomStyleLayer=function(a){const i=[],l=a.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=a=>Ca(Za(a)),o.validateFog=a=>Ca(Fp(a)),o.validateLayer=a=>Ca(Np(a)),o.validateLight=a=>Ca(wc(a)),o.validateSource=a=>Ca(nu(a)),o.validateStyle=ru,o.validateTerrain=a=>Ca(El(a)),o.values=At,o.vectorTile=Pg,o.version=I,o.warnOnce=On,o.window=T,o.wrap=Me})),p(["./shared"],(function(o){function T(Oe){if(typeof Oe=="number"||typeof Oe=="boolean"||typeof Oe=="string"||Oe==null)return JSON.stringify(Oe);if(Array.isArray(Oe)){let fe="[";for(const ke of Oe)fe+=`${T(ke)},`;return`${fe}]`}let pe="{";for(const fe of Object.keys(Oe).sort())pe+=`${fe}:${T(Oe[fe])},`;return`${pe}}`}function I(Oe){let pe="";for(const fe of o.refProperties)pe+=`/${T(Oe[fe])}`;return pe}class M{constructor(pe){this.keyCache={},pe&&this.replace(pe)}replace(pe){this._layerConfigs={},this._layers={},this.update(pe,[])}update(pe,fe){for(const Fe of pe)this._layerConfigs[Fe.id]=Fe,(this._layers[Fe.id]=o.createStyleLayer(Fe)).compileFilter(),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id];for(const Fe of fe)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const ke=(function(Fe,Ge){const nt={};for(let Ye=0;Ye<Fe.length;Ye++){const ut=Ge&&Ge[Fe[Ye].id]||I(Fe[Ye]);Ge&&(Ge[Fe[Ye].id]=ut);let Yt=nt[ut];Yt||(Yt=nt[ut]=[]),Yt.push(Fe[Ye])}const rt=[];for(const Ye in nt)rt.push(nt[Ye]);return rt})(o.values(this._layerConfigs),this.keyCache);for(const Fe of ke){const Ge=Fe.map((Qt=>this._layers[Qt.id])),nt=Ge[0];if(nt.visibility==="none")continue;const rt=nt.source||"";let Ye=this.familiesBySource[rt];Ye||(Ye=this.familiesBySource[rt]={});const ut=nt.sourceLayer||"_geojsonTileLayer";let Yt=Ye[ut];Yt||(Yt=Ye[ut]=[]),Yt.push(Ge)}}}class L{loadTile(pe,fe){const{uid:ke,encoding:Fe,rawImageData:Ge,padding:nt,buildQuadTree:rt}=pe,Ye=o.window.ImageBitmap&&Ge instanceof o.window.ImageBitmap?this.getImageData(Ge,nt):Ge;fe(null,new o.DEMData(ke,Ye,Fe,nt<1,rt))}getImageData(pe,fe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);const ke=this.offscreenCanvasContext.getImageData(-fe,-fe,pe.width+2*fe,pe.height+2*fe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ke}}function F(Oe,pe){if(Oe.length!==0){q(Oe[0],pe);for(var fe=1;fe<Oe.length;fe++)q(Oe[fe],!pe)}}function q(Oe,pe){for(var fe=0,ke=0,Fe=0,Ge=Oe.length,nt=Ge-1;Fe<Ge;nt=Fe++){var rt=(Oe[Fe][0]-Oe[nt][0])*(Oe[nt][1]+Oe[Fe][1]),Ye=fe+rt;ke+=Math.abs(fe)>=Math.abs(rt)?fe-Ye+rt:rt-Ye+fe,fe=Ye}fe+ke>=0!=!!pe&&Oe.reverse()}var $=o.getDefaultExportFromCjs((function Oe(pe,fe){var ke,Fe=pe&&pe.type;if(Fe==="FeatureCollection")for(ke=0;ke<pe.features.length;ke++)Oe(pe.features[ke],fe);else if(Fe==="GeometryCollection")for(ke=0;ke<pe.geometries.length;ke++)Oe(pe.geometries[ke],fe);else if(Fe==="Feature")Oe(pe.geometry,fe);else if(Fe==="Polygon")F(pe.coordinates,fe);else if(Fe==="MultiPolygon")for(ke=0;ke<pe.coordinates.length;ke++)F(pe.coordinates[ke],fe);return pe}));const X=o.VectorTileFeature.prototype.toGeoJSON;var te={exports:{}},he=o.pointGeometry,ie=o.vectorTile.VectorTileFeature,me=ge;function ge(Oe,pe){this.options=pe||{},this.features=Oe,this.length=Oe.length}function Ee(Oe,pe){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=pe||4096}ge.prototype.feature=function(Oe){return new Ee(this.features[Oe],this.options.extent)},Ee.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var pe=0;pe<Oe.length;pe++){for(var fe=Oe[pe],ke=[],Fe=0;Fe<fe.length;Fe++)ke.push(new he(fe[Fe][0],fe[Fe][1]));this.geometry.push(ke)}return this.geometry},Ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,pe=1/0,fe=-1/0,ke=1/0,Fe=-1/0,Ge=0;Ge<Oe.length;Ge++)for(var nt=Oe[Ge],rt=0;rt<nt.length;rt++){var Ye=nt[rt];pe=Math.min(pe,Ye.x),fe=Math.max(fe,Ye.x),ke=Math.min(ke,Ye.y),Fe=Math.max(Fe,Ye.y)}return[pe,ke,fe,Fe]},Ee.prototype.toGeoJSON=ie.prototype.toGeoJSON;var ce=o.pbf,ee=me;function le(Oe){var pe=new ce;return(function(fe,ke){for(var Fe in fe.layers)ke.writeMessage(3,se,fe.layers[Fe])})(Oe,pe),pe.finish()}function se(Oe,pe){var fe;pe.writeVarintField(15,Oe.version||1),pe.writeStringField(1,Oe.name||""),pe.writeVarintField(5,Oe.extent||4096);var ke={keys:[],values:[],keycache:{},valuecache:{}};for(fe=0;fe<Oe.length;fe++)ke.feature=Oe.feature(fe),pe.writeMessage(2,_e,ke);var Fe=ke.keys;for(fe=0;fe<Fe.length;fe++)pe.writeStringField(3,Fe[fe]);var Ge=ke.values;for(fe=0;fe<Ge.length;fe++)pe.writeMessage(4,Ce,Ge[fe])}function _e(Oe,pe){var fe=Oe.feature;fe.id!==void 0&&pe.writeVarintField(1,fe.id),pe.writeMessage(2,Q,Oe),pe.writeVarintField(3,fe.type),pe.writeMessage(4,Ke,fe)}function Q(Oe,pe){var fe=Oe.feature,ke=Oe.keys,Fe=Oe.values,Ge=Oe.keycache,nt=Oe.valuecache;for(var rt in fe.properties){var Ye=fe.properties[rt],ut=Ge[rt];if(Ye!==null){ut===void 0&&(ke.push(rt),Ge[rt]=ut=ke.length-1),pe.writeVarint(ut);var Yt=typeof Ye;Yt!=="string"&&Yt!=="boolean"&&Yt!=="number"&&(Ye=JSON.stringify(Ye));var Qt=Yt+":"+Ye,$t=nt[Qt];$t===void 0&&(Fe.push(Ye),nt[Qt]=$t=Fe.length-1),pe.writeVarint($t)}}}function de(Oe,pe){return(pe<<3)+(7&Oe)}function Ve(Oe){return Oe<<1^Oe>>31}function Ke(Oe,pe){for(var fe=Oe.loadGeometry(),ke=Oe.type,Fe=0,Ge=0,nt=fe.length,rt=0;rt<nt;rt++){var Ye=fe[rt],ut=1;ke===1&&(ut=Ye.length),pe.writeVarint(de(1,ut));for(var Yt=ke===3?Ye.length-1:Ye.length,Qt=0;Qt<Yt;Qt++){Qt===1&&ke!==1&&pe.writeVarint(de(2,Yt-1));var $t=Ye[Qt].x-Fe,Xn=Ye[Qt].y-Ge;pe.writeVarint(Ve($t)),pe.writeVarint(Ve(Xn)),Fe+=$t,Ge+=Xn}ke===3&&pe.writeVarint(de(7,1))}}function Ce(Oe,pe){var fe=typeof Oe;fe==="string"?pe.writeStringField(1,Oe):fe==="boolean"?pe.writeBooleanField(7,Oe):fe==="number"&&(Oe%1!=0?pe.writeDoubleField(3,Oe):Oe<0?pe.writeSVarintField(6,Oe):pe.writeVarintField(5,Oe))}te.exports=le,te.exports.fromVectorTileJs=le,te.exports.fromGeojsonVt=function(Oe,pe){pe=pe||{};var fe={};for(var ke in Oe)fe[ke]=new ee(Oe[ke].features,pe),fe[ke].name=ke,fe[ke].version=pe.version,fe[ke].extent=pe.extent;return le({layers:fe})},te.exports.GeoJSONWrapper=ee;var Xe=o.getDefaultExportFromCjs(te.exports);const tt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Be=Math.fround||(yt=new Float32Array(1),Oe=>(yt[0]=+Oe,yt[0]));var yt;const Me=3,et=5,At=6;class Dt{constructor(pe){this.options=Object.assign(Object.create(tt),pe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(pe){const{log:fe,minZoom:ke,maxZoom:Fe}=this.options;fe&&console.time("total time");const Ge=`prepare ${pe.length} points`;fe&&console.time(Ge),this.points=pe;const nt=[];for(let Ye=0;Ye<pe.length;Ye++){const ut=pe[Ye];if(!ut.geometry)continue;const[Yt,Qt]=ut.geometry.coordinates,$t=Be(dn(Yt)),Xn=Be(Fn(Qt));nt.push($t,Xn,1/0,Ye,-1,1),this.options.reduce&&nt.push(0)}let rt=this.trees[Fe+1]=this._createTree(nt);fe&&console.timeEnd(Ge);for(let Ye=Fe;Ye>=ke;Ye--){const ut=+Date.now();rt=this.trees[Ye]=this._createTree(this._cluster(rt,Ye)),fe&&console.log("z%d: %d clusters in %dms",Ye,rt.numItems,+Date.now()-ut)}return fe&&console.timeEnd("total time"),this}getClusters(pe,fe){let ke=((pe[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,pe[1]));let Ge=pe[2]===180?180:((pe[2]+180)%360+360)%360-180;const nt=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)ke=-180,Ge=180;else if(ke>Ge){const Qt=this.getClusters([ke,Fe,180,nt],fe),$t=this.getClusters([-180,Fe,Ge,nt],fe);return Qt.concat($t)}const rt=this.trees[this._limitZoom(fe)],Ye=rt.range(dn(ke),Fn(nt),dn(Ge),Fn(Fe)),ut=rt.data,Yt=[];for(const Qt of Ye){const $t=this.stride*Qt;Yt.push(ut[$t+et]>1?Gt(ut,$t,this.clusterProps):this.points[ut[$t+Me]])}return Yt}getChildren(pe){const fe=this._getOriginId(pe),ke=this._getOriginZoom(pe),Fe="No cluster with the specified id.",Ge=this.trees[ke];if(!Ge)throw new Error(Fe);const nt=Ge.data;if(fe*this.stride>=nt.length)throw new Error(Fe);const rt=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),Ye=Ge.within(nt[fe*this.stride],nt[fe*this.stride+1],rt),ut=[];for(const Yt of Ye){const Qt=Yt*this.stride;nt[Qt+4]===pe&&ut.push(nt[Qt+et]>1?Gt(nt,Qt,this.clusterProps):this.points[nt[Qt+Me]])}if(ut.length===0)throw new Error(Fe);return ut}getLeaves(pe,fe,ke){const Fe=[];return this._appendLeaves(Fe,pe,fe=fe||10,ke=ke||0,0),Fe}getTile(pe,fe,ke){const Fe=this.trees[this._limitZoom(pe)],Ge=Math.pow(2,pe),{extent:nt,radius:rt}=this.options,Ye=rt/nt,ut=(ke-Ye)/Ge,Yt=(ke+1+Ye)/Ge,Qt={features:[]};return this._addTileFeatures(Fe.range((fe-Ye)/Ge,ut,(fe+1+Ye)/Ge,Yt),Fe.data,fe,ke,Ge,Qt),fe===0&&this._addTileFeatures(Fe.range(1-Ye/Ge,ut,1,Yt),Fe.data,Ge,ke,Ge,Qt),fe===Ge-1&&this._addTileFeatures(Fe.range(0,ut,Ye/Ge,Yt),Fe.data,-1,ke,Ge,Qt),Qt.features.length?Qt:null}getClusterExpansionZoom(pe){let fe=this._getOriginZoom(pe)-1;for(;fe<=this.options.maxZoom;){const ke=this.getChildren(pe);if(fe++,ke.length!==1)break;pe=ke[0].properties.cluster_id}return fe}_appendLeaves(pe,fe,ke,Fe,Ge){const nt=this.getChildren(fe);for(const rt of nt){const Ye=rt.properties;if(Ye&&Ye.cluster?Ge+Ye.point_count<=Fe?Ge+=Ye.point_count:Ge=this._appendLeaves(pe,Ye.cluster_id,ke,Fe,Ge):Ge<Fe?Ge++:pe.push(rt),pe.length===ke)break}return Ge}_createTree(pe){const fe=new o.KDBush(pe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ke=0;ke<pe.length;ke+=this.stride)fe.add(pe[ke],pe[ke+1]);return fe.finish(),fe.data=pe,fe}_addTileFeatures(pe,fe,ke,Fe,Ge,nt){for(const rt of pe){const Ye=rt*this.stride,ut=fe[Ye+et]>1;let Yt,Qt,$t;if(ut)Yt=Kt(fe,Ye,this.clusterProps),Qt=fe[Ye],$t=fe[Ye+1];else{const qn=this.points[fe[Ye+Me]];Yt=qn.properties;const[ir,er]=qn.geometry.coordinates;Qt=dn(ir),$t=Fn(er)}const Xn={type:1,geometry:[[Math.round(this.options.extent*(Qt*Ge-ke)),Math.round(this.options.extent*($t*Ge-Fe))]],tags:Yt};let Jn;Jn=ut||this.options.generateId?fe[Ye+Me]:this.points[fe[Ye+Me]].id,Jn!==void 0&&(Xn.id=Jn),nt.features.push(Xn)}}_limitZoom(pe){return Math.max(this.options.minZoom,Math.min(Math.floor(+pe),this.options.maxZoom+1))}_cluster(pe,fe){const{radius:ke,extent:Fe,reduce:Ge,minPoints:nt}=this.options,rt=ke/(Fe*Math.pow(2,fe)),Ye=pe.data,ut=[],Yt=this.stride;for(let Qt=0;Qt<Ye.length;Qt+=Yt){if(Ye[Qt+2]<=fe)continue;Ye[Qt+2]=fe;const $t=Ye[Qt],Xn=Ye[Qt+1],Jn=pe.within(Ye[Qt],Ye[Qt+1],rt),qn=Ye[Qt+et];let ir=qn;for(const er of Jn){const Vr=er*Yt;Ye[Vr+2]>fe&&(ir+=Ye[Vr+et])}if(ir>qn&&ir>=nt){let er,Vr=$t*qn,Cr=Xn*qn,Kr=-1;const xi=((Qt/Yt|0)<<5)+(fe+1)+this.points.length;for(const No of Jn){const Cs=No*Yt;if(Ye[Cs+2]<=fe)continue;Ye[Cs+2]=fe;const Hs=Ye[Cs+et];Vr+=Ye[Cs]*Hs,Cr+=Ye[Cs+1]*Hs,Ye[Cs+4]=xi,Ge&&(er||(er=this._map(Ye,Qt,!0),Kr=this.clusterProps.length,this.clusterProps.push(er)),Ge(er,this._map(Ye,Cs)))}Ye[Qt+4]=xi,ut.push(Vr/ir,Cr/ir,1/0,xi,-1,ir),Ge&&ut.push(Kr)}else{for(let er=0;er<Yt;er++)ut.push(Ye[Qt+er]);if(ir>1)for(const er of Jn){const Vr=er*Yt;if(!(Ye[Vr+2]<=fe)){Ye[Vr+2]=fe;for(let Cr=0;Cr<Yt;Cr++)ut.push(Ye[Vr+Cr])}}}}return ut}_getOriginId(pe){return pe-this.points.length>>5}_getOriginZoom(pe){return(pe-this.points.length)%32}_map(pe,fe,ke){if(pe[fe+et]>1){const nt=this.clusterProps[pe[fe+At]];return ke?Object.assign({},nt):nt}const Fe=this.points[pe[fe+Me]].properties,Ge=this.options.map(Fe);return ke&&Ge===Fe?Object.assign({},Ge):Ge}}function Gt(Oe,pe,fe){return{type:"Feature",id:Oe[pe+Me],properties:Kt(Oe,pe,fe),geometry:{type:"Point",coordinates:[(ke=Oe[pe],360*(ke-.5)),An(Oe[pe+1])]}};var ke}function Kt(Oe,pe,fe){const ke=Oe[pe+et],Fe=ke>=1e4?`${Math.round(ke/1e3)}k`:ke>=1e3?Math.round(ke/100)/10+"k":ke,Ge=Oe[pe+At],nt=Ge===-1?{}:Object.assign({},fe[Ge]);return Object.assign(nt,{cluster:!0,cluster_id:Oe[pe+Me],point_count:ke,point_count_abbreviated:Fe})}function dn(Oe){return Oe/360+.5}function Fn(Oe){const pe=Math.sin(Oe*Math.PI/180),fe=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return fe<0?0:fe>1?1:fe}function An(Oe){const pe=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(pe))/Math.PI-90}function Tn(Oe,pe,fe,ke){for(var Fe,Ge=ke,nt=fe-pe>>1,rt=fe-pe,Ye=Oe[pe],ut=Oe[pe+1],Yt=Oe[fe],Qt=Oe[fe+1],$t=pe+3;$t<fe;$t+=3){var Xn=Lt(Oe[$t],Oe[$t+1],Ye,ut,Yt,Qt);if(Xn>Ge)Fe=$t,Ge=Xn;else if(Xn===Ge){var Jn=Math.abs($t-nt);Jn<rt&&(Fe=$t,rt=Jn)}}Ge>ke&&(Fe-pe>3&&Tn(Oe,pe,Fe,ke),Oe[Fe+2]=Ge,fe-Fe>3&&Tn(Oe,Fe,fe,ke))}function Lt(Oe,pe,fe,ke,Fe,Ge){var nt=Fe-fe,rt=Ge-ke;if(nt!==0||rt!==0){var Ye=((Oe-fe)*nt+(pe-ke)*rt)/(nt*nt+rt*rt);Ye>1?(fe=Fe,ke=Ge):Ye>0&&(fe+=nt*Ye,ke+=rt*Ye)}return(nt=Oe-fe)*nt+(rt=pe-ke)*rt}function Ft(Oe,pe,fe,ke){var Fe={id:Oe===void 0?null:Oe,type:pe,geometry:fe,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(Ge){var nt=Ge.geometry,rt=Ge.type;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")gn(Ge,nt);else if(rt==="Polygon"||rt==="MultiLineString")for(var Ye=0;Ye<nt.length;Ye++)gn(Ge,nt[Ye]);else if(rt==="MultiPolygon")for(Ye=0;Ye<nt.length;Ye++)for(var ut=0;ut<nt[Ye].length;ut++)gn(Ge,nt[Ye][ut])})(Fe),Fe}function gn(Oe,pe){for(var fe=0;fe<pe.length;fe+=3)Oe.minX=Math.min(Oe.minX,pe[fe]),Oe.minY=Math.min(Oe.minY,pe[fe+1]),Oe.maxX=Math.max(Oe.maxX,pe[fe]),Oe.maxY=Math.max(Oe.maxY,pe[fe+1])}function mn(Oe,pe,fe,ke){if(pe.geometry){var Fe=pe.geometry.coordinates,Ge=pe.geometry.type,nt=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2),rt=[],Ye=pe.id;if(fe.promoteId?Ye=pe.properties[fe.promoteId]:fe.generateId&&(Ye=ke||0),Ge==="Point")tr(Fe,rt);else if(Ge==="MultiPoint")for(var ut=0;ut<Fe.length;ut++)tr(Fe[ut],rt);else if(Ge==="LineString")On(Fe,rt,nt,!1);else if(Ge==="MultiLineString"){if(fe.lineMetrics){for(ut=0;ut<Fe.length;ut++)On(Fe[ut],rt=[],nt,!1),Oe.push(Ft(Ye,"LineString",rt,pe.properties));return}jn(Fe,rt,nt,!1)}else if(Ge==="Polygon")jn(Fe,rt,nt,!0);else{if(Ge!=="MultiPolygon"){if(Ge==="GeometryCollection"){for(ut=0;ut<pe.geometry.geometries.length;ut++)mn(Oe,{id:Ye,geometry:pe.geometry.geometries[ut],properties:pe.properties},fe,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ut=0;ut<Fe.length;ut++){var Yt=[];jn(Fe[ut],Yt,nt,!0),rt.push(Yt)}}Oe.push(Ft(Ye,Ge,rt,pe.properties))}}function tr(Oe,pe){pe.push(Lr(Oe[0])),pe.push($n(Oe[1])),pe.push(0)}function On(Oe,pe,fe,ke){for(var Fe,Ge,nt=0,rt=0;rt<Oe.length;rt++){var Ye=Lr(Oe[rt][0]),ut=$n(Oe[rt][1]);pe.push(Ye),pe.push(ut),pe.push(0),rt>0&&(nt+=ke?(Fe*ut-Ye*Ge)/2:Math.sqrt(Math.pow(Ye-Fe,2)+Math.pow(ut-Ge,2))),Fe=Ye,Ge=ut}var Yt=pe.length-3;pe[2]=1,Tn(pe,0,Yt,fe),pe[Yt+2]=1,pe.size=Math.abs(nt),pe.start=0,pe.end=pe.size}function jn(Oe,pe,fe,ke){for(var Fe=0;Fe<Oe.length;Fe++){var Ge=[];On(Oe[Fe],Ge,fe,ke),pe.push(Ge)}}function Lr(Oe){return Oe/360+.5}function $n(Oe){var pe=Math.sin(Oe*Math.PI/180),fe=.5-.25*Math.log((1+pe)/(1-pe))/Math.PI;return fe<0?0:fe>1?1:fe}function Vn(Oe,pe,fe,ke,Fe,Ge,nt,rt){if(ke/=pe,Ge>=(fe/=pe)&&nt<ke)return Oe;if(nt<fe||Ge>=ke)return null;for(var Ye=[],ut=0;ut<Oe.length;ut++){var Yt=Oe[ut],Qt=Yt.geometry,$t=Yt.type,Xn=Fe===0?Yt.minX:Yt.minY,Jn=Fe===0?Yt.maxX:Yt.maxY;if(Xn>=fe&&Jn<ke)Ye.push(Yt);else if(!(Jn<fe||Xn>=ke)){var qn=[];if($t==="Point"||$t==="MultiPoint")Tr(Qt,qn,fe,ke,Fe);else if($t==="LineString")En(Qt,qn,fe,ke,Fe,!1,rt.lineMetrics);else if($t==="MultiLineString")nr(Qt,qn,fe,ke,Fe,!1);else if($t==="Polygon")nr(Qt,qn,fe,ke,Fe,!0);else if($t==="MultiPolygon")for(var ir=0;ir<Qt.length;ir++){var er=[];nr(Qt[ir],er,fe,ke,Fe,!0),er.length&&qn.push(er)}if(qn.length){if(rt.lineMetrics&&$t==="LineString"){for(ir=0;ir<qn.length;ir++)Ye.push(Ft(Yt.id,$t,qn[ir],Yt.tags));continue}$t!=="LineString"&&$t!=="MultiLineString"||(qn.length===1?($t="LineString",qn=qn[0]):$t="MultiLineString"),$t!=="Point"&&$t!=="MultiPoint"||($t=qn.length===3?"Point":"MultiPoint"),Ye.push(Ft(Yt.id,$t,qn,Yt.tags))}}}return Ye.length?Ye:null}function Tr(Oe,pe,fe,ke,Fe){for(var Ge=0;Ge<Oe.length;Ge+=3){var nt=Oe[Ge+Fe];nt>=fe&&nt<=ke&&(pe.push(Oe[Ge]),pe.push(Oe[Ge+1]),pe.push(Oe[Ge+2]))}}function En(Oe,pe,fe,ke,Fe,Ge,nt){for(var rt,Ye,ut=Hi(Oe),Yt=Fe===0?en:yn,Qt=Oe.start,$t=0;$t<Oe.length-3;$t+=3){var Xn=Oe[$t],Jn=Oe[$t+1],qn=Oe[$t+2],ir=Oe[$t+3],er=Oe[$t+4],Vr=Fe===0?Xn:Jn,Cr=Fe===0?ir:er,Kr=!1;nt&&(rt=Math.sqrt(Math.pow(Xn-ir,2)+Math.pow(Jn-er,2))),Vr<fe?Cr>fe&&(Ye=Yt(ut,Xn,Jn,ir,er,fe),nt&&(ut.start=Qt+rt*Ye)):Vr>ke?Cr<ke&&(Ye=Yt(ut,Xn,Jn,ir,er,ke),nt&&(ut.start=Qt+rt*Ye)):on(ut,Xn,Jn,qn),Cr<fe&&Vr>=fe&&(Ye=Yt(ut,Xn,Jn,ir,er,fe),Kr=!0),Cr>ke&&Vr<=ke&&(Ye=Yt(ut,Xn,Jn,ir,er,ke),Kr=!0),!Ge&&Kr&&(nt&&(ut.end=Qt+rt*Ye),pe.push(ut),ut=Hi(Oe)),nt&&(Qt+=rt)}var xi=Oe.length-3;Xn=Oe[xi],Jn=Oe[xi+1],qn=Oe[xi+2],(Vr=Fe===0?Xn:Jn)>=fe&&Vr<=ke&&on(ut,Xn,Jn,qn),xi=ut.length-3,Ge&&xi>=3&&(ut[xi]!==ut[0]||ut[xi+1]!==ut[1])&&on(ut,ut[0],ut[1],ut[2]),ut.length&&pe.push(ut)}function Hi(Oe){var pe=[];return pe.size=Oe.size,pe.start=Oe.start,pe.end=Oe.end,pe}function nr(Oe,pe,fe,ke,Fe,Ge){for(var nt=0;nt<Oe.length;nt++)En(Oe[nt],pe,fe,ke,Fe,Ge,!1)}function on(Oe,pe,fe,ke){Oe.push(pe),Oe.push(fe),Oe.push(ke)}function en(Oe,pe,fe,ke,Fe,Ge){var nt=(Ge-pe)/(ke-pe);return Oe.push(Ge),Oe.push(fe+(Fe-fe)*nt),Oe.push(1),nt}function yn(Oe,pe,fe,ke,Fe,Ge){var nt=(Ge-fe)/(Fe-fe);return Oe.push(pe+(ke-pe)*nt),Oe.push(Ge),Oe.push(1),nt}function bn(Oe,pe){for(var fe=[],ke=0;ke<Oe.length;ke++){var Fe,Ge=Oe[ke],nt=Ge.type;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")Fe=Pn(Ge.geometry,pe);else if(nt==="MultiLineString"||nt==="Polygon"){Fe=[];for(var rt=0;rt<Ge.geometry.length;rt++)Fe.push(Pn(Ge.geometry[rt],pe))}else if(nt==="MultiPolygon")for(Fe=[],rt=0;rt<Ge.geometry.length;rt++){for(var Ye=[],ut=0;ut<Ge.geometry[rt].length;ut++)Ye.push(Pn(Ge.geometry[rt][ut],pe));Fe.push(Ye)}fe.push(Ft(Ge.id,nt,Fe,Ge.tags))}return fe}function Pn(Oe,pe){var fe=[];fe.size=Oe.size,Oe.start!==void 0&&(fe.start=Oe.start,fe.end=Oe.end);for(var ke=0;ke<Oe.length;ke+=3)fe.push(Oe[ke]+pe,Oe[ke+1],Oe[ke+2]);return fe}function Bn(Oe,pe){if(Oe.transformed)return Oe;var fe,ke,Fe,Ge=1<<Oe.z,nt=Oe.x,rt=Oe.y;for(fe=0;fe<Oe.features.length;fe++){var Ye=Oe.features[fe],ut=Ye.geometry,Yt=Ye.type;if(Ye.geometry=[],Yt===1)for(ke=0;ke<ut.length;ke+=2)Ye.geometry.push(Zn(ut[ke],ut[ke+1],pe,Ge,nt,rt));else for(ke=0;ke<ut.length;ke++){var Qt=[];for(Fe=0;Fe<ut[ke].length;Fe+=2)Qt.push(Zn(ut[ke][Fe],ut[ke][Fe+1],pe,Ge,nt,rt));Ye.geometry.push(Qt)}}return Oe.transformed=!0,Oe}function Zn(Oe,pe,fe,ke,Fe,Ge){return[Math.round(fe*(Oe*ke-Fe)),Math.round(fe*(pe*ke-Ge))]}function vi(Oe,pe,fe,ke,Fe){for(var Ge=pe===Fe.maxZoom?0:Fe.tolerance/((1<<pe)*Fe.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:fe,y:ke,z:pe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},rt=0;rt<Oe.length;rt++){nt.numFeatures++,Sr(nt,Oe[rt],Ge,Fe);var Ye=Oe[rt].minX,ut=Oe[rt].minY,Yt=Oe[rt].maxX,Qt=Oe[rt].maxY;Ye<nt.minX&&(nt.minX=Ye),ut<nt.minY&&(nt.minY=ut),Yt>nt.maxX&&(nt.maxX=Yt),Qt>nt.maxY&&(nt.maxY=Qt)}return nt}function Sr(Oe,pe,fe,ke){var Fe=pe.geometry,Ge=pe.type,nt=[];if(Ge==="Point"||Ge==="MultiPoint")for(var rt=0;rt<Fe.length;rt+=3)nt.push(Fe[rt]),nt.push(Fe[rt+1]),Oe.numPoints++,Oe.numSimplified++;else if(Ge==="LineString")Or(nt,Fe,Oe,fe,!1,!1);else if(Ge==="MultiLineString"||Ge==="Polygon")for(rt=0;rt<Fe.length;rt++)Or(nt,Fe[rt],Oe,fe,Ge==="Polygon",rt===0);else if(Ge==="MultiPolygon")for(var Ye=0;Ye<Fe.length;Ye++){var ut=Fe[Ye];for(rt=0;rt<ut.length;rt++)Or(nt,ut[rt],Oe,fe,!0,rt===0)}if(nt.length){var Yt=pe.tags||null;if(Ge==="LineString"&&ke.lineMetrics){for(var Qt in Yt={},pe.tags)Yt[Qt]=pe.tags[Qt];Yt.mapbox_clip_start=Fe.start/Fe.size,Yt.mapbox_clip_end=Fe.end/Fe.size}var $t={geometry:nt,type:Ge==="Polygon"||Ge==="MultiPolygon"?3:Ge==="LineString"||Ge==="MultiLineString"?2:1,tags:Yt};pe.id!==null&&($t.id=pe.id),Oe.features.push($t)}}function Or(Oe,pe,fe,ke,Fe,Ge){var nt=ke*ke;if(ke>0&&pe.size<(Fe?nt:ke))fe.numPoints+=pe.length/3;else{for(var rt=[],Ye=0;Ye<pe.length;Ye+=3)(ke===0||pe[Ye+2]>nt)&&(fe.numSimplified++,rt.push(pe[Ye]),rt.push(pe[Ye+1])),fe.numPoints++;Fe&&(function(ut,Yt){for(var Qt=0,$t=0,Xn=ut.length,Jn=Xn-2;$t<Xn;Jn=$t,$t+=2)Qt+=(ut[$t]-ut[Jn])*(ut[$t+1]+ut[Jn+1]);if(Qt>0===Yt)for($t=0,Xn=ut.length;$t<Xn/2;$t+=2){var qn=ut[$t],ir=ut[$t+1];ut[$t]=ut[Xn-2-$t],ut[$t+1]=ut[Xn-1-$t],ut[Xn-2-$t]=qn,ut[Xn-1-$t]=ir}})(rt,Ge),Oe.push(rt)}}function vn(Oe,pe){var fe=(pe=this.options=(function(Fe,Ge){for(var nt in Ge)Fe[nt]=Ge[nt];return Fe})(Object.create(this.options),pe)).debug;if(fe&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");var ke=(function(Fe,Ge){var nt=[];if(Fe.type==="FeatureCollection")for(var rt=0;rt<Fe.features.length;rt++)mn(nt,Fe.features[rt],Ge,rt);else mn(nt,Fe.type==="Feature"?Fe:{geometry:Fe},Ge);return nt})(Oe,pe);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=(function(Fe,Ge){var nt=Ge.buffer/Ge.extent,rt=Fe,Ye=Vn(Fe,1,-1-nt,nt,0,-1,2,Ge),ut=Vn(Fe,1,1-nt,2+nt,0,-1,2,Ge);return(Ye||ut)&&(rt=Vn(Fe,1,-nt,1+nt,0,-1,2,Ge)||[],Ye&&(rt=bn(Ye,1).concat(rt)),ut&&(rt=rt.concat(bn(ut,-1)))),rt})(ke,pe),ke.length&&this.splitTile(ke,0,0,0),fe&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wn(Oe,pe,fe){return 32*((1<<Oe)*fe+pe)+Oe}function ri(Oe,pe){const fe=Oe.tileID.canonical;if(!this._geoJSONIndex)return pe(null,null);const ke=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!ke)return pe(null,null);const Fe=new class{constructor(nt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=nt.length,this._features=nt}feature(nt){return new class{constructor(rt){this._feature=rt,this.extent=o.EXTENT,this.type=rt.type,this.properties=rt.tags,"id"in rt&&!isNaN(rt.id)&&(this.id=parseInt(rt.id,10))}loadGeometry(){if(this._feature.type===1){const rt=[];for(const Ye of this._feature.geometry)rt.push([new o.Point(Ye[0],Ye[1])]);return rt}{const rt=[];for(const Ye of this._feature.geometry){const ut=[];for(const Yt of Ye)ut.push(new o.Point(Yt[0],Yt[1]));rt.push(ut)}return rt}}toGeoJSON(rt,Ye,ut){return X.call(this,rt,Ye,ut)}}(this._features[nt])}}(ke.features);let Ge=Xe(Fe);Ge.byteOffset===0&&Ge.byteLength===Ge.buffer.byteLength||(Ge=new Uint8Array(Ge)),pe(null,{vectorTile:Fe,rawData:Ge.buffer})}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(Oe,pe,fe,ke,Fe,Ge,nt){for(var rt=[Oe,pe,fe,ke],Ye=this.options,ut=Ye.debug;rt.length;){ke=rt.pop(),fe=rt.pop(),pe=rt.pop(),Oe=rt.pop();var Yt=1<<pe,Qt=Wn(pe,fe,ke),$t=this.tiles[Qt];if(!$t&&(ut>1&&console.time("creation"),$t=this.tiles[Qt]=vi(Oe,pe,fe,ke,Ye),this.tileCoords.push({z:pe,x:fe,y:ke}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,fe,ke,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var Xn="z"+pe;this.stats[Xn]=(this.stats[Xn]||0)+1,this.total++}if($t.source=Oe,Fe){if(pe===Ye.maxZoom||pe===Fe)continue;var Jn=1<<Fe-pe;if(fe!==Math.floor(Ge/Jn)||ke!==Math.floor(nt/Jn))continue}else if(pe===Ye.indexMaxZoom||$t.numPoints<=Ye.indexMaxPoints)continue;if($t.source=null,Oe.length!==0){ut>1&&console.time("clipping");var qn,ir,er,Vr,Cr,Kr,xi=.5*Ye.buffer/Ye.extent,No=.5-xi,Cs=.5+xi,Hs=1+xi;qn=ir=er=Vr=null,Cr=Vn(Oe,Yt,fe-xi,fe+Cs,0,$t.minX,$t.maxX,Ye),Kr=Vn(Oe,Yt,fe+No,fe+Hs,0,$t.minX,$t.maxX,Ye),Oe=null,Cr&&(qn=Vn(Cr,Yt,ke-xi,ke+Cs,1,$t.minY,$t.maxY,Ye),ir=Vn(Cr,Yt,ke+No,ke+Hs,1,$t.minY,$t.maxY,Ye),Cr=null),Kr&&(er=Vn(Kr,Yt,ke-xi,ke+Cs,1,$t.minY,$t.maxY,Ye),Vr=Vn(Kr,Yt,ke+No,ke+Hs,1,$t.minY,$t.maxY,Ye),Kr=null),ut>1&&console.timeEnd("clipping"),rt.push(qn||[],pe+1,2*fe,2*ke),rt.push(ir||[],pe+1,2*fe,2*ke+1),rt.push(er||[],pe+1,2*fe+1,2*ke),rt.push(Vr||[],pe+1,2*fe+1,2*ke+1)}}},vn.prototype.getTile=function(Oe,pe,fe){var ke=this.options,Fe=ke.extent,Ge=ke.debug;if(Oe<0||Oe>24)return null;var nt=1<<Oe,rt=Wn(Oe,pe=(pe%nt+nt)%nt,fe);if(this.tiles[rt])return Bn(this.tiles[rt],Fe);Ge>1&&console.log("drilling down to z%d-%d-%d",Oe,pe,fe);for(var Ye,ut=Oe,Yt=pe,Qt=fe;!Ye&&ut>0;)ut--,Yt=Math.floor(Yt/2),Qt=Math.floor(Qt/2),Ye=this.tiles[Wn(ut,Yt,Qt)];return Ye&&Ye.source?(Ge>1&&console.log("found parent tile z%d-%d-%d",ut,Yt,Qt),Ge>1&&console.time("drilling down"),this.splitTile(Ye.source,ut,Yt,Qt,Oe,pe,fe),Ge>1&&console.timeEnd("drilling down"),this.tiles[rt]?Bn(this.tiles[rt],Fe):null):null};class Ss extends o.VectorTileWorkerSource{constructor(pe,fe,ke,Fe,Ge){super(pe,fe,ke,Fe,ri),Ge&&(this.loadGeoJSON=Ge)}loadData(pe,fe){const ke=pe&&pe.request,Fe=ke&&ke.collectResourceTiming;this.loadGeoJSON(pe,((Ge,nt)=>{if(Ge||!nt)return fe(Ge);if(typeof nt!="object")return fe(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));{$(nt,!0);try{if(pe.filter){const Ye=o.createExpression(pe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ye.result==="error")throw new Error(Ye.value.map((Yt=>`${Yt.key}: ${Yt.message}`)).join(", "));nt={type:"FeatureCollection",features:nt.features.filter((Yt=>Ye.value.evaluate({zoom:0},Yt)))}}this._geoJSONIndex=pe.cluster?new Dt((function({superclusterOptions:Ye,clusterProperties:ut}){if(!ut||!Ye)return Ye;const Yt={},Qt={},$t={accumulated:null,zoom:0},Xn={properties:null},Jn=Object.keys(ut);for(const qn of Jn){const[ir,er]=ut[qn],Vr=o.createExpression(er),Cr=o.createExpression(typeof ir=="string"?[ir,["accumulated"],["get",qn]]:ir);Yt[qn]=Vr.value,Qt[qn]=Cr.value}return Ye.map=qn=>{Xn.properties=qn;const ir={};for(const er of Jn)ir[er]=Yt[er].evaluate($t,Xn);return ir},Ye.reduce=(qn,ir)=>{Xn.properties=ir;for(const er of Jn)$t.accumulated=qn[er],qn[er]=Qt[er].evaluate($t,Xn)},Ye})(pe)).load(nt.features):(function(Ye,ut){return new vn(Ye,ut)})(nt,pe.geojsonVtOptions)}catch(Ye){return fe(Ye)}this.loaded={};const rt={};if(Fe){const Ye=o.getPerformanceMeasurement(ke);Ye&&(rt.resourceTiming={},rt.resourceTiming[pe.source]=JSON.parse(JSON.stringify(Ye)))}fe(null,rt)}}))}reloadTile(pe,fe){const ke=this.loaded;return ke&&ke[pe.uid]?super.reloadTile(pe,fe):this.loadTile(pe,fe)}loadGeoJSON(pe,fe){if(pe.request)o.getJSON(pe.request,fe);else{if(typeof pe.data!="string")return fe(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`));try{return fe(null,JSON.parse(pe.data))}catch{return fe(new Error(`Input data given to '${pe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(pe,fe){try{fe(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(ke){fe(ke)}}getClusterChildren(pe,fe){try{fe(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(ke){fe(ke)}}getClusterLeaves(pe,fe){try{fe(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(ke){fe(ke)}}}class Jo{constructor(pe){this.self=pe,this.actor=new o.Actor(pe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Ss},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(fe,ke)=>{if(this.workerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.workerSourceTypes[fe]=ke},this.self.registerRTLTextPlugin=fe=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=fe.applyArabicShaping,o.plugin.processBidirectionalText=fe.processBidirectionalText,o.plugin.processStyledBidirectionalText=fe.processStyledBidirectionalText}}clearCaches(pe,fe,ke){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],ke()}checkIfReady(pe,fe,ke){ke()}setReferrer(pe,fe){this.referrer=fe}spriteLoaded(pe,fe){this.isSpriteLoaded[pe]=fe;for(const ke in this.workerSources[pe]){const Fe=this.workerSources[pe][ke];for(const Ge in Fe)Fe[Ge]instanceof o.VectorTileWorkerSource&&(Fe[Ge].isSpriteLoaded=fe,Fe[Ge].fire(new o.Event("isSpriteLoaded")))}}setImages(pe,fe,ke){this.availableImages[pe]=fe;for(const Fe in this.workerSources[pe]){const Ge=this.workerSources[pe][Fe];for(const nt in Ge)Ge[nt].availableImages=fe}ke()}enableTerrain(pe,fe,ke){this.terrain=fe,ke()}setProjection(pe,fe){this.projections[pe]=o.getProjection(fe)}setLayers(pe,fe,ke){this.getLayerIndex(pe).replace(fe),ke()}updateLayers(pe,fe,ke){this.getLayerIndex(pe).update(fe.layers,fe.removedIds),ke()}loadTile(pe,fe,ke){const Fe=this.enableTerrain?o.extend({enableTerrain:this.terrain},fe):fe;Fe.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,fe.type,fe.source).loadTile(Fe,ke)}loadDEMTile(pe,fe,ke){const Fe=this.enableTerrain?o.extend({buildQuadTree:this.terrain},fe):fe;this.getDEMWorkerSource(pe,fe.source).loadTile(Fe,ke)}reloadTile(pe,fe,ke){const Fe=this.enableTerrain?o.extend({enableTerrain:this.terrain},fe):fe;Fe.projection=this.projections[pe]||this.defaultProjection,this.getWorkerSource(pe,fe.type,fe.source).reloadTile(Fe,ke)}abortTile(pe,fe,ke){this.getWorkerSource(pe,fe.type,fe.source).abortTile(fe,ke)}removeTile(pe,fe,ke){this.getWorkerSource(pe,fe.type,fe.source).removeTile(fe,ke)}removeSource(pe,fe,ke){if(!this.workerSources[pe]||!this.workerSources[pe][fe.type]||!this.workerSources[pe][fe.type][fe.source])return;const Fe=this.workerSources[pe][fe.type][fe.source];delete this.workerSources[pe][fe.type][fe.source],Fe.removeSource!==void 0?Fe.removeSource(fe,ke):ke()}loadWorkerSource(pe,fe,ke){try{this.self.importScripts(fe.url),ke()}catch(Fe){ke(Fe.toString())}}syncRTLPluginState(pe,fe,ke){try{o.plugin.setState(fe);const Fe=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Fe!=null){this.self.importScripts(Fe);const Ge=o.plugin.isParsed();ke(Ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Fe}`),Ge)}}catch(Fe){ke(Fe.toString())}}getAvailableImages(pe){let fe=this.availableImages[pe];return fe||(fe=[]),fe}getLayerIndex(pe){let fe=this.layerIndexes[pe];return fe||(fe=this.layerIndexes[pe]=new M),fe}getWorkerSource(pe,fe,ke){if(this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][fe]||(this.workerSources[pe][fe]={}),!this.workerSources[pe][fe][ke]){const Fe={send:(Ge,nt,rt,Ye,ut,Yt)=>{this.actor.send(Ge,nt,rt,pe,ut,Yt)},scheduler:this.actor.scheduler};this.workerSources[pe][fe][ke]=new this.workerSourceTypes[fe](Fe,this.getLayerIndex(pe),this.getAvailableImages(pe),this.isSpriteLoaded[pe])}return this.workerSources[pe][fe][ke]}getDEMWorkerSource(pe,fe){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][fe]||(this.demWorkerSources[pe][fe]=new L),this.demWorkerSources[pe][fe]}enforceCacheSizeLimit(pe,fe){o.enforceCacheSizeLimit(fe)}getWorkerPerformanceMetrics(pe,fe,ke){ke(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Jo(self)),Jo})),p(["./shared"],(function(o){function T(v,c){if(Array.isArray(v)){if(!Array.isArray(c)||v.length!==c.length)return!1;for(let m=0;m<v.length;m++)if(!T(v[m],c[m]))return!1;return!0}if(typeof v=="object"&&v!==null&&c!==null){if(typeof c!="object"||Object.keys(v).length!==Object.keys(c).length)return!1;for(const m in v)if(!T(v[m],c[m]))return!1;return!0}return v===c}var I=M;function M(v){return!(function(c){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,S,A=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(A);try{S=new Worker(O),b=!0}catch{b=!1}return S&&S.terminate(),URL.revokeObjectURL(O),b})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var b=document.createElement("canvas");b.width=b.height=1;var S=b.getContext("2d");if(!S)return!1;var A=S.getImageData(0,0,1,1);return A&&A.width===b.width})()?(L[m=c&&c.failIfMajorPerformanceCaveat]===void 0&&(L[m]=(function(b){var S,A=(function(O){var z=document.createElement("canvas"),U=Object.create(M.webGLContextAttributes);return U.failIfMajorPerformanceCaveat=O,z.getContext("webgl",U)||z.getContext("experimental-webgl",U)})(b);if(!A)return!1;try{S=A.createShader(A.VERTEX_SHADER)}catch{return!1}return!(!S||A.isContextLost())&&(A.shaderSource(S,"void main() {}"),A.compileShader(S),A.getShaderParameter(S,A.COMPILE_STATUS)===!0)})(m)),L[m]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var m})(v)}var L={};function F(v,c,m){const b=o.window.document.createElement(v);return c!==void 0&&(b.className=c),m&&m.appendChild(b),b}function q(v,c,m){const b=o.window.document.createElementNS("http://www.w3.org/2000/svg",v);for(const S of Object.keys(c))b.setAttributeNS(null,S,c[S]);return m&&m.appendChild(b),b}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const $=o.window.document&&o.window.document.documentElement.style,X=$&&$.userSelect!==void 0?"userSelect":"WebkitUserSelect";let te;function he(){$&&X&&(te=$[X],$[X]="none")}function ie(){$&&X&&($[X]=te)}function me(v){v.preventDefault(),v.stopPropagation(),o.window.removeEventListener("click",me,!0)}function ge(){o.window.addEventListener("click",me,!0),o.window.setTimeout((()=>{o.window.removeEventListener("click",me,!0)}),0)}function Ee(v,c){const m=v.getBoundingClientRect();return le(v,m,c)}function ce(v,c){const m=v.getBoundingClientRect(),b=[];for(let S=0;S<c.length;S++)b.push(le(v,m,c[S]));return b}function ee(v){return o.window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function le(v,c,m){const b=v.offsetWidth===c.width?1:v.offsetWidth/c.width;return new o.Point((m.clientX-c.left)*b,(m.clientY-c.top)*b)}function se(v,c){var m=c[0],b=c[1],S=c[2],A=c[3],O=m*A-S*b;return O?(v[0]=A*(O=1/O),v[1]=-b*O,v[2]=-S*O,v[3]=m*O,v):null}function _e(v){const{userImage:c}=v;return!!(c&&c.render&&c.render())&&(v.data.replace(new Uint8Array(c.data.buffer)),!0)}class Q extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:m,callback:b}of this.requestors)this._notify(m,b);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,m){this._validate(c,m)&&(this.images[c]=m)}_validate(c,m){let b=!0;return this._validateStretch(m.stretchX,m.data&&m.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,m.data&&m.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),b=!1),b}_validateStretch(c,m){if(!c)return!0;let b=0;for(const S of c){if(S[0]<b||S[1]<S[0]||m<S[1])return!1;b=S[1]}return!0}_validateContent(c,m){return!(c&&(c.length!==4||c[0]<0||m.data.width<c[0]||c[1]<0||m.data.height<c[1]||c[2]<0||m.data.width<c[2]||c[3]<0||m.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,m){m.version=this.images[c].version+1,this.images[c]=m,this.updatedImages[c]=!0}removeImage(c){const m=this.images[c];delete this.images[c],delete this.patterns[c],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,m){let b=!0;if(!this.isLoaded())for(const S of c)this.images[S]||(b=!1);this.isLoaded()||b?this._notify(c,m):this.requestors.push({ids:c,callback:m})}_notify(c,m){const b={};for(const S of c){this.images[S]||this.fire(new o.Event("styleimagemissing",{id:S}));const A=this.images[S];A?b[S]={data:A.data.clone(),pixelRatio:A.pixelRatio,sdf:A.sdf,version:A.version,stretchX:A.stretchX,stretchY:A.stretchY,content:A.content,hasRenderCallback:!!(A.userImage&&A.userImage.render)}:o.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,b)}getPixelSize(){const{width:c,height:m}=this.atlasImage;return{width:c,height:m}}getPattern(c){const m=this.patterns[c],b=this.getImage(c);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const S={w:b.data.width+2,h:b.data.height+2,x:0,y:0},A=new o.ImagePosition(S,b);this.patterns[c]={bin:S,position:A}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const m=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,m.RGBA),this.atlasTexture&&this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const A in this.patterns)c.push(this.patterns[A].bin);const{w:m,h:b}=o.potpack(c),S=this.atlasImage;S.resize({width:m||1,height:b||1});for(const A in this.patterns){const{bin:O}=this.patterns[A],z=O.x+1,U=O.y+1,Y=this.images[A].data,W=Y.width,re=Y.height;o.RGBAImage.copy(Y,S,{x:0,y:0},{x:z,y:U},{width:W,height:re}),o.RGBAImage.copy(Y,S,{x:0,y:re-1},{x:z,y:U-1},{width:W,height:1}),o.RGBAImage.copy(Y,S,{x:0,y:0},{x:z,y:U+re},{width:W,height:1}),o.RGBAImage.copy(Y,S,{x:W-1,y:0},{x:z-1,y:U},{width:1,height:re}),o.RGBAImage.copy(Y,S,{x:0,y:0},{x:z+W,y:U},{width:1,height:re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const m of c){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.images[m];_e(b)&&this.updateImage(m,b)}}}const de=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(v,c){return(function([m,b,S]){const A=o.degToRad(b+90),O=o.degToRad(S);return{x:m*Math.cos(A)*Math.sin(O),y:m*Math.sin(A)*Math.sin(O),z:m*Math.cos(O),azimuthal:b,polar:S}})(v.expression.evaluate(c))}interpolate(v,c,m){return{x:o.number(v.x,c.x,m),y:o.number(v.y,c.y,m),z:o.number(v.z,c.z,m),azimuthal:o.number(v.azimuthal,c.azimuthal,m),polar:o.number(v.polar,c.polar,m)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class Ve extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(de),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,m={}){if(!this._validate(o.validateLight,c,m))for(const b in c){const S=c[b];o.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),S):this._transitionable.setValue(b,S)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,m,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Ke=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let Ce=class extends o.Evented{constructor(v,c){super(),this._transitionable=new o.Transitionable(Ke),this.set(v),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(v){for(const c in v){const m=v[c];o.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),m):this._transitionable.setValue(c,m)}}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}};function Xe(v,c,m,b){const S=o.smoothstep(45,65,m),[A,O]=tt(v,b),z=o.length(c);let U=1-Math.min(1,Math.exp((z-A)/(O-A)*-6));return U*=U*U,U=Math.min(1,1.00747*U),U*S*v.alpha}function tt(v,c){const m=.5/Math.tan(.5*c);return[v.range[0]+m,v.range[1]+m]}const Be=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class yt extends o.Evented{constructor(c,m){super(),this._transitionable=new o.Transitionable(Be),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=m}get state(){const c=this._transform,m=c.projection.name==="globe",b=o.globeToMercatorTransition(c.zoom),S=this.properties.get("range"),A=[.5,3];return{range:m?[o.number(A[0],S[0],b),o.number(A[1],S[1],b)]:S,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,m={}){if(!this._validate(o.validateFog,c,m)){for(const b of Object.keys(o.spec.fog))c&&c[b]===void 0&&(c[b]=o.spec.fog[b].default);for(const b in c){const S=c[b];o.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),S):this._transitionable.setValue(b,S)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const m=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*m.a}getOpacityAtLatLng(c,m){return this._transform.projection.supportsFog?(function(b,S,A){const O=o.MercatorCoordinate.fromLngLat(S),z=A.elevation?A.elevation.getAtPointOrZero(O):0,U=[O.x,O.y,z];return o.transformMat4(U,U,A.mercatorFogMatrix),Xe(b,U,A.pitch,A._fov)})(this.state,c,m):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?tt(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,m,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:m,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Me{constructor(c,m){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const b=this.workerPool.acquire(this.id);for(let S=0;S<b.length;S++){const A=new Me.Actor(b[S],m,this.id);A.name=`Worker ${S}`,this.actors.push(A)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(c,m,b){o.asyncAll(this.actors,((S,A)=>{S.send(c,m,A)}),b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((c=>{c.remove()})),this.actors=[],this.workerPool.release(this.id)}}function et(v,c,m){return c*(o.EXTENT/(v.tileSize*Math.pow(2,m-v.tileID.overscaledZ)))}Me.Actor=o.Actor;class At{constructor(c,m,b,S){this.screenBounds=c,this.cameraPoint=m,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,S)}static createFromScreenPoints(c,m){let b,S;if(c instanceof o.Point||typeof c[0]=="number"){const A=o.Point.convert(c);b=[A],S=m.isPointAboveHorizon(A)}else{const A=o.Point.convert(c[0]),O=o.Point.convert(c[1]);b=[A,O],S=o.polygonizeBounds(A,O).every((z=>m.isPointAboveHorizon(z)))}return new At(b,m.getCameraPoint(),S,m)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const m=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],S=o.polygonizeBounds(m,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>m.x&&this.cameraPoint.x<b.x?S.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?S[2]=this.cameraPoint:this.cameraPoint.x<=m.x&&(S[3]=this.cameraPoint)),o.bufferConvexPolygon(S,c)}bufferedCameraGeometryGlobe(c){const m=this.screenBounds[0],b=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],S=o.polygonizeBounds(m,b,c),A=this.cameraPoint.clone();switch(3*((A.y>m.y)+(A.y>b.y))+((A.x>m.x)+(A.x>b.x))){case 0:S[0]=A,S[4]=A.clone();break;case 1:S.splice(1,0,A);break;case 2:S[1]=A;break;case 3:S.splice(4,0,A);break;case 5:S.splice(2,0,A);break;case 6:S[3]=A;break;case 7:S.splice(3,0,A);break;case 8:S[2]=A}return S}containsTile(c,m,b,S=0){const A=c.queryPadding/m._pixelsPerMercatorPixel+1,O=b?this._bufferedCameraMercator(A,m):this._bufferedScreenMercator(A,m);let z=c.tileID.wrap+(O.unwrapped?S:0);const U=O.polygon.map((Ae=>o.getTilePoint(c.tileTransform,Ae,z)));if(!o.polygonIntersectsBox(U,0,0,o.EXTENT,o.EXTENT))return;z=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?S:0);const Y=this.screenGeometryMercator.polygon.map((Ae=>o.getTileVec3(c.tileTransform,Ae,z))),W=Y.map((Ae=>new o.Point(Ae[0],Ae[1]))),re=m.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ye=o.getTileVec3(c.tileTransform,re,z),we=Y.map((Ae=>{const oe=o.sub(Ae,Ae,ye);return o.normalize(oe,oe),new o.Ray(ye,oe)})),Se=et(c,1,m.zoom)*m._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:we,bufferedTilespaceGeometry:U,bufferedTilespaceBounds:(Te=o.getBounds(U),Te.min.x=o.clamp(Te.min.x,0,o.EXTENT),Te.min.y=o.clamp(Te.min.y,0,o.EXTENT),Te.max.x=o.clamp(Te.max.x,0,o.EXTENT),Te.max.y=o.clamp(Te.max.y,0,o.EXTENT),Te),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:Se};var Te}_bufferedScreenMercator(c,m){const b=Kt(c);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),m):{polygon:this.bufferedScreenGeometry(c).map((A=>m.pointCoordinate3D(A))),unwrapped:!0},this._screenRaycastCache[b]=S,S}}_bufferedCameraMercator(c,m){const b=Kt(c);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let S;return S=m.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),m):{polygon:this.bufferedCameraGeometry(c).map((A=>m.pointCoordinate3D(A))),unwrapped:!0},this._cameraRaycastCache[b]=S,S}}_projectAndResample(c,m){const b=(function(A,O){const z=o.multiply([],O.pixelMatrix,O.globeMatrix),U=[0,-o.GLOBE_RADIUS,0,1],Y=[0,o.GLOBE_RADIUS,0,1],W=[0,0,0,1];o.transformMat4$1(U,U,z),o.transformMat4$1(Y,Y,z),o.transformMat4$1(W,W,z);const re=new o.Point(U[0]/U[3],U[1]/U[3]),ye=new o.Point(Y[0]/Y[3],Y[1]/Y[3]),we=o.polygonContainsPoint(A,re)&&U[3]<W[3],Se=o.polygonContainsPoint(A,ye)&&Y[3]<W[3];if(!we&&!Se)return null;const Te=(function(qe,Je,Qe){for(let ct=1;ct<qe.length;ct++){const Ut=Gt(Je.pointCoordinate3D(qe[ct-1]).x),it=Gt(Je.pointCoordinate3D(qe[ct]).x);if(Qe<0){if(Ut<it)return{idx:ct,t:-Ut/(it-1-Ut)}}else if(it<Ut)return{idx:ct,t:(1-Ut)/(it+1-Ut)}}return null})(A,O,we?-1:1);if(!Te)return null;const{idx:Ae,t:oe}=Te;let be=Ae>1?Dt(A.slice(0,Ae),O):[],Pe=Ae<A.length?Dt(A.slice(Ae),O):[];be=be.map((qe=>new o.Point(Gt(qe.x),qe.y))),Pe=Pe.map((qe=>new o.Point(Gt(qe.x),qe.y)));const Le=[...be];Le.length===0&&Le.push(Pe[Pe.length-1]);const $e=o.number(Le[Le.length-1].y,(Pe.length===0?be[0]:Pe[0]).y,oe);let He;return He=we?[new o.Point(0,$e),new o.Point(0,0),new o.Point(1,0),new o.Point(1,$e)]:[new o.Point(1,$e),new o.Point(1,1),new o.Point(0,1),new o.Point(0,$e)],Le.push(...He),Pe.length===0?Le.push(be[0]):Le.push(...Pe),{polygon:Le.map((qe=>new o.MercatorCoordinate(qe.x,qe.y))),unwrapped:!1}})(c,m);if(b)return b;const S=(function(A,O){let z=!1,U=-1/0,Y=0;for(let re=0;re<A.length-1;re++)A[re].x>U&&(U=A[re].x,Y=re);for(let re=0;re<A.length-1;re++){const ye=(Y+re)%(A.length-1),we=A[ye],Se=A[ye+1];Math.abs(we.x-Se.x)>.5&&(we.x<Se.x?(we.x+=1,ye===0&&(A[A.length-1].x+=1)):(Se.x+=1,ye+1===A.length-1&&(A[0].x+=1)),z=!0)}const W=o.mercatorXfromLng(O.center.lng);return z&&W<Math.abs(W-1)&&A.forEach((re=>{re.x-=1})),{polygon:A,unwrapped:z}})(Dt(c,m).map((A=>new o.Point(Gt(A.x),A.y))),m);return{polygon:S.polygon.map((A=>new o.MercatorCoordinate(A.x,A.y))),unwrapped:S.unwrapped}}}function Dt(v,c){return o.resample(v,(m=>{const b=c.pointCoordinate3D(m);m.x=b.x,m.y=b.y}),1/256)}function Gt(v){return v<0?1+v%1:v%1}function Kt(v){return 100*v|0}function dn(v,c,m,b,S){const A=function(O,z){if(O)return S(O);if(z){v.url&&z.tiles&&v.tiles&&delete v.tiles;const U=o.pick(o.extend(z,v),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(U.vectorLayers=z.vector_layers,U.vectorLayerIds=U.vectorLayers.map((Y=>Y.id))),U.tiles=c.canonicalizeTileset(U,v.url),S(null,U)}};return v.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(v.url,null,m,b),o.ResourceType.Source),A):o.exported.frame((()=>A(null,v)))}class Fn{constructor(c,m,b){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const m=Math.pow(2,c.z),b=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*m),S=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*m),A=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*m),O=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*m);return c.x>=b&&c.x<A&&c.y>=S&&c.y<O}}class An{constructor(c,m,b){this.context=c;const S=c.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const m=this.context.gl;this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lt{constructor(c,m,b,S){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=S,this.context=c;const A=c.gl;this.buffer=A.createBuffer(),c.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||m.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,m){for(let b=0;b<this.attributes.length;b++){const S=m.attributes[this.attributes[b].name];S!==void 0&&c.enableVertexAttribArray(S)}}setVertexAttribPointers(c,m,b){for(let S=0;S<this.attributes.length;S++){const A=this.attributes[S],O=m.attributes[A.name];O!==void 0&&c.vertexAttribPointer(O,A.components,c[Tn[A.type]],!1,this.itemSize,A.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ft{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class gn extends Ft{getDefault(){return o.Color.transparent}set(c){const m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class mn extends Ft{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class tr extends Ft{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class On extends Ft{getDefault(){return[!0,!0,!0,!0]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class jn extends Ft{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Lr extends Ft{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class $n extends Ft{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const m=this.current;(c.func!==m.func||c.ref!==m.ref||c.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Vn extends Ft{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Tr extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=c,this.dirty=!1}}class En extends Ft{getDefault(){return[0,1]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Hi extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=c,this.dirty=!1}}class nr extends Ft{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class on extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.BLEND):m.disable(m.BLEND),this.current=c,this.dirty=!1}}class en extends Ft{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class yn extends Ft{getDefault(){return o.Color.transparent}set(c){const m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class bn extends Ft{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Pn extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=c,this.dirty=!1}}class Bn extends Ft{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Zn extends Ft{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let vi,Sr=class extends Ft{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class Or extends Ft{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class vn extends Ft{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Wn extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class ri extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Ss extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Jo extends Ft{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Oe extends Ft{getDefault(){return null}set(c){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class pe extends Ft{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class fe extends Ft{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class ke extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Fe extends Ft{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Ge extends Ft{constructor(c,m){super(c),this.context=c,this.parent=m}getDefault(){return null}}class nt extends Ge{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class rt extends Ge{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,this.attachment(),m.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Ye extends rt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ut{constructor(c,m,b,S){this.context=c,this.width=m,this.height=b;const A=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new nt(c,A),S&&(this.depthAttachment=new rt(c,A))}destroy(){const c=this.context.gl,m=this.colorAttachment.get();if(m&&c.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&c.deleteRenderbuffer(b)}c.deleteFramebuffer(this.framebuffer)}}class Yt{constructor(c,m=!1){if(this.gl=c,this.isWebGL2=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),m){const b=c;this.extVertexArrayObject={createVertexArrayOES:b.createVertexArray.bind(c),deleteVertexArrayOES:b.deleteVertexArray.bind(c),bindVertexArrayOES:b.bindVertexArray.bind(c)}}this.clearColor=new gn(this),this.clearDepth=new mn(this),this.clearStencil=new tr(this),this.colorMask=new On(this),this.depthMask=new jn(this),this.stencilMask=new Lr(this),this.stencilFunc=new $n(this),this.stencilOp=new Vn(this),this.stencilTest=new Tr(this),this.depthRange=new En(this),this.depthTest=new Hi(this),this.depthFunc=new nr(this),this.blend=new on(this),this.blendFunc=new en(this),this.blendColor=new yn(this),this.blendEquation=new bn(this),this.cullFace=new Pn(this),this.cullFaceSide=new Bn(this),this.frontFace=new Zn(this),this.program=new Sr(this),this.activeTexture=new Or(this),this.viewport=new vn(this),this.bindFramebuffer=new Wn(this),this.bindRenderbuffer=new ri(this),this.bindTexture=new Ss(this),this.bindVertexBuffer=new Jo(this),this.bindElementBuffer=new Oe(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pe(this),this.pixelStoreUnpack=new fe(this),this.pixelStoreUnpackPremultiplyAlpha=new ke(this),this.pixelStoreUnpackFlipY=new Fe(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),m||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(m||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=m||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,m){return new An(this,c,m)}createVertexBuffer(c,m,b){return new Lt(this,c,m,b)}createRenderbuffer(c,m,b){const S=this.gl,A=S.createRenderbuffer();return this.bindRenderbuffer.set(A),S.renderbufferStorage(S.RENDERBUFFER,c,m,b),this.bindRenderbuffer.set(null),A}createFramebuffer(c,m,b){return new ut(this,c,m,b)}clear({color:c,depth:m,stencil:b}){const S=this.gl;let A=0;c&&(A|=S.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(A|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(A|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),S.clear(A)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){T(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Qt extends o.Evented{constructor(c,m,b,S){if(super(),this.id=c,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(m,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const m=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=dn(this._options,this.map._requestManager,m,b,((S,A)=>{this._tileJSONRequest=null,this._loaded=!0,S?(m&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${m}`),b&&b.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new o.ErrorEvent(S))):A&&(o.extend(this,A),A.bounds&&(this.tileBounds=new Fn(A.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(A.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(S)}))}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(c,m){const b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),S={request:this.map._requestManager.transformRequest(b,o.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(S.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=m:c.request=c.actor.send("reloadTile",S,A.bind(this));else if(c.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",S,A.bind(this),void 0,!0);else{const O=o.loadVectorTile.call({deduped:this._deduped},S,((z,U)=>{z||!U?A.call(this,z):(S.data={cacheControl:U.cacheControl,expires:U.expires,rawData:U.rawData.slice(0)},c.actor&&c.actor.send("loadTile",S,A.bind(this),void 0,!0))}),!0);c.request={cancel:O}}function A(O,z){return delete c.request,c.aborted?m(null):O&&O.status!==404?m(O):(z&&z.resourceTiming&&(c.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&c.setExpiryData(z),c.loadVectorData(z,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),m(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class $t extends o.Evented{constructor(c,m,b,S){super(),this.id=c,this.dispatcher=b,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},m),o.extend(this,o.pick(m,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dn(this._options,this.map._requestManager,null,null,((m,b)=>{this._tileJSONRequest=null,this._loaded=!0,m?this.fire(new o.ErrorEvent(m)):b&&(o.extend(this,b),b.bounds&&(this.tileBounds=new Fn(b.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(b.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(m)}))}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,m){const b=o.exported.devicePixelRatio>=2,S=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(S,o.ResourceType.Tile),((A,O,z,U)=>(delete c.request,c.aborted?(c.state="unloaded",m(null)):A?(c.state="errored",m(A)):O?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:z,expires:U}),c.setTexture(O,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void m(null)):m(null))))}static loadTileData(c,m,b){c.setTexture(m,b)}static unloadTileData(c,m){c.texture&&m.saveTileTexture(c.texture)}abortTile(c,m){c.request&&(c.request.cancel(),delete c.request),m()}unloadTile(c,m){c.texture&&this.map.painter.saveTileTexture(c.texture),m()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Xn(v,c,m,b,S,A,O,z){const U=[v,m,S,c,b,A,1,1,1],Y=[O,z,1],W=o.adjoint([],U),[re,ye,we]=o.transformMat3(Y,Y,o.transpose(W,W));return o.multiply$1(U,[re,0,0,0,ye,0,0,0,we],U)}class Jn extends o.Evented{constructor(c,m,b,S){super(),this.id=c,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=m,this._dirty=!1}load(c,m){this._loaded=m||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),((b,S)=>{if(this._imageRequest=null,this._loaded=!0,b)this.fire(new o.ErrorEvent(b));else if(S){const{HTMLImageElement:A}=o.window;this.image=S instanceof A?o.exported.getImageData(S):S,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const m=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=(function(b){let S=1/0,A=1/0,O=-1/0,z=-1/0;for(const re of b)S=Math.min(S,re.x),A=Math.min(A,re.y),O=Math.max(O,re.x),z=Math.max(z,re.y);const U=Math.max(O-S,z-A),Y=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),W=Math.pow(2,Y);return new o.CanonicalTileID(Y,Math.floor((S+O)/2*W),Math.floor((A+z)/2*W))})(m),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const U in this.tiles){const Y=this.tiles[U];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray)return;const m=o.tileTransform(this.tileID,this.map.transform.projection),[b,S,A,O]=this.coordinates.map((U=>{const Y=m.projection.project(U[0],U[1]);return o.getTilePoint(m,Y)._round()}));this.perspectiveTransform=(function(U,Y,W,re,ye,we,Se,Te,Ae,oe){const be=Xn(0,0,U,0,0,Y,U,Y),Pe=Xn(W,re,ye,we,Se,Te,Ae,oe);return o.multiply$1(Pe,o.adjoint(be,be),Pe),[Pe[6]/Pe[8]*U/o.EXTENT,Pe[7]/Pe[8]*Y/o.EXTENT]})(this.width,this.height,b.x,b.y,S.x,S.y,O.x,O.y,A.x,A.y);const z=this._boundsArray=new o.StructArrayLayout4i8;z.emplaceBack(b.x,b.y,0,0),z.emplaceBack(S.x,S.y,o.EXTENT,0),z.emplaceBack(O.x,O.y,0,o.EXTENT),z.emplaceBack(A.x,A.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(z,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,m=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,m){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},m(null)):(c.state="errored",m(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const qn={vector:Qt,raster:$t,"raster-dem":class extends $t{constructor(v,c,m,b){super(v,c,m,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(v,c){const m=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(S,A){S&&(v.state="errored",c(S)),A&&(v.dem=A,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",c(null))}v.request=o.getImage(this.map._requestManager.transformRequest(m,o.ResourceType.Tile),(function(S,A,O,z){if(delete v.request,v.aborted)v.state="unloaded",c(null);else if(S)v.state="errored",c(S);else if(A){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:O,expires:z});const U=o.window.ImageBitmap&&A instanceof o.window.ImageBitmap&&(vi==null&&(vi=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),vi),Y=1-(A.width-o.prevPowerOfTwo(A.width))/2;Y<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const W=U?A:o.exported.getImageData(A,Y),re={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:W,encoding:this.encoding,padding:Y};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",re,b.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const c=v.canonical,m=Math.pow(2,c.z),b=(c.x-1+m)%m,S=c.x===0?v.wrap-1:v.wrap,A=(c.x+1+m)%m,O=c.x+1===m?v.wrap+1:v.wrap,z={};return z[new o.OverscaledTileID(v.overscaledZ,S,c.z,b,c.y).key]={backfilled:!1},z[new o.OverscaledTileID(v.overscaledZ,O,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(z[new o.OverscaledTileID(v.overscaledZ,S,c.z,b,c.y-1).key]={backfilled:!1},z[new o.OverscaledTileID(v.overscaledZ,v.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},z[new o.OverscaledTileID(v.overscaledZ,O,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<m&&(z[new o.OverscaledTileID(v.overscaledZ,S,c.z,b,c.y+1).key]={backfilled:!1},z[new o.OverscaledTileID(v.overscaledZ,v.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},z[new o.OverscaledTileID(v.overscaledZ,O,c.z,A,c.y+1).key]={backfilled:!1}),z}unloadTile(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded"}},geojson:class extends o.Evented{constructor(v,c,m,b){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=m.getActor(),this.setEventedParent(b),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const S=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*S,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*S,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*S,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}getClusterExpansionZoom(v,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},c),this}getClusterChildren(v,c){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},c),this}getClusterLeaves(v,c,m,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:c,offset:m},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const v=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(v.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,v,((m,b)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new o.ErrorEvent(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(S.resourceTiming=b.resourceTiming[this.id]),this.fire(new o.Event("data",S)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(v,c){const m=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(m,{type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((b,S)=>(delete v.request,v.unloadVectorData(),v.aborted?c(null):b?c(b):(v.loadVectorData(S,this.map.painter,m==="reloadTile"),c(null)))),void 0,m==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Jn{constructor(v,c,m,b){super(v,c,m,b),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const c of v.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,((c,m)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):m&&(this.video=m,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const c=this.video.seekable;v<c.start(0)||v>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,c=v.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(v,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Jn,canvas:class extends Jn{constructor(v,c,m,b){super(v,c,m,b),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((S=>!Array.isArray(S)||S.length!==2||S.some((A=>typeof A!="number"))))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends o.Evented{constructor(v,c,m,b){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=m,this._implementation=c,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Fn(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this._map=v,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:c,y:m,z:b}=v.canonical;return this._implementation.hasTile({x:c,y:m,z:b})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,c){const{x:m,y:b,z:S}=v.tileID.canonical,A=new o.window.AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:m,y:b,z:S},{signal:A.signal})).then((function(O){return delete v.request,v.aborted?(v.state="unloaded",c(null)):O===void 0?(v.state="errored",c(null)):O===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",c(null)):(function(z){return z instanceof o.window.ImageData||z instanceof o.window.HTMLCanvasElement||z instanceof o.window.ImageBitmap||z instanceof o.window.HTMLImageElement})(O)?(this.loadTileData(v,O),v.state="loaded",void c(null)):(v.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch((O=>{O.code!==20&&(v.state="errored",c(O))})),v.request.cancel=()=>A.abort()}loadTileData(v,c){$t.loadTileData(v,c,this._map.painter)}unloadTileData(v){$t.unloadTileData(v,this._map.painter)}unloadTile(v,c){if(this.unloadTileData(v),this._implementation.unloadTile){const{x:m,y:b,z:S}=v.tileID.canonical;this._implementation.unloadTile({x:m,y:b,z:S})}c()}abortTile(v,c){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ir=function(v,c,m,b){const S=new qn[c.type](v,c,m,b);if(S.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${S.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],S),S};function er(v,c){const m=o.identity([]);return o.scale(m,m,[.5*v.width,.5*-v.height,1]),o.translate(m,m,[1,-1,0]),o.multiply(m,m,v.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(m)}function Vr(v,c,m,b,S,A,O,z=!1){const U=v.tilesIn(b,O,z);U.sort(Kr);const Y=[];for(const re of U)Y.push({wrappedTileID:re.tile.tileID.wrapped().key,queryResults:re.tile.queryRenderedFeatures(c,m,v._state,re,S,A,er(v.transform,re.tile.tileID),z)});const W=(function(re){const ye={},we={};for(const Se of re){const Te=Se.queryResults,Ae=Se.wrappedTileID,oe=we[Ae]=we[Ae]||{};for(const be in Te){const Pe=Te[be],Le=oe[be]=oe[be]||{},$e=ye[be]=ye[be]||[];for(const He of Pe)Le[He.featureIndex]||(Le[He.featureIndex]=!0,$e.push(He))}}return ye})(Y);for(const re in W)W[re].forEach((ye=>{const we=ye.feature,Se=we.layer;Se&&Se.type!=="background"&&Se.type!=="sky"&&(we.source=Se.source,Se["source-layer"]&&(we.sourceLayer=Se["source-layer"]),we.state=we.id!==void 0?v.getFeatureState(Se["source-layer"],we.id):{})}));return W}function Cr(v,c){const m=v.getRenderableIds().map((A=>v.getTileByID(A))),b=[],S={};for(let A=0;A<m.length;A++){const O=m[A],z=O.tileID.canonical.key;S[z]||(S[z]=!0,O.querySourceFeatures(b,c))}return b}function Kr(v,c){const m=v.tileID,b=c.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}function xi(){return th.workerClass!=null?new th.workerClass:new o.window.Worker(th.workerUrl)}const No="mapboxgl_preloaded_worker_pool";class Cs{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<Cs.workerCount;)this.workers.push(new xi);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[No]}numActive(){return Object.keys(this.active).length}}let Hs;function lc(){return Hs||(Hs=new Cs),Hs}function Ul(v,c){const m={};for(const b in v)b!=="ref"&&(m[b]=v[b]);return o.refProperties.forEach((b=>{b in c&&(m[b]=c[b])})),m}function Nu(v){v=v.slice();const c=Object.create(null);for(let m=0;m<v.length;m++)c[v[m].id]=v[m];for(let m=0;m<v.length;m++)"ref"in v[m]&&(v[m]=Ul(v[m],c[v[m].ref]));return v}Cs.workerCount=2;const _r={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ea(v,c,m){m.push({command:_r.addSource,args:[v,c[v]]})}function io(v,c,m){c.push({command:_r.removeSource,args:[v]}),m[v]=!0}function Na(v,c,m,b){io(v,m,b),ea(v,c,m)}function hs(v,c,m){let b;for(b in v[m])if(v[m].hasOwnProperty(b)&&b!=="data"&&!T(v[m][b],c[m][b]))return!1;for(b in c[m])if(c[m].hasOwnProperty(b)&&b!=="data"&&!T(v[m][b],c[m][b]))return!1;return!0}function ta(v,c,m,b,S,A){let O;for(O in c=c||{},v=v||{})v.hasOwnProperty(O)&&(T(v[O],c[O])||m.push({command:A,args:[b,O,c[O],S]}));for(O in c)c.hasOwnProperty(O)&&!v.hasOwnProperty(O)&&(T(v[O],c[O])||m.push({command:A,args:[b,O,c[O],S]}))}function ma(v){return v.id}function Ba(v,c){return v[c.id]=c,v}class Fa{constructor(c,m){this.reset(c,m)}reset(c,m){this.points=c||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let m=1,b=this._distances[m];const S=c*this.paddedLength+this.padding;for(;b<S&&m<this._distances.length;)b=this._distances[++m];const A=m-1,O=this._distances[A],z=b-O,U=z>0?(S-O)/z:0;return this.points[A].mult(1-U).add(this.points[m].mult(U))}}class yl{constructor(c,m,b){const S=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(c/b),this.yCellCount=Math.ceil(m/b);for(let O=0;O<this.xCellCount*this.yCellCount;O++)S.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=m,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,m,b,S,A){this._forEachCell(m,b,S,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(S),this.bboxes.push(A)}insertCircle(c,m,b,S){this._forEachCell(m-S,b-S,m+S,b+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(m),this.circles.push(b),this.circles.push(S)}_insertBoxCell(c,m,b,S,A,O){this.boxCells[A].push(O)}_insertCircleCell(c,m,b,S,A,O){this.circleCells[A].push(O)}_query(c,m,b,S,A,O){if(b<0||c>this.width||S<0||m>this.height)return!A&&[];const z=[];if(c<=0&&m<=0&&this.width<=b&&this.height<=S){if(A)return!0;for(let U=0;U<this.boxKeys.length;U++)z.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const Y=this.circles[3*U],W=this.circles[3*U+1],re=this.circles[3*U+2];z.push({key:this.circleKeys[U],x1:Y-re,y1:W-re,x2:Y+re,y2:W+re})}return O?z.filter(O):z}return this._forEachCell(c,m,b,S,this._queryCell,z,{hitTest:A,seenUids:{box:{},circle:{}}},O),A?z.length>0:z}_queryCircle(c,m,b,S,A){const O=c-b,z=c+b,U=m-b,Y=m+b;if(z<0||O>this.width||Y<0||U>this.height)return!S&&[];const W=[];return this._forEachCell(O,U,z,Y,this._queryCellCircle,W,{hitTest:S,circle:{x:c,y:m,radius:b},seenUids:{box:{},circle:{}}},A),S?W.length>0:W}query(c,m,b,S,A){return this._query(c,m,b,S,!1,A)}hitTest(c,m,b,S,A){return this._query(c,m,b,S,!0,A)}hitTestCircle(c,m,b,S){return this._queryCircle(c,m,b,!0,S)}_queryCell(c,m,b,S,A,O,z,U){const Y=z.seenUids,W=this.boxCells[A];if(W!==null){const ye=this.bboxes;for(const we of W)if(!Y.box[we]){Y.box[we]=!0;const Se=4*we;if(c<=ye[Se+2]&&m<=ye[Se+3]&&b>=ye[Se+0]&&S>=ye[Se+1]&&(!U||U(this.boxKeys[we]))){if(z.hitTest)return O.push(!0),!0;O.push({key:this.boxKeys[we],x1:ye[Se],y1:ye[Se+1],x2:ye[Se+2],y2:ye[Se+3]})}}}const re=this.circleCells[A];if(re!==null){const ye=this.circles;for(const we of re)if(!Y.circle[we]){Y.circle[we]=!0;const Se=3*we;if(this._circleAndRectCollide(ye[Se],ye[Se+1],ye[Se+2],c,m,b,S)&&(!U||U(this.circleKeys[we]))){if(z.hitTest)return O.push(!0),!0;{const Te=ye[Se],Ae=ye[Se+1],oe=ye[Se+2];O.push({key:this.circleKeys[we],x1:Te-oe,y1:Ae-oe,x2:Te+oe,y2:Ae+oe})}}}}}_queryCellCircle(c,m,b,S,A,O,z,U){const Y=z.circle,W=z.seenUids,re=this.boxCells[A];if(re!==null){const we=this.bboxes;for(const Se of re)if(!W.box[Se]){W.box[Se]=!0;const Te=4*Se;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,we[Te+0],we[Te+1],we[Te+2],we[Te+3])&&(!U||U(this.boxKeys[Se])))return O.push(!0),!0}}const ye=this.circleCells[A];if(ye!==null){const we=this.circles;for(const Se of ye)if(!W.circle[Se]){W.circle[Se]=!0;const Te=3*Se;if(this._circlesCollide(we[Te],we[Te+1],we[Te+2],Y.x,Y.y,Y.radius)&&(!U||U(this.circleKeys[Se])))return O.push(!0),!0}}}_forEachCell(c,m,b,S,A,O,z,U){const Y=this._convertToXCellCoord(c),W=this._convertToYCellCoord(m),re=this._convertToXCellCoord(b),ye=this._convertToYCellCoord(S);for(let we=Y;we<=re;we++)for(let Se=W;Se<=ye;Se++)if(A.call(this,c,m,b,S,this.xCellCount*Se+we,O,z,U))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,m,b,S,A,O){const z=S-c,U=A-m,Y=b+O;return Y*Y>z*z+U*U}_circleAndRectCollide(c,m,b,S,A,O,z){const U=(O-S)/2,Y=Math.abs(c-(S+U));if(Y>U+b)return!1;const W=(z-A)/2,re=Math.abs(m-(A+W));if(re>W+b)return!1;if(Y<=U||re<=W)return!0;const ye=Y-U,we=re-W;return ye*ye+we*we<=b*b}}const ga={unknown:0,flipRequired:1,flipNotRequired:2},cc=Math.tan(85*Math.PI/180);function xt(v,c,m,b,S,A,O){const z=o.create();if(m)if(A.name==="globe"){const U=o.calculateGlobeLabelMatrix(S,c);o.multiply(z,z,U)}else{const U=se([],O);z[0]=U[0],z[1]=U[1],z[4]=U[2],z[5]=U[3],b||o.rotateZ(z,z,S.angle)}else o.multiply(z,S.labelPlaneMatrix,v);return z}function na(v,c,m,b,S,A,O){const z=xt(v,c,m,b,S,A,O);return A.name==="globe"&&m||(z[2]=z[6]=z[10]=z[14]=0),z}function Zr(v,c,m,b,S,A,O){if(m){if(A.name==="globe"){const z=xt(v,c,m,b,S,A,O);return o.invert(z,z),o.multiply(z,v,z),z}{const z=o.clone(v),U=o.identity([]);return U[0]=O[0],U[1]=O[1],U[4]=O[2],U[5]=O[3],o.multiply(z,z,U),b||o.rotateZ(z,z,-S.angle),z}}return S.glCoordMatrix}function zr(v,c,m,b){const S=[v,c,m,1];m?o.transformMat4$1(S,S,b):or(S,S,b);const A=S[3];return S[0]/=A,S[1]/=A,S[2]/=A,S}function zs(v,c){return Math.min(.5+v/c*.5,1.5)}function so(v,c){const m=v[0]/v[3],b=v[1]/v[3];return m>=-c[0]&&m<=c[0]&&b>=-c[1]&&b<=c[1]}function Bu(v,c,m,b,S,A,O,z,U,Y){const W=m.transform,re=b?v.textSizeData:v.iconSizeData,ye=o.evaluateSizeForZoom(re,m.transform.zoom),we=W.projection.name==="globe",Se=[256/m.width*2+1,256/m.height*2+1],Te=b?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Te.clear();let Ae=null;we&&(Ae=b?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const oe=v.lineVertexArray,be=b?v.text.placedSymbolArray:v.icon.placedSymbolArray,Pe=m.transform.width/m.transform.height;let Le,$e=!1;for(let He=0;He<be.length;He++){const qe=be.get(He),{numGlyphs:Je,writingMode:Qe}=qe;if(Qe!==o.WritingMode.vertical||$e||Le===o.WritingMode.horizontal||($e=!0),Le=Qe,(qe.hidden||Qe===o.WritingMode.vertical)&&!$e){ra(Je,Te);continue}$e=!1;const ct=new o.Point(qe.tileAnchorX,qe.tileAnchorY);let{x:Ut,y:it,z:vt}=W.projection.projectTilePoint(ct.x,ct.y,Y.canonical);if(U){const[zn,Bt,ln]=U(ct);Ut+=zn,it+=Bt,vt+=ln}const lt=[Ut,it,vt,1];if(o.transformMat4$1(lt,lt,c),!so(lt,Se)){ra(Je,Te);continue}const zt=zs(m.transform.cameraToCenterDistance,lt[3]),ot=o.evaluateSizeForFeature(re,ye,qe),Et=O?ot/zt:ot*zt,Nt=zr(Ut,it,vt,S);if(Nt[3]<=0){ra(Je,Te);continue}let St={};const It=O?null:U,Sn=nn(qe,Et,!1,z,c,S,A,v.glyphOffsetArray,oe,Te,Ae,Nt,ct,St,Pe,It,W.projection,Y,O);$e=Sn.useVertical,It&&Sn.needsFlipping&&(St={}),(Sn.notEnoughRoom||$e||Sn.needsFlipping&&nn(qe,Et,!0,z,c,S,A,v.glyphOffsetArray,oe,Te,Ae,Nt,ct,St,Pe,It,W.projection,Y,O).notEnoughRoom)&&ra(Je,Te)}b?(v.text.dynamicLayoutVertexBuffer.updateData(Te),Ae&&v.text.globeExtVertexBuffer.updateData(Ae)):(v.icon.dynamicLayoutVertexBuffer.updateData(Te),Ae&&v.icon.globeExtVertexBuffer.updateData(Ae))}function mi(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te){const{lineStartIndex:Ae,glyphStartIndex:oe,segment:be}=z,Pe=oe+z.numGlyphs,Le=Ae+z.lineLength,$e=c.getoffsetX(oe),He=c.getoffsetX(Pe-1),qe=Gs(v*$e,m,b,S,A,O,be,Ae,Le,U,Y,W,re,ye,!0,we,Se,Te);if(!qe)return null;const Je=Gs(v*He,m,b,S,A,O,be,Ae,Le,U,Y,W,re,ye,!0,we,Se,Te);return Je?{first:qe,last:Je}:null}function Va(v,c,m,b){return v===o.WritingMode.horizontal&&Math.abs(b)>Math.abs(m)?{useVertical:!0}:v===o.WritingMode.vertical?b>0?{needsFlipping:!0}:null:c!==ga.unknown&&(function(S,A){return S===0||Math.abs(A/S)>cc})(m,b)?c===ga.flipRequired?{needsFlipping:!0}:null:m<0?{needsFlipping:!0}:null}function nn(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te,Ae,oe,be){const Pe=c/24,Le=v.lineOffsetX*Pe,$e=v.lineOffsetY*Pe,{lineStartIndex:He,glyphStartIndex:qe,numGlyphs:Je,segment:Qe,writingMode:ct,flipState:Ut}=v,it=He+v.lineLength,vt=lt=>{if(W){const[Nt,St,It]=lt.up,Sn=Y.length;o.updateGlobeVertexNormal(W,Sn+0,Nt,St,It),o.updateGlobeVertexNormal(W,Sn+1,Nt,St,It),o.updateGlobeVertexNormal(W,Sn+2,Nt,St,It),o.updateGlobeVertexNormal(W,Sn+3,Nt,St,It)}const[zt,ot,Et]=lt.point;o.addDynamicAttributes(Y,zt,ot,Et,lt.angle)};if(Je>1){const lt=mi(Pe,z,Le,$e,m,re,ye,v,U,A,we,Te,!1,Ae,oe,be);if(!lt)return{notEnoughRoom:!0};if(b&&!m){let[zt,ot,Et]=lt.first.point,[Nt,St,It]=lt.last.point;[zt,ot]=zr(zt,ot,Et,O),[Nt,St]=zr(Nt,St,It,O);const Sn=Va(ct,Ut,(Nt-zt)*Se,St-ot);if(v.flipState=Sn&&Sn.needsFlipping?ga.flipRequired:ga.flipNotRequired,Sn)return Sn}vt(lt.first);for(let zt=qe+1;zt<qe+Je-1;zt++){const ot=Gs(Pe*z.getoffsetX(zt),Le,$e,m,re,ye,Qe,He,it,U,A,we,Te,!1,!1,Ae,oe,be);if(!ot)return Y.length-=4*(zt-qe),{notEnoughRoom:!0};vt(ot)}vt(lt.last)}else{if(b&&!m){const zt=zr(ye.x,ye.y,0,S),ot=He+Qe+1,Et=new o.Point(U.getx(ot),U.gety(ot)),Nt=zr(Et.x,Et.y,0,S),St=Nt[3]>0?Nt:Hn(ye,Et,zt,1,S,void 0,Ae,oe.canonical),It=Va(ct,Ut,(St[0]-zt[0])*Se,St[1]-zt[1]);if(v.flipState=It&&It.needsFlipping?ga.flipRequired:ga.flipNotRequired,It)return It}const lt=Gs(Pe*z.getoffsetX(qe),Le,$e,m,re,ye,Qe,He,it,U,A,we,Te,!1,!1,Ae,oe,be);if(!lt)return{notEnoughRoom:!0};vt(lt)}return{}}function sr(v,c,m,b,S){const{x:A,y:O,z}=b.projectTilePoint(v.x,v.y,c);if(!S)return zr(A,O,z,m);const[U,Y,W]=S(v);return zr(A+U,O+Y,z+W,m)}function Hn(v,c,m,b,S,A,O,z){const U=sr(v.sub(c)._unit()._add(v),z,S,O,A);return o.sub(U,m,U),o.normalize(U,U),o.scaleAndAdd(U,m,U,b)}function Gs(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te,Ae,oe){const be=b?v-c:v+c;let Pe=be>0?1:-1,Le=0;b&&(Pe*=-1,Le=Math.PI),Pe<0&&(Le+=Math.PI);let $e=z+O+(Pe>0?0:1)|0,He=S,qe=S,Je=0,Qe=0;const ct=Math.abs(be),Ut=[],it=[];let vt=A,lt=vt;const zt=()=>Hn(lt,vt,qe,ct-Je+1,W,ye,Te,Ae.canonical);for(;Je+Qe<=ct;){if($e+=Pe,$e<z||$e>=U)return null;if(qe=He,lt=vt,Ut.push(qe),we&&it.push(lt),vt=new o.Point(Y.getx($e),Y.gety($e)),He=re[$e],!He){const ln=sr(vt,Ae.canonical,W,Te,ye);He=ln[3]>0?re[$e]=ln:zt()}Je+=Qe,Qe=o.distance(qe,He)}Se&&ye&&(re[$e]&&(He=zt(),Qe=o.distance(qe,He)),re[$e]=He);const ot=(ct-Je)/Qe,Et=vt.sub(lt)._mult(ot)._add(lt),Nt=o.sub([],He,qe),St=o.scaleAndAdd([],qe,Nt,ot);let It=[0,0,1],Sn=Nt[0],zn=Nt[1];if(oe&&(It=Te.upVector(Ae.canonical,Et.x,Et.y),It[0]!==0||It[1]!==0||It[2]!==1)){const ln=[It[2],0,-It[0]],Ln=o.cross([],It,ln);o.normalize(ln,ln),o.normalize(Ln,Ln),Sn=o.dot(Nt,ln),zn=o.dot(Nt,Ln)}if(m){const ln=o.cross([],It,Nt);o.normalize(ln,ln),o.scaleAndAdd(St,St,ln,m*Pe)}const Bt=Le+Math.atan2(zn,Sn);return Ut.push(St),we&&it.push(Et),{point:St,angle:Bt,path:Ut,tilePath:it,up:It}}function ra(v,c){const m=c.length,b=m+4*v;c.resize(b),c.float32.fill(-1/0,4*m,4*b)}function or(v,c,m){const b=c[0],S=c[1];return v[0]=m[0]*b+m[4]*S+m[12],v[1]=m[1]*b+m[5]*S+m[13],v[3]=m[3]*b+m[7]*S+m[15],v}const As=100;class qc{constructor(c,m,b=new yl(c.width+200,c.height+200,25),S=new yl(c.width+200,c.height+200,25)){this.transform=c,this.grid=b,this.ignoredGrid=S,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+As,this.screenBottomBoundary=c.height+As,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=m}placeCollisionBox(c,m,b,S,A,O,z,U){let Y=b.projectedAnchorX,W=b.projectedAnchorY,re=b.projectedAnchorZ;const ye=b.elevation,we=b.tileID,Se=c.getProjection();if(ye&&we){const[He,qe,Je]=Se.upVector(we.canonical,b.tileAnchorX,b.tileAnchorY),Qe=Se.upVectorScale(we.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Y+=He*ye*Qe,W+=qe*ye*Qe,re+=Je*ye*Qe}const Te=this.projectAndGetPerspectiveRatio(z,Y,W,re,b.tileID,Se.name==="globe"||!!ye||this.transform.pitch>0,Se),Ae=O*Te.perspectiveRatio,oe=(b.x1*m+S.x-b.padding)*Ae+Te.point.x,be=(b.y1*m+S.y-b.padding)*Ae+Te.point.y,Pe=(b.x2*m+S.x+b.padding)*Ae+Te.point.x,Le=(b.y2*m+S.y+b.padding)*Ae+Te.point.y,$e=Te.perspectiveRatio<=.55||Te.occluded;return!this.isInsideGrid(oe,be,Pe,Le)||!A&&this.grid.hitTest(oe,be,Pe,Le,U)||$e?{box:[],offscreen:!1,occluded:Te.occluded}:{box:[oe,be,Pe,Le],offscreen:this.isOffscreen(oe,be,Pe,Le),occluded:!1}}placeCollisionCircles(c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te){const Ae=[],oe=this.transform.elevation,be=c.getProjection(),Pe=oe?oe.getAtTileOffsetFunc(Te,this.transform.center.lat,this.transform.worldSize,be):null,Le=new o.Point(b.tileAnchorX,b.tileAnchorY);let{x:$e,y:He,z:qe}=be.projectTilePoint(Le.x,Le.y,Te.canonical);if(Pe){const[Et,Nt,St]=Pe(Le);$e+=Et,He+=Nt,qe+=St}const Je=be.name==="globe",Qe=this.projectAndGetPerspectiveRatio(z,$e,He,qe,Te,Je||!!oe||this.transform.pitch>0,be),{perspectiveRatio:ct}=Qe,Ut=(re?O/ct:O*ct)/o.ONE_EM,it=zr($e,He,qe,U),vt=Qe.signedDistanceFromCamera>0?mi(Ut,A,b.lineOffsetX*Ut,b.lineOffsetY*Ut,!1,it,Le,b,S,U,{},oe&&!re?Pe:null,re&&!!oe,be,Te,re):null;let lt=!1,zt=!1,ot=!0;if(vt&&!Qe.occluded){const Et=.5*we*ct+Se,Nt=new o.Point(-100,-100),St=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),It=new Fa,{first:Sn,last:zn}=vt,Bt=Sn.path.length;let ln=[];for(let xn=Bt-1;xn>=1;xn--)ln.push(Sn.path[xn]);for(let xn=1;xn<zn.path.length;xn++)ln.push(zn.path[xn]);const Ln=2.5*Et;Y&&(ln=ln.map((([xn,kr,Qr],Gr)=>(Pe&&!Je&&(Qr=Pe(Gr<Bt-1?Sn.tilePath[Bt-1-Gr]:zn.tilePath[Gr-Bt+2])[2]),zr(xn,kr,Qr,Y)))),ln.some((xn=>xn[3]<=0))&&(ln=[]));let ar=[];if(ln.length>0){let xn=1/0,kr=-1/0,Qr=1/0,Gr=-1/0;for(const Ur of ln)xn=Math.min(xn,Ur[0]),Qr=Math.min(Qr,Ur[1]),kr=Math.max(kr,Ur[0]),Gr=Math.max(Gr,Ur[1]);kr>=Nt.x&&xn<=St.x&&Gr>=Nt.y&&Qr<=St.y&&(ar=[ln.map((Ur=>new o.Point(Ur[0],Ur[1])))],(xn<Nt.x||kr>St.x||Qr<Nt.y||Gr>St.y)&&(ar=o.clipLine(ar,Nt.x,Nt.y,St.x,St.y)))}for(const xn of ar){It.reset(xn,.25*Et);let kr=0;kr=It.length<=.5*Et?1:Math.ceil(It.paddedLength/Ln)+1;for(let Qr=0;Qr<kr;Qr++){const Gr=Qr/Math.max(kr-1,1),Ur=It.lerp(Gr),bo=Ur.x+As,Pr=Ur.y+As;Ae.push(bo,Pr,Et,0);const la=bo-Et,Ja=Pr-Et,Oi=bo+Et,fi=Pr+Et;if(ot=ot&&this.isOffscreen(la,Ja,Oi,fi),zt=zt||this.isInsideGrid(la,Ja,Oi,fi),!m&&this.grid.hitTestCircle(bo,Pr,Et,ye)&&(lt=!0,!W))return{circles:[],offscreen:!1,collisionDetected:lt,occluded:!1}}}}return{circles:!W&&lt||!zt?[]:Ae,offscreen:ot,collisionDetected:lt,occluded:Qe.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[];let b=1/0,S=1/0,A=-1/0,O=-1/0;for(const W of c){const re=new o.Point(W.x+As,W.y+As);b=Math.min(b,re.x),S=Math.min(S,re.y),A=Math.max(A,re.x),O=Math.max(O,re.y),m.push(re)}const z=this.grid.query(b,S,A,O).concat(this.ignoredGrid.query(b,S,A,O)),U={},Y={};for(const W of z){const re=W.key;if(U[re.bucketInstanceId]===void 0&&(U[re.bucketInstanceId]={}),U[re.bucketInstanceId][re.featureIndex])continue;const ye=[new o.Point(W.x1,W.y1),new o.Point(W.x2,W.y1),new o.Point(W.x2,W.y2),new o.Point(W.x1,W.y2)];o.polygonIntersectsPolygon(m,ye)&&(U[re.bucketInstanceId][re.featureIndex]=!0,Y[re.bucketInstanceId]===void 0&&(Y[re.bucketInstanceId]=[]),Y[re.bucketInstanceId].push(re.featureIndex))}return Y}insertCollisionBox(c,m,b,S,A){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:S,collisionGroupID:A},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,m,b,S,A){const O=m?this.ignoredGrid:this.grid,z={bucketInstanceId:b,featureIndex:S,collisionGroupID:A};for(let U=0;U<c.length;U+=4)O.insertCircle(z,c[U],c[U+1],c[U+2])}projectAndGetPerspectiveRatio(c,m,b,S,A,O,z){const U=[m,b,S,1];let Y=!1;S||this.transform.pitch>0?(o.transformMat4$1(U,U,c),this.fogState&&A&&z.name!=="globe"&&(Y=(function(ye,we,Se,Te,Ae,oe){const be=oe.calculateFogTileMatrix(Ae),Pe=[we,Se,Te];return o.transformMat4(Pe,Pe,be),Xe(ye,Pe,oe.pitch,oe._fov)})(this.fogState,m,b,S,A.toUnwrapped(),this.transform)>.9)):or(U,U,c);const W=U[3];return{point:new o.Point((U[0]/W+1)/2*this.transform.width+As,(-U[1]/W+1)/2*this.transform.height+As),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/W*.5,1.5),signedDistanceFromCamera:W,occluded:O&&U[2]>W||Y}}isOffscreen(c,m,b,S){return b<As||c>=this.screenRightBoundary||S<As||m>this.screenBottomBoundary}isInsideGrid(c,m,b,S){return b>=0&&c<this.gridRightBoundary&&S>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function ia(v,c,m){const b=c.createTileMatrix(v,v.worldSize,m.toUnwrapped());return o.multiply(new Float32Array(16),v.projMatrix,b)}function Ji(v,c,m){if(c.projection.name===m.projection.name)return v.projMatrix;const b=m.clone();return b.setProjection(c.projection),ia(b,c.getProjection(),v)}function bi(v,c,m){return c.name===m.projection.name?v.projMatrix:ia(m,c,v)}class Nh{constructor(c,m,b,S){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?m:-m))):S&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class ya{constructor(c,m,b,S,A,O=!1){this.text=new Nh(c?c.text:null,m,b,A),this.icon=new Nh(c?c.icon:null,m,S,A),this.clipped=O}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class jl{constructor(c,m,b,S=!1){this.text=c,this.icon=m,this.skipFade=b,this.clipped=S}}class Hc{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class $l{constructor(c,m,b,S,A){this.bucketInstanceId=c,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=S,this.tileID=A}}class Fu{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const m=++this.maxGroupID;this.collisionGroups[c]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[c]}}function Bo(v,c,m,b,S){const{horizontalAlign:A,verticalAlign:O}=o.getAnchorAlignment(v),z=-(A-.5)*c,U=-(O-.5)*m,Y=o.evaluateVariableOffset(v,b);return new o.Point(z+Y[0]*S,U+Y[1]*S)}function uc(v,c,m,b,S){const A=new o.Point(v,c);return m&&A._rotate(b?S:-S),A}class Fo{constructor(c,m,b,S,A){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new qc(this.transform,A),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Fu(b),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,m,b,S){const A=b.getBucket(m),O=b.latestFeatureIndex;if(!A||!O||m.id!==A.layerIds[0])return;const z=A.layers[0].layout,U=b.collisionBoxArray,Y=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),W=b.tileSize/o.EXTENT,re=b.tileID.toUnwrapped();this.transform.setProjection(A.projection);const ye=(we=b.tileID,Se=A.getProjection(),Te=this.transform,Se.name===this.projection?Te.calculateProjMatrix(we.toUnwrapped()):ia(Te,Se,we));var we,Se,Te;const Ae=z.get("text-pitch-alignment")==="map",oe=z.get("text-rotation-alignment")==="map";m.compileFilter();const be=m.dynamicFilter(),Pe=m.dynamicFilterNeedsFeature(),Le=this.transform.calculatePixelsToTileUnitsMatrix(b),$e=na(ye,b.tileID.canonical,Ae,oe,this.transform,A.getProjection(),Le);let He=null;if(Ae){const Qe=Zr(ye,b.tileID.canonical,Ae,oe,this.transform,A.getProjection(),Le);He=o.multiply([],this.transform.labelPlaneMatrix,Qe)}let qe=null;be&&b.latestFeatureIndex&&(qe={unwrappedTileID:re,dynamicFilter:be,dynamicFilterNeedsFeature:Pe,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[A.bucketInstanceId]=new $l(A.bucketInstanceId,O,A.sourceLayerIndex,A.index,b.tileID);const Je={bucket:A,layout:z,posMatrix:ye,textLabelPlaneMatrix:$e,labelToScreenMatrix:He,clippingData:qe,scale:Y,textPixelRatio:W,holdingForFade:b.holdingForFade(),collisionBoxArray:U,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(A.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(A.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(S)for(const Qe of A.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:Ut,symbolInstanceEnd:it}=Qe;c.push({sortKey:ct,symbolInstanceStart:Ut,symbolInstanceEnd:it,parameters:Je})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Je})}attemptAnchorPlacement(c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te,Ae,oe,be){const{textOffset0:Pe,textOffset1:Le,crossTileID:$e}=ye,He=[Pe,Le],qe=Bo(c,b,S,He,A),Je=this.collisionIndex.placeCollisionBox(Se,A,m,uc(qe.x,qe.y,O,z,this.transform.angle),re,U,Y,W.predicate);if(Ae){const Qe=Se.getSymbolInstanceIconSize(be,this.transform.zoom,ye.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Se,Qe,Ae,uc(qe.x,qe.y,O,z,this.transform.angle),re,U,Y,W.predicate).box.length===0)return}if(Je.box.length>0){let Qe;return this.prevPlacement&&this.prevPlacement.variableOffsets[$e]&&this.prevPlacement.placements[$e]&&this.prevPlacement.placements[$e].text&&(Qe=this.prevPlacement.variableOffsets[$e].anchor),this.variableOffsets[$e]={textOffset:He,width:b,height:S,anchor:c,textScale:A,prevAnchor:Qe},this.markUsedJustification(Se,c,ye,Te),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,Te,ye),this.placedOrientations[$e]=Te),{shift:qe,placedGlyphBoxes:Je}}}placeLayerBucketPart(c,m,b,S){const{bucket:A,layout:O,posMatrix:z,textLabelPlaneMatrix:U,labelToScreenMatrix:Y,clippingData:W,textPixelRatio:re,holdingForFade:ye,collisionBoxArray:we,partiallyEvaluatedTextSize:Se,partiallyEvaluatedIconSize:Te,collisionGroup:Ae}=c.parameters,oe=O.get("text-optional"),be=O.get("icon-optional"),Pe=O.get("text-allow-overlap"),Le=O.get("icon-allow-overlap"),$e=O.get("text-rotation-alignment")==="map",He=O.get("text-pitch-alignment")==="map",qe=O.get("icon-text-fit")!=="none",Je=O.get("symbol-z-order")==="viewport-y";this.transform.setProjection(A.projection);let Qe=Pe&&(Le||!A.hasIconData()||be),ct=Le&&(Pe||!A.hasTextData()||oe);!A.collisionArrays&&we&&A.deserializeCollisionBoxes(we),b&&S&&A.updateCollisionDebugBuffers(this.transform.zoom,we);const Ut=(it,vt,lt)=>{const{crossTileID:zt,numVerticalGlyphVertices:ot}=it;if(W){const Oi={zoom:this.transform.zoom,pitch:this.transform.pitch};let fi=null;if(W.dynamicFilterNeedsFeature){const jr=this.retainedQueryData[A.bucketInstanceId];fi=W.featureIndex.loadFeature({featureIndex:it.featureIndex,bucketIndex:jr.bucketIndex,sourceLayerIndex:jr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,W.dynamicFilter)(Oi,fi,this.retainedQueryData[A.bucketInstanceId].tileID.canonical,new o.Point(it.tileAnchorX,it.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[zt]=new jl(!1,!1,!1,!0),void m.add(zt)}if(m.has(zt))return;if(ye)return void(this.placements[zt]=new jl(!1,!1,!1));let Et=!1,Nt=!1,St=!0,It=!1,Sn=!1,zn=null,Bt={box:null,offscreen:null,occluded:null},ln={box:null},Ln=null,ar=null,xn=null,kr=0,Qr=0,Gr=0;lt.textFeatureIndex?kr=lt.textFeatureIndex:it.useRuntimeCollisionCircles&&(kr=it.featureIndex),lt.verticalTextFeatureIndex&&(Qr=lt.verticalTextFeatureIndex);const Ur=Oi=>{Oi.tileID=this.retainedQueryData[A.bucketInstanceId].tileID;const fi=this.transform.elevation;(fi||Oi.elevation)&&(Oi.elevation=fi?fi.getAtTileOffset(Oi.tileID,Oi.tileAnchorX,Oi.tileAnchorY):0)},bo=lt.textBox;if(bo){Ur(bo);const Oi=jr=>{let ms=o.WritingMode.horizontal;if(A.allowVerticalPlacement&&!jr&&this.prevPlacement){const ao=this.prevPlacement.placedOrientations[zt];ao&&(this.placedOrientations[zt]=ao,ms=ao,this.markUsedOrientation(A,ms,it))}return ms},fi=(jr,ms)=>{if(A.allowVerticalPlacement&&ot>0&&lt.verticalTextBox){for(const ao of A.writingModes)if(ao===o.WritingMode.vertical?(Bt=ms(),ln=Bt):Bt=jr(),Bt&&Bt.box&&Bt.box.length)break}else Bt=jr()};if(O.get("text-variable-anchor")){let jr=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[zt]){const Ei=this.prevPlacement.variableOffsets[zt];jr.indexOf(Ei.anchor)>0&&(jr=jr.filter((Mi=>Mi!==Ei.anchor)),jr.unshift(Ei.anchor))}const ms=(Ei,Mi,cs)=>{const Xl=A.getSymbolInstanceTextSize(Se,it,this.transform.zoom,vt),Ec=(Ei.x2-Ei.x1)*Xl+2*Ei.padding,el=(Ei.y2-Ei.y1)*Xl+2*Ei.padding,Kl=qe&&!Le?Mi:null;Kl&&Ur(Kl);let $o={box:[],offscreen:!1,occluded:!1};const nh=Pe?2*jr.length:jr.length;for(let rh=0;rh<nh;++rh){const Sf=this.attemptAnchorPlacement(jr[rh%jr.length],Ei,Ec,el,Xl,$e,He,re,z,Ae,rh>=jr.length,it,vt,A,cs,Kl,Se,Te);if(Sf&&($o=Sf.placedGlyphBoxes,$o&&$o.box&&$o.box.length)){Et=!0,zn=Sf.shift;break}}return $o};fi((()=>ms(bo,lt.iconBox,o.WritingMode.horizontal)),(()=>{const Ei=lt.verticalTextBox;return Ei&&Ur(Ei),A.allowVerticalPlacement&&!(Bt&&Bt.box&&Bt.box.length)&&ot>0&&Ei?ms(Ei,lt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),Bt&&(Et=Bt.box,St=Bt.offscreen,It=Bt.occluded);const ao=Oi(!(!Bt||!Bt.box));if(!Et&&this.prevPlacement){const Ei=this.prevPlacement.variableOffsets[zt];Ei&&(this.variableOffsets[zt]=Ei,this.markUsedJustification(A,Ei.anchor,it,ao))}}else{const jr=(ms,ao)=>{const Ei=A.getSymbolInstanceTextSize(Se,it,this.transform.zoom,vt),Mi=this.collisionIndex.placeCollisionBox(A,Ei,ms,new o.Point(0,0),Pe,re,z,Ae.predicate);return Mi&&Mi.box&&Mi.box.length&&(this.markUsedOrientation(A,ao,it),this.placedOrientations[zt]=ao),Mi};fi((()=>jr(bo,o.WritingMode.horizontal)),(()=>{const ms=lt.verticalTextBox;return A.allowVerticalPlacement&&ot>0&&ms?(Ur(ms),jr(ms,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),Oi(!!(Bt&&Bt.box&&Bt.box.length))}}if(Ln=Bt,Et=Ln&&Ln.box&&Ln.box.length>0,St=Ln&&Ln.offscreen,It=Ln&&Ln.occluded,it.useRuntimeCollisionCircles){const Oi=A.text.placedSymbolArray.get(it.centerJustifiedTextSymbolIndex>=0?it.centerJustifiedTextSymbolIndex:it.verticalPlacedTextSymbolIndex),fi=o.evaluateSizeForFeature(A.textSizeData,Se,Oi),jr=O.get("text-padding");ar=this.collisionIndex.placeCollisionCircles(A,Pe,Oi,A.lineVertexArray,A.glyphOffsetArray,fi,z,U,Y,b,He,Ae.predicate,it.collisionCircleDiameter*fi/o.ONE_EM,jr,this.retainedQueryData[A.bucketInstanceId].tileID),Et=Pe||ar.circles.length>0&&!ar.collisionDetected,St=St&&ar.offscreen,It=ar.occluded}if(lt.iconFeatureIndex&&(Gr=lt.iconFeatureIndex),lt.iconBox){const Oi=fi=>{Ur(fi);const jr=qe&&zn?uc(zn.x,zn.y,$e,He,this.transform.angle):new o.Point(0,0),ms=A.getSymbolInstanceIconSize(Te,this.transform.zoom,it.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(A,ms,fi,jr,Le,re,z,Ae.predicate)};ln&&ln.box&&ln.box.length&&lt.verticalIconBox?(xn=Oi(lt.verticalIconBox),Nt=xn.box.length>0):(xn=Oi(lt.iconBox),Nt=xn.box.length>0),St=St&&xn.offscreen,Sn=xn.occluded}const Pr=oe||it.numHorizontalGlyphVertices===0&&ot===0,la=be||it.numIconVertices===0;if(Pr||la?la?Pr||(Nt=Nt&&Et):Et=Nt&&Et:Nt=Et=Nt&&Et,Et&&Ln&&Ln.box&&this.collisionIndex.insertCollisionBox(Ln.box,O.get("text-ignore-placement"),A.bucketInstanceId,ln&&ln.box&&Qr?Qr:kr,Ae.ID),Nt&&xn&&this.collisionIndex.insertCollisionBox(xn.box,O.get("icon-ignore-placement"),A.bucketInstanceId,Gr,Ae.ID),ar&&(Et&&this.collisionIndex.insertCollisionCircles(ar.circles,O.get("text-ignore-placement"),A.bucketInstanceId,kr,Ae.ID),b)){const Oi=A.bucketInstanceId;let fi=this.collisionCircleArrays[Oi];fi===void 0&&(fi=this.collisionCircleArrays[Oi]=new Hc);for(let jr=0;jr<ar.circles.length;jr+=4)fi.circles.push(ar.circles[jr+0]),fi.circles.push(ar.circles[jr+1]),fi.circles.push(ar.circles[jr+2]),fi.circles.push(ar.collisionDetected?1:0)}const Ja=A.projection.name!=="globe";Qe=Qe&&(Ja||!It),ct=ct&&(Ja||!Sn),this.placements[zt]=new jl(Et||Qe,Nt||ct,St||A.justReloaded),m.add(zt)};if(Je){const it=A.getSortedSymbolIndexes(this.transform.angle);for(let vt=it.length-1;vt>=0;--vt){const lt=it[vt];Ut(A.symbolInstances.get(lt),lt,A.collisionArrays[lt])}}else for(let it=c.symbolInstanceStart;it<c.symbolInstanceEnd;it++)Ut(A.symbolInstances.get(it),it,A.collisionArrays[it]);if(b&&A.bucketInstanceId in this.collisionCircleArrays){const it=this.collisionCircleArrays[A.bucketInstanceId];o.invert(it.invProjMatrix,z),it.viewportMatrix=this.collisionIndex.getViewportMatrix()}A.justReloaded=!1}markUsedJustification(c,m,b,S){const{leftJustifiedTextSymbolIndex:A,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:U,crossTileID:Y}=b,W=o.getAnchorJustification(m),re=S===o.WritingMode.vertical?U:W==="left"?A:W==="center"?O:W==="right"?z:-1;A>=0&&(c.text.placedSymbolArray.get(A).crossTileID=re>=0&&A!==re?0:Y),O>=0&&(c.text.placedSymbolArray.get(O).crossTileID=re>=0&&O!==re?0:Y),z>=0&&(c.text.placedSymbolArray.get(z).crossTileID=re>=0&&z!==re?0:Y),U>=0&&(c.text.placedSymbolArray.get(U).crossTileID=re>=0&&U!==re?0:Y)}markUsedOrientation(c,m,b){const S=m===o.WritingMode.horizontal||m===o.WritingMode.horizontalOnly?m:0,A=m===o.WritingMode.vertical?m:0,{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:Y}=b,W=c.text.placedSymbolArray;O>=0&&(W.get(O).placedOrientation=S),z>=0&&(W.get(z).placedOrientation=S),U>=0&&(W.get(U).placedOrientation=S),Y>=0&&(W.get(Y).placedOrientation=A)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const S=m?m.symbolFadeChange(c):1,A=m?m.opacities:{},O=m?m.variableOffsets:{},z=m?m.placedOrientations:{};for(const U in this.placements){const Y=this.placements[U],W=A[U];W?(this.opacities[U]=new ya(W,S,Y.text,Y.icon,null,Y.clipped),b=b||Y.text!==W.text.placed||Y.icon!==W.icon.placed):(this.opacities[U]=new ya(null,S,Y.text,Y.icon,Y.skipFade,Y.clipped),b=b||Y.text||Y.icon)}for(const U in A){const Y=A[U];if(!this.opacities[U]){const W=new ya(Y,S,!1,!1);W.isHidden()||(this.opacities[U]=W,b=b||Y.text.placed||Y.icon.placed)}}for(const U in O)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=O[U]);for(const U in z)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=z[U]);b?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:c)}updateLayerOpacities(c,m){const b=new Set;for(const S of m){const A=S.getBucket(c);A&&S.latestFeatureIndex&&c.id===A.layerIds[0]&&this.updateBucketOpacities(A,b,S.collisionBoxArray)}}updateBucketOpacities(c,m,b){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const S=c.layers[0].layout,A=!!c.layers[0].dynamicFilter(),O=new ya(null,0,!1,!1,!0),z=S.get("text-allow-overlap"),U=S.get("icon-allow-overlap"),Y=S.get("text-variable-anchor"),W=S.get("text-rotation-alignment")==="map",re=S.get("text-pitch-alignment")==="map",ye=S.get("icon-text-fit")!=="none",we=new ya(null,0,z&&(U||!c.hasIconData()||S.get("icon-optional")),U&&(z||!c.hasTextData()||S.get("text-optional")),!0);!c.collisionArrays&&b&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(b);const Se=(Ae,oe,be)=>{for(let Pe=0;Pe<oe/4;Pe++)Ae.opacityVertexArray.emplaceBack(be)};let Te=0;for(let Ae=0;Ae<c.symbolInstances.length;Ae++){const oe=c.symbolInstances.get(Ae),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:Pe,crossTileID:Le,numIconVertices:$e}=oe,He=m.has(Le);let qe=this.opacities[Le];He?qe=O:qe||(qe=we,this.opacities[Le]=qe),m.add(Le);const Je=be>0||Pe>0,Qe=$e>0,ct=this.placedOrientations[Le],Ut=ct===o.WritingMode.vertical,it=ct===o.WritingMode.horizontal||ct===o.WritingMode.horizontalOnly;if(!Je&&!Qe||qe.isHidden()||Te++,Je){const vt=ii(qe.text);Se(c.text,be,Ut?si:vt),Se(c.text,Pe,it?si:vt);const lt=qe.text.isHidden(),{leftJustifiedTextSymbolIndex:zt,centerJustifiedTextSymbolIndex:ot,rightJustifiedTextSymbolIndex:Et,verticalPlacedTextSymbolIndex:Nt}=oe,St=c.text.placedSymbolArray,It=lt||Ut?1:0;zt>=0&&(St.get(zt).hidden=It),ot>=0&&(St.get(ot).hidden=It),Et>=0&&(St.get(Et).hidden=It),Nt>=0&&(St.get(Nt).hidden=lt||it?1:0);const Sn=this.variableOffsets[Le];Sn&&this.markUsedJustification(c,Sn.anchor,oe,ct);const zn=this.placedOrientations[Le];zn&&(this.markUsedJustification(c,"left",oe,zn),this.markUsedOrientation(c,zn,oe))}if(Qe){const vt=ii(qe.icon),{placedIconSymbolIndex:lt,verticalPlacedIconSymbolIndex:zt}=oe,ot=c.icon.placedSymbolArray,Et=qe.icon.isHidden()?1:0;lt>=0&&(Se(c.icon,$e,Ut?si:vt),ot.get(lt).hidden=Et),zt>=0&&(Se(c.icon,oe.numVerticalIconVertices,it?si:vt),ot.get(zt).hidden=Et)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const vt=c.collisionArrays[Ae];if(vt){let lt=new o.Point(0,0),zt=!0;if(vt.textBox||vt.verticalTextBox){if(Y){const Et=this.variableOffsets[Le];Et?(lt=Bo(Et.anchor,Et.width,Et.height,Et.textOffset,Et.textScale),W&&lt._rotate(re?this.transform.angle:-this.transform.angle)):zt=!1}A&&(zt=!qe.clipped),vt.textBox&&_a(c.textCollisionBox.collisionVertexArray,qe.text.placed,!zt||Ut,lt.x,lt.y),vt.verticalTextBox&&_a(c.textCollisionBox.collisionVertexArray,qe.text.placed,!zt||it,lt.x,lt.y)}const ot=zt&&!!(!it&&vt.verticalIconBox);vt.iconBox&&_a(c.iconCollisionBox.collisionVertexArray,qe.icon.placed,ot,ye?lt.x:0,ye?lt.y:0),vt.verticalIconBox&&_a(c.iconCollisionBox.collisionVertexArray,qe.icon.placed,!ot,ye?lt.x:0,ye?lt.y:0)}}}if(c.fullyClipped=Te===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Ae.invProjMatrix,c.placementViewportMatrix=Ae.viewportMatrix,c.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>c}setStale(){this.stale=!0}}function _a(v,c,m,b,S){v.emplaceBack(c?1:0,m?1:0,b||0,S||0),v.emplaceBack(c?1:0,m?1:0,b||0,S||0),v.emplaceBack(c?1:0,m?1:0,b||0,S||0),v.emplaceBack(c?1:0,m?1:0,b||0,S||0)}const ds=Math.pow(2,25),Ii=Math.pow(2,24),Gc=Math.pow(2,17),ql=Math.pow(2,16),as=Math.pow(2,9),fs=Math.pow(2,8),Wc=Math.pow(2,1);function ii(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const c=v.placed?1:0,m=Math.floor(127*v.opacity);return m*ds+c*Ii+m*Gc+c*ql+m*as+c*fs+m*Wc+c}const si=0;class hc{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,m,b,S,A){const O=this._bucketParts;for(;this._currentTileIndex<c.length;)if(m.getBucketParts(O,S,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort(((z,U)=>z.sortKey-U.sortKey)));this._currentPartIndex<O.length;){const z=O[this._currentPartIndex];if(m.placeLayerBucketPart(z,this._seenCrossTileIDs,b,z.symbolInstanceStart===0),this._currentPartIndex++,A())return!0}return!1}}class dc{constructor(c,m,b,S,A,O,z,U){this.placement=new Fo(c,A,O,z,U),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(c,m,b){const S=o.exported.now(),A=()=>{const O=o.exported.now()-S;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=m[c[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=z)&&(!O.maxzoom||O.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new hc(O)),this._inProgressLayer.continuePlacement(b[O.source],this.placement,this._showCollisionBoxes,O,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const _l=512/o.EXTENT/2;class ps{constructor(c,m,b){this.tileID=c,this.bucketInstanceId=b,this.index=new o.KDBush(m.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const S=c.canonical.x*o.EXTENT,A=c.canonical.y*o.EXTENT;for(let O=0;O<m.length;O++){const{key:z,crossTileID:U,tileAnchorX:Y,tileAnchorY:W}=m.get(O),re=Math.floor((S+Y)*_l),ye=Math.floor((A+W)*_l);this.index.add(re,ye),this.keys.push(z),this.crossTileIDs.push(U)}this.index.finish()}findMatches(c,m,b){const S=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z),A=_l/Math.pow(2,m.canonical.z-this.tileID.canonical.z),O=m.canonical.x*o.EXTENT,z=m.canonical.y*o.EXTENT;for(let U=0;U<c.length;U++){const Y=c.get(U);if(Y.crossTileID)continue;const{key:W,tileAnchorX:re,tileAnchorY:ye}=Y,we=Math.floor((O+re)*A),Se=Math.floor((z+ye)*A),Te=this.index.range(we-S,Se-S,we+S,Se+S);for(const Ae of Te){const oe=this.crossTileIDs[Ae];if(this.keys[Ae]===W&&!b.has(oe)){b.add(oe),Y.crossTileID=oe;break}}}}}class vl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class va{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const m=Math.round((c-this.lng)/360);if(m!==0)for(const b in this.indexes){const S=this.indexes[b],A={};for(const O in S){const z=S[O];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+m),A[z.tileID.key]=z}this.indexes[b]=A}this.lng=c}addBucket(c,m,b){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let A=0;A<m.symbolInstances.length;A++)m.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const S=this.usedCrossTileIDs[c.overscaledZ];for(const A in this.indexes){const O=this.indexes[A];if(Number(A)>c.overscaledZ)for(const z in O){const U=O[z];U.tileID.isChildOf(c)&&U.findMatches(m.symbolInstances,c,S)}else{const z=O[c.scaledTo(Number(A)).key];z&&z.findMatches(m.symbolInstances,c,S)}}for(let A=0;A<m.symbolInstances.length;A++){const O=m.symbolInstances.get(A);O.crossTileID||(O.crossTileID=b.generate(),S.add(O.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new ps(c,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(c,m){for(const b of m.crossTileIDs)this.usedCrossTileIDs[c].delete(b)}removeStaleBuckets(c){let m=!1;for(const b in this.indexes){const S=this.indexes[b];for(const A in S)c[S[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,S[A]),delete S[A],m=!0)}return m}}class es{constructor(){this.layerIndexes={},this.crossTileIDs=new vl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,m,b,S){let A=this.layerIndexes[c.id];A===void 0&&(A=this.layerIndexes[c.id]=new va);let O=!1;const z={};S.name!=="globe"&&A.handleWrapJump(b);for(const U of m){const Y=U.getBucket(c);Y&&c.id===Y.layerIds[0]&&(Y.bucketInstanceId||(Y.bucketInstanceId=++this.maxBucketInstanceId),A.addBucket(U.tileID,Y,this.crossTileIDs)&&(O=!0),z[Y.bucketInstanceId]=!0)}return A.removeStaleBuckets(z)&&(O=!0),O}pruneUnusedLayers(c){const m={};c.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}const yo=(v,c)=>o.emitValidationErrors(v,c&&c.filter((m=>m.identifier!=="source.canvas"))),xa=o.pick(_r,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Yc=o.pick(_r,["setCenter","setZoom","setBearing","setPitch"]),Vu={version:8,layers:[],sources:{}},ba={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Vo extends o.Evented{constructor(c,m={}){super(),this.map=c,this.dispatcher=new Me(lc(),this),this.imageManager=new Q,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,m.localFontFamily?o.LocalGlyphMode.all:m.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,m.localFontFamily||m.localIdeographFontFamily),this.crossTileSymbolIndex=new es,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const b=this;this._rtlTextPluginCallback=Vo.registerForPluginStateChange((S=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},((A,O)=>{if(o.triggerPluginCompletionEvent(A),O&&O.every((z=>z)))for(const z in b._sourceCaches){const U=b._sourceCaches[z],Y=U.getSource().type;Y!=="vector"&&Y!=="geojson"||U.reload()}}))})),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const A=this.getSource(S.sourceId);if(A&&A.vectorLayerIds)for(const O in this._layers){const z=this._layers[O];z.source===A.id&&this._validateLayer(z)}}))}loadURL(c,m={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const b=typeof m.validate=="boolean"?m.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,m.accessToken);const S=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(S,((A,O)=>{this._request=null,A?this.fire(new o.ErrorEvent(A)):O&&this._load(O,b)}))}loadJSON(c,m={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame((()=>{this._request=null,this._load(c,m.validate!==!1)}))}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Vu,!1)}_updateLayerCount(c,m){const b=m?1:-1;c.is3D()&&(this._num3DLayers+=b),c.type==="circle"&&(this._numCircleLayers+=b),c.type==="symbol"&&(this._numSymbolLayers+=b)}_load(c,m){if(m&&yo(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const S in c.sources)this.addSource(S,c.sources[S],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const b=Nu(this.stylesheet.layers);this._order=b.map((S=>S.id)),this._layers={},this._serializedLayers={};for(const S of b){const A=o.createStyleLayer(S);A.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=A,this._serializedLayers[A.id]=A.serialize(),this._updateLayerCount(A,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ve(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=(function(m,b,S){let A,O,z;const U=o.exported.devicePixelRatio>1?"@2x":"";let Y=o.getJSON(b.transformRequest(b.normalizeSpriteURL(m,U,".json"),o.ResourceType.SpriteJSON),((ye,we)=>{Y=null,z||(z=ye,A=we,re())})),W=o.getImage(b.transformRequest(b.normalizeSpriteURL(m,U,".png"),o.ResourceType.SpriteImage),((ye,we)=>{W=null,z||(z=ye,O=we,re())}));function re(){if(z)S(z);else if(A&&O){const ye=o.exported.getImageData(O),we={};for(const Se in A){const{width:Te,height:Ae,x:oe,y:be,sdf:Pe,pixelRatio:Le,stretchX:$e,stretchY:He,content:qe}=A[Se],Je=new o.RGBAImage({width:Te,height:Ae});o.RGBAImage.copy(ye,Je,{x:oe,y:be},{x:0,y:0},{width:Te,height:Ae}),we[Se]={data:Je,pixelRatio:Le,sdf:Pe,stretchX:$e,stretchY:He,content:qe}}S(null,we)}}return{cancel(){Y&&(Y.cancel(),Y=null),W&&(W.cancel(),W=null)}}})(c,this.map._requestManager,((m,b)=>{if(this._spriteRequest=null,m)this.fire(new o.ErrorEvent(m));else if(b)for(const S in b)this.imageManager.addImage(S,b[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))}))}_validateLayer(c){const m=this.getSource(c.source);if(!m)return;const b=c.sourceLayer;b&&(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(b)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${m.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const m=[];for(const b of c){const S=this._layers[b];S.type!=="custom"&&m.push(S.serialize())}return m}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped():ba[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const m=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(S.length||A.length)&&this._updateWorkerLayers(S,A);for(const O in this._updatedSources){const z=this._updatedSources[O];z==="reload"?this._reloadSource(O):z==="clear"&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const b={};for(const S in this._sourceCaches){const A=this._sourceCaches[S];b[S]=A.used,A.used=!1}for(const S of this._order){const A=this._layers[S];if(A.recalculate(c,this._availableImages),!A.isHidden(c.zoom)){const z=this._getLayerSourceCache(A);z&&(z.used=!0)}const O=this.map.painter;if(O){const z=A.getProgramIds();if(!z)continue;const U=A.getProgramConfiguration(c.zoom);for(const Y of z)O.useProgram(Y,U)}}for(const S in b){const A=this._sourceCaches[S];b[S]!==A.used&&A.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:A.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const m in this._sourceCaches)this._sourceCaches[m].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,m){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),yo(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=Nu(c.layers);const m=(function(S,A){if(!S)return[{command:_r.setStyle,args:[A]}];let O=[];try{if(!T(S.version,A.version))return[{command:_r.setStyle,args:[A]}];T(S.center,A.center)||O.push({command:_r.setCenter,args:[A.center]}),T(S.zoom,A.zoom)||O.push({command:_r.setZoom,args:[A.zoom]}),T(S.bearing,A.bearing)||O.push({command:_r.setBearing,args:[A.bearing]}),T(S.pitch,A.pitch)||O.push({command:_r.setPitch,args:[A.pitch]}),T(S.sprite,A.sprite)||O.push({command:_r.setSprite,args:[A.sprite]}),T(S.glyphs,A.glyphs)||O.push({command:_r.setGlyphs,args:[A.glyphs]}),T(S.transition,A.transition)||O.push({command:_r.setTransition,args:[A.transition]}),T(S.light,A.light)||O.push({command:_r.setLight,args:[A.light]}),T(S.fog,A.fog)||O.push({command:_r.setFog,args:[A.fog]}),T(S.projection,A.projection)||O.push({command:_r.setProjection,args:[A.projection]});const z={},U=[];(function(re,ye,we,Se){let Te;for(Te in ye=ye||{},re=re||{})re.hasOwnProperty(Te)&&(ye.hasOwnProperty(Te)||io(Te,we,Se));for(Te in ye){if(!ye.hasOwnProperty(Te))continue;const Ae=ye[Te];re.hasOwnProperty(Te)?T(re[Te],Ae)||(re[Te].type==="geojson"&&Ae.type==="geojson"&&hs(re,ye,Te)?we.push({command:_r.setGeoJSONSourceData,args:[Te,Ae.data]}):Na(Te,ye,we,Se)):ea(Te,ye,we)}})(S.sources,A.sources,U,z);const Y=[];S.layers&&S.layers.forEach((re=>{re.source&&z[re.source]?O.push({command:_r.removeLayer,args:[re.id]}):Y.push(re)}));let W=S.terrain;W&&z[W.source]&&(O.push({command:_r.setTerrain,args:[void 0]}),W=void 0),O=O.concat(U),T(W,A.terrain)||O.push({command:_r.setTerrain,args:[A.terrain]}),(function(re,ye,we){ye=ye||[];const Se=(re=re||[]).map(ma),Te=ye.map(ma),Ae=re.reduce(Ba,{}),oe=ye.reduce(Ba,{}),be=Se.slice(),Pe=Object.create(null);let Le,$e,He,qe,Je,Qe,ct;for(Le=0,$e=0;Le<Se.length;Le++)He=Se[Le],oe.hasOwnProperty(He)?$e++:(we.push({command:_r.removeLayer,args:[He]}),be.splice(be.indexOf(He,$e),1));for(Le=0,$e=0;Le<Te.length;Le++)He=Te[Te.length-1-Le],be[be.length-1-Le]!==He&&(Ae.hasOwnProperty(He)?(we.push({command:_r.removeLayer,args:[He]}),be.splice(be.lastIndexOf(He,be.length-$e),1)):$e++,Qe=be[be.length-Le],we.push({command:_r.addLayer,args:[oe[He],Qe]}),be.splice(be.length-Le,0,He),Pe[He]=!0);for(Le=0;Le<Te.length;Le++)if(He=Te[Le],qe=Ae[He],Je=oe[He],!Pe[He]&&!T(qe,Je))if(T(qe.source,Je.source)&&T(qe["source-layer"],Je["source-layer"])&&T(qe.type,Je.type)){for(ct in ta(qe.layout,Je.layout,we,He,null,_r.setLayoutProperty),ta(qe.paint,Je.paint,we,He,null,_r.setPaintProperty),T(qe.filter,Je.filter)||we.push({command:_r.setFilter,args:[He,Je.filter]}),T(qe.minzoom,Je.minzoom)&&T(qe.maxzoom,Je.maxzoom)||we.push({command:_r.setLayerZoomRange,args:[He,Je.minzoom,Je.maxzoom]}),qe)qe.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?ta(qe[ct],Je[ct],we,He,ct.slice(6),_r.setPaintProperty):T(qe[ct],Je[ct])||we.push({command:_r.setLayerProperty,args:[He,ct,Je[ct]]}));for(ct in Je)Je.hasOwnProperty(ct)&&!qe.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?ta(qe[ct],Je[ct],we,He,ct.slice(6),_r.setPaintProperty):T(qe[ct],Je[ct])||we.push({command:_r.setLayerProperty,args:[He,ct,Je[ct]]}))}else we.push({command:_r.removeLayer,args:[He]}),Qe=be[be.lastIndexOf(He)+1],we.push({command:_r.addLayer,args:[Je,Qe]})})(Y,A.layers,O)}catch(z){console.warn("Unable to compute style diff:",z),O=[{command:_r.setStyle,args:[A]}]}return O})(this.serialize(),c).filter((S=>!(S.command in Yc)));if(m.length===0)return!1;const b=m.filter((S=>!(S.command in xa)));if(b.length>0)throw new Error(`Unimplemented: ${b.map((S=>S.command)).join(", ")}.`);return m.forEach((S=>{S.command!=="setTransition"&&S.command!=="setProjection"&&this[S.command].apply(this,S.args)})),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,m){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,m),this._afterImageUpdated(c),this)}updateImage(c,m){this.imageManager.updateImage(c,m)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,m,b={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(o.validateSource,`sources.${c}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const S=ir(c,m,this.dispatcher,this);S.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:S.serialize(),sourceId:c})));const A=O=>{const z=(O?"symbol:":"other:")+c,U=this._sourceCaches[z]=new o.SourceCache(z,S,O);(O?this._symbolSourceCaches:this._otherSourceCaches)[c]=U,U.style=this,U.onAdd(this.map)};A(!1),m.type!=="vector"&&m.type!=="geojson"||A(!0),S.onAdd&&S.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const m=this.getSource(c);if(!m)throw new Error("There is no source with this ID");for(const S in this._layers)if(this._layers[S].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${S}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(c);for(const S of b)delete this._sourceCaches[S.id],delete this._updatedSources[S.id],S.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:S.getSource().id})),S.setEventedParent(null),S.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],m.setEventedParent(null),m.onRemove&&m.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,m){this._checkLoaded(),this.getSource(c).setData(m),this._changed=!0}getSource(c){const m=this._getSourceCache(c);return m&&m.getSource()}_getSources(){const c=[];for(const m in this._otherSourceCaches){const b=this._getSourceCache(m);b&&c.push(b.getSource())}return c}addLayer(c,m,b={}){this._checkLoaded();const S=c.id;if(this.getLayer(S))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${S}" already exists on this map`)));let A;if(c.type==="custom"){if(yo(this,o.validateCustomStyleLayer(c)))return;A=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(S,c.source),c=o.clone$1(c),c=o.extend(c,{source:S})),this._validate(o.validateLayer,`layers.${S}`,c,{arrayIndex:-1},b))return;A=o.createStyleLayer(c),this._validateLayer(A),A.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[A.id]=A.serialize(),this._updateLayerCount(A,!0)}const O=m?this._order.indexOf(m):this._order.length;if(m&&O===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`)));this._order.splice(O,0,S),this._layerOrderChanged=!0,this._layers[S]=A;const z=this._getLayerSourceCache(A);if(this._removedLayers[S]&&A.source&&z&&A.type!=="custom"){const U=this._removedLayers[S];delete this._removedLayers[S],U.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",z.pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,m){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===m)return;const b=this._order.indexOf(c);this._order.splice(b,1);const S=m?this._order.indexOf(m):this._order.length;m&&S===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${m}" does not exist on this map.`))):(this._order.splice(S,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const m=this._layers[c];if(!m)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));m.setEventedParent(null),this._updateLayerCount(m,!1);const b=this._order.indexOf(c);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=m,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],m.onRemove&&m.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const m in this._layers)if(this._layers[m].type===c)return!0;return!1}setLayerZoomRange(c,m,b){this._checkLoaded();const S=this.getLayer(c);S?S.minzoom===m&&S.maxzoom===b||(m!=null&&(S.minzoom=m),b!=null&&(S.maxzoom=b),this._updateLayer(S)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,m,b={}){this._checkLoaded();const S=this.getLayer(c);if(S){if(!T(S.filter,m))return m==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(o.validateFilter,`layers.${S.id}.filter`,m,{layerType:S.type},b)||(S.filter=o.clone$1(m),this._updateLayer(S)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const m=this.getLayer(c);return m&&o.clone$1(m.filter)}setLayoutProperty(c,m,b,S={}){this._checkLoaded();const A=this.getLayer(c);A?T(A.getLayoutProperty(m),b)||(A.setLayoutProperty(m,b,S),this._updateLayer(A)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,m){const b=this.getLayer(c);if(b)return b.getLayoutProperty(m);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,m,b,S={}){this._checkLoaded();const A=this.getLayer(c);A?T(A.getPaintProperty(m),b)||(A.setPaintProperty(m,b,S)&&this._updateLayer(A),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,m){const b=this.getLayer(c);return b&&b.getPaintProperty(m)}setFeatureState(c,m){this._checkLoaded();const b=c.source,S=c.sourceLayer,A=this.getSource(b);if(!A)return void this.fire(new o.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const O=A.type;if(O==="geojson"&&S)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(O==="vector"&&!S)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const z=this._getSourceCaches(b);for(const U of z)U.setFeatureState(S,c.id,m)}removeFeatureState(c,m){this._checkLoaded();const b=c.source,S=this.getSource(b);if(!S)return void this.fire(new o.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const A=S.type,O=A==="vector"?c.sourceLayer:void 0;if(A==="vector"&&!O)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(m&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const z=this._getSourceCaches(b);for(const U of z)U.removeFeatureState(O,c.id,m)}getFeatureState(c){this._checkLoaded();const m=c.source,b=c.sourceLayer,S=this.getSource(m);if(S){if(S.type!=="vector"||b)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(m)[0].getFeatureState(b,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const m in this._sourceCaches){const b=this._sourceCaches[m].getSource();c[b.id]||(c[b.id]=b.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},(m=>m!==void 0))}_updateLayer(c){this._updatedLayers[c.id]=!0;const m=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&m&&m.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",m.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const m=O=>this._layers[O].type==="fill-extrusion",b={},S=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(m(z)){b[z]=O;for(const U of c){const Y=U[z];if(Y)for(const W of Y)S.push(W)}}}S.sort(((O,z)=>z.intersectionZ-O.intersectionZ));const A=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(m(z))for(let U=S.length-1;U>=0;U--){const Y=S[U].feature;if(b[Y.layer.id]<O)break;A.push(Y),S.pop()}else for(const U of c){const Y=U[z];if(Y)for(const W of Y)A.push(W.feature)}}return A}queryRenderedFeatures(c,m,b){m&&m.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",m.filter,null,m);const S={};if(m&&m.layers){if(!Array.isArray(m.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const U of m.layers){const Y=this._layers[U];if(!Y)return this.fire(new o.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];S[Y.source]=!0}}const A=[];m.availableImages=this._availableImages;const O=m&&m.layers?m.layers.some((U=>{const Y=this.getLayer(U);return Y&&Y.is3D()})):this.has3DLayers(),z=At.createFromScreenPoints(c,b);for(const U in this._sourceCaches){const Y=this._sourceCaches[U].getSource().id;m.layers&&!S[Y]||A.push(Vr(this._sourceCaches[U],this._layers,this._serializedLayers,z,m,b,O,!!this.map._showQueryGeometry))}return this.placement&&A.push((function(U,Y,W,re,ye,we,Se){const Te={},Ae=we.queryRenderedSymbols(re),oe=[];for(const be of Object.keys(Ae).map(Number))oe.push(Se[be]);oe.sort(Kr);for(const be of oe){const Pe=be.featureIndex.lookupSymbolFeatures(Ae[be.bucketInstanceId],Y,be.bucketIndex,be.sourceLayerIndex,ye.filter,ye.layers,ye.availableImages,U);for(const Le in Pe){const $e=Te[Le]=Te[Le]||[],He=Pe[Le];He.sort(((qe,Je)=>{const Qe=be.featureSortOrder;if(Qe){const ct=Qe.indexOf(qe.featureIndex);return Qe.indexOf(Je.featureIndex)-ct}return Je.featureIndex-qe.featureIndex}));for(const qe of He)$e.push(qe)}}for(const be in Te)Te[be].forEach((Pe=>{const Le=Pe.feature,$e=W(U[be]);if(!$e)return;const He=$e.getFeatureState(Le.layer["source-layer"],Le.id);Le.source=Le.layer.source,Le.layer["source-layer"]&&(Le.sourceLayer=Le.layer["source-layer"]),Le.state=He}));return Te})(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),z.screenGeometry,m,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(c,m){m&&m.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",m.filter,null,m);const b=this._getSourceCaches(c);let S=[];for(const A of b)S=S.concat(Cr(A,m));return S}addSourceType(c,m,b){return Vo.getSourceType(c)?b(new Error(`A source type called "${c}" already exists.`)):(Vo.setSourceType(c,m),m.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:m.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(c,m={}){this._checkLoaded();const b=this.light.getLight();let S=!1;for(const O in c)if(!T(c[O],b[O])){S=!0;break}if(!S)return;const A=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,m),this.light.updateTransitions(A)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,m=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let b=c;if(m===1){if(typeof b.source=="object"){const S="terrain-dem-src";this.addSource(S,b.source),b=o.clone$1(b),b=o.extend(b,{source:S})}if(this._validate(o.validateTerrain,"terrain",b))return}if(!this.terrain||this.terrain&&m!==this.terrain.drapeRenderMode){if(!b)return;this._createTerrain(b,m)}else{const S=this.terrain,A=S.get();for(const O of Object.keys(o.spec.terrain))!b.hasOwnProperty(O)&&o.spec.terrain[O].default&&(b[O]=o.spec.terrain[O].default);for(const O in b)if(!T(b[O],A[O])){S.set(b),this.stylesheet.terrain=b;const z=this._setTransitionParameters({duration:0});S.updateTransitions(z);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const m=this.fog=new yt(c,this.map.transform);this.stylesheet.fog=c;const b=this._setTransitionParameters({duration:0});m.updateTransitions(b)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask((()=>{for(const c of this.map._markers)c._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const m=this.fog,b=m.get();Object.keys(c).length===0&&m.set(c);for(const S in c)if(!T(c[S],b[S])){m.set(c),this.stylesheet.fog=c;const A=this._setTransitionParameters({duration:0});m.updateTransitions(A);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter((b=>this.isLayerDraped(this._layers[b]))),m=this._order.filter((b=>!this.isLayerDraped(this._layers[b])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...m)}_createTerrain(c,m){const b=this.terrain=new Ce(c,m);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const S=this._setTransitionParameters({duration:0});b.updateTransitions(S)}_force3DLayerUpdate(){for(const c in this._layers){const m=this._layers[c];m.type==="fill-extrusion"&&this._updateLayer(m)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const m=this._layers[c];m.type==="symbol"&&this._updateLayer(m)}}_validate(c,m,b,S,A={}){return(!A||A.validate!==!1)&&yo(this,c.call(o.validateStyle,o.extend({key:m,style:this.serialize(),value:b,styleSpec:o.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const m=this._getSourceCaches(c);for(const b of m)b.clearTiles()}_reloadSource(c){const m=this._getSourceCaches(c);for(const b of m)b.resume(),b.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const m in this._sourceCaches)this._sourceCaches[m].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const m=this._sourceCaches[c];m.resume(),m.reload()}}_updatePlacement(c,m,b,S,A=!1){let O=!1,z=!1;const U={};for(const Y of this._order){const W=this._layers[Y];if(W.type!=="symbol")continue;if(!U[W.source]){const ye=this._getLayerSourceCache(W);if(!ye)continue;U[W.source]=ye.getRenderableIds(!0).map((we=>ye.getTileByID(we))).sort(((we,Se)=>Se.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Se.tileID)?-1:1)))}const re=this.crossTileSymbolIndex.addLayer(W,U[W.source],c.center.lng,c.projection);O=O||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),A=A||this._layerOrderChanged||b===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(A||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new dc(c,this._order,A,m,b,S,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),z=!0),O&&this.pauseablePlacement.placement.setStale()),z||O)for(const Y of this._order){const W=this._layers[Y];W.type==="symbol"&&this.placement.updateLayerOpacities(W,U[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,m,b){this.imageManager.getImages(m.icons,b),this._updateTilesForChangedImages();const S=A=>{A&&A.setDependencies(m.tileID.key,m.type,m.icons)};S(this._otherSourceCaches[m.source]),S(this._symbolSourceCaches[m.source])}getGlyphs(c,m,b){this.glyphManager.getGlyphs(m.stacks,b)}getResource(c,m,b){return o.makeRequest(m,b)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const m=[];return this._otherSourceCaches[c]&&m.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&m.push(this._symbolSourceCaches[c]),m}_isSourceCacheLoaded(c){const m=this._getSourceCaches(c);return m.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):m.every((b=>b.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Vo.getSourceType=function(v){return qn[v]},Vo.setSourceType=function(v,c){qn[v]=c},Vo.registerForPluginStateChange=o.registerForPluginStateChange;var Ua=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,ja="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",wa=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,xl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,$a=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Uu={},qa={};const fc=[];Uo(Ua,fc),Uo(wa,fc),Uo(xl,fc),Uo($a,fc),Uu=Nr("",wa),qa=Nr($a,xl);const uf=Nr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),pc=Ua,Bh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Fh={background:Nr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Nr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Nr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Nr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Nr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Nr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Nr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Nr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Nr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Nr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Nr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Nr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Nr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Nr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Nr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Nr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Nr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Nr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Nr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Nr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Nr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Nr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Nr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ja),skyboxGradient:Nr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ja),skyboxCapture:Nr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Nr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Nr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Uo(v,c){const m=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let b of m)if(b=b.trim(),b[0]==="#"&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const S=b.split(" ");for(const A of S)c.includes(A)||c.push(A)}}function Nr(v,c){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),S={},A=[...fc];return Uo(v,A),Uo(c,A),{fragmentSource:v=v.replace(m,((O,z,U,Y,W)=>(S[W]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${U} ${Y} ${W};
#else
uniform ${U} ${Y} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${U} ${Y} ${W} = u_${W};
#endif
`))),vertexSource:c=c.replace(m,((O,z,U,Y,W)=>{const re=Y==="float"?"vec2":"vec4",ye=W.match(/color/)?"color":re;return S[W]?z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${U} ${re} a_${W};
varying ${U} ${Y} ${W};
#else
uniform ${U} ${Y} u_${W};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${U} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ye}(a_${W}, u_${W}_t);
#else
    ${U} ${Y} ${W} = u_${W};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${U} ${re} a_${W};
#else
uniform ${U} ${Y} u_${W};
#endif
`:ye==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${U} ${Y} ${W} = a_${W};
#else
    ${U} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${U} ${Y} ${W} = unpack_mix_${ye}(a_${W}, u_${W}_t);
#else
    ${U} ${Y} ${W} = u_${W};
#endif
`})),staticAttributes:b,usedDefines:A}}class Ap{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,m,b,S,A,O,z){this.context=c;let U=this.boundPaintVertexBuffers.length!==S.length;for(let W=0;!U&&W<S.length;W++)this.boundPaintVertexBuffers[W]!==S[W]&&(U=!0);let Y=this.boundDynamicVertexBuffers.length!==z.length;for(let W=0;!Y&&W<z.length;W++)this.boundDynamicVertexBuffers[W]!==z[W]&&(Y=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||U||Y||this.boundIndexBuffer!==A||this.boundVertexOffset!==O)this.freshBind(m,b,S,A,O,z);else{c.bindVertexArrayOES.set(this.vao);for(const W of z)W&&W.bind();A&&A.dynamicDraw&&A.bind()}}freshBind(c,m,b,S,A,O){let z;const U=c.numAttributes,Y=this.context,W=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=c,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=S,this.boundVertexOffset=A,this.boundDynamicVertexBuffers=O;else{z=Y.currentNumAttributes||0;for(let re=U;re<z;re++)W.disableVertexAttribArray(re)}m.enableAttributes(W,c),m.bind(),m.setVertexAttribPointers(W,c,A);for(const re of b)re.enableAttributes(W,c),re.bind(),re.setVertexAttribPointers(W,c,A);for(const re of O)re&&(re.enableAttributes(W,c),re.bind(),re.setVertexAttribPointers(W,c,A));S&&S.bind(),Y.currentNumAttributes=U}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Vh(v,c){const m=Math.pow(2,c.canonical.z),b=c.canonical.y;return[new o.MercatorCoordinate(0,b/m).toLngLat().lat,new o.MercatorCoordinate(0,(b+1)/m).toLngLat().lat]}function hf(v,c,m,b,S,A,O){const z=v.context,U=z.gl,Y=m.fbo;if(!Y)return;v.prepareDrawTile();const W=v.useProgram("hillshade");z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,Y.colorAttachment.get());const re=((Te,Ae,oe,be)=>{const Pe=oe.paint.get("hillshade-shadow-color"),Le=oe.paint.get("hillshade-highlight-color"),$e=oe.paint.get("hillshade-accent-color");let He=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(He-=Te.transform.angle);const qe=!Te.options.moving;return{u_matrix:be||Te.transform.calculateProjMatrix(Ae.tileID.toUnwrapped(),qe),u_image:0,u_latrange:Vh(0,Ae.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),He],u_shadow:Pe,u_highlight:Le,u_accent:$e}})(v,m,b,v.terrain?c.projMatrix:null);v.prepareDrawProgram(z,W,c.toUnwrapped());const{tileBoundsBuffer:ye,tileBoundsIndexBuffer:we,tileBoundsSegments:Se}=v.getTileBoundsBuffers(m);W.draw(z,U.TRIANGLES,S,A,O,o.CullFaceMode.disabled,re,b.id,ye,we,Se)}function Hl(v,c,m){if(!c.needsDEMTextureUpload)return;const b=v.context,S=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||v.getTileTexture(m.stride);const A=m.getPixels();c.demTexture?c.demTexture.update(A,{premultiply:!1}):c.demTexture=new o.Texture(b,A,S.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function _o(v,c,m,b,S,A){const O=v.context,z=O.gl;if(!c.dem)return;const U=c.dem;if(O.activeTexture.set(z.TEXTURE1),Hl(v,c,U),!c.demTexture)return;c.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);const Y=U.dim;O.activeTexture.set(z.TEXTURE0);let W=c.fbo;if(!W){const Se=new o.Texture(O,{width:Y,height:Y,data:null},z.RGBA);Se.bind(z.LINEAR,z.CLAMP_TO_EDGE),W=c.fbo=O.createFramebuffer(Y,Y,!0),W.colorAttachment.set(Se.texture)}O.bindFramebuffer.set(W.framebuffer),O.viewport.set([0,0,Y,Y]);const{tileBoundsBuffer:re,tileBoundsIndexBuffer:ye,tileBoundsSegments:we}=v.getMercatorTileBoundsBuffers();v.useProgram("hillshadePrepare").draw(O,z.TRIANGLES,b,S,A,o.CullFaceMode.disabled,((Se,Te)=>{const Ae=Te.stride,oe=o.create();return o.ortho(oe,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(oe,oe,[0,-o.EXTENT,0]),{u_matrix:oe,u_image:1,u_dimension:[Ae,Ae],u_zoom:Se.overscaledZ,u_unpack:Te.unpackVector}})(c.tileID,U),m.id,re,ye,we),c.needsHillshadePrepare=!1}const Uh=v=>({u_matrix:new o.UniformMatrix4f(v),u_image0:new o.Uniform1i(v),u_skirt_height:new o.Uniform1f(v)}),mc=(v,c)=>({u_matrix:v,u_image0:0,u_skirt_height:c}),Ha=(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:m,u_zoom_transition:S,u_merc_center:A,u_image0:0,u_frustum_tl:O,u_frustum_tr:z,u_frustum_br:U,u_frustum_bl:Y,u_globe_pos:W,u_globe_radius:re,u_viewport:ye,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9),u_skirt_height:we});function D(v,c){return v!=null&&c!=null&&!(!v.hasData()||!c.hasData())&&v.demTexture!=null&&c.demTexture!=null&&v.tileID.key!==c.tileID.key}const K=new class{constructor(){this.operations={}}newMorphing(v,c,m,b,S){if(v in this.operations){const A=this.operations[v];A.to.tileID.key!==m.tileID.key&&(A.queued=m)}else this.operations[v]={startTime:b,phase:0,duration:S,from:c,to:m,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const c=this.operations[v];return{from:c.from,to:c.to,phase:c.phase}}update(v){for(const c in this.operations){const m=this.operations[c];for(m.phase=(v-m.startTime)/m.duration;m.phase>=1||!this._validOp(m);)if(!this._nextOp(m,v)){delete this.operations[c];break}}}_nextOp(v,c){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=c,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},ae={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ie(v){return 6*Math.pow(1.5,22-v)}function dt(v,c){const m=1<<v.z;return!c&&(v.x===0||v.x===m-1)||v.y===0||v.y===m-1}const _t=v=>({u_matrix:v});function hn(v,c,m,b,S){if(S>0){const A=o.exported.now(),O=(A-v.timeAdded)/S,z=c?(A-c.timeAdded)/S:-1,U=m.getSource(),Y=b.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),W=!c||Math.abs(c.tileID.overscaledZ-Y)>Math.abs(v.tileID.overscaledZ-Y),re=W&&v.refreshedUponExpiration?1:o.clamp(W?O:1-z,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),c?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}class gr extends o.SourceCache{constructor(c){const m={type:"raster-dem",maxzoom:c.transform.maxZoom},b=new Me(lc(),null),S=ir("mock-dem",m,b,c.style);super("mock-dem",S,!1),S.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,m){c.state="loaded",m(null)}}class ls extends o.SourceCache{constructor(c){const m=ir("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new Me(lc(),null),c.style);super("proxy",m,!1),m.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,m,b){if(c.freezeTileCoverage)return;this.transform=c;const S=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((A,O)=>{if(A[O.key]="",!this._tiles[O.key]){const z=new o.Tile(O,this._source.tileSize*O.overscaleFactor(),c.tileZoom);z.state="loaded",this._tiles[O.key]=z}return A}),{});for(const A in this._tiles)A in S||(this.freeFBO(A),this._tiles[A].unloadVectorData(),delete this._tiles[A])}freeFBO(c){const m=this.proxyCachedFBO[c];if(m!==void 0){const b=Object.values(m);this.renderCachePool.push(...b),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach((c=>c.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Hr extends o.OverscaledTileID{constructor(c,m,b){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=m,this.projMatrix=b}}class Gi extends o.Elevation{constructor(c,m){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,S,A]=(function(U){const Y=new o.StructArrayLayout2i4,W=new o.StructArrayLayout3ui6,re=131;Y.reserve(17161),W.reserve(33800);const ye=o.EXTENT/128,we=o.EXTENT+ye/2,Se=we+ye;for(let Ae=-ye;Ae<Se;Ae+=ye)for(let oe=-ye;oe<Se;oe+=ye){const be=oe<0||oe>we||Ae<0||Ae>we?24575:0,Pe=o.clamp(Math.round(oe),0,o.EXTENT),Le=o.clamp(Math.round(Ae),0,o.EXTENT);Y.emplaceBack(Pe+be,Le)}const Te=(Ae,oe)=>{const be=oe*re+Ae;W.emplaceBack(be+1,be,be+re),W.emplaceBack(be+re,be+re+1,be+1)};for(let Ae=1;Ae<129;Ae++)for(let oe=1;oe<129;oe++)Te(oe,Ae);return[0,129].forEach((Ae=>{for(let oe=0;oe<130;oe++)Te(oe,Ae),Te(Ae,oe)})),[Y,W,32768]})(),O=c.context;this.gridBuffer=O.createVertexBuffer(b,o.posAttributes.members),this.gridIndexBuffer=O.createIndexBuffer(S),this.gridSegments=o.SegmentVector.simpleSegment(0,0,b.length,S.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,b.length,A),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ls(m.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const z=O.gl;this._overlapStencilMode=new o.StencilMode({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=m,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new gr(m.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(c,m,b){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const S=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(S.get("source")),this._exaggeration=S.get("exaggeration");const A=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const O=this.getScaledDemTileSize();this.sourceCache.update(m,O,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,A(),this._initializing=!0),A(),m.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(m),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((c=>c.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const m=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=b._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(b.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const S=this.proxyCoords=m.getIds().map((U=>{const Y=m.getTileByID(U).tileID;return Y.projMatrix=b.calculateProjMatrix(Y.toUnwrapped()),Y}));(function(U,Y){const W=Y.transform.pointCoordinate(Y.transform.getCameraPoint()),re=new o.Point(W.x,W.y);U.sort(((ye,we)=>{if(we.overscaledZ-ye.overscaledZ)return we.overscaledZ-ye.overscaledZ;const Se=new o.Point(ye.canonical.x+(1<<ye.canonical.z)*ye.wrap,ye.canonical.y),Te=new o.Point(we.canonical.x+(1<<we.canonical.z)*we.wrap,we.canonical.y),Ae=re.mult(1<<ye.canonical.z);return Ae.x-=.5,Ae.y-=.5,Ae.distSqr(Se)-Ae.distSqr(Te)}))})(S,this.painter),this._previousZoom=b.zoom;const A=this.proxyToSource||{};this.proxyToSource={},S.forEach((U=>{this.proxyToSource[U.key]={}})),this.terrainTileForTile={};const O=this._style._sourceCaches;for(const U in O){const Y=O[U];if(!Y.used||(Y!==this.sourceCache&&this.resetTileLookupCache(Y.id),this._setupProxiedCoordsForOrtho(Y,c[U],A),Y.usedForTerrain))continue;const W=c[U];Y.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[m.id]=S.map((U=>new Hr(U,U.key,this.orthoMatrix))),this._assignTerrainTiles(S),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(A),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const z={};this._visibleDemTiles=[];for(const U of this.proxyCoords){const Y=this.terrainTileForTile[U.key];if(!Y)continue;const W=Y.tileID.key;W in z||(this._visibleDemTiles.push(Y),z[W]=W)}}_assignTerrainTiles(c){this._initializing||c.forEach((m=>{if(this.terrainTileForTile[m.key])return;const b=this._findTileCoveringTileID(m,this.sourceCache);b&&(this.terrainTileForTile[m.key]=b)}))}_prepareDEMTextures(){const c=this.painter.context,m=c.gl;for(const b in this.terrainTileForTile){const S=this.terrainTileForTile[b],A=S.dem;!A||S.demTexture&&!S.needsDEMTextureUpload||(c.activeTexture.set(m.TEXTURE1),Hl(this.painter,S,A))}}_prepareDemTileUniforms(c,m,b,S){if(!m||m.demTexture==null)return!1;const A=c.tileID.canonical,O=Math.pow(2,m.tileID.canonical.z-A.z),z=S||"";return b[`u_dem_tl${z}`]=[A.x*O%1,A.y*O%1],b[`u_dem_scale${z}`]=O,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,m=c.gl;if(!this._emptyDepthBufferTexture){const b=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,b,m.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const m=this._visibleDemTiles.reduce(((b,S)=>{if(!S.dem)return b;const A=S.dem.tree.minimums[0];return A>0&&c++,b+A}),0);return c?m/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,m=c.gl;c.activeTexture.set(m.TEXTURE2);const b=this._getLoadedAreaMinimum(),S=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let A=this._emptyDEMTexture;return A?A.update(S,{premultiply:!1}):A=this._emptyDEMTexture=new o.Texture(c,S,m.RGBA,{premultiply:!1}),A}setupElevationDraw(c,m,b){const S=this.painter.context,A=S.gl,O=(z=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(z),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var z;O.u_dem_size=this.sourceCache.getSource().tileSize,O.u_exaggeration=this.exaggeration();let U=null,Y=null,W=1;if(b&&b.morphing&&this._useVertexMorphing){const re=b.morphing.srcDemTile,ye=b.morphing.dstDemTile;W=b.morphing.phase,re&&ye&&(this._prepareDemTileUniforms(c,re,O,"_prev")&&(Y=re),this._prepareDemTileUniforms(c,ye,O)&&(U=ye))}if(Y&&U?(S.activeTexture.set(A.TEXTURE2),U.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE,A.NEAREST),S.activeTexture.set(A.TEXTURE4),Y.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE,A.NEAREST),O.u_dem_lerp=W):(U=this.terrainTileForTile[c.tileID.key],S.activeTexture.set(A.TEXTURE2),(this._prepareDemTileUniforms(c,U,O)?U.demTexture:this.emptyDEMTexture).bind(A.NEAREST,A.CLAMP_TO_EDGE)),S.activeTexture.set(A.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE),this._depthFBO&&(O.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE),O.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&U){const re=(1<<U.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;O.u_meter_to_dem=re}if(b&&b.labelPlaneMatrixInv&&(O.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),m.setTerrainUniformValues(S,O),this.painter.transform.projection.name==="globe"){const re=this.globeUniformValues(this.painter.transform,c.tileID.canonical,b&&b.useDenormalizedUpVectorScale);m.setGlobeUniformValues(S,re)}}globeUniformValues(c,m,b){const S=c.projection;return{u_tile_tl_up:S.upVector(m,0,0),u_tile_tr_up:S.upVector(m,o.EXTENT,0),u_tile_br_up:S.upVector(m,o.EXTENT,o.EXTENT),u_tile_bl_up:S.upVector(m,0,o.EXTENT),u_tile_up_scale:b?o.globeMetersToEcef(1):S.upVectorScale(m,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const m=this.painter,b=this.painter.context;c.length!==0&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,m.width,m.height]),m.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,(function(S,A,O,z,U){if(S.transform.projection.name==="globe")(function(Y,W,re,ye,we){const Se=Y.context,Te=Se.gl;let Ae,oe;const be=Y.options.showTerrainWireframe?2:0,Pe=Y.transform,Le=o.globeUseCustomAntiAliasing(Y,Se,Pe),$e=(zt,ot)=>{if(oe===zt)return;const Et=[ae[zt],"PROJECTION_GLOBE_VIEW"];Le&&Et.push("CUSTOM_ANTIALIASING"),ot&&Et.push(ae[be]),Ae=Y.useProgram("globeRaster",null,Et),oe=zt},He=Y.colorModeForRenderPass(),qe=new o.DepthMode(Te.LEQUAL,o.DepthMode.ReadWrite,Y.depthRangeFor3D);K.update(we);const Je=o.calculateGlobeMercatorMatrix(Pe),Qe=[o.mercatorXfromLng(Pe.center.lng),o.mercatorYfromLat(Pe.center.lat)],ct=be?[!1,!0]:[!1],Ut=Y.globeSharedBuffers,it=[Pe.width*o.exported.devicePixelRatio,Pe.height*o.exported.devicePixelRatio],vt=Float32Array.from(Pe.globeMatrix),lt={useDenormalizedUpVectorScale:!0};if(ct.forEach((zt=>{const ot=Y.transform,Et=Ie(ot.zoom)*W.exaggeration();oe=-1;const Nt=zt?Te.LINES:Te.TRIANGLES;for(const St of ye){const It=re.getTile(St),Sn=o.StencilMode.disabled,zn=W.prevTerrainTileForTile[St.key],Bt=W.terrainTileForTile[St.key];D(zn,Bt)&&K.newMorphing(St.key,zn,Bt,we,250),Se.activeTexture.set(Te.TEXTURE0),It.texture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);const ln=K.getMorphValuesForProxy(St.key),Ln=ln?1:0;ln&&o.extend$1(lt,{morphing:{srcDemTile:ln.from,dstDemTile:ln.to,phase:o.easeCubicInOut(ln.phase)}});const ar=o.tileCornersToBounds(St.canonical),xn=o.getLatitudinalLod(ar.getCenter().lat),kr=o.getGridMatrix(St.canonical,ar,xn,ot.worldSize/ot._pixelsPerMercatorPixel),Qr=o.globeNormalizeECEF(o.globeTileBounds(St.canonical)),Gr=Ha(ot.projMatrix,vt,Je,Qr,o.globeToMercatorTransition(ot.zoom),Qe,ot.frustumCorners.TL,ot.frustumCorners.TR,ot.frustumCorners.BR,ot.frustumCorners.BL,ot.globeCenterInViewSpace,ot.globeRadius,it,Et,kr);if($e(Ln,zt),W.setupElevationDraw(It,Ae,lt),Y.prepareDrawProgram(Se,Ae,St.toUnwrapped()),Ut){const[Ur,bo,Pr]=zt?Ut.getWirefameBuffers(Y.context,xn):Ut.getGridBuffers(xn,Et!==0);Ae.draw(Se,Nt,qe,Sn,He,o.CullFaceMode.backCCW,Gr,"globe_raster",Ur,bo,Pr)}}})),Ut){const zt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Le&&zt.push("CUSTOM_ANTIALIASING"),Ae=Y.useProgram("globeRaster",null,zt);for(const ot of ye){const{x:Et,y:Nt,z:St}=ot.canonical,It=Nt===0,Sn=Nt===(1<<St)-1,[zn,Bt,ln,Ln]=Ut.getPoleBuffers(St);if(Ln&&(It||Sn)){const ar=re.getTile(ot);Se.activeTexture.set(Te.TEXTURE0),ar.texture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE);let xn=o.globePoleMatrixForTile(St,Et,Pe);const kr=o.globeNormalizeECEF(o.globeTileBounds(ot.canonical)),Qr=(Gr,Ur)=>Gr.draw(Se,Te.TRIANGLES,qe,o.StencilMode.disabled,He,o.CullFaceMode.disabled,Ha(Pe.projMatrix,xn,xn,kr,0,Qe,Pe.frustumCorners.TL,Pe.frustumCorners.TR,Pe.frustumCorners.BR,Pe.frustumCorners.BL,Pe.globeCenterInViewSpace,Pe.globeRadius,it,0),"globe_pole_raster",Ur,ln,Ln);W.setupElevationDraw(ar,Ae,lt),Y.prepareDrawProgram(Se,Ae,ot.toUnwrapped()),It&&Qr(Ae,zn),Sn&&(xn=o.scale(o.create(),xn,[1,-1,1]),Qr(Ae,Bt))}}}})(S,A,O,z,U);else{const Y=S.context,W=Y.gl;let re,ye;const we=S.options.showTerrainWireframe?2:0,Se=(Pe,Le)=>{if(ye===Pe)return;const $e=[ae[Pe]];Le&&$e.push(ae[we]),re=S.useProgram("terrainRaster",null,$e),ye=Pe},Te=S.colorModeForRenderPass(),Ae=new o.DepthMode(W.LEQUAL,o.DepthMode.ReadWrite,S.depthRangeFor3D);K.update(U);const oe=S.transform,be=Ie(oe.zoom)*A.exaggeration();(we?[!1,!0]:[!1]).forEach((Pe=>{ye=-1;const Le=Pe?W.LINES:W.TRIANGLES,[$e,He]=Pe?A.getWirefameBuffer():[A.gridIndexBuffer,A.gridSegments];for(const qe of z){const Je=O.getTile(qe),Qe=o.StencilMode.disabled,ct=A.prevTerrainTileForTile[qe.key],Ut=A.terrainTileForTile[qe.key];D(ct,Ut)&&K.newMorphing(qe.key,ct,Ut,U,250),Y.activeTexture.set(W.TEXTURE0),Je.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const it=K.getMorphValuesForProxy(qe.key),vt=it?1:0;let lt;it&&(lt={morphing:{srcDemTile:it.from,dstDemTile:it.to,phase:o.easeCubicInOut(it.phase)}});const zt=mc(qe.projMatrix,dt(qe.canonical,oe.renderWorldCopies)?be/10:be);Se(vt,Pe),A.setupElevationDraw(Je,re,lt),S.prepareDrawProgram(Y,re,qe.toUnwrapped()),re.draw(Y,Le,Ae,Qe,Te,o.CullFaceMode.backCCW,zt,"terrain_raster",A.gridBuffer,$e,He)}}))}})(m,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,m.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const m=this.painter,b=this.painter.context,S=this.proxySourceCache,A=this.proxiedCoords[S.id],O=this._drapedRenderBatches.shift(),z=[],U=m.style.order;let Y=0;for(const W of A){const re=S.getTileByID(W.proxyTileKey),ye=S.proxyCachedFBO[W.key]?S.proxyCachedFBO[W.key][c]:void 0,we=ye!==void 0?S.renderCache[ye]:this.pool[Y++],Se=ye!==void 0;if(re.texture=we.tex,Se&&!we.dirty){z.push(re.tileID);continue}let Te;b.bindFramebuffer.set(we.fb.framebuffer),this.renderedToTile=!1,we.dirty&&(b.clear({color:o.Color.transparent,stencil:0}),we.dirty=!1);for(let Ae=O.start;Ae<=O.end;++Ae){const oe=m.style._layers[U[Ae]];if(oe.isHidden(m.transform.zoom))continue;const be=m.style._getLayerSourceCache(oe),Pe=be?this.proxyToSource[W.key][be.id]:[W];if(!Pe)continue;const Le=Pe;b.viewport.set([0,0,we.fb.width,we.fb.height]),Te!==(be?be.id:null)&&(this._setupStencil(we,Pe,oe,be),Te=be?be.id:null),m.renderLayer(m,be,oe,Le)}this.renderedToTile?(we.dirty=!0,z.push(re.tileID)):Se||--Y,Y===5&&(Y=0,this.renderToBackBuffer(z))}return this.renderToBackBuffer(z),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,m.width,m.height]),O.end+1}postRender(){}renderCacheEfficiency(c){const m=c.order.length;if(m===0)return{efficiency:100};let b,S=0,A=0,O=!1;for(let z=0;z<m;++z){const U=c._layers[c.order[z]];this._style.isLayerDraped(U)?(O&&++S,++A):O||(O=!0,b=U.id)}return A===0?{efficiency:100}:{efficiency:100*(1-S/A),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter((m=>m.dem)).forEach((m=>{c=Math.min(c,m.dem.tree.minimums[0])})),c===0?c:(c-30)*this._exaggeration}raycast(c,m,b){if(!this._visibleDemTiles)return null;const S=this._visibleDemTiles.filter((A=>A.dem)).map((A=>{const O=A.tileID,z=1<<O.overscaledZ,{x:U,y:Y}=O.canonical,W=U/z,re=(U+1)/z,ye=Y/z,we=(Y+1)/z;return{minx:W,miny:ye,maxx:re,maxy:we,t:A.dem.tree.raycastRoot(W,ye,re,we,c,m,b),tile:A}}));S.sort(((A,O)=>(A.t!==null?A.t:Number.MAX_VALUE)-(O.t!==null?O.t:Number.MAX_VALUE)));for(const A of S){if(A.t==null)return null;const O=A.tile.dem.tree.raycast(A.minx,A.miny,A.maxx,A.maxy,c,m,b);if(O!=null)return O}return null}_createFBO(){const c=this.painter.context,m=c.gl,b=this.drapeBufferSize;c.activeTexture.set(m.TEXTURE0);const S=new o.Texture(c,{width:b[0],height:b[1],data:null},m.RGBA);S.bind(m.LINEAR,m.CLAMP_TO_EDGE);const A=c.createFramebuffer(b[0],b[1],!1);return A.colorAttachment.set(S.texture),A.depthAttachment=new Ye(c,A.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,A.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):A.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&m.texParameterf(m.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:A,tex:S,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some((c=>{const m=this._style._layers[c],b=m.isHidden(this.painter.transform.zoom);return m.type==="custom"?!b&&m.shouldRedrape():!b&&m.hasTransition()}))}_clearLineLayersFromRenderCache(){let c=!1;for(const b of this._style._getSources())if(b instanceof Qt){c=!0;break}if(!c)return;const m={};for(let b=0;b<this._style.order.length;++b){const S=this._style._layers[this._style.order[b]],A=this._style._getLayerSourceCache(S);if(A&&!m[A.id]&&!S.isHidden(this.painter.transform.zoom)&&S.type==="line"&&S.widthExpression()instanceof o.ZoomDependentExpression){m[A.id]=!0;for(const O of this.proxyCoords){const z=this.proxyToSource[O.key][A.id];if(z)for(const U of z)this._clearRenderCacheForTile(A.id,U)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const b in this._style._sourceCaches)if(this._style._sourceCaches[b]._source instanceof $t){c=!0;break}if(!c)return;const m={};for(let b=0;b<this._style.order.length;++b){const S=this._style._layers[this._style.order[b]],A=this._style._getLayerSourceCache(S);if(!A||m[A.id]||S.isHidden(this.painter.transform.zoom)||S.type!=="raster")continue;const O=S.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const U=this.proxyToSource[z.key][A.id];if(U)for(const Y of U){const W=hn(A.getTile(Y),A.findLoadedParent(Y,0),A,this.painter.transform,O);(W.opacity!==1||W.mix!==0)&&this._clearRenderCacheForTile(A.id,Y)}}}}_setupDrapedRenderBatches(){const c=this._style.order,m=c.length;if(m===0)return;const b=[];let S,A=0,O=this._style._layers[c[A]];for(;!this._style.isLayerDraped(O)&&O.isHidden(this.painter.transform.zoom)&&++A<m;)O=this._style._layers[c[A]];for(;A<m;++A){const z=this._style._layers[c[A]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?S===void 0&&(S=A):S!==void 0&&(b.push({start:S,end:A-1}),S=void 0))}S!==void 0&&b.push({start:S,end:A-1}),this._drapedRenderBatches=b}_setupRenderCache(c){const m=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,m.renderCache.length>m.renderCachePool.length){const O=Object.values(m.proxyCachedFBO);m.proxyCachedFBO={};for(let z=0;z<O.length;++z){const U=Object.values(O[z]);m.renderCachePool.push(...U)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,S=this._tilesDirty;for(let O=b.length-1;O>=0;O--){const z=b[O];if(m.getTileByID(z.key),m.proxyCachedFBO[z.key]!==void 0){const U=c[z.key],Y=this.proxyToSource[z.key];let W=0;for(const re in Y){const ye=Y[re],we=U[re];if(!we||we.length!==ye.length||ye.some(((Se,Te)=>Se!==we[Te]||S[re]&&S[re].hasOwnProperty(Se.key)))){W=-1;break}++W}for(const re in m.proxyCachedFBO[z.key])m.renderCache[m.proxyCachedFBO[z.key][re]].dirty=W<0||W!==Object.values(U).length}}const A=[...this._drapedRenderBatches];A.sort(((O,z)=>z.end-z.start-(O.end-O.start)));for(const O of A)for(const z of b){if(m.proxyCachedFBO[z.key])continue;let U=m.renderCachePool.pop();U===void 0&&m.renderCache.length<50&&(U=m.renderCache.length,m.renderCache.push(this._createFBO())),U!==void 0&&(m.proxyCachedFBO[z.key]={},m.proxyCachedFBO[z.key][O.start]=U,m.renderCache[U].dirty=!0)}this._tilesDirty={}}_setupStencil(c,m,b,S){if(!S||!this._sourceTilesOverlap[S.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const A=this.painter.context,O=A.gl;if(m.length<=1)return void(this._overlapStencilType=!1);let z;if(b.isTileClipped())z=m.length,this._overlapStencilMode.test={func:O.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(m[0].overscaledZ>m[m.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:O.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(A.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(m,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,m){const b=this.painter,S=this.painter.context,A=S.gl;b._tileClippingMaskIDs={},S.setColorMode(o.ColorMode.disabled),S.setDepthMode(o.DepthMode.disabled);const O=b.useProgram("clippingMask");for(const z of c){const U=b._tileClippingMaskIDs[z.key]=--m;O.draw(S,A.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:A.ALWAYS,mask:0},U,255,A.KEEP,A.KEEP,A.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,_t(z.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(c){const m=this.painter.transform;if(c.x<0||c.x>m.width||c.y<0||c.y>m.height)return null;const b=[c.x,c.y,1,1];o.transformMat4$1(b,b,m.pixelMatrixInverse),o.scale$1(b,b,1/b[3]),b[0]/=m.worldSize,b[1]/=m.worldSize;const S=m._camera.position,A=o.mercatorZfromAltitude(1,m.center.lat),O=[S[0],S[1],S[2]/A,0],z=o.subtract([],b.slice(0,3),O);o.normalize(z,z);const U=this.raycast(O,z,this._exaggeration);return U!==null&&U?(o.scaleAndAdd(O,O,z,U),O[3]=O[2],O[2]*=A,O):null}drawDepth(){const c=this.painter,m=c.context,b=this.proxySourceCache,S=Math.ceil(c.width),A=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===S&&this._depthFBO.height===A||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const O=m.gl,z=m.createFramebuffer(S,A,!0);m.activeTexture.set(O.TEXTURE0);const U=new o.Texture(m,{width:S,height:A,data:null},O.RGBA);U.bind(O.NEAREST,O.CLAMP_TO_EDGE),z.colorAttachment.set(U.texture);const Y=m.createRenderbuffer(m.gl.DEPTH_COMPONENT16,S,A);z.depthAttachment.set(Y),this._depthFBO=z,this._depthTexture=U}m.bindFramebuffer.set(this._depthFBO.framebuffer),m.viewport.set([0,0,S,A]),(function(O,z,U,Y){if(O.transform.projection.name==="globe")return;const W=O.context,re=W.gl;W.clear({depth:1});const ye=O.useProgram("terrainDepth"),we=new o.DepthMode(re.LESS,o.DepthMode.ReadWrite,O.depthRangeFor3D);for(const Se of Y){const Te=U.getTile(Se),Ae=mc(Se.projMatrix,0);z.setupElevationDraw(Te,ye),ye.draw(W,re.TRIANGLES,we,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,Ae,"terrain_depth",z.gridBuffer,z.gridIndexBuffer,z.gridNoSkirtSegments)}})(c,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,m,b){if(c.getSource()instanceof Jn)return this._setupProxiedCoordsForImageSource(c,m,b);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const S=this.proxiedCoords[c.id]=[],A=this.proxyCoords;for(let z=0;z<A.length;z++){const U=A[z],Y=this._findTileCoveringTileID(U,c);if(Y){const W=this._createProxiedId(U,Y,b[U.key]&&b[U.key][c.id]);S.push(W),this.proxyToSource[U.key][c.id]=[W]}}let O=!1;for(let z=0;z<m.length;z++){const U=c.getTile(m[z]);if(!U||!U.hasData())continue;const Y=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(Y&&Y.tileID.canonical.z!==U.tileID.canonical.z){const W=this.proxyToSource[Y.tileID.key][c.id],re=this._createProxiedId(Y.tileID,U,b[Y.tileID.key]&&b[Y.tileID.key][c.id]);W?W.splice(W.length-1,0,re):this.proxyToSource[Y.tileID.key][c.id]=[re],S.push(re),O=!0}}this._sourceTilesOverlap[c.id]=O}_setupProxiedCoordsForImageSource(c,m,b){if(!c.getSource().loaded())return;const S=this.proxiedCoords[c.id]=[],A=this.proxyCoords,O=c.getSource(),z=new o.Point(O.tileID.x,O.tileID.y)._div(1<<O.tileID.z),U=O.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce(((W,re)=>(W.min.x=Math.min(W.min.x,re.x-z.x),W.min.y=Math.min(W.min.y,re.y-z.y),W.max.x=Math.max(W.max.x,re.x-z.x),W.max.y=Math.max(W.max.y,re.y-z.y),W)),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Y=(W,re)=>{const ye=W.wrap+W.canonical.x/(1<<W.canonical.z),we=W.canonical.y/(1<<W.canonical.z),Se=o.EXTENT/(1<<W.canonical.z),Te=re.wrap+re.canonical.x/(1<<re.canonical.z),Ae=re.canonical.y/(1<<re.canonical.z);return ye+Se<Te+U.min.x||ye>Te+U.max.x||we+Se<Ae+U.min.y||we>Ae+U.max.y};for(let W=0;W<A.length;W++){const re=A[W];for(let ye=0;ye<m.length;ye++){const we=c.getTile(m[ye]);if(!we||!we.hasData()||Y(re,we.tileID))continue;const Se=this._createProxiedId(re,we,b[re.key]&&b[re.key][c.id]),Te=this.proxyToSource[re.key][c.id];Te?Te.push(Se):this.proxyToSource[re.key][c.id]=[Se],S.push(Se)}}}_createProxiedId(c,m,b){let S=this.orthoMatrix;if(b){const A=b.find((O=>O.key===m.tileID.key));if(A)return A}if(m.tileID.key!==c.key){const A=c.canonical.z-m.tileID.canonical.z;let O,z,U;S=o.create();const Y=m.tileID.wrap-c.wrap<<c.overscaledZ;A>0?(O=o.EXTENT>>A,z=O*((m.tileID.canonical.x<<A)-c.canonical.x+Y),U=O*((m.tileID.canonical.y<<A)-c.canonical.y)):(O=o.EXTENT<<-A,z=o.EXTENT*(m.tileID.canonical.x-(c.canonical.x+Y<<-A)),U=o.EXTENT*(m.tileID.canonical.y-(c.canonical.y<<-A))),o.ortho(S,0,O,0,O,0,1),o.translate(S,S,[z,U,0])}return new Hr(m.tileID,c.key,S)}_findTileCoveringTileID(c,m){let b=m.getTile(c);if(b&&b.hasData())return b;const S=this._findCoveringTileCache[m.id],A=S[c.key];if(b=A?m.getTileByID(A):null,b&&b.hasData()||A===null)return b;let O=b?b.tileID:c,z=O.overscaledZ;const U=m.getSource().minzoom,Y=[];if(!A){const re=m.getSource().maxzoom;if(c.canonical.z>=re){const ye=c.canonical.z-re;m.getSource().reparseOverscaled?(z=Math.max(c.canonical.z+2,m.transform.tileZoom),O=new o.OverscaledTileID(z,c.wrap,re,c.canonical.x>>ye,c.canonical.y>>ye)):ye!==0&&(z=re,O=new o.OverscaledTileID(z,c.wrap,re,c.canonical.x>>ye,c.canonical.y>>ye))}O.key!==c.key&&(Y.push(O.key),b=m.getTile(O))}const W=re=>{Y.forEach((ye=>{S[ye]=re})),Y.length=0};for(z-=1;z>=U&&(!b||!b.hasData());z--){b&&W(b.tileID.key);const re=O.calculateScaledKey(z);if(b=m.getTileByID(re),b&&b.hasData())break;const ye=S[re];if(ye===null)break;ye===void 0?Y.push(re):b=m.getTileByID(ye)}return W(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,m){let b=this._tilesDirty[c];b||(b=this._tilesDirty[c]={}),b[m.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=(function(m){let b=0;const S=new o.StructArrayLayout2ui4,A=131;for(let O=1;O<129;O++){for(let z=1;z<129;z++)b=O*A+z,S.emplaceBack(b,b+1),S.emplaceBack(b,b+A),S.emplaceBack(b+1,b+A),O===128&&S.emplaceBack(b+A,b+A+1);S.emplaceBack(b+1,b+1+A)}return S})();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class rr{static cacheKey(c,m,b,S){let A=`${m}${S?S.cacheKey:""}`;for(const O of b)c.usedDefines.includes(O)&&(A+=`/${O}`);return A}constructor(c,m,b,S,A,O){const z=c.gl;this.program=z.createProgram();const U=(function(oe){const be=[];for(let Pe=0;Pe<oe.length;Pe++){if(oe[Pe]===null)continue;const Le=oe[Pe].split(" ");be.push(Le.pop())}return be})(b.staticAttributes),Y=S?S.getBinderAttributes():[],W=U.concat(Y);let re=S?S.defines():[];re=re.concat(O.map((oe=>`#define ${oe}`)));const ye=c.isWebGL2?`#version 300 es
`:"",we=ye+re.concat(c.extStandardDerivatives&&ye.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Bh):Bh,Bh,pc,uf.fragmentSource,qa.fragmentSource,b.fragmentSource).join(`
`),Se=ye+re.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,pc,uf.vertexSource,qa.vertexSource,Uu.vertexSource,b.vertexSource).join(`
`),Te=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(Te,we),z.compileShader(Te),z.attachShader(this.program,Te);const Ae=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(Ae,Se),z.compileShader(Ae),z.attachShader(this.program,Ae),this.attributes={},this.numAttributes=W.length;for(let oe=0;oe<this.numAttributes;oe++)W[oe]&&(z.bindAttribLocation(this.program,oe,W[oe]),this.attributes[W[oe]]=oe);z.linkProgram(this.program),z.deleteShader(Ae),z.deleteShader(Te),this.fixedUniforms=A(c),this.binderUniforms=S?S.getUniforms(c):[],O.includes("TERRAIN")&&(this.terrainUniforms=(oe=>({u_dem:new o.Uniform1i(oe),u_dem_prev:new o.Uniform1i(oe),u_dem_unpack:new o.Uniform4f(oe),u_dem_tl:new o.Uniform2f(oe),u_dem_scale:new o.Uniform1f(oe),u_dem_tl_prev:new o.Uniform2f(oe),u_dem_scale_prev:new o.Uniform1f(oe),u_dem_size:new o.Uniform1f(oe),u_dem_lerp:new o.Uniform1f(oe),u_exaggeration:new o.Uniform1f(oe),u_depth:new o.Uniform1i(oe),u_depth_size_inv:new o.Uniform2f(oe),u_meter_to_dem:new o.Uniform1f(oe),u_label_plane_matrix_inv:new o.UniformMatrix4f(oe)}))(c)),O.includes("GLOBE")&&(this.globeUniforms=(oe=>({u_tile_tl_up:new o.Uniform3f(oe),u_tile_tr_up:new o.Uniform3f(oe),u_tile_br_up:new o.Uniform3f(oe),u_tile_bl_up:new o.Uniform3f(oe),u_tile_up_scale:new o.Uniform1f(oe)}))(c)),O.includes("FOG")&&(this.fogUniforms=(oe=>({u_fog_matrix:new o.UniformMatrix4f(oe),u_fog_range:new o.Uniform2f(oe),u_fog_color:new o.Uniform4f(oe),u_fog_horizon_blend:new o.Uniform1f(oe),u_fog_temporal_offset:new o.Uniform1f(oe),u_frustum_tl:new o.Uniform3f(oe),u_frustum_tr:new o.Uniform3f(oe),u_frustum_br:new o.Uniform3f(oe),u_frustum_bl:new o.Uniform3f(oe),u_globe_pos:new o.Uniform3f(oe),u_globe_radius:new o.Uniform1f(oe),u_globe_transition:new o.Uniform1f(oe),u_is_globe:new o.Uniform1i(oe),u_viewport:new o.Uniform2f(oe)}))(c))}}setTerrainUniformValues(c,m){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const S in m)b[S]&&b[S].set(this.program,S,m[S])}}setGlobeUniformValues(c,m){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const S in m)b[S]&&b[S].set(this.program,S,m[S])}}setFogUniformValues(c,m){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const S in m)b[S].set(this.program,S,m[S])}}draw(c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te){const Ae=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(b),c.setStencilMode(S),c.setColorMode(A),c.setCullFace(O);for(const be of Object.keys(this.fixedUniforms))this.fixedUniforms[be].set(this.program,be,z[be]);Se&&Se.setUniforms(this.program,c,this.binderUniforms,ye,{zoom:we});const oe={[Ae.LINES]:2,[Ae.TRIANGLES]:3,[Ae.LINE_STRIP]:1}[m];for(const be of re.get()){const Pe=be.vaos||(be.vaos={});(Pe[U]||(Pe[U]=new Ap)).bind(c,this,Y,Se?Se.getPaintVertexBuffers():[],W,be.vertexOffset,Te||[]),Ae.drawElements(m,be.primitiveLength*oe,Ae.UNSIGNED_SHORT,be.primitiveOffset*oe*2)}}}function sa(v,c){const m=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,v.transform.tileZoom)/m,S=b*(c.tileID.canonical.x+c.tileID.wrap*m),A=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/et(c,1,v.transform.tileZoom),u_pixel_coord_upper:[S>>16,A>>16],u_pixel_coord_lower:[65535&S,65535&A]}}const Ga=o.create(),Ta=(v,c,m,b,S,A,O,z,U,Y,W)=>{const re=c.style.light,ye=re.properties.get("position"),we=[ye.x,ye.y,ye.z],Se=o.create$1();re.properties.get("anchor")==="viewport"&&(o.fromRotation(Se,-c.transform.angle),o.transformMat3(we,we,Se));const Te=re.properties.get("color"),Ae=c.transform,oe={u_matrix:v,u_lightpos:we,u_lightintensity:re.properties.get("intensity"),u_lightcolor:[Te.r,Te.g,Te.b],u_vertical_gradient:+m,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ga,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:S,u_edge_radius:A};return Ae.projection.name==="globe"&&(oe.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],oe.u_zoom_transition=U,oe.u_inv_rot_matrix=W,oe.u_merc_center=Y,oe.u_up_dir=Ae.projection.upVector(new o.CanonicalTileID(0,0,0),Y[0]*o.EXTENT,Y[1]*o.EXTENT),oe.u_height_lift=z),oe},Xc=(v,c,m,b,S,A,O,z,U,Y,W,re)=>{const ye=Ta(v,c,m,b,S,A,O,U,Y,W,re),we={u_height_factor:-Math.pow(2,O.overscaledZ)/z.tileSize/8};return o.extend(ye,sa(c,z),we)},Wa=v=>({u_matrix:v}),Kc=(v,c,m)=>o.extend(Wa(v),sa(c,m)),r0=(v,c)=>({u_matrix:v,u_world:c}),i0=(v,c,m,b)=>o.extend(Kc(v,c,m),{u_world:b}),s0=o.create(),Ip=(v,c,m,b,S,A)=>{const O=v.transform,z=O.projection.name==="globe";let U;if(A.paint.get("circle-pitch-alignment")==="map")if(z){const W=o.globePixelsToTileUnits(O.zoom,c.canonical)*O._pixelsPerMercatorPixel;U=Float32Array.from([W,0,0,W])}else U=O.calculatePixelsToTileUnitsMatrix(m);else U=new Float32Array([O.pixelsToGLUnits[0],0,0,O.pixelsToGLUnits[1]]);const Y={u_camera_to_center_distance:O.cameraToCenterDistance,u_matrix:v.translatePosMatrix(c.projMatrix,m,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:U,u_inv_rot_matrix:s0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){Y.u_inv_rot_matrix=b,Y.u_merc_center=S,Y.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],Y.u_zoom_transition=o.globeToMercatorTransition(O.zoom);const W=S[0]*o.EXTENT,re=S[1]*o.EXTENT;Y.u_up_dir=O.projection.upVector(new o.CanonicalTileID(0,0,0),W,re)}return Y},Mp=v=>{const c=[];return v.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),v.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},ju=(v,c,m,b)=>{const S=o.EXTENT/m.tileSize;return{u_matrix:v,u_camera_to_center_distance:c.getCameraToCenterDistance(b),u_extrude_scale:[c.pixelsToGLUnits[0]/S,c.pixelsToGLUnits[1]/S]}},Zc=(v,c,m=1)=>({u_matrix:v,u_color:c,u_overlay:0,u_overlay_scale:m}),$y=o.create(),df=(v,c,m,b,S,A,O)=>{const z=v.transform,U=z.projection.name==="globe",Y=U?o.globePixelsToTileUnits(z.zoom,c.canonical)*z._pixelsPerMercatorPixel:et(m,1,A),W={u_matrix:c.projMatrix,u_extrude_scale:Y,u_intensity:O,u_inv_rot_matrix:$y,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){W.u_inv_rot_matrix=b,W.u_merc_center=S,W.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],W.u_zoom_transition=o.globeToMercatorTransition(z.zoom);const re=S[0]*o.EXTENT,ye=S[1]*o.EXTENT;W.u_up_dir=z.projection.upVector(new o.CanonicalTileID(0,0,0),re,ye)}return W},qy=(v,c,m,b,S,A,O)=>{const z=v.transform,U=z.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:ff(v,c,m,b),u_pixels_to_tile_units:U,u_device_pixel_ratio:A,u_units_to_pixels:[1/z.pixelsToGLUnits[0],1/z.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:S,u_texsize:$h(m)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Qc(c,v.transform),u_alpha_discard_threshold:0,u_trim_offset:O}},jh=(v,c,m,b,S)=>{const A=v.transform;return{u_matrix:ff(v,c,m,b),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:A.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:S,u_image:0,u_tile_units_to_pixels:Qc(c,A),u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Qc(v,c){return 1/et(v,1,c.tileZoom)}function ff(v,c,m,b){return v.translatePosMatrix(b||c.tileID.projMatrix,c,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}function $h(v){const c=v.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const Rp=(v,c,m,b,S,A)=>{return{u_matrix:v,u_tl_parent:c,u_scale_parent:m,u_fade_t:b.mix,u_opacity:b.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(z=S.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(O=S.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:bl(S.paint.get("raster-hue-rotate")),u_perspective_transform:A};var O,z};function bl(v){v*=Math.PI/180;const c=Math.sin(v),m=Math.cos(v);return[(2*m+1)/3,(-Math.sqrt(3)*c-m+1)/3,(Math.sqrt(3)*c-m+1)/3]}const Dp=o.create(),ug=(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te)=>{const Ae=S.transform,oe={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_rotate_symbol:+m,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:O,u_coord_matrix:z,u_is_text:+U,u_pitch_with_map:+b,u_texsize:Y,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Dp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Dp,u_up_vector:[0,-1,0]};return Te.name==="globe"&&(oe.u_tile_id=[W.canonical.x,W.canonical.y,1<<W.canonical.z],oe.u_zoom_transition=re,oe.u_inv_rot_matrix=we,oe.u_merc_center=ye,oe.u_camera_forward=Ae._camera.forward(),oe.u_ecef_origin=o.globeECEFOrigin(Ae.globeMatrix,W.toUnwrapped()),oe.u_tile_matrix=Float32Array.from(Ae.globeMatrix),oe.u_up_vector=Se),oe},kp=(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te,Ae)=>o.extend(ug(v,c,m,b,S,A,O,z,U,Y,re,ye,we,Se,Te,Ae),{u_gamma_scale:b?S.transform.cameraToCenterDistance*Math.cos(S.terrain?0:S.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:1}),Hy=(v,c,m,b,S,A,O,z,U,Y,W,re,ye,we,Se,Te)=>o.extend(kp(v,c,m,b,S,A,O,z,!0,U,!0,W,re,ye,we,Se,Te),{u_texsize_icon:Y,u_texture_icon:1}),hg=(v,c,m)=>({u_matrix:v,u_opacity:c,u_color:m}),Ea=(v,c,m,b,S)=>o.extend((function(A,O,z){const U=O.imageManager.getPattern(A.toString()),{width:Y,height:W}=O.imageManager.getPixelSize(),re=Math.pow(2,z.tileID.overscaledZ),ye=z.tileSize*Math.pow(2,O.transform.tileZoom)/re,we=ye*(z.tileID.canonical.x+z.tileID.wrap*re),Se=ye*z.tileID.canonical.y;return{u_image:0,u_pattern_tl:U.tl,u_pattern_br:U.br,u_texsize:[Y,W],u_pattern_size:U.displaySize,u_tile_units_to_pixels:1/et(z,1,O.transform.tileZoom),u_pixel_coord_upper:[we>>16,Se>>16],u_pixel_coord_lower:[65535&we,65535&Se]}})(b,m,S),{u_matrix:v,u_opacity:c}),$u={fillExtrusion:v=>({u_matrix:new o.UniformMatrix4f(v),u_lightpos:new o.Uniform3f(v),u_lightintensity:new o.Uniform1f(v),u_lightcolor:new o.Uniform3f(v),u_vertical_gradient:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_edge_radius:new o.Uniform1f(v),u_ao:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_up_dir:new o.Uniform3f(v),u_height_lift:new o.Uniform1f(v)}),fillExtrusionPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_lightpos:new o.Uniform3f(v),u_lightintensity:new o.Uniform1f(v),u_lightcolor:new o.Uniform3f(v),u_vertical_gradient:new o.Uniform1f(v),u_height_factor:new o.Uniform1f(v),u_edge_radius:new o.Uniform1f(v),u_ao:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_up_dir:new o.Uniform3f(v),u_height_lift:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v)}),fill:v=>({u_matrix:new o.UniformMatrix4f(v)}),fillPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),fillOutline:v=>({u_matrix:new o.UniformMatrix4f(v),u_world:new o.Uniform2f(v)}),fillOutlinePattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_world:new o.Uniform2f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),circle:v=>({u_camera_to_center_distance:new o.Uniform1f(v),u_extrude_scale:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_up_dir:new o.Uniform3f(v)}),collisionBox:v=>({u_matrix:new o.UniformMatrix4f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_extrude_scale:new o.Uniform2f(v)}),collisionCircle:v=>({u_matrix:new o.UniformMatrix4f(v),u_inv_matrix:new o.UniformMatrix4f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_viewport_size:new o.Uniform2f(v)}),debug:v=>({u_color:new o.UniformColor(v),u_matrix:new o.UniformMatrix4f(v),u_overlay:new o.Uniform1i(v),u_overlay_scale:new o.Uniform1f(v)}),clippingMask:v=>({u_matrix:new o.UniformMatrix4f(v)}),heatmap:v=>({u_extrude_scale:new o.Uniform1f(v),u_intensity:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_up_dir:new o.Uniform3f(v)}),heatmapTexture:v=>({u_image:new o.Uniform1i(v),u_color_ramp:new o.Uniform1i(v),u_opacity:new o.Uniform1f(v)}),hillshade:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_latrange:new o.Uniform2f(v),u_light:new o.Uniform2f(v),u_shadow:new o.UniformColor(v),u_highlight:new o.UniformColor(v),u_accent:new o.UniformColor(v)}),hillshadePrepare:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_dimension:new o.Uniform2f(v),u_zoom:new o.Uniform1f(v),u_unpack:new o.Uniform4f(v)}),line:v=>({u_matrix:new o.UniformMatrix4f(v),u_pixels_to_tile_units:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_units_to_pixels:new o.Uniform2f(v),u_dash_image:new o.Uniform1i(v),u_gradient_image:new o.Uniform1i(v),u_image_height:new o.Uniform1f(v),u_texsize:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_alpha_discard_threshold:new o.Uniform1f(v),u_trim_offset:new o.Uniform2f(v)}),linePattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_texsize:new o.Uniform2f(v),u_pixels_to_tile_units:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_units_to_pixels:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_alpha_discard_threshold:new o.Uniform1f(v)}),raster:v=>({u_matrix:new o.UniformMatrix4f(v),u_tl_parent:new o.Uniform2f(v),u_scale_parent:new o.Uniform1f(v),u_fade_t:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_image0:new o.Uniform1i(v),u_image1:new o.Uniform1i(v),u_brightness_low:new o.Uniform1f(v),u_brightness_high:new o.Uniform1f(v),u_saturation_factor:new o.Uniform1f(v),u_contrast_factor:new o.Uniform1f(v),u_spin_weights:new o.Uniform3f(v),u_perspective_transform:new o.Uniform2f(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_camera_forward:new o.Uniform3f(v),u_tile_matrix:new o.UniformMatrix4f(v),u_up_vector:new o.Uniform3f(v),u_ecef_origin:new o.Uniform3f(v),u_texture:new o.Uniform1i(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_texture:new o.Uniform1i(v),u_gamma_scale:new o.Uniform1f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_camera_forward:new o.Uniform3f(v),u_tile_matrix:new o.UniformMatrix4f(v),u_up_vector:new o.Uniform3f(v),u_ecef_origin:new o.Uniform3f(v),u_is_halo:new o.Uniform1i(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_texsize_icon:new o.Uniform2f(v),u_texture:new o.Uniform1i(v),u_texture_icon:new o.Uniform1i(v),u_gamma_scale:new o.Uniform1f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_is_halo:new o.Uniform1i(v)}),background:v=>({u_matrix:new o.UniformMatrix4f(v),u_opacity:new o.Uniform1f(v),u_color:new o.UniformColor(v)}),backgroundPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_opacity:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_pattern_tl:new o.Uniform2f(v),u_pattern_br:new o.Uniform2f(v),u_texsize:new o.Uniform2f(v),u_pattern_size:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),terrainRaster:Uh,terrainDepth:Uh,skybox:v=>({u_matrix:new o.UniformMatrix4f(v),u_sun_direction:new o.Uniform3f(v),u_cubemap:new o.Uniform1i(v),u_opacity:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v)}),skyboxGradient:v=>({u_matrix:new o.UniformMatrix4f(v),u_color_ramp:new o.Uniform1i(v),u_center_direction:new o.Uniform3f(v),u_radius:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v)}),skyboxCapture:v=>({u_matrix_3f:new o.UniformMatrix3f(v),u_sun_direction:new o.Uniform3f(v),u_sun_intensity:new o.Uniform1f(v),u_color_tint_r:new o.Uniform4f(v),u_color_tint_m:new o.Uniform4f(v),u_luminance:new o.Uniform1f(v)}),globeRaster:v=>({u_proj_matrix:new o.UniformMatrix4f(v),u_globe_matrix:new o.UniformMatrix4f(v),u_normalize_matrix:new o.UniformMatrix4f(v),u_merc_matrix:new o.UniformMatrix4f(v),u_zoom_transition:new o.Uniform1f(v),u_merc_center:new o.Uniform2f(v),u_image0:new o.Uniform1i(v),u_grid_matrix:new o.UniformMatrix3f(v),u_skirt_height:new o.Uniform1f(v),u_frustum_tl:new o.Uniform3f(v),u_frustum_tr:new o.Uniform3f(v),u_frustum_br:new o.Uniform3f(v),u_frustum_bl:new o.Uniform3f(v),u_globe_pos:new o.Uniform3f(v),u_globe_radius:new o.Uniform1f(v),u_viewport:new o.Uniform2f(v)}),globeAtmosphere:v=>({u_frustum_tl:new o.Uniform3f(v),u_frustum_tr:new o.Uniform3f(v),u_frustum_br:new o.Uniform3f(v),u_frustum_bl:new o.Uniform3f(v),u_horizon:new o.Uniform1f(v),u_transition:new o.Uniform1f(v),u_fadeout_range:new o.Uniform1f(v),u_color:new o.Uniform4f(v),u_high_color:new o.Uniform4f(v),u_space_color:new o.Uniform4f(v),u_star_intensity:new o.Uniform1f(v),u_star_density:new o.Uniform1f(v),u_star_size:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v),u_horizon_angle:new o.Uniform1f(v),u_rotation_matrix:new o.UniformMatrix4f(v)})};let pf;function qh(v,c,m,b,S,A,O){const z=v.context,U=z.gl,Y=v.transform,W=v.useProgram("collisionBox"),re=[];let ye=0,we=0;for(let Le=0;Le<b.length;Le++){const $e=b[Le],He=c.getTile($e),qe=He.getBucket(m);if(!qe)continue;const Je=Ji($e,qe,Y);let Qe=Je;S[0]===0&&S[1]===0||(Qe=v.translatePosMatrix(Je,He,S,A));const ct=O?qe.textCollisionBox:qe.iconCollisionBox,Ut=qe.collisionCircleArray;if(Ut.length>0){const it=o.create(),vt=Qe;o.mul(it,qe.placementInvProjMatrix,Y.glCoordMatrix),o.mul(it,it,qe.placementViewportMatrix),re.push({circleArray:Ut,circleOffset:we,transform:vt,invTransform:it,projection:qe.getProjection()}),ye+=Ut.length/4,we=ye}ct&&(v.terrain&&v.terrain.setupElevationDraw(He,W),W.draw(z,U.LINES,o.DepthMode.disabled,o.StencilMode.disabled,v.colorModeForRenderPass(),o.CullFaceMode.disabled,ju(Qe,Y,He,qe.getProjection()),m.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,Y.zoom,null,[ct.collisionVertexBuffer,ct.collisionVertexBufferExt]))}if(!O||!re.length)return;const Se=v.useProgram("collisionCircle"),Te=new o.StructArrayLayout2f1f2i16;Te.resize(4*ye),Te._trim();let Ae=0;for(const Le of re)for(let $e=0;$e<Le.circleArray.length/4;$e++){const He=4*$e,qe=Le.circleArray[He+0],Je=Le.circleArray[He+1],Qe=Le.circleArray[He+2],ct=Le.circleArray[He+3];Te.emplace(Ae++,qe,Je,Qe,ct,0),Te.emplace(Ae++,qe,Je,Qe,ct,1),Te.emplace(Ae++,qe,Je,Qe,ct,2),Te.emplace(Ae++,qe,Je,Qe,ct,3)}(!pf||pf.length<2*ye)&&(pf=(function(Le){const $e=2*Le,He=new o.StructArrayLayout3ui6;He.resize($e),He._trim();for(let qe=0;qe<$e;qe++){const Je=6*qe;He.uint16[Je+0]=4*qe+0,He.uint16[Je+1]=4*qe+1,He.uint16[Je+2]=4*qe+2,He.uint16[Je+3]=4*qe+2,He.uint16[Je+4]=4*qe+3,He.uint16[Je+5]=4*qe+0}return He})(ye));const oe=z.createIndexBuffer(pf,!0),be=z.createVertexBuffer(Te,o.collisionCircleLayout.members,!0);for(const Le of re){const $e={u_matrix:Le.transform,u_inv_matrix:Le.invTransform,u_camera_to_center_distance:(Pe=Y).getCameraToCenterDistance(Le.projection),u_viewport_size:[Pe.width,Pe.height]};Se.draw(z,U.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,v.colorModeForRenderPass(),o.CullFaceMode.disabled,$e,m.id,be,oe,o.SegmentVector.simpleSegment(0,2*Le.circleOffset,Le.circleArray.length,Le.circleArray.length/2),null,Y.zoom)}var Pe;be.destroy(),oe.destroy()}const dg=o.create();function Pp({width:v,height:c,anchor:m,textOffset:b,textScale:S},A){const{horizontalAlign:O,verticalAlign:z}=o.getAnchorAlignment(m),U=-(O-.5)*v,Y=-(z-.5)*c,W=o.evaluateVariableOffset(m,b);return new o.Point((U/S+W[0])*A,(Y/S+W[1])*A)}function fg(v,c,m,b,S,A,O,z,U,Y,W){const re=v.text.placedSymbolArray,ye=v.text.dynamicLayoutVertexArray,we=v.icon.dynamicLayoutVertexArray,Se={},Te=v.getProjection(),Ae=bi(z,Te,A),oe=A.elevation,be=Te.upVectorScale(z.canonical,A.center.lat,A.worldSize).metersToTile;ye.clear();for(let Pe=0;Pe<re.length;Pe++){const Le=re.get(Pe),{tileAnchorX:$e,tileAnchorY:He,numGlyphs:qe}=Le,Je=Le.hidden||!Le.crossTileID||v.allowVerticalPlacement&&!Le.placedOrientation?null:b[Le.crossTileID];if(Je){let Qe=0,ct=0,Ut=0;if(oe){const It=oe?oe.getAtTileOffset(z,$e,He):0,[Sn,zn,Bt]=Te.upVector(z.canonical,$e,He);Qe=It*Sn*be,ct=It*zn*be,Ut=It*Bt*be}let[it,vt,lt,zt]=zr(Le.projectedAnchorX+Qe,Le.projectedAnchorY+ct,Le.projectedAnchorZ+Ut,m?Ae:O);const ot=zs(A.getCameraToCenterDistance(Te),zt);let Et=S.evaluateSizeForFeature(v.textSizeData,Y,Le)*ot/o.ONE_EM;m&&(Et*=v.tilePixelRatio/U);const Nt=Pp(Je,Et);m?({x:it,y:vt,z:lt}=Te.projectTilePoint($e+Nt.x,He+Nt.y,z.canonical),[it,vt,lt]=zr(it+Qe,vt+ct,lt+Ut,O)):(c&&Nt._rotate(-A.angle),it+=Nt.x,vt+=Nt.y,lt=0);const St=v.allowVerticalPlacement&&Le.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let It=0;It<qe;It++)o.addDynamicAttributes(ye,it,vt,lt,St);W&&Le.associatedIconIndex>=0&&(Se[Le.associatedIconIndex]={x:it,y:vt,z:lt,angle:St})}else ra(qe,ye)}if(W){we.clear();const Pe=v.icon.placedSymbolArray;for(let Le=0;Le<Pe.length;Le++){const $e=Pe.get(Le),{numGlyphs:He}=$e,qe=Se[Le];if($e.hidden||!qe)ra(He,we);else{const{x:Je,y:Qe,z:ct,angle:Ut}=qe;for(let it=0;it<He;it++)o.addDynamicAttributes(we,Je,Qe,ct,Ut)}}v.icon.dynamicLayoutVertexBuffer.updateData(we)}v.text.dynamicLayoutVertexBuffer.updateData(ye)}function pg(v,c,m){return m.iconsInText&&c?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function qu(v,c,m,b,S,A,O,z,U,Y,W,re){const ye=v.context,we=ye.gl,Se=v.transform,Te=z==="map",Ae=U==="map",oe=Te&&m.layout.get("symbol-placement")!=="point",be=Te&&!Ae&&!oe,Pe=m.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Le=!1;const $e=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),He=[o.mercatorXfromLng(Se.center.lng),o.mercatorYfromLat(Se.center.lat)],qe=m.layout.get("text-variable-anchor"),Je=Se.projection.name==="globe",Qe=[],ct=[0,-1,0];let Ut=ct;!Je&&!Se.mercatorFromTransition||Te||(Ut=(function(it){const vt=it._camera.getWorldToCamera(it.worldSize,1),lt=o.multiply([],vt,it.globeMatrix);o.invert(lt,lt);const zt=[0,0,0],ot=[0,1,0,0];return o.transformMat4$1(ot,ot,lt),zt[0]=ot[0],zt[1]=ot[1],zt[2]=ot[2],o.normalize(zt,zt),zt})(Se));for(const it of b){const vt=c.getTile(it),lt=vt.getBucket(m);if(!lt||lt.projection.name==="mercator"&&Je)continue;const zt=S?lt.text:lt.icon;if(!zt||lt.fullyClipped||!zt.segments.get().length)continue;const ot=zt.programConfigurations.get(m.id),Et=S||lt.sdfIcons,Nt=S?lt.textSizeData:lt.iconSizeData,St=Ae||Se.pitch!==0,It=o.evaluateSizeForZoom(Nt,Se.zoom);let Sn,zn,Bt,ln,Ln=[0,0],ar=null;if(S)zn=vt.glyphAtlasTexture,Bt=we.LINEAR,Sn=vt.glyphAtlasTexture.size,lt.iconsInText&&(Ln=vt.imageAtlasTexture.size,ar=vt.imageAtlasTexture,ln=St||v.options.rotating||v.options.zooming||Nt.kind==="composite"||Nt.kind==="camera"?we.LINEAR:we.NEAREST);else{const el=m.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;zn=vt.imageAtlasTexture,Bt=Et||v.options.rotating||v.options.zooming||el||St?we.LINEAR:we.NEAREST,Sn=vt.imageAtlasTexture.size}const xn=lt.projection.name==="globe",kr=xn?Ut:ct,Qr=xn?o.globeToMercatorTransition(Se.zoom):0,Gr=bi(it,lt.getProjection(),Se),Ur=Se.calculatePixelsToTileUnitsMatrix(vt),bo=xt(Gr,vt.tileID.canonical,Ae,Te,Se,lt.getProjection(),Ur),Pr=v.terrain&&Ae&&oe?o.invert(o.create(),bo):dg,la=Zr(Gr,vt.tileID.canonical,Ae,Te,Se,lt.getProjection(),Ur),Ja=qe&&lt.hasTextData(),Oi=m.layout.get("icon-text-fit")!=="none"&&Ja&&lt.hasIconData();if(oe){const el=Se.elevation,Kl=el?el.getAtTileOffsetFunc(it,Se.center.lat,Se.worldSize,lt.getProjection()):null,$o=na(Gr,vt.tileID.canonical,Ae,Te,Se,lt.getProjection(),Ur);Bu(lt,Gr,v,S,$o,la,Ae,Y,Kl,it)}const fi=oe||S&&qe||Oi,jr=v.translatePosMatrix(Gr,vt,A,O),ms=fi?dg:bo,ao=v.translatePosMatrix(la,vt,A,O,!0),Ei=lt.getProjection().createInversionMatrix(Se,it.canonical),Mi=[];v.terrainRenderModeElevated()&&Ae&&Mi.push("PITCH_WITH_MAP_TERRAIN"),xn&&Mi.push("PROJECTION_GLOBE_VIEW"),fi&&Mi.push("PROJECTED_POS_ON_VIEWPORT");const cs=Et&&m.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xl;Xl=Et?lt.iconsInText?Hy(Nt.kind,It,be,Ae,v,jr,ms,ao,Sn,Ln,it,Qr,He,Ei,kr,lt.getProjection()):kp(Nt.kind,It,be,Ae,v,jr,ms,ao,S,Sn,!0,it,Qr,He,Ei,kr,lt.getProjection()):ug(Nt.kind,It,be,Ae,v,jr,ms,ao,S,Sn,it,Qr,He,Ei,kr,lt.getProjection());const Ec={program:v.useProgram(pg(Et,S,lt),ot,Mi),buffers:zt,uniformValues:Xl,atlasTexture:zn,atlasTextureIcon:ar,atlasInterpolation:Bt,atlasInterpolationIcon:ln,isSDF:Et,hasHalo:cs,tile:vt,labelPlaneMatrixInv:Pr};if(Pe&&lt.canOverlap){Le=!0;const el=zt.segments.get();for(const Kl of el)Qe.push({segments:new o.SegmentVector([Kl]),sortKey:Kl.sortKey,state:Ec})}else Qe.push({segments:zt.segments,sortKey:0,state:Ec})}Le&&Qe.sort(((it,vt)=>it.sortKey-vt.sortKey));for(const it of Qe){const vt=it.state;if(v.terrain&&v.terrain.setupElevationDraw(vt.tile,vt.program,{useDepthForOcclusion:!Je,labelPlaneMatrixInv:vt.labelPlaneMatrixInv}),ye.activeTexture.set(we.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,we.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(ye.activeTexture.set(we.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,we.CLAMP_TO_EDGE)),vt.isSDF){const lt=vt.uniformValues;vt.hasHalo&&(lt.u_is_halo=1,Hu(vt.buffers,it.segments,m,v,vt.program,$e,W,re,lt)),lt.u_is_halo=0}Hu(vt.buffers,it.segments,m,v,vt.program,$e,W,re,vt.uniformValues)}}function Hu(v,c,m,b,S,A,O,z,U){const Y=b.context,W=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.globeExtVertexBuffer];S.draw(Y,Y.gl.TRIANGLES,A,O,z,o.CullFaceMode.disabled,U,m.id,v.layoutVertexBuffer,v.indexBuffer,c,m.paint,b.transform.zoom,v.programConfigurations.get(m.id),W)}function Hh(v,c,m,b,S,A,O){const z=v.context.gl,U=m.paint.get("fill-pattern"),Y=U&&U.constantOr(1);let W,re,ye,we,Se;O?(re=Y&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=z.LINES):(re=Y?"fillPattern":"fill",W=z.TRIANGLES);for(const Te of b){const Ae=c.getTile(Te);if(Y&&!Ae.patternsLoaded())continue;const oe=Ae.getBucket(m);if(!oe)continue;v.prepareDrawTile();const be=oe.programConfigurations.get(m.id),Pe=v.useProgram(re,be);Y&&(v.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),be.updatePaintBuffers());const Le=U.constantOr(null);if(Le&&Ae.imageAtlas){const He=Ae.imageAtlas.patternPositions[Le.toString()];He&&be.setConstantPatternPositions(He)}const $e=v.translatePosMatrix(Te.projMatrix,Ae,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(O){we=oe.indexBuffer2,Se=oe.segments2;const He=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];ye=re==="fillOutlinePattern"&&Y?i0($e,v,Ae,He):r0($e,He)}else we=oe.indexBuffer,Se=oe.segments,ye=Y?Kc($e,v,Ae):Wa($e);v.prepareDrawProgram(v.context,Pe,Te.toUnwrapped()),Pe.draw(v.context,W,S,v.stencilModeForClipping(Te),A,o.CullFaceMode.disabled,ye,m.id,oe.layoutVertexBuffer,we,Se,m.paint,v.transform.zoom,be)}}function Gh(v,c,m,b,S,A,O){const z=v.context,U=z.gl,Y=v.transform,W=m.paint.get("fill-extrusion-pattern"),re=W.constantOr(1),ye=m.paint.get("fill-extrusion-opacity"),we=[m.paint.get("fill-extrusion-ambient-occlusion-intensity"),m.paint.get("fill-extrusion-ambient-occlusion-radius")],Se=m.layout.get("fill-extrusion-edge-radius"),Te=Se>0&&!m.paint.get("fill-extrusion-rounded-roof"),Ae=Te?0:Se,oe=Y.projection.name==="globe"?o.fillExtrusionHeightLift():0,be=Y.projection.name==="globe",Pe=be?o.globeToMercatorTransition(Y.zoom):0,Le=[o.mercatorXfromLng(Y.center.lng),o.mercatorYfromLat(Y.center.lat)],$e=[];be&&$e.push("PROJECTION_GLOBE_VIEW"),we[0]>0&&$e.push("FAUX_AO"),Te&&$e.push("ZERO_ROOF_RADIUS");for(const He of b){const qe=c.getTile(He),Je=qe.getBucket(m);if(!Je||Je.projection.name!==Y.projection.name)continue;const Qe=Je.programConfigurations.get(m.id),ct=v.useProgram(re?"fillExtrusionPattern":"fillExtrusion",Qe,$e);if(v.terrain){const Et=v.terrain;if(v.style.terrainSetForDrapingOnly())Et.setupElevationDraw(qe,ct,{useMeterToDem:!0});else{if(!Je.enableTerrain)continue;if(Et.setupElevationDraw(qe,ct,{useMeterToDem:!0}),mg(z,c,He,Je,m,Et),!Je.centroidVertexBuffer){const Nt=ct.attributes.a_centroid_pos;Nt!==void 0&&U.vertexAttrib2f(Nt,0,0)}}}re&&(v.context.activeTexture.set(U.TEXTURE0),qe.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Qe.updatePaintBuffers());const Ut=W.constantOr(null);if(Ut&&qe.imageAtlas){const Et=qe.imageAtlas.patternPositions[Ut.toString()];Et&&Qe.setConstantPatternPositions(Et)}const it=v.translatePosMatrix(He.projMatrix,qe,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),vt=Y.projection.createInversionMatrix(Y,He.canonical),lt=m.paint.get("fill-extrusion-vertical-gradient"),zt=re?Xc(it,v,lt,ye,we,Ae,He,qe,oe,Pe,Le,vt):Ta(it,v,lt,ye,we,Ae,He,oe,Pe,Le,vt);v.prepareDrawProgram(z,ct,He.toUnwrapped());const ot=[];v.terrain&&ot.push(Je.centroidVertexBuffer),be&&ot.push(Je.layoutVertexExtBuffer),ct.draw(z,z.gl.TRIANGLES,S,A,O,o.CullFaceMode.backCCW,zt,m.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,m.paint,v.transform.zoom,Qe,ot)}}function mg(v,c,m,b,S,A){const O=[oe=>{let be=oe.canonical.x-1,Pe=oe.wrap;return be<0&&(be=(1<<oe.canonical.z)-1,Pe--),new o.OverscaledTileID(oe.overscaledZ,Pe,oe.canonical.z,be,oe.canonical.y)},oe=>{let be=oe.canonical.x+1,Pe=oe.wrap;return be===1<<oe.canonical.z&&(be=0,Pe++),new o.OverscaledTileID(oe.overscaledZ,Pe,oe.canonical.z,be,oe.canonical.y)},oe=>new o.OverscaledTileID(oe.overscaledZ,oe.wrap,oe.canonical.z,oe.canonical.x,(oe.canonical.y===0?1<<oe.canonical.z:oe.canonical.y)-1),oe=>new o.OverscaledTileID(oe.overscaledZ,oe.wrap,oe.canonical.z,oe.canonical.x,oe.canonical.y===(1<<oe.canonical.z)-1?0:oe.canonical.y+1)],z=oe=>{const be=c.getSource().minzoom,Pe=$e=>{const He=c.getTileByID($e);if(He&&He.hasData())return He.getBucket(S)},Le=[0,-1,1];for(const $e of Le){if(oe.overscaledZ+$e<be)continue;const He=Pe(oe.calculateScaledKey(oe.overscaledZ+$e));if(He)return He}},U=[0,0,0],Y=(oe,be)=>(U[0]=Math.min(oe.min.y,be.min.y),U[1]=Math.max(oe.max.y,be.max.y),U[2]=o.EXTENT-be.min.x>oe.max.x?be.min.x-o.EXTENT:oe.max.x,U),W=(oe,be)=>(U[0]=Math.min(oe.min.x,be.min.x),U[1]=Math.max(oe.max.x,be.max.x),U[2]=o.EXTENT-be.min.y>oe.max.y?be.min.y-o.EXTENT:oe.max.y,U),re=[(oe,be)=>Y(oe,be),(oe,be)=>Y(be,oe),(oe,be)=>W(oe,be),(oe,be)=>W(be,oe)],ye=new o.Point(0,0);let we,Se,Te;const Ae=(oe,be,Pe,Le,$e)=>{const He=[[Le?Pe:oe,Le?oe:Pe,0],[Le?Pe:be,Le?be:Pe,0]],qe=$e<0?o.EXTENT+$e:$e,Je=[Le?qe:(oe+be)/2,Le?(oe+be)/2:qe,0];return Pe===0&&$e<0||Pe!==0&&$e>0?A.getForTilePoints(Te,[Je],!0,Se):He.push(Je),A.getForTilePoints(m,He,!0,we),Math.max(He[0][2],He[1][2],Je[2])/A.exaggeration()};for(let oe=0;oe<4;oe++){const be=(oe<2?1:5)-oe,Pe=b.borders[oe];if(Pe.length===0)continue;const Le=Te=O[oe](m),$e=z(Le);if(!($e&&$e instanceof o.FillExtrusionBucket&&$e.enableTerrain)||b.borderDoneWithNeighborZ[oe]===$e.canonical.z&&$e.borderDoneWithNeighborZ[be]===b.canonical.z||(Se=A.findDEMTileFor(Le),!Se||!Se.dem))continue;if(!we){const Qe=A.findDEMTileFor(m);if(!Qe||!Qe.dem)return;we=Qe}const He=$e.borders[be];let qe=0;const Je=$e.borderDoneWithNeighborZ[be]!==b.canonical.z;if(b.canonical.z===$e.canonical.z){for(let Qe=0;Qe<Pe.length;Qe++){const ct=b.featuresOnBorder[Pe[Qe]],Ut=ct.borders[oe];let it;for(;qe<He.length&&(it=$e.featuresOnBorder[He[qe]],!(it.borders[be][1]>Ut[0]+3));)Je&&$e.encodeCentroid(void 0,it,!1),qe++;if(it&&qe<He.length){const vt=qe;let lt=0;for(;!(it.borders[be][0]>Ut[1]-3)&&(lt++,++qe!==He.length);)it=$e.featuresOnBorder[He[qe]];if(it=$e.featuresOnBorder[He[vt]],ct.intersectsCount()>1||it.intersectsCount()>1||lt!==1){lt!==1&&(qe=vt),b.encodeCentroid(void 0,ct,!1),Je&&$e.encodeCentroid(void 0,it,!1);continue}const zt=re[oe](ct,it),ot=oe%2?o.EXTENT-1:0;ye.x=Ae(zt[0],Math.min(o.EXTENT-1,zt[1]),ot,oe<2,zt[2]),ye.y=0,b.encodeCentroid(ye,ct,!1),Je&&$e.encodeCentroid(ye,it,!1)}else b.encodeCentroid(void 0,ct,!1)}b.borderDoneWithNeighborZ[oe]=$e.canonical.z,b.needsCentroidUpdate=!0,Je&&($e.borderDoneWithNeighborZ[be]=b.canonical.z,$e.needsCentroidUpdate=!0)}else{for(const Qe of Pe)b.encodeCentroid(void 0,b.featuresOnBorder[Qe],!1);if(Je){for(const Qe of He)$e.encodeCentroid(void 0,$e.featuresOnBorder[Qe],!1);$e.borderDoneWithNeighborZ[be]=b.canonical.z,$e.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[oe]=$e.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&b.centroidVertexArray.length!==0)&&b.uploadCentroid(v)}const Ya=new o.Color(1,0,0,1),Wh=new o.Color(0,1,0,1),gg=new o.Color(0,0,1,1),Gy=new o.Color(1,0,1,1),Gu=new o.Color(0,1,1,1);function Wy(v,c,m){const b=v.context,S=v.transform,A=b.gl,O=S.projection.name==="globe",z=O?["PROJECTION_GLOBE_VIEW"]:null;let U=m.projMatrix;if(O&&o.globeToMercatorTransition(S.zoom)>0){const ct=o.transitionTileAABBinECEF(m.canonical,S),Ut=o.globeDenormalizeECEF(ct);U=o.multiply(new Float32Array(16),S.globeMatrix,Ut),o.multiply(U,S.projMatrix,U)}const Y=v.useProgram("debug",null,z),W=c.getTileByID(m.key);v.terrain&&v.terrain.setupElevationDraw(W,Y);const re=o.DepthMode.disabled,ye=o.StencilMode.disabled,we=v.colorModeForRenderPass(),Se="$debug";b.activeTexture.set(A.TEXTURE0),v.emptyTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),O?W._makeGlobeTileDebugBuffers(v.context,S):W._makeDebugTileBoundsBuffers(v.context,S.projection);const Te=W._tileDebugBuffer||v.debugBuffer,Ae=W._tileDebugIndexBuffer||v.debugIndexBuffer,oe=W._tileDebugSegments||v.debugSegments;Y.draw(b,A.LINE_STRIP,re,ye,we,o.CullFaceMode.disabled,Zc(U,o.Color.red),Se,Te,Ae,oe,null,null,null,[W._globeTileDebugBorderBuffer]);const be=W.latestRawTileData,Pe=Math.floor((be&&be.byteLength||0)/1024),Le=c.getTile(m).tileSize,$e=512/Math.min(Le,512)*(m.overscaledZ/S.zoom)*.5;let He=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(He+=` => ${m.overscaledZ}`),He+=` ${Pe}kb`,(function(ct,Ut){ct.initDebugOverlayCanvas();const it=ct.debugOverlayCanvas,vt=ct.context.gl,lt=ct.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,it.width,it.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(Ut,5,5),lt.strokeText(Ut,5,5),ct.debugOverlayTexture.update(it),ct.debugOverlayTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)})(v,He);const qe=W._tileDebugTextBuffer||v.debugBuffer,Je=W._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,Qe=W._tileDebugTextSegments||v.debugSegments;Y.draw(b,A.TRIANGLES,re,ye,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Zc(U,o.Color.transparent,$e),Se,qe,Je,Qe,null,null,null,[W._globeTileDebugTextBuffer])}function yg(v,c,m,b){Yh(v,0,c+m/2,v.transform.width,m,b)}function mf(v,c,m,b){Yh(v,c-m/2,0,m,v.transform.height,b)}function Yh(v,c,m,b,S,A){const O=v.context,z=O.gl;z.enable(z.SCISSOR_TEST),z.scissor(c*o.exported.devicePixelRatio,m*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio,S*o.exported.devicePixelRatio),O.clear({color:A}),z.disable(z.SCISSOR_TEST)}const Yy=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Xy}=Yy;function Gl(v,c,m,b){v.emplaceBack(c,m,b)}class gf{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Gl(this.vertexArray,-1,-1,1),Gl(this.vertexArray,1,-1,1),Gl(this.vertexArray,-1,1,1),Gl(this.vertexArray,1,1,1),Gl(this.vertexArray,-1,-1,-1),Gl(this.vertexArray,1,-1,-1),Gl(this.vertexArray,-1,1,-1),Gl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,Xy),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function oa(v,c,m,b,S,A){const O=v.gl,z=c.paint.get("sky-atmosphere-color"),U=c.paint.get("sky-atmosphere-halo-color"),Y=c.paint.get("sky-atmosphere-sun-intensity"),W=((re,ye,we,Se,Te)=>({u_matrix_3f:re,u_sun_direction:ye,u_sun_intensity:we,u_color_tint_r:[Se.r,Se.g,Se.b,Se.a],u_color_tint_m:[Te.r,Te.g,Te.b,Te.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),b),S,Y,z,U);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+A,c.skyboxTexture,0),m.draw(v,O.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,W,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const jo=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class yf{constructor(c){const m=new o.StructArrayLayout5f20;m.emplaceBack(-1,1,1,0,0),m.emplaceBack(1,1,1,1,0),m.emplaceBack(1,-1,1,1,1),m.emplaceBack(-1,-1,1,0,1);const b=new o.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(m,jo.members),this.indexBuffer=c.createIndexBuffer(b),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ws={symbol:function(v,c,m,b,S){if(v.renderPass!=="translucent")return;const A=o.StencilMode.disabled,O=v.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&(function(z,U,Y,W,re,ye,we){const Se=U.transform,Te=re==="map",Ae=ye==="map";for(const oe of z){const be=W.getTile(oe),Pe=be.getBucket(Y);if(!Pe||!Pe.text||!Pe.text.segments.get().length)continue;const Le=o.evaluateSizeForZoom(Pe.textSizeData,Se.zoom),$e=bi(oe,Pe.getProjection(),Se),He=Se.calculatePixelsToTileUnitsMatrix(be),qe=xt($e,be.tileID.canonical,Ae,Te,Se,Pe.getProjection(),He),Je=Y.layout.get("icon-text-fit")!=="none"&&Pe.hasIconData();if(Le){const Qe=Math.pow(2,Se.zoom-be.tileID.overscaledZ);fg(Pe,Te,Ae,we,o.symbolSize,Se,qe,oe,Qe,Le,Je)}}})(b,v,m,c,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),S),m.paint.get("icon-opacity").constantOr(1)!==0&&qu(v,c,m,b,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),A,O),m.paint.get("text-opacity").constantOr(1)!==0&&qu(v,c,m,b,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),A,O),c.map.showCollisionBoxes&&(qh(v,c,m,b,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),qh(v,c,m,b,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))},circle:function(v,c,m,b){if(v.renderPass!=="translucent")return;const S=m.paint.get("circle-opacity"),A=m.paint.get("circle-stroke-width"),O=m.paint.get("circle-stroke-opacity"),z=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(S.constantOr(1)===0&&(A.constantOr(1)===0||O.constantOr(1)===0))return;const U=v.context,Y=U.gl,W=v.transform,re=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),ye=o.StencilMode.disabled,we=v.colorModeForRenderPass(),Se=W.projection.name==="globe",Te=[o.mercatorXfromLng(W.center.lng),o.mercatorYfromLat(W.center.lat)],Ae=[];for(let be=0;be<b.length;be++){const Pe=b[be],Le=c.getTile(Pe),$e=Le.getBucket(m);if(!$e||$e.projection.name!==W.projection.name)continue;const He=$e.programConfigurations.get(m.id),qe=Mp(m);Se&&qe.push("PROJECTION_GLOBE_VIEW");const Je=v.useProgram("circle",He,qe),Qe=$e.layoutVertexBuffer,ct=$e.globeExtVertexBuffer,Ut=$e.indexBuffer,it=W.projection.createInversionMatrix(W,Pe.canonical),vt={programConfiguration:He,program:Je,layoutVertexBuffer:Qe,globeExtVertexBuffer:ct,indexBuffer:Ut,uniformValues:Ip(v,Pe,Le,it,Te,m),tile:Le};if(z){const lt=$e.segments.get();for(const zt of lt)Ae.push({segments:new o.SegmentVector([zt]),sortKey:zt.sortKey,state:vt})}else Ae.push({segments:$e.segments,sortKey:0,state:vt})}z&&Ae.sort(((be,Pe)=>be.sortKey-Pe.sortKey));const oe={useDepthForOcclusion:!Se};for(const be of Ae){const{programConfiguration:Pe,program:Le,layoutVertexBuffer:$e,globeExtVertexBuffer:He,indexBuffer:qe,uniformValues:Je,tile:Qe}=be.state,ct=be.segments;v.terrain&&v.terrain.setupElevationDraw(Qe,Le,oe),v.prepareDrawProgram(U,Le,Qe.tileID.toUnwrapped()),Le.draw(U,Y.TRIANGLES,re,ye,we,o.CullFaceMode.disabled,Je,m.id,$e,qe,ct,m.paint,W.zoom,Pe,[He])}},heatmap:function(v,c,m,b){if(m.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const S=v.context,A=S.gl,O=o.StencilMode.disabled,z=new o.ColorMode([A.ONE,A.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(we,Se,Te,Ae){const oe=we.gl,be=Se.width*Ae,Pe=Se.height*Ae;we.activeTexture.set(oe.TEXTURE1),we.viewport.set([0,0,be,Pe]);let Le=Te.heatmapFbo;if(!Le||Le&&(Le.width!==be||Le.height!==Pe)){Le&&Le.destroy();const $e=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,$e),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),Le=Te.heatmapFbo=we.createFramebuffer(be,Pe,!1),(function(He,qe,Je,Qe,ct,Ut){const it=He.gl;it.texImage2D(it.TEXTURE_2D,0,He.isWebGL2&&He.extRenderToTextureHalfFloat?it.RGBA16F:it.RGBA,ct,Ut,0,it.RGBA,He.extRenderToTextureHalfFloat?He.isWebGL2?it.HALF_FLOAT:He.extTextureHalfFloat.HALF_FLOAT_OES:it.UNSIGNED_BYTE,null),Qe.colorAttachment.set(Je)})(we,0,$e,Le,be,Pe)}else oe.bindTexture(oe.TEXTURE_2D,Le.colorAttachment.get()),we.bindFramebuffer.set(Le.framebuffer)})(S,v,m,v.transform.projection.name==="globe"?.5:.25),S.clear({color:o.Color.transparent});const U=v.transform,Y=U.projection.name==="globe",W=Y?["PROJECTION_GLOBE_VIEW"]:null,re=Y?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ye=[o.mercatorXfromLng(U.center.lng),o.mercatorYfromLat(U.center.lat)];for(let we=0;we<b.length;we++){const Se=b[we];if(c.hasRenderableParent(Se))continue;const Te=c.getTile(Se),Ae=Te.getBucket(m);if(!Ae||Ae.projection.name!==U.projection.name)continue;const oe=Ae.programConfigurations.get(m.id),be=v.useProgram("heatmap",oe,W),{zoom:Pe}=v.transform;v.terrain&&v.terrain.setupElevationDraw(Te,be),v.prepareDrawProgram(S,be,Se.toUnwrapped());const Le=U.projection.createInversionMatrix(U,Se.canonical);be.draw(S,A.TRIANGLES,o.DepthMode.disabled,O,z,re,df(v,Se,Te,Le,ye,Pe,m.paint.get("heatmap-intensity")),m.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,m.paint,v.transform.zoom,oe,Y?[Ae.globeExtVertexBuffer]:null)}S.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),(function(S,A){const O=S.context,z=O.gl,U=A.heatmapFbo;if(!U)return;O.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,U.colorAttachment.get()),O.activeTexture.set(z.TEXTURE1);let Y=A.colorRampTexture;Y||(Y=A.colorRampTexture=new o.Texture(O,A.colorRamp,z.RGBA)),Y.bind(z.LINEAR,z.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(O,z.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,S.colorModeForRenderPass(),o.CullFaceMode.disabled,((W,re,ye,we)=>({u_image:0,u_color_ramp:1,u_opacity:re.paint.get("heatmap-opacity")}))(0,A),A.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,A.paint,S.transform.zoom)})(v,m))},line:function(v,c,m,b){if(v.renderPass!=="translucent")return;const S=m.paint.get("line-opacity"),A=m.paint.get("line-width");if(S.constantOr(1)===0||A.constantOr(1)===0)return;const O=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),z=v.colorModeForRenderPass(),U=v.terrain&&v.terrain.renderingToTexture?1:o.exported.devicePixelRatio,Y=m.paint.get("line-dasharray"),W=Y.constantOr(1),re=m.layout.get("line-cap"),ye=m.paint.get("line-pattern"),we=ye.constantOr(1),Se=m.paint.get("line-gradient"),Te=we?"linePattern":"line",Ae=v.context,oe=Ae.gl,be=(Le=>{const $e=[];$h(Le)&&$e.push("RENDER_LINE_DASH"),Le.paint.get("line-gradient")&&$e.push("RENDER_LINE_GRADIENT");const He=Le.paint.get("line-trim-offset");He[0]===0&&He[1]===0||$e.push("RENDER_LINE_TRIM_OFFSET");const qe=Le.paint.get("line-pattern").constantOr(1),Je=Le.paint.get("line-opacity").constantOr(1)!==1;return!qe&&Je&&$e.push("RENDER_LINE_ALPHA_DISCARD"),$e})(m);let Pe=be.includes("RENDER_LINE_ALPHA_DISCARD");v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(Pe=!1);for(const Le of b){const $e=c.getTile(Le);if(we&&!$e.patternsLoaded())continue;const He=$e.getBucket(m);if(!He)continue;v.prepareDrawTile();const qe=He.programConfigurations.get(m.id),Je=v.useProgram(Te,qe,be),Qe=ye.constantOr(null);if(Qe&&$e.imageAtlas){const Et=$e.imageAtlas.patternPositions[Qe.toString()];Et&&qe.setConstantPatternPositions(Et)}const ct=Y.constantOr(null),Ut=re.constantOr(null);if(!we&&ct&&Ut&&$e.lineAtlas){const Et=$e.lineAtlas.getDash(ct,Ut);Et&&qe.setConstantPatternPositions(Et)}let[it,vt]=m.paint.get("line-trim-offset");(Ut==="round"||Ut==="square")&&it!==vt&&(it===0&&(it-=1),vt===1&&(vt+=1));const lt=v.terrain?Le.projMatrix:null,zt=we?jh(v,$e,m,lt,U):qy(v,$e,m,lt,He.lineClipsArray.length,U,[it,vt]);if(Se){const Et=He.gradients[m.id];let Nt=Et.texture;if(m.gradientVersion!==Et.version){let St=256;if(m.stepInterpolant){const It=c.getSource().maxzoom,Sn=Le.canonical.z===It?Math.ceil(1<<v.transform.maxZoom-Le.canonical.z):1;St=o.clamp(o.nextPowerOfTwo(He.maxLineLength/o.EXTENT*1024*Sn),256,Ae.maxTextureSize)}Et.gradient=o.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:St,image:Et.gradient||void 0,clips:He.lineClipsArray}),Et.texture?Et.texture.update(Et.gradient):Et.texture=new o.Texture(Ae,Et.gradient,oe.RGBA),Et.version=m.gradientVersion,Nt=Et.texture}Ae.activeTexture.set(oe.TEXTURE1),Nt.bind(m.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}W&&(Ae.activeTexture.set(oe.TEXTURE0),$e.lineAtlasTexture.bind(oe.LINEAR,oe.REPEAT),qe.updatePaintBuffers()),we&&(Ae.activeTexture.set(oe.TEXTURE0),$e.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),qe.updatePaintBuffers()),v.prepareDrawProgram(Ae,Je,Le.toUnwrapped());const ot=Et=>{Je.draw(Ae,oe.TRIANGLES,O,Et,z,o.CullFaceMode.disabled,zt,m.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,m.paint,v.transform.zoom,qe,[He.layoutVertexBuffer2])};if(Pe){const Et=v.stencilModeForClipping(Le).ref;Et===0&&v.terrain&&Ae.clear({stencil:0});const Nt={func:oe.EQUAL,mask:255};zt.u_alpha_discard_threshold=.8,ot(new o.StencilMode(Nt,Et,255,oe.KEEP,oe.KEEP,oe.INVERT)),zt.u_alpha_discard_threshold=0,ot(new o.StencilMode(Nt,Et,255,oe.KEEP,oe.KEEP,oe.KEEP))}else ot(v.stencilModeForClipping(Le))}Pe&&(v.resetStencilClippingMasks(),v.terrain&&Ae.clear({stencil:0}))},fill:function(v,c,m,b){const S=m.paint.get("fill-color"),A=m.paint.get("fill-opacity");if(A.constantOr(1)===0)return;const O=v.colorModeForRenderPass(),z=m.paint.get("fill-pattern"),U=v.opaquePassEnabledForLayer()&&!z.constantOr(1)&&S.constantOr(o.Color.transparent).a===1&&A.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===U){const Y=v.depthModeForSublayer(1,v.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Hh(v,c,m,b,Y,O,!1)}if(v.renderPass==="translucent"&&m.paint.get("fill-antialias")){const Y=v.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Hh(v,c,m,b,Y,O,!0)}},"fill-extrusion":function(v,c,m,b){const S=m.paint.get("fill-extrusion-opacity");if(S!==0&&v.renderPass==="translucent"){const A=new o.DepthMode(v.context.gl.LEQUAL,o.DepthMode.ReadWrite,v.depthRangeFor3D);if(S!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Gh(v,c,m,b,A,o.StencilMode.disabled,o.ColorMode.disabled),Gh(v,c,m,b,A,v.stencilModeFor3D(),v.colorModeForRenderPass()),v.resetStencilClippingMasks();else{const O=v.colorModeForRenderPass();Gh(v,c,m,b,A,o.StencilMode.disabled,O)}}},hillshade:function(v,c,m,b){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const S=v.context,A=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),O=v.colorModeForRenderPass(),z=v.terrain&&v.terrain.renderingToTexture,[U,Y]=v.renderPass!=="translucent"||z?[{},b]:v.stencilConfigForOverlap(b);for(const W of Y){const re=c.getTile(W);if(re.needsHillshadePrepare&&v.renderPass==="offscreen")_o(v,re,m,A,o.StencilMode.disabled,O);else if(v.renderPass==="translucent"){const ye=z&&v.terrain?v.terrain.stencilModeForRTTOverlap(W):U[W.overscaledZ];hf(v,W,re,m,A,ye,O)}}S.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,c,m,b,S,A){if(v.renderPass!=="translucent"||m.paint.get("raster-opacity")===0||!b.length)return;const O=v.context,z=O.gl,U=c.getSource(),Y=v.useProgram("raster"),W=v.colorModeForRenderPass(),re=v.terrain&&v.terrain.renderingToTexture,[ye,we]=U instanceof Jn||re?[{},b]:v.stencilConfigForOverlap(b),Se=we[we.length-1].overscaledZ,Te=!v.options.moving;for(const Ae of we){const oe=re?o.DepthMode.disabled:v.depthModeForSublayer(Ae.overscaledZ-Se,m.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,z.LESS),be=Ae.toUnwrapped(),Pe=c.getTile(Ae);if(re&&(!Pe||!Pe.hasData()))continue;const Le=re?Ae.projMatrix:v.transform.calculateProjMatrix(be,Te),$e=v.terrain&&re?v.terrain.stencilModeForRTTOverlap(Ae):ye[Ae.overscaledZ],He=A?0:m.paint.get("raster-fade-duration");Pe.registerFadeDuration(He);const qe=c.findLoadedParent(Ae,0),Je=hn(Pe,qe,c,v.transform,He);let Qe,ct;v.terrain&&v.terrain.prepareDrawTile();const Ut=m.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;O.activeTexture.set(z.TEXTURE0),Pe.texture.bind(Ut,z.CLAMP_TO_EDGE),O.activeTexture.set(z.TEXTURE1),qe?(qe.texture.bind(Ut,z.CLAMP_TO_EDGE),Qe=Math.pow(2,qe.tileID.overscaledZ-Pe.tileID.overscaledZ),ct=[Pe.tileID.canonical.x*Qe%1,Pe.tileID.canonical.y*Qe%1]):Pe.texture.bind(Ut,z.CLAMP_TO_EDGE),Pe.texture.useMipmap&&O.extTextureFilterAnisotropic&&v.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);const it=Rp(Le,ct||[0,0],Qe||1,Je,m,U instanceof Jn?U.perspectiveTransform:[0,0]);if(v.prepareDrawProgram(O,Y,be),U instanceof Jn)U.boundsBuffer&&U.boundsSegments&&Y.draw(O,z.TRIANGLES,oe,o.StencilMode.disabled,W,o.CullFaceMode.disabled,it,m.id,U.boundsBuffer,v.quadTriangleIndexBuffer,U.boundsSegments);else{const{tileBoundsBuffer:vt,tileBoundsIndexBuffer:lt,tileBoundsSegments:zt}=v.getTileBoundsBuffers(Pe);Y.draw(O,z.TRIANGLES,oe,$e,W,o.CullFaceMode.disabled,it,m.id,vt,lt,zt)}}v.resetStencilClippingMasks()},background:function(v,c,m,b){const S=m.paint.get("background-color"),A=m.paint.get("background-opacity");if(A===0)return;const O=v.context,z=O.gl,U=v.transform,Y=U.tileSize,W=m.paint.get("background-pattern");if(v.isPatternMissing(W))return;const re=!W&&S.a===1&&A===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==re)return;const ye=o.StencilMode.disabled,we=v.depthModeForSublayer(0,re==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),Se=v.colorModeForRenderPass(),Te=v.useProgram(W?"backgroundPattern":"background");let Ae,oe=b;oe||(Ae=v.getBackgroundTiles(),oe=Object.values(Ae).map((be=>be.tileID))),W&&(O.activeTexture.set(z.TEXTURE0),v.imageManager.bind(v.context));for(const be of oe){const Pe=be.toUnwrapped(),Le=b?be.projMatrix:v.transform.calculateProjMatrix(Pe);v.prepareDrawTile();const $e=c?c.getTile(be):Ae?Ae[be.key]:new o.Tile(be,Y,U.zoom,v),He=W?Ea(Le,A,v,W,{tileID:be,tileSize:Y}):hg(Le,A,S);v.prepareDrawProgram(O,Te,Pe);const{tileBoundsBuffer:qe,tileBoundsIndexBuffer:Je,tileBoundsSegments:Qe}=v.getTileBoundsBuffers($e);Te.draw(O,z.TRIANGLES,we,ye,Se,o.CullFaceMode.disabled,He,m.id,qe,Je,Qe)}},sky:function(v,c,m){const b=v.transform,S=b.projection.name==="mercator"||b.projection.name==="globe"?1:o.smoothstep(7,8,b.zoom),A=m.paint.get("sky-opacity")*S;if(A===0)return;const O=v.context,z=m.paint.get("sky-type"),U=new o.DepthMode(O.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),Y=v.frameCounter/1e3%1;z==="atmosphere"?v.renderPass==="offscreen"?m.needsSkyboxCapture(v)&&((function(W,re,ye,we){const Se=W.context,Te=Se.gl;let Ae=re.skyboxFbo;if(!Ae){Ae=re.skyboxFbo=Se.createFramebuffer(32,32,!1),re.skyboxGeometry=new gf(Se),re.skyboxTexture=Se.gl.createTexture(),Te.bindTexture(Te.TEXTURE_CUBE_MAP,re.skyboxTexture),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_CUBE_MAP,Te.TEXTURE_MAG_FILTER,Te.LINEAR);for(let Le=0;Le<6;++Le)Te.texImage2D(Te.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Te.RGBA,32,32,0,Te.RGBA,Te.UNSIGNED_BYTE,null)}Se.bindFramebuffer.set(Ae.framebuffer),Se.viewport.set([0,0,32,32]);const oe=re.getCenter(W,!0),be=W.useProgram("skyboxCapture"),Pe=new Float64Array(16);o.identity(Pe),o.rotateY(Pe,Pe,.5*-Math.PI),oa(Se,re,be,Pe,oe,0),o.identity(Pe),o.rotateY(Pe,Pe,.5*Math.PI),oa(Se,re,be,Pe,oe,1),o.identity(Pe),o.rotateX(Pe,Pe,.5*-Math.PI),oa(Se,re,be,Pe,oe,2),o.identity(Pe),o.rotateX(Pe,Pe,.5*Math.PI),oa(Se,re,be,Pe,oe,3),o.identity(Pe),oa(Se,re,be,Pe,oe,4),o.identity(Pe),o.rotateY(Pe,Pe,Math.PI),oa(Se,re,be,Pe,oe,5),Se.viewport.set([0,0,W.width,W.height])})(v,m),m.markSkyboxValid(v)):v.renderPass==="sky"&&(function(W,re,ye,we,Se){const Te=W.context,Ae=Te.gl,oe=W.transform,be=W.useProgram("skybox");Te.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_CUBE_MAP,re.skyboxTexture);const Pe=((Le,$e,He,qe,Je)=>({u_matrix:Le,u_sun_direction:$e,u_cubemap:0,u_opacity:qe,u_temporal_offset:Je}))(oe.skyboxMatrix,re.getCenter(W,!1),0,we,Se);W.prepareDrawProgram(Te,be),be.draw(Te,Ae.TRIANGLES,ye,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,Pe,"skybox",re.skyboxGeometry.vertexBuffer,re.skyboxGeometry.indexBuffer,re.skyboxGeometry.segment)})(v,m,U,A,Y):z==="gradient"&&v.renderPass==="sky"&&(function(W,re,ye,we,Se){const Te=W.context,Ae=Te.gl,oe=W.transform,be=W.useProgram("skyboxGradient");re.skyboxGeometry||(re.skyboxGeometry=new gf(Te)),Te.activeTexture.set(Ae.TEXTURE0);let Pe=re.colorRampTexture;Pe||(Pe=re.colorRampTexture=new o.Texture(Te,re.colorRamp,Ae.RGBA)),Pe.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE);const Le=(($e,He,qe,Je,Qe)=>({u_matrix:$e,u_color_ramp:0,u_center_direction:He,u_radius:o.degToRad(qe),u_opacity:Je,u_temporal_offset:Qe}))(oe.skyboxMatrix,re.getCenter(W,!1),re.paint.get("sky-gradient-radius"),we,Se);W.prepareDrawProgram(Te,be),be.draw(Te,Ae.TRIANGLES,ye,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,Le,"skyboxGradient",re.skyboxGeometry.vertexBuffer,re.skyboxGeometry.indexBuffer,re.skyboxGeometry.segment)})(v,m,U,A,Y)},debug:function(v,c,m){for(let b=0;b<m.length;b++)Wy(v,c,m[b])},custom:function(v,c,m,b){const S=v.context,A=m.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&m.isLayerDraped()){if(v.renderPass==="offscreen"){const O=A.prerender;if(O){if(v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const z=v.transform.pointMerc;O.call(A,S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(v.transform.zoom),[z.x,z.y],v.transform.pixelsPerMeterRatio)}else O.call(A,S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const z=A.renderToTile;if(z){const U=b[0].canonical,Y=new o.MercatorCoordinate(U.x+b[0].wrap*(1<<U.z),U.y,U.z);S.setDepthMode(o.DepthMode.disabled),S.setStencilMode(o.StencilMode.disabled),S.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),z.call(A,S.gl,Y),S.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),S.setColorMode(v.colorModeForRenderPass()),S.setStencilMode(o.StencilMode.disabled);const O=A.renderingMode==="3d"?new o.DepthMode(v.context.gl.LEQUAL,o.DepthMode.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(S.setDepthMode(O),v.transform.projection.name==="globe"){const z=v.transform.pointMerc;A.render(S.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(v.transform.zoom),[z.x,z.y],v.transform.pixelsPerMeterRatio)}else A.render(S.gl,v.transform.customLayerMatrix());S.setDirty(),v.setBaseState(),S.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class wl{constructor(c,m,b=!1){this.context=new Yt(c,b),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,m){const b=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Gi(this,c));const S=this._terrain;this.transform.elevation=b?S:null,S.update(c,this.transform,m)}_updateFog(c){const m=c.fog;if(!m||this.transform.projection.name==="globe"||m.getOpacity(this.transform.pitch)<1||m.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,S]=m.getFovAdjustedRange(this.transform._fov);if(b>S)return void(this.transform.fogCullDistSq=null);const A=b+.78*(S-b);this.transform.fogCullDistSq=A*A}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,m){if(this.width=c*o.exported.devicePixelRatio,this.height=m*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const c=this.context,m=new o.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(o.EXTENT,0),m.emplaceBack(0,o.EXTENT),m.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(m,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const b=new o.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(o.EXTENT,0),b.emplaceBack(0,o.EXTENT),b.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(b,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const S=new o.StructArrayLayout2i4;S.emplaceBack(-1,-1),S.emplaceBack(1,-1),S.emplaceBack(-1,1),S.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(S,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const A=new o.StructArrayLayout4i8;A.emplaceBack(0,0,0,0),A.emplaceBack(o.EXTENT,0,o.EXTENT,0),A.emplaceBack(0,o.EXTENT,0,o.EXTENT),A.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(A,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const O=new o.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(O);const z=new o.StructArrayLayout1ui2;for(const Y of[0,1,3,2,0])z.emplaceBack(Y);this.debugIndexBuffer=c.createIndexBuffer(z),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const U=this.context.gl;this.stencilClearMode=new o.StencilMode({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new yf(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,m=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,m.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,_t(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,m,b){if(!m||this.currentStencilSource===m.id||!c.isTileClipped()||!b||b.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const U of b)if(this._tileClippingMaskIDs[U.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=m.id;const S=this.context,A=S.gl;this.nextStencilID+b.length>256&&this.clearStencil(),S.setColorMode(o.ColorMode.disabled),S.setDepthMode(o.DepthMode.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of b){const U=m.getTile(z),Y=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:re,tileBoundsSegments:ye}=this.getTileBoundsBuffers(U);O.draw(S,A.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:A.ALWAYS,mask:0},Y,255,A.KEEP,A.KEEP,A.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,_t(z.projMatrix),"$clipping",W,re,ye)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,m=this.context.gl;return new o.StencilMode({func:m.NOTEQUAL,mask:255},c,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const m=this.context.gl;return new o.StencilMode({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,m.KEEP,m.KEEP,m.REPLACE)}stencilConfigForOverlap(c){const m=this.context.gl,b=c.sort(((O,z)=>z.overscaledZ-O.overscaledZ)),S=b[b.length-1].overscaledZ,A=b[0].overscaledZ-S+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const O={};for(let z=0;z<A;z++)O[z+S]=new o.StencilMode({func:m.GEQUAL,mask:255},z+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=A,[O,b]}return[{[S]:o.StencilMode.disabled},b]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,m,b){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(b||this.context.gl.LEQUAL,m,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,m){this.style=c,this.options=m,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const b=this.style.order,S=this.style._sourceCaches;for(const Y in S){const W=S[Y];W.used&&W.prepare(this.context)}const A={},O={},z={};for(const Y in S){const W=S[Y];A[Y]=W.getVisibleCoordinates(),O[Y]=A[Y].slice().reverse(),z[Y]=W.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<b.length;Y++)if(this.style._layers[b[Y]].is3D()){this.opaquePassCutoff=Y;break}if(this.terrain&&(this.terrain.updateTileBinding(z),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const Y of b){const W=this.style._layers[Y],re=c._getLayerSourceCache(W);if(!W.hasOffscreenPass()||W.isHidden(this.transform.zoom))continue;const ye=re?O[re.id]:void 0;(W.type==="custom"||W.isSky()||ye&&ye.length)&&this.renderLayer(this,re,W,ye)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const U=this.terrain;if(U&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&U.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:m.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=m.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[b[this.currentLayer]],W=c._getLayerSourceCache(Y);if(Y.isSky())continue;const re=W?O[W.id]:void 0;this._renderTileClippingMasks(Y,W,re),this.renderLayer(this,W,Y,re)}if(this.style.fog&&this.transform.projection.supportsFog&&(function(Y,W){const re=Y.context,ye=re.gl,we=Y.transform,Se=new o.DepthMode(ye.LEQUAL,o.DepthMode.ReadOnly,[0,1]),Te=Y.useProgram("globeAtmosphere",null,we.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ae=o.globeToMercatorTransition(we.zoom),oe=W.properties.get("color").toArray01(),be=W.properties.get("high-color").toArray01(),Pe=W.properties.get("space-color").toArray01PremultipliedAlpha(),Le=o.identity$1([]);o.rotateY$1(Le,Le,-o.degToRad(we._center.lng)),o.rotateX$1(Le,Le,o.degToRad(we._center.lat)),o.rotateZ$1(Le,Le,we.angle),o.rotateX$1(Le,Le,-we._pitch);const $e=o.fromQuat(new Float32Array(16),Le),He=o.mapValue(W.properties.get("star-intensity"),0,1,0,.25),qe=5e-4,Je=o.mapValue(W.properties.get("horizon-blend"),0,1,qe,.25),Qe=o.globeUseCustomAntiAliasing(Y,re,we)&&Je===qe?we.worldSize/(2*Math.PI*1.025)-1:we.globeRadius,ct=Y.frameCounter/1e3%1,Ut=o.length(we.globeCenterInViewSpace),it=Math.sqrt(Math.pow(Ut,2)-Math.pow(Qe,2)),vt=Math.acos(it/Ut),lt=((ot,Et,Nt,St,It,Sn,zn,Bt,ln,Ln,ar,xn,kr,Qr)=>({u_frustum_tl:ot,u_frustum_tr:Et,u_frustum_br:Nt,u_frustum_bl:St,u_horizon:It,u_transition:Sn,u_fadeout_range:zn,u_color:Bt,u_high_color:ln,u_space_color:Ln,u_star_intensity:ar,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:xn,u_horizon_angle:kr,u_rotation_matrix:Qr}))(we.frustumCorners.TL,we.frustumCorners.TR,we.frustumCorners.BR,we.frustumCorners.BL,we.frustumCorners.horizon,Ae,Je,oe,be,Pe,He,ct,vt,$e);Y.prepareDrawProgram(re,Te);const zt=Y.atmosphereBuffer;zt&&Te.draw(re,ye.TRIANGLES,Se,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,lt,"skybox",zt.vertexBuffer,zt.indexBuffer,zt.segments)})(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Y=this.style._layers[b[this.currentLayer]],W=c._getLayerSourceCache(Y);Y.isSky()&&this.renderLayer(this,W,Y,W?O[W.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const Y=this.style._layers[b[this.currentLayer]],W=c._getLayerSourceCache(Y);if(Y.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Y)){if(Y.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const re=W?(Y.type==="symbol"?z:O)[W.id]:void 0;this._renderTileClippingMasks(Y,W,W?A[W.id]:void 0),this.renderLayer(this,W,Y,re),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Y=null;o.values(this.style._layers).forEach((W=>{const re=c._getLayerSourceCache(W);re&&!W.isHidden(this.transform.zoom)&&(!Y||Y.getSource().maxzoom<re.getSource().maxzoom)&&(Y=re)})),Y&&this.options.showTileBoundaries&&Ws.debug(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&(function(Y){const W=Y.transform.padding;yg(Y,Y.transform.height-(W.top||0),3,Ya),yg(Y,W.bottom||0,3,Wh),mf(Y,W.left||0,3,gg),mf(Y,Y.transform.width-(W.right||0),3,Gy);const re=Y.transform.centerPoint;(function(ye,we,Se,Te){Yh(ye,we-1,Se-10,2,20,Te),Yh(ye,we-10,Se-1,20,2,Te)})(Y,re.x,Y.transform.height-re.y,Gu)})(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,m,b,S){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="sky"||b.type==="custom"||S&&S.length)&&(this.id=b.id,this.gpuTimingStart(b),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(b.type)||c.terrain&&b.type==="custom")&&Ws[b.type](c,m,b,S,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const m=this.context.extTimerQuery;let b=this.gpuTimers[c.id];b||(b=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:m.createQueryEXT()}),b.calls++,m.beginQueryEXT(m.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,m=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(m),c.beginQueryEXT(c.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const m={};for(const b in c){const S=c[b],A=this.context.extTimerQuery,O=A.getQueryObjectEXT(S.query,A.QUERY_RESULT_EXT)/1e6;A.deleteQueryEXT(S.query),m[b]=O}return m}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const m=this.context.extTimerQuery;let b=0;for(const S of c)b+=m.getQueryObjectEXT(S,m.QUERY_RESULT_EXT)/1e6,m.deleteQueryEXT(S);return b}translatePosMatrix(c,m,b,S,A){if(!b[0]&&!b[1])return c;const O=A?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(O){const Y=Math.sin(O),W=Math.cos(O);b=[b[0]*W-b[1]*Y,b[0]*Y+b[1]*W]}const z=[A?b[0]:et(m,b[0],this.transform.zoom),A?b[1]:et(m,b[1],this.transform.zoom),0],U=new Float32Array(16);return o.translate(U,c,z),U}saveTileTexture(c){const m=this._tileTextures[c.size[0]];m?m.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const m=this._tileTextures[c];return m&&m.length>0?m.pop():null}isPatternMissing(c){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,m=this.terrain&&this.terrain.exaggeration()===0,b=this.style&&this.style.fog,S=[];return this.terrainRenderModeElevated()&&S.push("TERRAIN"),this.transform.projection.name==="globe"&&S.push("GLOBE"),m&&S.push("ZERO_EXAGGERATION"),b&&!c&&b.getOpacity(this.transform.pitch)!==0&&S.push("FOG"),c&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}useProgram(c,m,b){this.cache=this.cache||{};const S=b||[],A=this.currentGlobalDefines().concat(S),O=rr.cacheKey(Fh[c],c,A,m);return this.cache[O]||(this.cache[O]=new rr(this.context,c,Fh[c],m,$u[c],A)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,m,b){if(this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const A=S.getOpacity(this.transform.pitch),O=((z,U,Y,W,re,ye,we,Se,Te,Ae,oe)=>{const be=z.transform,Pe=U.properties.get("color").toArray01();Pe[3]=W;const Le=z.frameCounter/1e3%1;return{u_fog_matrix:Y?be.calculateFogTileMatrix(Y):z.identityMat,u_fog_range:U.getFovAdjustedRange(be._fov),u_fog_color:Pe,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_temporal_offset:Le,u_frustum_tl:re,u_frustum_tr:ye,u_frustum_br:we,u_frustum_bl:Se,u_globe_pos:Te,u_globe_radius:Ae,u_viewport:oe,u_globe_transition:o.globeToMercatorTransition(be.zoom),u_is_globe:+(be.projection.name==="globe")}})(this,S,b,A,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);m.setFogUniformValues(c,O)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,m=c.createTexture();return c.bindTexture(c.TEXTURE_2D,m),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),m}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,m=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const S of b)m[S.key]=c[S.key]||new o.Tile(S,512,this.transform.tileZoom,this);return m}clearBackgroundTiles(){this._backgroundTiles={}}}class Xh{constructor(c=0,m=0,b=0,S=0){if(isNaN(c)||c<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=m,this.left=b,this.right=S}interpolate(c,m,b){return m.top!=null&&c.top!=null&&(this.top=o.number(c.top,m.top,b)),m.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,m.bottom,b)),m.left!=null&&c.left!=null&&(this.left=o.number(c.left,m.left,b)),m.right!=null&&c.right!=null&&(this.right=o.number(c.right,m.right,b)),this}getCenter(c,m){const b=o.clamp((this.left+c-this.right)/2,0,c),S=o.clamp((this.top+m-this.bottom)/2,0,m);return new o.Point(b,S)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Xh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Wu(v,c){const m=o.getColumn(v,3);o.fromQuat(v,c),o.setColumn(v,3,m)}function Dr(v,c){const m=o.identity$1([]);return o.rotateZ$1(m,m,-c),o.rotateX$1(m,m,-v),m}function Yu(v,c){const m=[v[0],v[1],0],b=[c[0],c[1],0];if(o.length(m)>=1e-15){const O=o.normalize([],m);o.scale$2(b,O,o.dot(b,O)),c[0]=b[0],c[1]=b[1]}const S=o.cross([],c,v);if(o.len(S)<1e-15)return null;const A=Math.atan2(-S[1],S[0]);return Dr(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),A)}class Jc{constructor(c,m){this.position=c,this.orientation=m}get position(){return this._position}set position(c){if(c){const m=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(m.x=o.wrap(m.x,0,1)),this._position=m}else this._position=null}lookAtPoint(c,m){if(this.orientation=null,!this.position)return;const b=this.position,S=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,A=o.MercatorCoordinate.fromLngLat(c,S),O=[A.x-b.x,A.y-b.y,A.z-b.z];m||(m=[0,0,1]),m[2]=Math.abs(m[2]),this.orientation=Yu(O,m)}setPitchBearing(c,m){this.orientation=Dr(o.degToRad(c),o.degToRad(-m))}}class _f{constructor(c,m){this._transform=o.identity([]),this.orientation=m,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var m;c&&o.setColumn(this._transform,3,[(m=c)[0],m[1],m[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&Wu(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),m=this.right();return{bearing:Math.atan2(-m[1],m[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,m){this._orientation=Dr(c,m),Wu(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,m){const b=new Float64Array(16);return o.invert(b,this.getWorldToCamera(c,m)),b}getWorldToCameraPosition(c,m,b){const S=this.position;o.scale$2(S,S,-c);const A=new Float64Array(16);return o.fromScaling(A,[b,b,b]),o.translate(A,A,S),A[10]*=m,A}getWorldToCamera(c,m){const b=new Float64Array(16),S=new Float64Array(4),A=this.position;return o.conjugate(S,this._orientation),o.scale$2(A,A,-c),o.fromQuat(b,S),o.translate(b,b,A),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=m,b[9]*=m,b[10]*=m,b[11]*=m,b}getCameraToClipPerspective(c,m,b,S){const A=new Float64Array(16);return o.perspective(A,c,m,b,S),A}getDistanceToElevation(c,m=!1){const b=c===0?0:o.mercatorZfromAltitude(c,m?o.latFromMercatorY(this.position[1]):this.position[1]),S=this.forward();return(b-this.position[2])/S[2]}clone(){return new _f([...this.position],[...this.orientation])}}function gc(v,c){const m=Lp(v.projection,v.zoom,v.width,v.height),b=(function(A,O,z,U,Y){const W=new o.LngLat(z.lng-180*bs,z.lat),re=new o.LngLat(z.lng+180*bs,z.lat),ye=A.project(W.lng,W.lat),we=A.project(re.lng,re.lat),Se=-Math.atan2(we.y-ye.y,we.x-ye.x),Te=o.MercatorCoordinate.fromLngLat(z);Te.y=o.clamp(Te.y,-1+bs,1-bs);const Ae=Te.toLngLat(),oe=A.project(Ae.lng,Ae.lat),be=o.MercatorCoordinate.fromLngLat(Ae);be.x+=bs;const Pe=be.toLngLat(),Le=A.project(Pe.lng,Pe.lat),$e=Xa(Le.x-oe.x,Le.y-oe.y,Se),He=o.MercatorCoordinate.fromLngLat(Ae);He.y+=bs;const qe=He.toLngLat(),Je=A.project(qe.lng,qe.lat),Qe=Xa(Je.x-oe.x,Je.y-oe.y,Se),ct=Math.abs($e.x)/Math.abs(Qe.y),Ut=o.identity([]);o.rotateZ(Ut,Ut,-Se*(1-(Y?0:U)));const it=o.identity([]);return o.scale(it,it,[1,1-(1-ct)*U,1]),it[4]=-Qe.x/Qe.y*U,o.rotateZ(it,it,Se),o.multiply(it,Ut,it),it})(v.projection,0,v.center,m,c),S=Xu(v);return o.scale(b,b,[S,S,1]),b}function Xu(v){const c=v.projection,m=Lp(v.projection,v.zoom,v.width,v.height),b=Op(c,v.center),S=Op(c,o.LngLat.convert(c.center));return Math.pow(2,b*m+(1-m)*S)}function Lp(v,c,m,b,S=1/0){const A=v.range;if(!A)return 0;const O=Math.min(S,Math.max(m,b)),z=Math.log(O/1024)/Math.LN2;return o.smoothstep(A[0]+z,A[1]+z,c)}const bs=1/4e4;function Op(v,c){const m=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),b=new o.LngLat(c.lng-180*bs,m),S=new o.LngLat(c.lng+180*bs,m),A=v.project(b.lng,m),O=v.project(S.lng,m),z=o.MercatorCoordinate.fromLngLat(b),U=o.MercatorCoordinate.fromLngLat(S),Y=O.x-A.x,W=O.y-A.y,re=U.x-z.x,ye=U.y-z.y,we=Math.sqrt((re*re+ye*ye)/(Y*Y+W*W));return Math.log(we)/Math.LN2}function Xa(v,c,m){const b=Math.cos(m),S=Math.sin(m);return{x:v*b-c*S,y:v*S+c*b}}class Ku{constructor(c,m,b,S,A,O,z){this.tileSize=512,this._renderWorldCopies=A===void 0||A,this._minZoom=c||0,this._maxZoom=m||22,this._minPitch=b??0,this._maxPitch=S??60,this.setProjection(O),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Xh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new _f,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new Ku(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,m=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||b)&&this._updateCameraOnTerrain(),(c||b)&&this._constrainCamera(m),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const m=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const b=!T(m,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const m=c!==this.projection.name;return m&&this._calcMatrices(),m}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const m=-c*Math.PI/180;var b;this.angle!==m&&(this._unmodified=!1,this.angle=m,this._calcMatrices(),this.rotationMatrix=(b=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),(function(S,A,O){var z=A[0],U=A[1],Y=A[2],W=A[3],re=Math.sin(O),ye=Math.cos(O);S[0]=z*ye+Y*re,S[1]=U*ye+W*re,S[2]=z*-re+Y*ye,S[3]=U*-re+W*ye})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const m=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==m&&(this._unmodified=!1,this._pitch=m,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const m=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==m&&(this._unmodified=!1,this._setZoom(m),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,m=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let S=0,A=0;for(let O=0;O<m.length;O++){const z=new o.Point(m[O][0]*this.width,b+m[O][1]*(this.height-b)),U=c.pointCoordinate(z);if(!U)continue;const Y=1/Math.hypot(U[0]-this._camera.position[0],U[1]-this._camera.position[1]);S+=U[3]*Y,A+=Y}return A===0?NaN:S/A}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,m=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*m,S=this._mercatorZfromZoom(c),A=this._mercatorZfromZoom(this._maxZoom),O=Math.max(S-b,A);this._setZoom(this._zoomFromMercatorZ(O))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const m=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let b;b=c.z<this._camera.position[2]?[m.x,m.y,m.z]:[c.x,c.y,c.z];const S=o.length(o.sub([],this._camera.position,b));return o.clamp(this._zoomFromMercatorZ(S),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let m=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(m=this._setCameraOrientation(c.orientation)),c.position){const b=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),m=!0)}m&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,m=new Jc;return m.position=new o.MercatorCoordinate(c[0],c[1],c[2]),m.orientation=this._camera.orientation,m._elevation=this.elevation,m._renderWorldCopies=this.renderWorldCopies,m}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const m=o.transformQuat([],[0,0,-1],c),b=o.transformQuat([],[0,-1,0],c);if(b[2]<0)return!1;const S=Yu(m,b);return!!S&&(this._camera.orientation=S,!0)}_setCameraPosition(c){const m=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,S=this.cameraToCenterDistance;c[2]=o.clamp(c[2],S/b,S/m),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,m,b){this._unmodified=!1,this._edgeInsets.interpolate(c,m,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const m=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,m)}getVisibleUnwrappedCoordinates(c){const m=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const b=this.pointCoordinate(new o.Point(0,0)),S=this.pointCoordinate(new o.Point(this.width,0)),A=this.pointCoordinate(new o.Point(this.width,this.height)),O=this.pointCoordinate(new o.Point(0,this.height)),z=Math.floor(Math.min(b.x,S.x,A.x,O.x)),U=Math.floor(Math.max(b.x,S.x,A.x,O.x)),Y=1;for(let W=z-Y;W<=U+Y;W++)W!==0&&m.push(new o.UnwrappedTileID(W,c))}return m}coveringTiles(c){let m=this.coveringZoomLevel(c);const b=m,S=this.elevation&&!c.isTerrainDEM,A=this.projection.name==="mercator";if(c.minzoom!==void 0&&m<c.minzoom)return[];c.maxzoom!==void 0&&m>c.maxzoom&&(m=c.maxzoom);const O=this.locationCoordinate(this.center),z=this.center.lat,U=1<<m,Y=[U*O.x,U*O.y,0],W=this.projection.name==="globe",re=!W,ye=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m,re),we=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=U*o.mercatorZfromAltitude(1,this.center.lat),Te=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),Ae=[U*we.x,U*we.y,Te*(re?1:Se)],oe=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),be=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?m:0,Pe=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Le=c.isTerrainDEM?-Pe:this._elevation?this._elevation.getMinElevationBelowMSL():0,$e=this.projection.isReprojectedInTileSpace?Xu(this):1,He=ot=>{const Nt=new o.MercatorCoordinate(ot.x+25e-6,ot.y,ot.z),St=new o.MercatorCoordinate(ot.x,ot.y+25e-6,ot.z),It=ot.toLngLat(),Sn=Nt.toLngLat(),zn=St.toLngLat(),Bt=this.locationCoordinate(It),ln=this.locationCoordinate(Sn),Ln=this.locationCoordinate(zn),ar=Math.hypot(ln.x-Bt.x,ln.y-Bt.y),xn=Math.hypot(Ln.x-Bt.x,Ln.y-Bt.y);return Math.sqrt(ar*xn)*$e/25e-6},qe=ot=>{const Et=Pe,Nt=Le;return{aabb:o.tileAABB(this,U,0,0,0,ot,Nt,Et,this.projection),zoom:0,x:0,y:0,minZ:Nt,maxZ:Et,wrap:ot,fullyVisible:!1}},Je=[];let Qe=[];const ct=m,Ut=c.reparseOverscaled?b:m,it=ot=>ot*ot,vt=it((Te-this._centerAltitude)*Se),lt=ot=>{if(!this._elevation||!ot.tileID||!A)return;const Et=this._elevation.getMinMaxForTile(ot.tileID),Nt=ot.aabb;Et?(Nt.min[2]=Et.min,Nt.max[2]=Et.max,Nt.center[2]=(Nt.min[2]+Nt.max[2])/2):(ot.shouldSplit=zt(ot),ot.shouldSplit||(Nt.min[2]=Nt.max[2]=Nt.center[2]=this._centerAltitude))},zt=ot=>{if(ot.zoom<be)return!0;if(ot.zoom===ct)return!1;if(ot.shouldSplit!=null)return ot.shouldSplit;const Et=ot.aabb.distanceX(Ae),Nt=ot.aabb.distanceY(Ae);let St=vt,It=1;if(W){St=it(ot.aabb.distanceZ(Ae));const Bt=Math.pow(2,ot.zoom),ln=o.latFromMercatorY((ot.y+1)/Bt),Ln=o.latFromMercatorY(ot.y/Bt),ar=Math.min(Math.max(z,ln),Ln),xn=o.circumferenceAtLatitude(ar)/o.circumferenceAtLatitude(z);if(It=ar===z?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,xn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&ot.zoom===ct-1&&xn>=.9)return!0}else if(S&&(St=it(ot.aabb.distanceZ(Ae)*Se)),this.projection.isReprojectedInTileSpace&&b<=5){const Bt=Math.pow(2,ot.zoom),ln=He(new o.MercatorCoordinate((ot.x+.5)/Bt,(ot.y+.5)/Bt));It=ln>.85?1:ln}const Sn=Et*Et+Nt*Nt+St,zn=it((1<<ct-ot.zoom)*oe*It*((Bt,ln)=>{if(ln*it(.707)<Bt)return 1;const Ln=Math.sqrt(ln/Bt);return Ln/(1.4144271570014144+(Math.pow(1.1,Ln-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(St,vt),Sn));return Sn<zn};if(this.renderWorldCopies)for(let ot=1;ot<=3;ot++)Je.push(qe(-ot)),Je.push(qe(ot));for(Je.push(qe(0));Je.length>0;){const ot=Je.pop(),Et=ot.x,Nt=ot.y;let St=ot.fullyVisible;if(!St){const It=ot.aabb.intersects(ye);if(It===0)continue;St=It===2}if(ot.zoom!==ct&&zt(ot))for(let It=0;It<4;It++){const Sn=(Et<<1)+It%2,zn=(Nt<<1)+(It>>1),Bt={aabb:A?ot.aabb.quadrant(It):o.tileAABB(this,U,ot.zoom+1,Sn,zn,ot.wrap,ot.minZ,ot.maxZ,this.projection),zoom:ot.zoom+1,x:Sn,y:zn,wrap:ot.wrap,fullyVisible:St,tileID:void 0,shouldSplit:void 0,minZ:ot.minZ,maxZ:ot.maxZ};S&&!W&&(Bt.tileID=new o.OverscaledTileID(ot.zoom+1===ct?Ut:ot.zoom+1,ot.wrap,ot.zoom+1,Sn,zn),lt(Bt)),Je.push(Bt)}else{const It=ot.zoom===ct?Ut:ot.zoom;if(c.minzoom&&c.minzoom>It)continue;const Sn=Y[0]-(.5+Et+(ot.wrap<<ot.zoom))*(1<<m-ot.zoom),zn=Y[1]-.5-Nt,Bt=ot.tileID?ot.tileID:new o.OverscaledTileID(It,ot.wrap,ot.zoom,Et,Nt);Qe.push({tileID:Bt,distanceSq:Sn*Sn+zn*zn})}}if(this.fogCullDistSq){const ot=this.fogCullDistSq,Et=this.horizonLineFromTop();Qe=Qe.filter((Nt=>{const St=[0,0,0,1],It=[o.EXTENT,o.EXTENT,0,1],Sn=this.calculateFogTileMatrix(Nt.tileID.toUnwrapped());o.transformMat4$1(St,St,Sn),o.transformMat4$1(It,It,Sn);const zn=o.getAABBPointSquareDist(St,It);if(zn===0)return!0;let Bt=!1;const ln=this._elevation;if(ln&&zn>ot&&Et!==0){const Ln=this.calculateProjMatrix(Nt.tileID.toUnwrapped());let ar;c.isTerrainDEM||(ar=ln.getMinMaxForTile(Nt.tileID)),ar||(ar={min:Le,max:Pe});const xn=o.furthestTileCorner(this.rotation),kr=[xn[0]*o.EXTENT,xn[1]*o.EXTENT,ar.max];o.transformMat4(kr,kr,Ln),Bt=(1-kr[1])*this.height*.5<Et}return zn<ot||Bt}))}return Qe.sort(((ot,Et)=>ot.distanceSq-Et.distanceSq)).map((ot=>ot.tileID))}resize(c,m){this.width=c,this.height=m,this.pixelsToGLUnits=[2/c,-2/m],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const m=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),b=this.projection.project(c.lng,m);return new o.Point(b.x*this.worldSize,b.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,m){let b,S;const A=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;b=(m.x-A.x)/z,S=(m.y-A.y)/z}else{const z=this.pointCoordinate(m),U=this.pointCoordinate(A);b=z.x-U.x,S=z.y-U.y}const O=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(O.x-b,O.y-S))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,m){const b=m?o.mercatorZfromAltitude(m,c.lat):void 0,S=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(S.x,S.y,b)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,m){const b=m??this._centerAltitude,S=[c.x,c.y,0,1],A=[c.x,c.y,1,1];o.transformMat4$1(S,S,this.pixelMatrixInverse),o.transformMat4$1(A,A,this.pixelMatrixInverse);const O=A[3];o.scale$1(S,S,1/S[3]),o.scale$1(A,A,1/O);const z=S[2],U=A[2];return{p0:S,p1:A,t:z===U?0:(b-z)/(U-z)}}screenPointToMercatorRay(c){const m=[c.x,c.y,0,1],b=[c.x,c.y,1,1];return o.transformMat4$1(m,m,this.pixelMatrixInverse),o.transformMat4$1(b,b,this.pixelMatrixInverse),o.scale$1(m,m,1/m[3]),o.scale$1(b,b,1/b[3]),m[2]=o.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,b[2]=o.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,o.scale$1(m,m,1/this.worldSize),o.scale$1(b,b,1/this.worldSize),new o.Ray([m[0],m[1],m[2]],o.normalize([],o.sub([],b,m)))}rayIntersectionCoordinate(c){const{p0:m,p1:b,t:S}=c,A=o.mercatorZfromAltitude(m[2],this._center.lat),O=o.mercatorZfromAltitude(b[2],this._center.lat);return new o.MercatorCoordinate(o.number(m[0],b[0],S)/this.worldSize,o.number(m[1],b[1],S)/this.worldSize,o.number(A,O,S))}pointCoordinate(c,m=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,m)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let m=this.projection.pointCoordinate3D(this,c.x,c.y);if(m)return new o.MercatorCoordinate(m[0],m[1],m[2]);let b=0,S=this.horizonLineFromTop();if(c.y>S)return this.pointCoordinate(c);const A=.02*S,O=c.clone();for(let z=0;z<10&&S-b>A;z++){O.y=o.number(b,S,.66);const U=this.projection.pointCoordinate3D(this,O.x,O.y);U?(S=O.y,m=U):b=O.y}return m?new o.MercatorCoordinate(m[0],m[1],m[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(c);const m=this.pointCoordinate(c);return m.y>=0&&m.y<=1}_coordinatePoint(c,m){const b=m&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,S=[c.x*this.worldSize,c.y*this.worldSize,b+c.toAltitude(),1];return o.transformMat4$1(S,S,this.pixelMatrix),S[3]>0?new o.Point(S[0]/S[3],S[1]/S[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:m}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,A=this.pointLocation3D(new o.Point(m,c)),O=this.pointLocation3D(new o.Point(S,c)),z=this.pointLocation3D(new o.Point(S,b)),U=this.pointLocation3D(new o.Point(m,b));let Y=Math.min(A.lng,O.lng,z.lng,U.lng),W=Math.max(A.lng,O.lng,z.lng,U.lng),re=Math.min(A.lat,O.lat,z.lat,U.lat),ye=Math.max(A.lat,O.lat,z.lat,U.lat);const we=Math.pow(2,-this.zoom)/16*270,Se=this.projection.name==="globe"?1:4,Te=(Ae,oe,be,Pe,Le)=>{const $e=(Ae+be)/2,He=(oe+Pe)/2,qe=new o.Point($e,He),{lng:Je,lat:Qe}=this.pointLocation3D(qe),ct=Math.max(0,Y-Je,re-Qe,Je-W,Qe-ye);Y=Math.min(Y,Je),W=Math.max(W,Je),re=Math.min(re,Qe),ye=Math.max(ye,Qe),(Le<Se||ct>we)&&(Te(Ae,oe,$e,He,Le+1),Te($e,He,be,Pe,Le+1))};if(Te(m,c,S,c,1),Te(S,c,S,b,1),Te(S,b,m,b,1),Te(m,b,m,c,1),this.projection.name==="globe"){const[Ae,oe]=o.polesInViewport(this);Ae?(ye=90,W=180,Y=-180):oe&&(re=-90,W=180,Y=-180)}return new o.LngLatBounds(new o.LngLat(Y,re),new o.LngLat(W,ye))}_getBoundsRectangular(c,m){const{top:b,left:S}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,O=this.width-this._edgeInsets.right,z=new o.Point(S,b),U=new o.Point(O,b),Y=new o.Point(O,A),W=new o.Point(S,A);let re=this.pointCoordinate(z,c),ye=this.pointCoordinate(U,c);const we=this.pointCoordinate(Y,m),Se=this.pointCoordinate(W,m),Te=(Ae,oe)=>(oe.y-Ae.y)/(oe.x-Ae.x);return re.y>1&&ye.y>=0?re=new o.MercatorCoordinate((1-Se.y)/Te(Se,re)+Se.x,1):re.y<0&&ye.y<=1&&(re=new o.MercatorCoordinate(-Se.y/Te(Se,re)+Se.x,0)),ye.y>1&&re.y>=0?ye=new o.MercatorCoordinate((1-we.y)/Te(we,ye)+we.x,1):ye.y<0&&re.y<=1&&(ye=new o.MercatorCoordinate(-we.y/Te(we,ye)+we.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(re)).extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(Se)).extend(this.coordinateLocation(we))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const m=c.visibleDemTiles.reduce(((b,S)=>{if(S.dem){const A=S.dem.tree;b.min=Math.min(b.min,A.minimums[0]),b.max=Math.max(b.max,A.maximums[0])}return b}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(m.min*c.exaggeration(),m.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const m=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-m*(1-this._horizonShift);return c?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,m){return this.projection.createTileMatrix(this,m,c)}calculateDistanceTileData(c){const m=c.key,b=this._distanceTileDataCache;if(b[m])return b[m];const S=c.canonical,A=1/this.height,O=this.cameraWorldSize,z=O/this.zoomScale(S.z),U=(S.x+Math.pow(2,S.z)*c.wrap)*z,Y=S.y*z,W=this.point;W.x*=O/this.worldSize,W.y*=O/this.worldSize;const re=this.angle,ye=Math.sin(-re),we=-Math.cos(-re);return b[m]={bearing:[ye,we],center:[(W.x-U)*A,(W.y-Y)*A],scale:z/o.EXTENT*A},b[m]}calculateFogTileMatrix(c){const m=c.key,b=this._fogTileMatrixCache;if(b[m])return b[m];const S=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.multiply(S,this.worldToFogMatrix,S),b[m]=new Float32Array(S),b[m]}calculateProjMatrix(c,m=!1){const b=c.key,S=m?this._alignedProjMatrixCache:this._projMatrixCache;if(S[b])return S[b];const A=this.calculatePosMatrix(c,this.worldSize);return o.multiply(A,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.alignedProjMatrix:this.projMatrix,A),S[b]=new Float32Array(A),S[b]}calculatePixelsToTileUnitsMatrix(c){const m=c.tileID.key,b=this._pixelsToTileUnitsCache;if(b[m])return b[m];const S=(function(A,O){const{scale:z}=A.tileTransform,U=z*o.EXTENT/(A.tileSize*Math.pow(2,O.zoom-A.tileID.overscaledZ+A.tileID.canonical.z));return Y=new Float32Array(4),ye=(W=O.inverseAdjustmentMatrix)[1],we=W[2],Se=W[3],Ae=(re=[U,U])[1],Y[0]=W[0]*(Te=re[0]),Y[1]=ye*Te,Y[2]=we*Ae,Y[3]=Se*Ae,Y;var Y,W,re,ye,we,Se,Te,Ae})(c,this);return b[m]=S,b[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,m=o.fromScaling([],[c,c,c]);return o.multiply(m,m,this.globeMatrix),m}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const m=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(m),S=this._camera.forward(),A=o.mercatorZfromAltitude(1,this._center.lat);b[2]/=A,S[2]/=A,o.normalize(S,S);const O=c.raycast(b,S,c.exaggeration());if(O){const z=o.scaleAndAdd([],b,S,O),U=new o.MercatorCoordinate(z[0],z[1],o.mercatorZfromAltitude(z[2],o.latFromMercatorY(z[1]))),Y=(U.z+o.length([U.x-b[0],U.y-b[1],U.z-b[2]*A]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Y),this._centerAltitude=U.toAltitude(),this._center=this.coordinateLocation(U),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const m=this._elevation,b=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,S=this._computeCameraPosition(b),A=m.getAtPointOrZero(new o.MercatorCoordinate(...S)),O=this.pixelsPerMeter/this.worldSize*A,z=this._minimumHeightOverTerrain(),U=S[2]-O;if(U<=z)if(U<0||c){const Y=this.locationCoordinate(this._center,this._centerAltitude),W=[S[0],S[1],Y.z-S[2]],re=o.length(W);W[2]-=(z-U)/this._pixelsPerMercatorPixel;const ye=o.length(W);if(ye===0)return;o.scale$2(W,W,re/ye*this._pixelsPerMercatorPixel),this._camera.position=[S[0],S[1],Y.z*this._pixelsPerMercatorPixel-W[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const ye=this.center;return ye.lat=o.clamp(ye.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(ye.lng=o.clamp(ye.lng,this.minLng,this.maxLng)),this.center=ye,void(this._constraining=!1)}const m=this._unmodified,{x:b,y:S}=this.point;let A=0,O=b,z=S;const U=this.width/2,Y=this.height/2,W=this.worldMinY*this.scale,re=this.worldMaxY*this.scale;if(S-Y<W&&(z=W+Y),S+Y>re&&(z=re-Y),re-W<this.height&&(A=Math.max(A,this.height/(re-W)),z=(re+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ye=this.worldMinX*this.scale,we=this.worldMaxX*this.scale,Se=this.worldSize/2-(ye+we)/2;O=(b+Se+this.worldSize)%this.worldSize-Se,O-U<ye&&(O=ye+U),O+U>we&&(O=we-U),we-ye<this.width&&(A=Math.max(A,this.width/(we-ye)),O=(we+ye)/2)}O===b&&z===S||(this.center=this.unproject(new o.Point(O,z))),A&&(this.zoom+=this.scaleZoom(A)),this._constrainCamera(),this._unmodified=m,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const b=Lp(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,A=this._camera.getWorldToCamera(this.worldSize,S),O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);O[8]=2*-c.x/this.width,O[9]=2*c.y/this.height;let z=o.mul([],O,A);if(this.projection.isReprojectedInTileSpace){const He=this.locationCoordinate(this.center),qe=o.identity([]);o.translate(qe,qe,[He.x*this.worldSize,He.y*this.worldSize,0]),o.multiply(qe,qe,gc(this)),o.translate(qe,qe,[-He.x*this.worldSize,-He.y*this.worldSize,0]),o.multiply(z,z,qe),this.inverseAdjustmentMatrix=(function(Je){const Qe=gc(Je,!0);return se([],[Qe[0],Qe[1],Qe[4],Qe[5]])})(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],z,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=z,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const U=o.invert([],O);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(U,this.horizonLineFromTop(),this.height);const Y=new Float32Array(16);o.identity(Y),o.scale(Y,Y,[1,-1,1]),o.rotateX(Y,Y,this._pitch),o.rotateZ(Y,Y,this.angle);const W=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),re=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;W[8]=2*-c.x/this.width,W[9]=2*(c.y+re)/this.height,this.skyboxMatrix=o.multiply(Y,W,Y);const ye=this.point,we=ye.x,Se=ye.y,Te=this.width%2/2,Ae=this.height%2/2,oe=Math.cos(this.angle),be=Math.sin(this.angle),Pe=we-Math.round(we)+oe*Te+be*Ae,Le=Se-Math.round(Se)+oe*Ae+be*Te,$e=new Float64Array(z);if(o.translate($e,$e,[Pe>.5?Pe-1:Pe,Le>.5?Le-1:Le,0]),this.alignedProjMatrix=$e,z=o.create(),o.scale(z,z,[this.width/2,-this.height/2,1]),o.translate(z,z,[1,-1,0]),this.labelPlaneMatrix=z,z=o.create(),o.scale(z,z,[1,-1,1]),o.translate(z,z,[-1,-1,0]),o.scale(z,z,[2/this.width,2/this.height,1]),this.glCoordMatrix=z,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},z=o.invert(new Float64Array(16),this.pixelMatrix),!z)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=z,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const He=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(He,He,A),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=z;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,m=this.cameraPixelsPerMeter,b=this._camera.position,S=1/this.height/this._pixelsPerMercatorPixel,A=[c,c,m];o.scale$2(A,A,S),o.scale$2(b,b,-1),o.multiply$2(b,b,A);const O=o.create();o.translate(O,O,b),o.scale(O,O,A),this.mercatorFogMatrix=O,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,m,S)}_computeCameraPosition(c){const m=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),S=this.point,A=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*m-c/this.worldSize*this._centerAltitude;return[S.x/this.worldSize-b[0]*A,S.y/this.worldSize-b[1]*A,c/this.worldSize*this._centerAltitude-b[2]*A]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const m=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],S=c[2];let A=1;this.projection.wrap&&(this.center=this.center.wrap()),S>0&&(A=Math.min((m-b)/S,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,A),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,m=this._camera.forward(),{pitch:b,bearing:S}=this._camera.getPitchBearing(),A=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,O=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),z=Math.max((c[2]-A)/Math.cos(b),O),U=this._zoomFromMercatorZ(z);o.scaleAndAdd(c,c,m,z),this._pitch=o.clamp(b,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(S,-Math.PI,Math.PI),this._setZoom(o.clamp(U,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let m=0,b=o.GLOBE_ZOOM_THRESHOLD_MAX,S=0,A=1/0;for(;b-m>1e-6&&b>m;){const O=m+.5*(b-m),z=this.tileSize*Math.pow(2,O),U=this.getCameraToCenterDistance(this.projection,O,z),Y=this.scaleZoom(U/(c*this.tileSize)),W=Math.abs(O-Y);W<A&&(A=W,S=O),O<Y?m=O:b=O}return S}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,m){const b=Math.min(c.x,m.x),S=Math.max(c.x,m.x),A=Math.min(c.y,m.y),O=Math.max(c.y,m.y);if(A<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new o.Point(b,A),new o.Point(S,O),new o.Point(b,O),new o.Point(S,A)],U=this.renderWorldCopies?-3:0,Y=this.renderWorldCopies?4:1;for(const W of z){const re=this.pointRayIntersection(W);if(re.t<0)return!0;const ye=this.rayIntersectionCoordinate(re);if(ye.x<U||ye.y<0||ye.x>Y||ye.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(c,m){const b=o.length(o.sub([],this._camera.position,c)),S=this._zoomFromMercatorZ(b)+m;return b-this._mercatorZfromZoom(S)}getCameraPoint(){if(this.projection.name==="globe"){const c=(function([m,b,S],A){const O=[m,b,S,1];o.transformMat4$1(O,O,A);const z=O[3]=Math.max(O[3],1e-6);return O[0]/=z,O[1]/=z,O[2]/=z,O})([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,c))}}getCameraToCenterDistance(c,m=this.zoom,b=this.worldSize){const S=Lp(c,m,this.width,this.height,1024),A=c.pixelSpaceConversion(this.center.lat,b,S);return .5/Math.tan(.5*this._fov)*this.height*A}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(c,c,this.globeMatrix),c}}function yc(v,c){let m=!1,b=null;const S=()=>{b=null,m&&(v(),b=setTimeout(S,c),m=!1)};return()=>(m=!0,b||S(),b)}class _c{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=yc(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const m=Zu(c);if(this._hashName){const b=this._hashName;let S=!1;const A=o.window.location.hash.slice(1).split("&").map((O=>{const z=O.split("=")[0];return z===b?(S=!0,`${z}=${m}`):O})).filter((O=>O));return S||A.push(`${b}=${m}`),`#${A.join("&")}`}return`#${m}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(m=b)})),(m&&m[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const m=this._getCurrentHash();if(m.length>=3&&!m.some((b=>isNaN(b)))){const b=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(m[3]||0):c.getBearing();return c.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function Zu(v,c){const m=v.getCenter(),b=Math.round(100*v.getZoom())/100,S=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,S),O=Math.round(m.lng*A)/A,z=Math.round(m.lat*A)/A,U=v.getBearing(),Y=v.getPitch();let W=c?`/${O}/${z}/${b}`:`${b}/${z}/${O}`;return(U||Y)&&(W+="/"+Math.round(10*U)/10),Y&&(W+=`/${Math.round(Y)}`),W}const Kh={linearity:.3,easing:o.bezier(0,0,.3,1)},Zh=o.extend({deceleration:2500,maxSpeed:1400},Kh),vf=o.extend({deceleration:20,maxSpeed:1400},Kh),rn=o.extend({deceleration:1e3,maxSpeed:360},Kh),vo=o.extend({deceleration:1e3,maxSpeed:90},Kh);class Qu{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,m=o.exported.now();for(;c.length>0&&m-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const m={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)m.zoom+=A.zoomDelta||0,m.bearing+=A.bearingDelta||0,m.pitch+=A.pitchDelta||0,A.panDelta&&m.pan._add(A.panDelta),A.around&&(m.around=A.around),A.pinchAround&&(m.pinchAround=A.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(m.pan.mag()){const A=vc(m.pan.mag(),b,o.extend({},Zh,c||{}));S.offset=m.pan.mult(A.amount/m.pan.mag()),S.center=this._map.transform.center,eu(S,A)}if(m.zoom){const A=vc(m.zoom,b,vf);S.zoom=this._map.transform.zoom+A.amount,eu(S,A)}if(m.bearing){const A=vc(m.bearing,b,rn);S.bearing=this._map.transform.bearing+o.clamp(A.amount,-179,179),eu(S,A)}if(m.pitch){const A=vc(m.pitch,b,vo);S.pitch=this._map.transform.pitch+A.amount,eu(S,A)}if(S.zoom||S.bearing){const A=m.pinchAround===void 0?m.around:m.pinchAround;S.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),S.noMoveStart=!0,S}}function eu(v,c){(!v.duration||v.duration<c.duration)&&(v.duration=c.duration,v.easing=c.easing)}function vc(v,c,m){const{maxSpeed:b,linearity:S,deceleration:A}=m,O=o.clamp(v*S/(c/1e3),-b,b),z=Math.abs(O)/(A*S);return{easing:m.easing,duration:1e3*z,amount:O*(z/2)}}class wi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b,S={}){const A=Ee(m.getCanvasContainer(),b),O=m.unproject(A);super(c,o.extend({point:A,lngLat:O,originalEvent:b},S)),this._defaultPrevented=!1,this.target=m}}class xo extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b){const S=c==="touchend"?b.changedTouches:b.touches,A=ce(m.getCanvasContainer(),S),O=A.map((U=>m.unproject(U))),z=A.reduce(((U,Y,W,re)=>U.add(Y.div(re.length))),new o.Point(0,0));super(c,{points:A,point:z,lngLats:O,lngLat:m.unproject(z),originalEvent:b}),this._defaultPrevented=!1}}class Tl extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b){super(c,{originalEvent:b}),this._defaultPrevented=!1}}class Ka{constructor(c,m){this._map=c,this._clickTolerance=m.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new Tl(c.type,this._map,c))}mousedown(c,m){return this._mousedownPos=m,this._firePreventable(new wi(c.type,this._map,c))}mouseup(c){this._map.fire(new wi(c.type,this._map,c))}preclick(c){const m=o.extend({},c);m.type="preclick",this._map.fire(new wi(m.type,this._map,m))}click(c,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||(this.preclick(c),this._map.fire(new wi(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new wi(c.type,this._map,c))}mouseover(c){this._map.fire(new wi(c.type,this._map,c))}mouseout(c){this._map.fire(new wi(c.type,this._map,c))}touchstart(c){return this._firePreventable(new xo(c.type,this._map,c))}touchmove(c){this._map.fire(new xo(c.type,this._map,c))}touchend(c){this._map.fire(new xo(c.type,this._map,c))}touchcancel(c){this._map.fire(new xo(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sa{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new wi(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new wi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wl{constructor(c,m){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,m){this.isEnabled()&&c.shiftKey&&c.button===0&&(he(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(c,m){if(!this._active)return;const b=m,S=this._startPos,A=this._lastPos;if(!S||!A||A.equals(b)||!this._box&&b.dist(S)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const O=Math.min(S.x,b.x),z=Math.max(S.x,b.x),U=Math.min(S.y,b.y),Y=Math.max(S.y,b.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${O}px,${U}px)`,this._box.style.width=z-O+"px",this._box.style.height=Y-U+"px")}))}mouseupWindow(c,m){if(!this._active)return;const b=this._startPos,S=m;if(b&&c.button===0){if(this.reset(),ge(),b.x!==S.x||b.y!==S.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:A=>A.fitScreenCoordinates(b,S,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ie(),delete this._startPos,delete this._lastPos}_fireEvent(c,m){return this._map.fire(new o.Event(c,{originalEvent:m}))}}function xf(v,c){const m={};for(let b=0;b<v.length;b++)m[v[b].identifier]=c[b];return m}class tu{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),b.length===this.numTouches&&(this.centroid=(function(S){const A=new o.Point(0,0);for(const O of S)A._add(O);return A.div(S.length)})(m),this.touches=xf(b,m)))}touchmove(c,m,b){if(this.aborted||!this.centroid)return;const S=xf(b,m);for(const A in this.touches){const O=S[A];(!O||O.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(c,m,b){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class bf{constructor(c){this.singleTap=new tu(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,m,b){this.singleTap.touchstart(c,m,b)}touchmove(c,m,b){this.singleTap.touchmove(c,m,b)}touchend(c,m,b){const S=this.singleTap.touchend(c,m,b);if(S){const A=c.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(S)<30;if(A&&O||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class Ky{constructor(){this._zoomIn=new bf({numTouches:1,numTaps:2}),this._zoomOut=new bf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,m,b){this._zoomIn.touchstart(c,m,b),this._zoomOut.touchstart(c,m,b)}touchmove(c,m,b){this._zoomIn.touchmove(c,m,b),this._zoomOut.touchmove(c,m,b)}touchend(c,m,b){const S=this._zoomIn.touchend(c,m,b),A=this._zoomOut.touchend(c,m,b);return S?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(S)},{originalEvent:c})}):A?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(A)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ys={0:1,2:2};class gi{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,m){return!1}_move(c,m){return{}}mousedown(c,m){if(this._lastPoint)return;const b=ee(c);this._correctButton(c,b)&&(this._lastPoint=m,this._eventButton=b)}mousemoveWindow(c,m){const b=this._lastPoint;if(b){if(c.preventDefault(),this._eventButton!=null&&(function(S,A){const O=Ys[A];return S.buttons===void 0||(S.buttons&O)!==O})(c,this._eventButton))this.reset();else if(this._moved||!(m.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=m,this._move(b,m)}}mouseupWindow(c){this._lastPoint&&ee(c)===this._eventButton&&(this._moved&&ge(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Br extends gi{mousedown(c,m){super.mousedown(c,m),this._lastPoint&&(this._active=!0)}_correctButton(c,m){return m===0&&!c.ctrlKey}_move(c,m){return{around:m,panDelta:m.sub(c)}}}class Yl extends gi{_correctButton(c,m){return m===0&&c.ctrlKey||m===2}_move(c,m){const b=.8*(m.x-c.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(c){c.preventDefault()}}class aa extends gi{_correctButton(c,m){return m===0&&c.ctrlKey||m===2}_move(c,m){const b=-.5*(m.y-c.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(c){c.preventDefault()}}class Qh{constructor(c,m){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(c,m,b){return this._calculateTransform(c,m,b)}touchmove(c,m,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(b.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,m,b)}}touchend(c,m,b){this._calculateTransform(c,m,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,m,b){b.length>0&&(this._active=!0);const S=xf(b,m),A=new o.Point(0,0),O=new o.Point(0,0);let z=0;for(const Y in S){const W=S[Y],re=this._touches[Y];re&&(A._add(W),O._add(W.sub(re)),z++,S[Y]=W)}if(this._touches=S,z<this._minTouches||!O.mag())return;const U=O.div(z);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(z),panDelta:U}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Za{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,m,b){return{}}touchstart(c,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(c,m,b){const S=this._firstTwoTouches;if(!S)return;c.preventDefault();const[A,O]=S,z=Jh(b,m,A),U=Jh(b,m,O);if(!z||!U)return;const Y=this._aroundCenter?null:z.add(U).div(2);return this._move([z,U],Y,c)}touchend(c,m,b){if(!this._firstTwoTouches)return;const[S,A]=this._firstTwoTouches,O=Jh(b,m,S),z=Jh(b,m,A);O&&z||(this._active&&ge(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Jh(v,c,m){for(let b=0;b<v.length;b++)if(v[b].identifier===m)return c[b]}function zp(v,c){return Math.log(v/c)/Math.LN2}class Ju extends Za{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,m){const b=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(zp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:zp(this._distance,b),pinchAround:m}}}function xc(v,c){return 180*v.angleWith(c)/Math.PI}class Np extends Za{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,m){const b=this._vector;if(this._vector=c[0].sub(c[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:xc(this._vector,b),pinchAround:m}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const m=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const S=xc(c,b);return Math.abs(S)<m}}function Qa(v){return Math.abs(v.y)>Math.abs(v.x)}class Bp extends Za{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Qa(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,m,b){const S=this._lastPoints;if(!S)return;const A=c[0].sub(S[0]),O=c[1].sub(S[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(A,O,b.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(A.y+O.y)/2*-.5})}gestureBeginsVertically(c,m,b){if(this._valid!==void 0)return this._valid;const S=c.mag()>=2,A=m.mag()>=2;if(!S&&!A)return;if(!S||!A)return this._firstMove==null&&(this._firstMove=b),b-this._firstMove<100&&void 0;const O=c.y>0==m.y>0;return Qa(c)&&Qa(m)&&O}}const nu={panStep:100,bearingStep:15,pitchStep:10};class bc{constructor(){const c=nu;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let m=0,b=0,S=0,A=0,O=0;switch(c.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:c.shiftKey?b=-1:(c.preventDefault(),A=-1);break;case 39:c.shiftKey?b=1:(c.preventDefault(),A=1);break;case 38:c.shiftKey?S=1:(c.preventDefault(),O=-1);break;case 40:c.shiftKey?S=-1:(c.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(b=0,S=0),{cameraAnimation:z=>{const U=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:wc,zoom:m?Math.round(U)+m*(c.shiftKey?2:1):U,bearing:z.getBearing()+b*this._bearingStep,pitch:z.getPitch()+S*this._pitchStep,offset:[-A*this._panStep,-O*this._panStep],center:z.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wc(v){return v*(2-v)}const El=4.000244140625;class Fp{constructor(c,m){this._map=c,this._el=c.getCanvasContainer(),this._handler=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let m=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const b=o.exported.now(),S=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%El==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(S*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),c.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=c,this._delta-=m,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=Ee(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:m,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const m=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>El?this._wheelZoomRate:this._defaultZoomRate;let Y=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&Y!==0&&(Y=1/Y);const W=m(),re=Math.pow(2,W),ye=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):re;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(ye*Y))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._delta=0}const b=typeof this._targetZoom=="number"?this._targetZoom:m(),S=this._startZoom,A=this._easing;let O,z=!1;if(this._type==="wheel"&&S&&A){const U=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),Y=A(U);O=o.number(S,b,Y),U<1?this._frameId||(this._frameId=!0):z=!0}else O=b,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!z,zoomDelta:O-m(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let m=o.ease;if(this._prevEase){const b=this._prevEase,S=(o.exported.now()-b.start)/b.duration,A=b.easing(S+.01)-b.easing(S),O=.27/Math.sqrt(A*A+1e-4)*.01,z=Math.sqrt(.0729-O*O);m=o.bezier(O,z,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:m},m}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Vp{constructor(c,m){this._clickZoom=c,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ws{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,m){return c.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(c.shiftKey?-1:1),around:b.unproject(m)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Up{constructor(){this._tap=new bf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,m,b){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=m[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(c,m,b))}touchmove(c,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const S=m[0],A=S.y-this._swipePoint.y;return this._swipePoint=S,c.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(c,m,b)}touchend(c,m,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():this._tap.touchend(c,m,b)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ru{constructor(c,m,b){this._el=c,this._mousePan=m,this._touchPan=b}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class oo{constructor(c,m,b){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=m,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class jp{constructor(c,m,b,S){this._el=c,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ca=v=>v.zoom||v.drag||v.pitch||v.rotate;class Zy extends o.Event{}class o0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,m){const b=o.sub([],m,c);this.radius=o.length(b[2]<0?o.div([],b,this.constants):[b[0],b[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const m=o.scale$2([],c,this.radius);if(m[2]>0){const b=o.scale$2([],[0,0,1],o.dot(m,[0,0,1])),S=o.scale$2([],o.normalize([],[m[0],m[1],0]),this.radius),A=o.add([],m,o.scale$2([],o.sub([],o.add([],S,b),m),2));m[0]=A[0],m[1]=A[1]}return m}}function Sl(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Ti{constructor(c,m){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qu(c),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new o0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(m),o.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[S,A,O]of this._listeners)S.addEventListener(A,S===o.window.document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[c,m,b]of this._listeners)c.removeEventListener(m,c===o.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(c){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new Ka(m,c));const S=m.boxZoom=new Wl(m,c);this._add("boxZoom",S);const A=new Ky,O=new ws;m.doubleClickZoom=new Vp(O,A),this._add("tapZoom",A),this._add("clickZoom",O);const z=new Up;this._add("tapDragZoom",z);const U=m.touchPitch=new Bp(m);this._add("touchPitch",U);const Y=new Yl(c),W=new aa(c);m.dragRotate=new oo(c,Y,W),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const re=new Br(c),ye=new Qh(m,c);m.dragPan=new ru(b,re,ye),this._add("mousePan",re),this._add("touchPan",ye,["touchZoom","touchRotate"]);const we=new Np,Se=new Ju;m.touchZoomRotate=new jp(b,Se,we,z),this._add("touchRotate",we,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Sa(m));const Te=m.scrollZoom=new Fp(m,this);this._add("scrollZoom",Te,["mousePan"]);const Ae=m.keyboard=new bc;this._add("keyboard",Ae);for(const oe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[oe]&&m[oe].enable(c[oe])}_add(c,m,b){this._handlers.push({handlerName:c,handler:m,allowed:b}),this._handlersById[c]=m}stop(c){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ca(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,m,b){for(const S in c)if(S!==b&&(!m||m.indexOf(S)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const m=[];for(const b of c)this._el.contains(b.target)&&m.push(b);return m}handleEvent(c,m){this._updatingCamera=!0;const b=c.type==="renderFrame",S=b?void 0:c,A={needsRenderFrame:!1},O={},z={},U=c.touches?this._getMapTouches(c.touches):void 0,Y=U?ce(this._el,U):b?void 0:Ee(this._el,c);for(const{handlerName:ye,handler:we,allowed:Se}of this._handlers){if(!we.isEnabled())continue;let Te;this._blockedByActive(z,Se,ye)?we.reset():we[m||c.type]&&(Te=we[m||c.type](c,Y,U),this.mergeHandlerResult(A,O,Te,ye,S),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||we.isActive())&&(z[ye]=we)}const W={};for(const ye in this._previousActiveHandlers)z[ye]||(W[ye]=S);this._previousActiveHandlers=z,(Object.keys(W).length||Sl(A))&&(this._changes.push([A,O,W]),this._triggerRenderFrame()),(Object.keys(z).length||Sl(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=A;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))}mergeHandlerResult(c,m,b,S,A){if(!b)return;o.extend(c,b);const O={handlerName:S,originalEvent:b.originalEvent||A};b.zoomDelta!==void 0&&(m.zoom=O),b.panDelta!==void 0&&(m.drag=O),b.pitchDelta!==void 0&&(m.pitch=O),b.bearingDelta!==void 0&&(m.rotate=O)}_applyChanges(){const c={},m={},b={};for(const[S,A,O]of this._changes)S.panDelta&&(c.panDelta=(c.panDelta||new o.Point(0,0))._add(S.panDelta)),S.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(c.around=S.around),S.aroundCoord!==void 0&&(c.aroundCoord=S.aroundCoord),S.pinchAround!==void 0&&(c.pinchAround=S.pinchAround),S.noInertia&&(c.noInertia=S.noInertia),o.extend(m,A),o.extend(b,O);this._updateMapTransform(c,m,b),this._changes=[]}_updateMapTransform(c,m,b){const S=this._map,A=S.transform,O=be=>[be.x,be.y,be.z];if((be=>{const Pe=this._eventsInProgress.drag;return Pe&&!this._handlersById[Pe.handlerName].isActive()})()&&!Sl(c)){const be=A.zoom;A.cameraElevationReference="sea",A.recenterOnTerrain(),A.cameraElevationReference="ground",be!==A.zoom&&this._map._update(!0)}if(A._isCameraConstrained&&S._stop(!0),!Sl(c))return void this._fireEvents(m,b,!0);let{panDelta:z,zoomDelta:U,bearingDelta:Y,pitchDelta:W,around:re,aroundCoord:ye,pinchAround:we}=c;A._isCameraConstrained&&(U>0&&(U=0),A._isCameraConstrained=!1),we!==void 0&&(re=we),(U||(be=>m[be]&&!this._eventsInProgress[be])("drag"))&&re&&(this._dragOrigin=O(A.pointCoordinate3D(re)),this._trackingEllipsoid.setup(A._camera.position,this._dragOrigin)),A.cameraElevationReference="sea",S._stop(!0),re=re||S.transform.centerPoint,Y&&(A.bearing+=Y),W&&(A.pitch+=W),A._updateCameraState();const Se=[0,0,0];if(z)if(A.projection.name==="mercator"){const be=this._trackingEllipsoid.projectRay(A.screenPointToMercatorRay(re).dir),Pe=this._trackingEllipsoid.projectRay(A.screenPointToMercatorRay(re.sub(z)).dir);Se[0]=Pe[0]-be[0],Se[1]=Pe[1]-be[1]}else{const be=A.pointCoordinate(re);if(A.projection.name==="globe"){z=z.rotate(-A.angle);const Pe=A._pixelsPerMercatorPixel/A.worldSize;Se[0]=-z.x*o.mercatorScale(o.latFromMercatorY(be.y))*Pe,Se[1]=-z.y*o.mercatorScale(A.center.lat)*Pe}else{const Pe=A.pointCoordinate(re.sub(z));be&&Pe&&(Se[0]=Pe.x-be.x,Se[1]=Pe.y-be.y)}}const Te=A.zoom,Ae=[0,0,0];if(U){const be=O(ye||A.pointCoordinate3D(re)),Pe={dir:o.normalize([],o.sub([],be,A._camera.position))};if(Pe.dir[2]<0){const Le=A.zoomDeltaToMovement(be,U);o.scale$2(Ae,Pe.dir,Le)}}const oe=o.add(Se,Se,Ae);A._translateCameraConstrained(oe),U&&Math.abs(A.zoom-Te)>1e-4&&A.recenterOnTerrain(),A.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(m,b,!0)}_fireEvents(c,m,b){const S=Ca(this._eventsInProgress),A=Ca(c),O={};for(const W in c){const{originalEvent:re}=c[W];this._eventsInProgress[W]||(O[`${W}start`]=re),this._eventsInProgress[W]=c[W]}!S&&A&&this._fireEvent("movestart",A.originalEvent);for(const W in O)this._fireEvent(W,O[W]);A&&this._fireEvent("move",A.originalEvent);for(const W in c){const{originalEvent:re}=c[W];this._fireEvent(W,re)}const z={};let U;for(const W in this._eventsInProgress){const{handlerName:re,originalEvent:ye}=this._eventsInProgress[W];this._handlersById[re].isActive()||(delete this._eventsInProgress[W],U=m[re]||ye,z[`${W}end`]=U)}for(const W in z)this._fireEvent(W,z[W]);const Y=Ca(this._eventsInProgress);if(b&&(S||A)&&!Y){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),re=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;W?(re(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:U})):(this._map.fire(new o.Event("moveend",{originalEvent:U})),re(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,m){this._map.fire(new o.Event(c,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((c=>{this._frameId=void 0,this.handleEvent(new Zy("renderFrame",{timeStamp:c})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Tc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class iu extends o.Evented{constructor(c,m){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=m.bearingSnap,this._respectPrefersReducedMotion=m.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,m){return this.jumpTo({center:c},m)}panBy(c,m,b){return c=o.Point.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},m),b)}panTo(c,m,b){return this.easeTo(o.extend({center:c},m),b)}getZoom(){return this.transform.zoom}setZoom(c,m){return this.jumpTo({zoom:c},m),this}zoomTo(c,m,b){return this.easeTo(o.extend({zoom:c},m),b)}zoomIn(c,m){return this.zoomTo(this.getZoom()+1,c,m),this}zoomOut(c,m){return this.zoomTo(this.getZoom()-1,c,m),this}getBearing(){return this.transform.bearing}setBearing(c,m){return this.jumpTo({bearing:c},m),this}getPadding(){return this.transform.padding}setPadding(c,m){return this.jumpTo({padding:c},m),this}rotateTo(c,m,b){return this.easeTo(o.extend({bearing:c},m),b)}resetNorth(c,m){return this.rotateTo(0,o.extend({duration:1e3},c),m),this}resetNorthPitch(c,m){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),m),this}snapToNorth(c,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,m):this}getPitch(){return this.transform.pitch}setPitch(c,m){return this.jumpTo({pitch:c},m),this}cameraForBounds(c,m){c=o.LngLatBounds.convert(c);const b=m&&m.bearing||0,S=m&&m.pitch||0,A=c.getNorthWest(),O=c.getSouthEast();return this._cameraForBounds(this.transform,A,O,b,S,m)}_extendCameraOptions(c){const m={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const b=c.padding;c.padding={top:b,bottom:b,right:b,left:b}}return c.padding=o.extend(m,c.padding),c}_minimumAABBFrustumDistance(c,m){const b=m.max[0]-m.min[0],S=m.max[1]-m.min[1];return b/S>c.aspect?b/(2*Math.tan(.5*c.fovX)*c.aspect):S/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,m,b,S,A,O){const z=c.clone(),U=this._extendCameraOptions(O);z.bearing=S,z.pitch=A;const Y=o.LngLat.convert(m),W=o.LngLat.convert(b),re=.5*(Y.lat+W.lat),ye=.5*(Y.lng+W.lng),we=o.latLngToECEF(re,ye),Se=o.normalize([],we),Te=o.normalize([],o.cross([],Se,[0,1,0])),Ae=o.cross([],Te,Se),oe=[Te[0],Te[1],Te[2],0,Ae[0],Ae[1],Ae[2],0,Se[0],Se[1],Se[2],0,0,0,0,1],be=[we,o.latLngToECEF(Y.lat,Y.lng),o.latLngToECEF(W.lat,Y.lng),o.latLngToECEF(W.lat,W.lng),o.latLngToECEF(Y.lat,W.lng),o.latLngToECEF(re,Y.lng),o.latLngToECEF(re,W.lng),o.latLngToECEF(Y.lat,ye),o.latLngToECEF(W.lat,ye)];let Pe=o.Aabb.fromPoints(be.map((St=>[o.dot(Te,St),o.dot(Ae,St),o.dot(Se,St)])));const Le=o.transformMat4([],Pe.center,oe);o.squaredLength(Le)===0&&o.set(Le,0,0,1),o.normalize(Le,Le),o.scale$2(Le,Le,o.GLOBE_RADIUS),z.center=o.ecefToLatLng(Le);const $e=z.getWorldToCameraMatrix(),He=o.invert(new Float64Array(16),$e);Pe=o.Aabb.applyTransform(Pe,o.multiply([],$e,oe)),o.transformMat4(Le,Le,$e);const qe=.5*(Pe.max[2]-Pe.min[2]),Je=this._minimumAABBFrustumDistance(z,Pe),Qe=o.scale$2([],[0,0,1],qe),ct=o.add(Qe,Le,Qe),Ut=Je+(z.pitch===0?0:o.distance(Le,ct)),it=z.globeCenterInViewSpace,vt=o.sub([],Le,[it[0],it[1],it[2]]);o.normalize(vt,vt),o.scale$2(vt,vt,Ut);const lt=o.add([],Le,vt);o.transformMat4(lt,lt,He);const zt=o.earthRadius/o.GLOBE_RADIUS,ot=o.length(lt),Et=o.mercatorZfromAltitude(Math.max(ot*zt-o.earthRadius,Number.EPSILON),0),Nt=Math.min(z.zoomFromMercatorZAdjusted(Et),U.maxZoom);return Nt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(z.setProjection({name:"mercator"}),z.zoom=Nt,this._cameraForBounds(z,m,b,S,A,O)):{center:z.center,zoom:Nt,bearing:S,pitch:A}}queryTerrainElevation(c,m){const b=this.transform.elevation;return b?(m=o.extend({},{exaggerated:!0},m),b.getAtPoint(o.MercatorCoordinate.fromLngLat(c),null,m.exaggerated)):null}_cameraForBounds(c,m,b,S,A,O){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,m,b,S,A,O);const z=c.clone(),U=this._extendCameraOptions(O),Y=z.padding;z.bearing=S,z.pitch=A;const W=o.LngLat.convert(m),re=o.LngLat.convert(b),ye=new o.LngLat(W.lng,re.lat),we=new o.LngLat(re.lng,W.lat),Se=z.project(W),Te=z.project(re),Ae=this.queryTerrainElevation(W),oe=this.queryTerrainElevation(re),be=this.queryTerrainElevation(ye),Pe=this.queryTerrainElevation(we),Le=[[Se.x,Se.y,Math.min(Ae||0,oe||0,be||0,Pe||0)],[Te.x,Te.y,Math.max(Ae||0,oe||0,be||0,Pe||0)]];let $e=o.Aabb.fromPoints(Le);const He=z.getWorldToCameraMatrix(),qe=o.invert(new Float64Array(16),He);$e=o.Aabb.applyTransform($e,He);const Je=o.sub([],$e.max,$e.min),Qe=Y.left||0,ct=Y.right||0,Ut=Y.bottom||0,it=Y.top||0,{left:vt,right:lt,top:zt,bottom:ot}=U.padding,Et=.5*(Qe+ct),Nt=.5*(it+Ut),St=Math.min(z.scaleZoom(z.scale*Math.min((z.width-(Qe+ct+vt+lt))/Je[0],(z.height-(Ut+it+ot+zt))/Je[1])),U.maxZoom),It=z.scale/z.zoomScale(St);$e=new o.Aabb([$e.min[0]-(vt+Et)*It,$e.min[1]-(ot+Nt)*It,$e.min[2]],[$e.max[0]+(lt+Et)*It,$e.max[1]+(zt+Nt)*It,$e.max[2]]);const Sn=.5*Je[2],zn=this._minimumAABBFrustumDistance(z,$e),Bt=[0,0,1,0];o.transformMat4$1(Bt,Bt,He),o.normalize$2(Bt,Bt);const ln=o.scale$2([],Bt,zn+Sn),Ln=o.add([],$e.center,ln),ar=(typeof U.offset.x=="number"&&typeof U.offset.y=="number"?new o.Point(U.offset.x,U.offset.y):o.Point.convert(U.offset)).rotate(-o.degToRad(S));$e.center[0]-=ar.x*It,$e.center[1]+=ar.y*It,o.transformMat4($e.center,$e.center,qe),o.transformMat4(Ln,Ln,qe);const xn=[$e.center[0],$e.center[1],Ln[2]*z.pixelsPerMeter];o.scale$2(xn,xn,1/z.worldSize);const kr=o.lngFromMercatorX(xn[0]),Qr=o.latFromMercatorY(xn[1]),Gr=Math.min(z._zoomFromMercatorZ(xn[2]),U.maxZoom),Ur=new o.LngLat(kr,Qr);return z.mercatorFromTransition&&Gr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(z.setProjection({name:"globe"}),z.zoom=Gr,this._cameraForBounds(z,m,b,S,A,O)):{center:Ur,zoom:Gr,bearing:S,pitch:A}}fitBounds(c,m,b){const S=this.cameraForBounds(c,m);return this._fitInternal(S,m,b)}fitScreenCoordinates(c,m,b,S,A){const O=o.Point.convert(c),z=o.Point.convert(m),U=new o.Point(Math.min(O.x,z.x),Math.min(O.y,z.y)),Y=new o.Point(Math.max(O.x,z.x),Math.max(O.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(O,z))return this;const W=this.transform.pointLocation3D(U),re=this.transform.pointLocation3D(Y),ye=this.transform.pointLocation3D(new o.Point(U.x,Y.y)),we=this.transform.pointLocation3D(new o.Point(Y.x,U.y)),Se=[Math.min(W.lng,re.lng,ye.lng,we.lng),Math.min(W.lat,re.lat,ye.lat,we.lat)],Te=[Math.max(W.lng,re.lng,ye.lng,we.lng),Math.max(W.lat,re.lat,ye.lat,we.lat)],Ae=S&&S.pitch?S.pitch:this.getPitch(),oe=this._cameraForBounds(this.transform,Se,Te,b,Ae,S);return this._fitInternal(oe,S,A)}_fitInternal(c,m,b){return c?(delete(m=o.extend(c,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(c,m){this.stop();const b=c.preloadOnly?this.transform.clone():this.transform;let S=!1,A=!1,O=!1;return"zoom"in c&&b.zoom!==+c.zoom&&(S=!0,b.zoom=+c.zoom),c.center!==void 0&&(b.center=o.LngLat.convert(c.center)),"bearing"in c&&b.bearing!==+c.bearing&&(A=!0,b.bearing=+c.bearing),"pitch"in c&&b.pitch!==+c.pitch&&(O=!0,b.pitch=+c.pitch),c.padding==null||b.isPaddingEqual(c.padding)||(b.padding=c.padding),c.preloadOnly?(this._preloadTiles(b),this):(this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),S&&this.fire(new o.Event("zoomstart",m)).fire(new o.Event("zoom",m)).fire(new o.Event("zoomend",m)),A&&this.fire(new o.Event("rotatestart",m)).fire(new o.Event("rotate",m)).fire(new o.Event("rotateend",m)),O&&this.fire(new o.Event("pitchstart",m)).fire(new o.Event("pitch",m)).fire(new o.Event("pitchend",m)),this.fire(new o.Event("moveend",m)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Tc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,m){const b=this.transform;if(!b.projection.supportsFreeCamera)return o.warnOnce(Tc),this;this.stop();const S=b.zoom,A=b.pitch,O=b.bearing;b.setFreeCameraOptions(c);const z=S!==b.zoom,U=A!==b.pitch,Y=O!==b.bearing;return this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),z&&this.fire(new o.Event("zoomstart",m)).fire(new o.Event("zoom",m)).fire(new o.Event("zoomend",m)),Y&&this.fire(new o.Event("rotatestart",m)).fire(new o.Event("rotate",m)).fire(new o.Event("rotateend",m)),U&&this.fire(new o.Event("pitchstart",m)).fire(new o.Event("pitch",m)).fire(new o.Event("pitchend",m)),this.fire(new o.Event("moveend",m)),this}easeTo(c,m){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const b=this.transform,S=this.getZoom(),A=this.getBearing(),O=this.getPitch(),z=this.getPadding(),U="zoom"in c?+c.zoom:S,Y="bearing"in c?this._normalizeBearing(c.bearing,A):A,W="pitch"in c?+c.pitch:O,re="padding"in c?c.padding:b.padding,ye=o.Point.convert(c.offset);let we,Se,Te;if(b.projection.name==="globe"){const Qe=o.MercatorCoordinate.fromLngLat(b.center),ct=ye.rotate(-b.angle);Qe.x+=ct.x/b.worldSize,Qe.y+=ct.y/b.worldSize;const Ut=Qe.toLngLat(),it=o.LngLat.convert(c.center||Ut);this._normalizeCenter(it),we=b.centerPoint.add(ct),Se=new o.Point(Qe.x,Qe.y).mult(b.worldSize),Te=new o.Point(o.mercatorXfromLng(it.lng),o.mercatorYfromLat(it.lat)).mult(b.worldSize).sub(Se)}else{we=b.centerPoint.add(ye);const Qe=b.pointLocation(we),ct=o.LngLat.convert(c.center||Qe);this._normalizeCenter(ct),Se=b.project(Qe),Te=b.project(ct).sub(Se)}const Ae=b.zoomScale(U-S);let oe,be;c.around&&(oe=o.LngLat.convert(c.around),be=b.locationPoint(oe));const Pe=this._zooming||U!==S,Le=this._rotating||A!==Y,$e=this._pitching||W!==O,He=!b.isPaddingEqual(re),qe=Qe=>ct=>{if(Pe&&(Qe.zoom=o.number(S,U,ct)),Le&&(Qe.bearing=o.number(A,Y,ct)),$e&&(Qe.pitch=o.number(O,W,ct)),He&&(Qe.interpolatePadding(z,re,ct),we=Qe.centerPoint.add(ye)),oe)Qe.setLocationAtPoint(oe,be);else{const Ut=Qe.zoomScale(Qe.zoom-S),it=U>S?Math.min(2,Ae):Math.max(.5,Ae),vt=Math.pow(it,1-ct),lt=Qe.unproject(Se.add(Te.mult(ct*vt)).mult(Ut));Qe.setLocationAtPoint(Qe.renderWorldCopies?lt.wrap():lt,we)}return c.preloadOnly||this._fireMoveEvents(m),Qe};if(c.preloadOnly){const Qe=this._emulate(qe,c.duration,b);return this._preloadTiles(Qe),this}const Je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Pe,this._rotating=Le,this._pitching=$e,this._padding=He,this._easeId=c.easeId,this._prepareEase(m,c.noMoveStart,Je),this._ease(qe(b),(Qe=>{b.recenterOnTerrain(),this._afterEase(m,Qe)}),c),this}_prepareEase(c,m,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",m||b.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!b.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!b.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!b.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,m){if(this._easeId&&m&&this._easeId===m)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,S=this._rotating,A=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new o.Event("zoomend",c)),S&&this.fire(new o.Event("rotateend",c)),A&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,m){if(this._prefersReducedMotion(c)){const St=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(St,m)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const b=this.transform,S=this.getZoom(),A=this.getBearing(),O=this.getPitch(),z=this.getPadding(),U="zoom"in c?o.clamp(+c.zoom,b.minZoom,b.maxZoom):S,Y="bearing"in c?this._normalizeBearing(c.bearing,A):A,W="pitch"in c?+c.pitch:O,re="padding"in c?c.padding:b.padding,ye=b.zoomScale(U-S),we=o.Point.convert(c.offset);let Se=b.centerPoint.add(we);const Te=b.pointLocation(Se),Ae=o.LngLat.convert(c.center||Te);this._normalizeCenter(Ae);const oe=b.project(Te),be=b.project(Ae).sub(oe);let Pe=c.curve;const Le=Math.max(b.width,b.height),$e=Le/ye,He=be.mag();if("minZoom"in c){const St=o.clamp(Math.min(c.minZoom,S,U),b.minZoom,b.maxZoom),It=Le/b.zoomScale(St-S);Pe=Math.sqrt(It/He*2)}const qe=Pe*Pe;function Je(St){const It=($e*$e-Le*Le+(St?-1:1)*qe*qe*He*He)/(2*(St?$e:Le)*qe*He);return Math.log(Math.sqrt(It*It+1)-It)}function Qe(St){return(Math.exp(St)-Math.exp(-St))/2}function ct(St){return(Math.exp(St)+Math.exp(-St))/2}const Ut=Je(0);let it=function(St){return ct(Ut)/ct(Ut+Pe*St)},vt=function(St){return Le*((ct(Ut)*(Qe(It=Ut+Pe*St)/ct(It))-Qe(Ut))/qe)/He;var It},lt=(Je(1)-Ut)/Pe;if(Math.abs(He)<1e-6||!isFinite(lt)){if(Math.abs(Le-$e)<1e-6)return this.easeTo(c,m);const St=$e<Le?-1:1;lt=Math.abs(Math.log($e/Le))/Pe,vt=function(){return 0},it=function(It){return Math.exp(St*Pe*It)}}c.duration="duration"in c?+c.duration:1e3*lt/("screenSpeed"in c?+c.screenSpeed/Pe:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const zt=A!==Y,ot=W!==O,Et=!b.isPaddingEqual(re),Nt=St=>It=>{const Sn=It*lt,zn=1/it(Sn);St.zoom=It===1?U:S+St.scaleZoom(zn),zt&&(St.bearing=o.number(A,Y,It)),ot&&(St.pitch=o.number(O,W,It)),Et&&(St.interpolatePadding(z,re,It),Se=St.centerPoint.add(we));const Bt=It===1?Ae:St.unproject(oe.add(be.mult(vt(Sn))).mult(zn));return St.setLocationAtPoint(St.renderWorldCopies?Bt.wrap():Bt,Se),St._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(m),St};if(c.preloadOnly){const St=this._emulate(Nt,c.duration,b);return this._preloadTiles(St),this}return this._zooming=!0,this._rotating=zt,this._pitching=ot,this._padding=Et,this._prepareEase(m,!1),this._ease(Nt(b),(()=>this._afterEase(m)),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,m){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,m)}if(!c){const b=this.handlers;b&&b.stop(!1)}return this}_ease(c,m,b){b.animate===!1||b.duration===0?(c(1),m()):(this._easeStart=o.exported.now(),this._easeOptions=b,this._onEaseFrame=c,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),m=this._onEaseFrame;m&&m(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,m){c=o.wrap(c,-180,180);const b=Math.abs(c-m);return Math.abs(c-360-m)<b&&(c-=360),Math.abs(c+360-m)<b&&(c+=360),c}_normalizeCenter(c){const m=this.transform;if(!m.renderWorldCopies||m.maxBounds)return;const b=c.lng-m.center.lng;c.lng+=b>180?-360:b<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,m,b){const S=Math.ceil(15*m/1e3),A=[],O=c(b.clone());for(let z=0;z<=S;z++){const U=O(z/S);A.push(U.clone())}return A}}class fn{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const m=this.options&&this.options.compact;return this._map=c,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),F("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),m&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),m===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,m){const b=this._map._getUIString(`AttributionControl.${m}`);c.setAttribute("aria-label",b),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const m=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const b=m.reduce(((S,A,O)=>(A.value&&(S+=`${A.key}=${A.value}${O<m.length-1?"&":""}`),S)),"?");c.href=`${o.config.FEEDBACK_URL}/${b}#${Zu(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const m=this._map.style._sourceCaches;for(const S in m){const A=m[S];if(A.used){const O=A.getSource();O.attribution&&c.indexOf(O.attribution)<0&&c.push(O.attribution)}}c.sort(((S,A)=>S.length-A.length)),c=c.filter(((S,A)=>{for(let O=A+1;O<c.length;O++)if(c[O].indexOf(S)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const b=c.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,c.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class wf{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=F("div","mapboxgl-ctrl");const m=F("a","mapboxgl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://www.mapbox.com/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const m in c){const b=c[m].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<250?m.classList.add("mapboxgl-compact"):m.classList.remove("mapboxgl-compact")}}}class su{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const m=++this._id;return this._queue.push({callback:c,id:m,cancelled:!1}),m}remove(c){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const S of b)if(S.id===c)return void(S.cancelled=!0)}run(c=0){const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Cl(v,c,m){if(v=new o.LngLat(v.lng,v.lat),c){const b=new o.LngLat(v.lng-360,v.lat),S=new o.LngLat(v.lng+360,v.lat),A=360*Math.ceil(Math.abs(v.lng-m.center.lng)/360),O=m.locationPoint(v).distSqr(c),z=c.x<0||c.y<0||c.x>m.width||c.y>m.height;m.locationPoint(b).distSqr(c)<O&&(z||Math.abs(b.lng-m.center.lng)<A)?v=b:m.locationPoint(S).distSqr(c)<O&&(z||Math.abs(S.lng-m.center.lng)<A)&&(v=S)}for(;Math.abs(v.lng-m.center.lng)>180;){const b=m.locationPoint(v);if(b.x>=0&&b.y>=0&&b.x<=m.width&&b.y<=m.height)break;v.lng>m.center.lng?v.lng-=360:v.lng+=360}return v}const eh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class an extends o.Evented{constructor(c,m){if(super(),(c instanceof o.window.HTMLElement||m)&&(c=o.extend({element:c},m)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=F("div");const S=41,A=27,O=q("svg",{display:"block",height:S*this._scale+"px",width:A*this._scale+"px",viewBox:`0 0 ${A} ${S}`},this._element),z=q("radialGradient",{id:"shadowGradient"},q("defs",{},O));q("stop",{offset:"10%","stop-opacity":.4},z),q("stop",{offset:"100%","stop-opacity":.05},z),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},O),q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},O),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},O),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},O),this._offset=o.Point.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(S=>{S.preventDefault()})),this._element.addEventListener("mousedown",(S=>{S.preventDefault()}));const b=this._element.classList;for(const S in eh)b.remove(`mapboxgl-marker-anchor-${S}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const m=c.code,b=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&b!==32&&b!==13||this.togglePopup()}_onMapClick(c){const m=c.originalEvent.target,b=this._element;this._popup&&(m===b||b.contains(m))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,m=this._pos;if(!c||!m)return!1;const b=c.unproject(m),S=c.getFreeCameraOptions();if(!S.position)return!1;const A=S.position.toLngLat();return A.distanceTo(b)<.9*A.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const m=this._pos;if(!m||m.x<0||m.x>c.transform.width||m.y<0||m.y>c.transform.height)return void this._clearFadeTimer();const b=c.unproject(m);let S;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?S=0:(S=1-c._queryFogOpacity(b),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(S*=this._occludedOpacity)),this._element.style.opacity=`${S}`,this._element.style.pointerEvents=S>0?"auto":"none",this._popup&&this._popup._setOpacity(S),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const m=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${eh[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${m.x}px,${m.y}px)
        `}_calculateXYTransform(){const c=this._pos,m=this._map,b=this.getPitchAlignment();if(!m||!c||b!=="map")return"";if(!m._showingGlobe()){const U=m.getPitch();return U?`rotateX(${U}deg)`:""}const S=o.radToDeg(o.globeTiltAtLngLat(m.transform,this._lngLat)),A=c.sub(o.globeCenterToScreenPoint(m.transform)),O=Math.abs(A.x)+Math.abs(A.y);if(O===0)return"";const z=S/O;return`rotateX(${-A.y*z}deg) rotateY(${A.x*z}deg)`}_calculateZTransform(){const c=this._pos,m=this._map;if(!m||!c)return"";let b=0;const S=this.getRotationAlignment();if(S==="map")if(m._showingGlobe()){const A=m.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),O=m.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(A);b=o.radToDeg(Math.atan2(O.y,O.x))-90}else b=-m.getBearing();else if(S==="horizon"){const A=o.smoothstep(4,6,m.getZoom()),O=o.globeCenterToScreenPoint(m.transform);O.y+=A*m.transform.height;const z=c.sub(O),U=o.radToDeg(Math.atan2(z.y,z.x));b=(U>90?U-270:U+90)*(1-A)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const m=this._map;m&&(m.transform.renderWorldCopies&&(this._lngLat=Cl(this._lngLat,this._pos,m.transform)),this._pos=m.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),m._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(m._showingGlobe()||m.getTerrain()||m.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(c){return this._offset=o.Point.convert(c),this._update(),this}_onMove(c){const m=this._map;if(!m)return;const b=this._pointerdownPos,S=this._positionDelta;if(b&&S){if(!this._isDragging){const A=this._clickTolerance||m._clickTolerance;if(c.point.dist(b)<A)return;this._isDragging=!0}this._pos=c.point.sub(S),this._lngLat=m.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const m=this._map,b=this._pos;m&&b&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(b),this._pointerdownPos=c.point,this._state="pending",m.on("mousemove",this._onMove),m.on("touchmove",this._onMove),m.once("mouseup",this._onUp),m.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const m=this._map;return m&&(c?(m.on("mousedown",this._addDragHandler),m.on("touchstart",this._addDragHandler)):(m.off("mousedown",this._addDragHandler),m.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const _g={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Qy=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ou(v=new o.Point(0,0),c="bottom"){if(typeof v=="number"){const m=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(c){case"top":return new o.Point(0,v);case"top-left":return new o.Point(m,m);case"top-right":return new o.Point(-m,m);case"bottom":return new o.Point(0,-v);case"bottom-left":return new o.Point(m,-m);case"bottom-right":return new o.Point(-m,-m);case"left":return new o.Point(v,0);case"right":return new o.Point(-v,0)}return new o.Point(0,0)}return v instanceof o.Point||Array.isArray(v)?o.Point.convert(v):o.Point.convert(v[c]||[0,0])}class Tf{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const m=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-m)+this._end*m}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,m,b){this._start=this.getValue(m),this._end=c,this._startTime=m,this._endTime=m+b}}const Ef={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},vg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},ed={showCompass:!0,showZoom:!0,visualizePitch:!1};class xg{constructor(c,m,b=!1){this._clickTolerance=10,this.element=m,this.mouseRotate=new Yl({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,b&&(this.mousePitch=new aa({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener("mousedown",this.mousedown),m.addEventListener("touchstart",this.touchstart,{passive:!1}),m.addEventListener("touchmove",this.touchmove),m.addEventListener("touchend",this.touchend),m.addEventListener("touchcancel",this.reset)}down(c,m){this.mouseRotate.mousedown(c,m),this.mousePitch&&this.mousePitch.mousedown(c,m),he()}move(c,m){const b=this.map,S=this.mouseRotate.mousemoveWindow(c,m),A=S&&S.bearingDelta;if(A&&b.setBearing(b.getBearing()+A),this.mousePitch){const O=this.mousePitch.mousemoveWindow(c,m),z=O&&O.pitchDelta;z&&b.setPitch(b.getPitch()+z)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ie(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),Ee(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,Ee(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ce(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=ce(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const td={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},nd={maxWidth:100,unit:"metric"},$p={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},th={version:o.version,supported:I,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends iu{constructor(v){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(v=o.extend({},vg,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(v.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ku(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._useWebGL2=v.useWebGL2,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._optimizeForTerrain=v.optimizeForTerrain,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new su,this._domRenderTaskQueue=new su,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Ef,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Tf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,typeof v.container=="string"){if(this._container=o.window.document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Ti(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this._hash=v.hash&&new _c(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,o.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),v.attributionControl&&this.addControl(new fn({customAttribution:v.customAttribution})),this._logoControl=new wf,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))})),this.on("dataloading",(c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))}))}_getMapId(){return this._mapId}addControl(v,c){if(c===void 0&&(c=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=v.onAdd(this);this._controls.push(v);const b=this._controlPositions[c];return c.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(v);return c>-1&&this._controls.splice(c,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",v)).fire(new o.Event("move",v)),this.fire(new o.Event("resize",v)),c&&this.fire(new o.Event("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(o.LngLatBounds.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?o.window.navigator.language:Array.isArray(v)?v.length===0?void 0:v.map((c=>c==="auto"?o.window.navigator.language:c)):v}setLanguage(v){const c=this._parseLanguage(v);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const m of this._controls)m._setLanguage&&m._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,c=v.projection.name;let m;c==="globe"&&v.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(v.setMercatorFromTransition(),m=!0):c==="mercator"&&v.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(v.setProjection({name:"globe"}),m=!0),m&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,c){return this._updateProjection(v||c||{name:"mercator"})}_updateProjection(v){let c;if(c=v.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const m in this.style._sourceCaches)this.style._sourceCaches[m].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(v){return this.transform.locationPoint3D(o.LngLat.convert(v))}unproject(v){return this.transform.pointLocation3D(o.Point.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,c,m){if(v==="mouseenter"||v==="mouseover"){let b=!1;const S=O=>{const z=c.filter((Y=>this.getLayer(Y))),U=z.length?this.queryRenderedFeatures(O.point,{layers:z}):[];U.length?b||(b=!0,m.call(this,new wi(v,this,O.originalEvent,{features:U}))):b=!1},A=()=>{b=!1};return{layers:new Set(c),listener:m,delegates:{mousemove:S,mouseout:A}}}if(v==="mouseleave"||v==="mouseout"){let b=!1;const S=O=>{const z=c.filter((U=>this.getLayer(U)));(z.length?this.queryRenderedFeatures(O.point,{layers:z}):[]).length?b=!0:b&&(b=!1,m.call(this,new wi(v,this,O.originalEvent)))},A=O=>{b&&(b=!1,m.call(this,new wi(v,this,O.originalEvent)))};return{layers:new Set(c),listener:m,delegates:{mousemove:S,mouseout:A}}}{const b=S=>{const A=c.filter((z=>this.getLayer(z))),O=A.length?this.queryRenderedFeatures(S.point,{layers:A}):[];O.length&&(S.features=O,m.call(this,S),delete S.features)};return{layers:new Set(c),listener:m,delegates:{[v]:b}}}}on(v,c,m){if(m===void 0)return super.on(v,c);Array.isArray(c)||(c=[c]);const b=this._createDelegatedListener(v,c,m);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(b);for(const S in b.delegates)this.on(S,b.delegates[S]);return this}once(v,c,m){if(m===void 0)return super.once(v,c);Array.isArray(c)||(c=[c]);const b=this._createDelegatedListener(v,c,m);for(const S in b.delegates)this.once(S,b.delegates[S]);return this}off(v,c,m){if(m===void 0)return super.off(v,c);c=new Set(Array.isArray(c)?c:[c]);const b=(A,O)=>{if(A.size!==O.size)return!1;for(const z of A)if(!O.has(z))return!1;return!0},S=this._delegatedListeners?this._delegatedListeners[v]:void 0;return S&&(A=>{for(let O=0;O<A.length;O++){const z=A[O];if(z.listener===m&&b(z.layers,c)){for(const U in z.delegates)this.off(U,z.delegates[U]);return A.splice(O,1),this}}})(S),this}queryRenderedFeatures(v,c){return this.style?(c!==void 0||v===void 0||v instanceof o.Point||Array.isArray(v)||(c=v,v=void 0),this.style.queryRenderedFeatures(v=v||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(v,c){return this.style.querySourceFeatures(v,c)}isPointOnSurface(v){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&o.warnOnce(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(v))}setStyle(v,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&v?(this._diffStyle(v,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(v,c))}_getUIString(v){const c=this._locale[v];if(c==null)throw new Error(`Missing UI string '${v}'`);return c}_updateStyle(v,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v&&(this.style=new Vo(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Vo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,c){if(typeof v=="string"){const m=this._requestManager.normalizeStyleURL(v),b=this._requestManager.transformRequest(m,o.ResourceType.Style);o.getJSON(b,((S,A)=>{S?this.fire(new o.ErrorEvent(S)):A&&this._updateDiff(A,c)}))}else typeof v=="object"&&this._updateDiff(v,c)}_updateDiff(v,c){try{this.style.setState(v)&&this._update(!0)}catch(m){o.warnOnce(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(v,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(v,c){return this._lazyInitEmptyStyle(),this.style.addSource(v,c),this._update(!0)}isSourceLoaded(v){return!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){const v=this.style&&this.style._sourceCaches;for(const c in v){const m=v[c]._tiles;for(const b in m){const S=m[b];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(v,c,m){this._lazyInitEmptyStyle(),this.style.addSourceType(v,c,m)}removeSource(v){return this.style.removeSource(v),this._updateTerrain(),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,c,{pixelRatio:m=1,sdf:b=!1,stretchX:S,stretchY:A,content:O}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:z,height:U,data:Y}=o.exported.getImageData(c);this.style.addImage(v,{data:new o.RGBAImage({width:z,height:U},Y),pixelRatio:m,stretchX:S,stretchY:A,content:O,sdf:b,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:U}=c,Y=c;this.style.addImage(v,{data:new o.RGBAImage({width:z,height:U},new Uint8Array(Y.data)),pixelRatio:m,stretchX:S,stretchY:A,content:O,sdf:b,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,v)}}updateImage(v,c){const m=this.style.getImage(v);if(!m)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:S,height:A}=b;S!==void 0&&A!==void 0?S===m.data.width&&A===m.data.height?(m.data.replace(b.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(v,m)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${S}, ${A})
                must be that same as the previous version of the image
                (${m.data.width}, ${m.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,c){o.getImage(this._requestManager.transformRequest(v,o.ResourceType.Image),((m,b)=>{c(m,b instanceof o.window.HTMLImageElement?o.exported.getImageData(b):b)}))}listImages(){return this.style.listImages()}addLayer(v,c){return this._lazyInitEmptyStyle(),this.style.addLayer(v,c),this._update(!0)}moveLayer(v,c){return this.style.moveLayer(v,c),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,c,m){return this.style.setLayerZoomRange(v,c,m),this._update(!0)}setFilter(v,c,m={}){return this.style.setFilter(v,c,m),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,c,m,b={}){return this.style.setPaintProperty(v,c,m,b),this._update(!0)}getPaintProperty(v,c){return this.style.getPaintProperty(v,c)}setLayoutProperty(v,c,m,b={}){return this.style.setLayoutProperty(v,c,m,b),this._update(!0)}getLayoutProperty(v,c){return this.style.getLayoutProperty(v,c)}setLight(v,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(v),this.transform):0}setFeatureState(v,c){return this.style.setFeatureState(v,c),this._update()}removeFeatureState(v,c){return this.style.removeFeatureState(v,c),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let m,b,S,A=this._container;for(;A&&(!b||!S);){const O=o.window.getComputedStyle(A).transform;O&&O!=="none"&&(m=O.match(/matrix.*\((.+)\)/)[1].split(", "),m[0]&&m[0]!=="0"&&m[0]!=="1"&&(b=m[0]),m[3]&&m[3]!=="0"&&m[3]!=="1"&&(S=m[3])),A=A.parentElement}this._containerWidth=b?Math.abs(v/b):v,this._containerHeight=S?Math.abs(c/S):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=F("div","mapboxgl-canvas-container",v);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=F("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const m=this._controlContainer=F("div","mapboxgl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{b[S]=F("div",`mapboxgl-ctrl-${S}`,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,c){const m=o.exported.devicePixelRatio||1;this._canvas.width=m*Math.ceil(v),this._canvas.height=m*Math.ceil(c),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${c}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const c=this._markers.indexOf(v);c!==-1&&this._markers.splice(c,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const c=this._popups.indexOf(v);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const v=o.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",v),m=c||this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);m?(this._useWebGL2&&!c&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(m,!0),this.painter=new wl(m,this.transform,!!c),this.on("data",(b=>{b.dataType==="source"&&this.painter.setTileLoadedFlag(!0)})),o.exported$1.testSupport(m)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let c;const m=this.painter.context.extTimerQuery,b=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,U=this.transform.pitch,Y=o.exported.now(),W=new o.EvaluationParameters(z,{now:Y,fadeDuration:S,pitch:U,transition:this.style.getTransition()});this.style.update(W)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let A=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),A=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):A=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const z=o.exported.now()-b;m.endQueryEXT(m.TIME_ELAPSED_EXT,c),setTimeout((()=>{const U=m.getQueryObjectEXT(c,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:z,gpuTime:U})),o.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:U}})}),50)}if(this.listens("gpu-timing-layer")){const z=this.painter.collectGpuTimers();setTimeout((()=>{const U=this.painter.queryGpuTimers(z);this.fire(new o.Event("gpu-timing-layer",{layerTimes:U}))}),50)}if(this.listens("gpu-timing-deferred-render")){const z=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const U=this.painter.queryGpuTimeDeferredRender(z);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:U}))}),50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||A;if(O||this._repaint)this.triggerRepaint();else{const z=!this.isMoving()&&this.loaded();if(z&&(A=this._updateAverageElevation(b,!0)),A)this.triggerRepaint();else if(this._triggerFrame(!1),z&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const U=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:U})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const c of this._markers)v&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!v||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(v,c=!1){const m=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&m(0);if((c||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const b=this.transform.averageElevation;let S=this.transform.sampleAverageElevation(),A=!1;this.transform.elevation&&(A=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=v;const O=Math.abs(b-S);if(O>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(S),m(S);this._averageElevation.easeTo(S,v,300)}else if(O>1e-4)return this._averageElevation.jumpTo(S),m(S)}return!!this._averageElevation.isEasing(v)&&m(this._averageElevation.getValue(v))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(v=>{if(v&&(v.message===o.AUTH_ERR_MSG||v.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof wf&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const m=this.painter.context.gl,b=m.createFramebuffer();function S(A){m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,A,0);const O=new Uint8Array(m.drawingBufferWidth*m.drawingBufferHeight*4);return m.readPixels(0,0,m.drawingBufferWidth,m.drawingBufferHeight,m.RGBA,m.UNSIGNED_BYTE,O),O}return m.bindFramebuffer(m.FRAMEBUFFER,b),this._canvasPixelComparison(S(v),c.canvasCopies.map(S),c.timeStamps)}_canvasPixelComparison(v,c,m){let b=m[1]-m[0];const S=v.length/4;for(let A=0;A<c.length;A++){const O=c[A];let z=0;for(let U=0;U<O.length;U+=4)O[U]===v[U]&&O[U+1]===v[U+1]&&O[U+2]===v[U+2]&&O[U+3]===v[U+3]&&(z+=1);b+=(m[A+2]-m[A+1])*(1-z/S)}return b}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=o.exported.frame((c=>{const m=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,m&&this._render(c)})))}_preloadTiles(v){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,((m,b)=>m._preloadTiles(v,b)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,v&&this._update())}_setCacheLimits(v,c){o.setCacheLimits(v,c)}get version(){return o.version}},NavigationControl:class{constructor(v){this.options=o.extend({},ed,v),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(c=>{this._map&&this._map.zoomIn({},{originalEvent:c})})),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(c=>{this._map&&this._map.zoomOut({},{originalEvent:c})})),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(c=>{const m=this._map;m&&(this.options.visualizePitch?m.resetNorthPitch({},{originalEvent:c}):m.resetNorth({},{originalEvent:c}))})),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const c=v.getZoom(),m=c===v.getMaxZoom(),b=c===v.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=c)}))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xg(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,c){const m=F("button",v,this._container);return m.type="button",m.addEventListener("click",c),m}_setButtonTitle(v,c){if(!this._map)return;const m=this._map._getUIString(`NavigationControl.${c}`);v.setAttribute("aria-label",m),v.firstElementChild&&v.firstElementChild.setAttribute("title",m)}},GeolocateControl:class extends o.Evented{constructor(v){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},td,v),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=yc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const c=(m=!!this.options.geolocation)=>{this._supportsGeolocation=m,v(m)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then((m=>c(m.state!=="denied"))).catch((()=>c())):c()}_isOutOfMapMaxBounds(v){const c=this._map.getMaxBounds(),m=v.coords;return!!c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",v)),this._finish()}}_updateCamera(v){const c=new o.LngLat(v.coords.longitude,v.coords.latitude),m=v.coords.accuracy,b=this._map.getBearing(),S=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(m),S,{geolocateSource:!0})}_updateMarker(v){if(v){const c=new o.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,c=o.mercatorZfromAltitude(1,v._center.lat)*v.worldSize,m=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new an({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new an({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))}))}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then((c=>{c==="granted"&&v()})).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:fn,ScaleControl:class{constructor(v){this.options=o.extend({},nd,v),this._isNumberFormatSupported=(function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}})(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,c=this._map,m=c._containerHeight/2,b=c._containerWidth/2-v/2,S=c.unproject([b,m]),A=c.unproject([b+v,m]),O=S.distanceTo(A);if(this.options.unit==="imperial"){const z=3.2808*O;z>5280?this._setScale(v,z/5280,"mile"):this._setScale(v,z,"foot")}else this.options.unit==="nautical"?this._setScale(v,O/1852,"nautical-mile"):O>=1e3?this._setScale(v,O/1e3,"kilometer"):this._setScale(v,O,"meter")}_setScale(v,c,m){this._map._requestDomTask((()=>{const b=(function(A){const O=Math.pow(10,`${Math.floor(A)}`.length-1);let z=A/O;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:(function(U){const Y=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*Y)/Y})(z),O*z})(c),S=b/c;this._container.innerHTML=this._isNumberFormatSupported&&m!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:m}).format(b):`${b}&nbsp;${$p[m]}`,this._container.style.width=v*S+"px"}))}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v){this._fullscreen=!1,v&&v.container&&(v.container instanceof o.window.HTMLElement?this._container=v.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(v){super(),this.options=o.extend(Object.create(_g),v),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=o.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(o.window.document.createTextNode(v))}setHTML(v){const c=o.window.document.createDocumentFragment(),m=o.window.document.createElement("body");let b;for(m.innerHTML=v;b=m.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(v),this.options.closeButton){const m=this._closeButton=F("button","mapboxgl-popup-close-button",c);m.type="button",m.setAttribute("aria-label","Close popup"),m.setAttribute("aria-hidden","true"),m.innerHTML="&#215;",m.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let c;return this._classList.delete(v)?c=!1:(this._classList.add(v),c=!0),this._updateClassList(),c}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const c=this._map,m=this._container,b=this._pos;if(!c||!m||!b)return"bottom";const S=m.offsetWidth,A=m.offsetHeight,O=b.x<S/2,z=b.x>c.transform.width-S/2;if(b.y+v<A)return O?"top-left":z?"top-right":"top";if(b.y>c.transform.height-A){if(O)return"bottom-left";if(z)return"bottom-right"}return O?"left":z?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),v.className=c.join(" ")}_update(v){const c=this._map,m=this._content;if(!c||!this._lngLat&&!this._trackPointer||!m)return;let b=this._container;if(b||(b=this._container=F("div","mapboxgl-popup",c.getContainer()),this._tip=F("div","mapboxgl-popup-tip",b),b.appendChild(m)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cl(this._lngLat,this._pos,c.transform)),!this._trackPointer||v){const S=this._pos=this._trackPointer&&v?v:c.project(this._lngLat),A=ou(this.options.offset),O=this._anchor=this._getAnchor(A.y),z=ou(this.options.offset,O),U=S.add(z).round();c._requestDomTask((()=>{this._container&&O&&(this._container.style.transform=`${eh[O]} translate(${U.x}px,${U.y}px)`)}))}if(!this._marker&&c._showingGlobe()){const S=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(S)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Qy);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:an,Style:Vo,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Jc,Evented:o.Evented,config:o.config,prewarm:function(){lc().acquire(No)},clearPrewarmedResources:function(){const v=Hs;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(No),Hs=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(v){o.config.ACCESS_TOKEN=v},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(v){o.config.API_URL=v},get workerCount(){return Cs.workerCount},set workerCount(v){Cs.workerCount=v},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){o.config.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){o.clearTileCache(v)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return th}));var _=h;return _}))})(eE)),eE.exports}var jfe=Ufe();const ny=ZE(jfe);function $fe(t,e,n,r){const s=I=>I*Math.PI/180,p=s(n-t),_=s(r-e),o=Math.sin(p/2)*Math.sin(p/2)+Math.cos(s(t))*Math.cos(s(n))*Math.sin(_/2)*Math.sin(_/2);return 6371e3*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function qfe(){const t=H.useRef(null),e=H.useRef(null),n=H.useRef({}),[r,s]=H.useState(null),[h,p]=H.useState(2e3),[_,o]=H.useState([]);ny.accessToken="YOUR_MAPBOX_TOKEN_HERE",H.useEffect(()=>{if(e.current||!t.current)return;const M=new ny.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[0,0],zoom:12});e.current=M,M.addControl(new ny.NavigationControl,"top-right"),M.on("error",L=>{console.error("Mapbox error:",L.error)}),M.on("load",()=>{console.debug("Mapbox loaded, style loaded:",M.isStyleLoaded&&M.isStyleLoaded());try{M.resize()}catch(L){console.warn("map.resize() failed on load:",L)}});try{window.__MAD_MAP=M}catch{}return()=>{try{M.remove()}catch{}e.current=null;try{delete window.__MAD_MAP}catch{}}},[]),H.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(M=>{const L=M.coords.latitude,F=M.coords.longitude;s({lat:L,lng:F}),e.current&&e.current.setCenter([F,L])},()=>{},{enableHighAccuracy:!0})},[]),H.useEffect(()=>{if(!r||!e.current)return;const M=e.current,L=()=>{try{M.getLayer("search-radius")&&M.removeLayer("search-radius"),M.getSource("search-radius-src")&&M.removeSource("search-radius-src")}catch{}const F=[],q=64,{lat:$,lng:X}=r;for(let he=0;he<q;he++){const ie=he/q*2*Math.PI,me=h/111320*Math.cos(ie),ge=h/110540*Math.sin(ie);F.push([X+me,$+ge])}try{if(!M.getSource("search-radius-src"))M.addSource("search-radius-src",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[F]}}});else{const he=M.getSource("search-radius-src");try{he.setData({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[F]}})}catch{}}M.getLayer("search-radius")||M.addLayer({id:"search-radius",type:"fill",source:"search-radius-src",paint:{"fill-color":"#5b9bd5","fill-opacity":.12}})}catch{}let te;try{te=new ny.Marker({color:"#1976d2"}).setLngLat([X,$]).addTo(M)}catch{}return(async()=>{try{const he=await gde();console.debug("MapEventsPage: fetched events count",he.length,he.slice(0,5));const ie="YOUR_MAPBOX_TOKEN_HERE",me=async ee=>{if(!ie||!ee)return null;try{const le=encodeURIComponent(ee),se=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${le}.json?access_token=${ie}&limit=1`);if(!se.ok)return null;const Q=(await se.json())?.features?.[0];if(Q&&Q.center&&Q.center.length>=2)return{lng:Number(Q.center[0]),lat:Number(Q.center[1])}}catch(le){console.warn("MapEventsPage: geocode failed for",ee,le)}return null},Ee=(await Promise.all(he.map(async ee=>{if(ee.lat!=null&&ee.lng!=null||!ee.location)return ee;const le=await me(ee.location);return le?{...ee,lat:le.lat,lng:le.lng}:ee}))).filter(ee=>ee.lat==null||ee.lng==null?!1:$fe($,X,ee.lat,ee.lng)<=h);console.debug("MapEventsPage: filtered events count",Ee.length,Ee.map(ee=>({code:ee.code,lat:ee.lat,lng:ee.lng}))),o(Ee);const ce=new Set(Ee.map(ee=>ee.code));Object.keys(n.current).forEach(ee=>{if(!ce.has(ee)){try{n.current[ee].remove()}catch(le){console.warn("MapEventsPage: failed to remove marker",ee,le)}delete n.current[ee]}}),Ee.forEach(ee=>{const le=ee.code;try{const se=Number(ee.lat),_e=Number(ee.lng);if(Number.isNaN(se)||Number.isNaN(_e)){console.warn("MapEventsPage: skipping event with invalid coords",le,ee.lat,ee.lng);return}if(n.current[le]){try{n.current[le].remove()}catch(de){console.warn("MapEventsPage: error removing existing marker",le,de)}delete n.current[le]}const Q=new ny.Marker({color:T(ee)}).setLngLat([_e,se]).setPopup(new ny.Popup({offset:12}).setHTML(`<strong>${ee.name}</strong><br/>${ee.date} ${I(ee.time)}`)).addTo(M);n.current[le]=Q}catch(se){console.error("MapEventsPage: failed to create marker for",le,se)}}),console.debug("MapEventsPage: current markers",Object.keys(n.current));try{const ee=new ny.LngLatBounds;r&&ee.extend([r.lng,r.lat]),Object.values(n.current).forEach(le=>{try{const se=le.getLngLat();ee.extend([se.lng,se.lat])}catch(se){console.warn("MapEventsPage: failed to read marker lnglat",se)}}),ee.isEmpty()||M.fitBounds(ee,{padding:80,maxZoom:14,duration:400})}catch(ee){console.warn("MapEventsPage: fitBounds failed",ee)}}catch(he){console.error("MapEventsPage: failed to fetch or render nearby events",he)}})(),()=>{try{M.getLayer("search-radius")&&M.removeLayer("search-radius"),M.getSource("search-radius-src")&&M.removeSource("search-radius-src")}catch{}try{te&&te.remove()}catch{}}};if(M.isStyleLoaded&&M.isStyleLoaded())L();else{const F=()=>L();M.once("load",F)}return()=>{try{M.getLayer("search-radius")&&M.removeLayer("search-radius"),M.getSource("search-radius-src")&&M.removeSource("search-radius-src")}catch{}}},[r,h]);function T(M){let L=M.startTimestamp;if(L&&typeof L=="object"&&typeof L.toMillis=="function"&&(L=L.toMillis()),!L&&M.date&&M.time&&M.time!=="TBD"){const X=new Date(`${M.date}T${M.time}`);isNaN(X.getTime())||(L=X.getTime())}if(!L)return"#1976d2";const F=Date.now(),q=L-F;if(q<=0)return"#9e9e9e";const $=q/(1e3*60*60);return $<=1?"#2e7d32":$<=6?"#f57f17":"#c62828"}function I(M){if(!M||M==="TBD")return"TBD";const L=String(M).match(/^(\d{1,2}):(\d{2})$/);if(!L)return M;let F=Number(L[1]);const q=L[2],$=F>=12?"PM":"AM";return F=F%12,F===0&&(F=12),`${F}:${q} ${$}`}return V.jsxs(wn,{sx:{minHeight:"100vh",pt:10,pb:4,bgcolor:"background.default"},children:[V.jsx(nC,{}),V.jsxs(zh,{maxWidth:"lg",children:[V.jsxs(hr,{direction:"row",spacing:3,alignItems:"center",sx:{mb:3},children:[V.jsx(Jt,{variant:"h3",sx:{fontWeight:700},children:"Search nearby events"}),V.jsx(b1,{label:`${Math.round(h)}m radius`,size:"medium",sx:{fontSize:"1rem",px:1,py:2.5}})]}),V.jsxs(Vl,{sx:{height:600,position:"relative",overflow:"hidden",borderRadius:3},children:[V.jsxs(wn,{sx:{position:"absolute",top:16,right:16,zIndex:2,bgcolor:"background.paper",boxShadow:4,borderRadius:2,p:2,minWidth:220,pointerEvents:"auto"},children:[V.jsx(Jt,{variant:"body1",sx:{fontWeight:700,display:"block",mb:1.5},children:"Legend"}),V.jsxs(hr,{spacing:1,children:[V.jsxs(hr,{direction:"row",spacing:1.5,alignItems:"center",children:[V.jsx(wn,{sx:{width:18,height:18,bgcolor:"#9e9e9e",borderRadius:1}}),V.jsx(Jt,{variant:"body2",children:"Started"})]}),V.jsxs(hr,{direction:"row",spacing:1.5,alignItems:"center",children:[V.jsx(wn,{sx:{width:18,height:18,bgcolor:"#2e7d32",borderRadius:1}}),V.jsx(Jt,{variant:"body2",children:"Starts within 1 hour"})]}),V.jsxs(hr,{direction:"row",spacing:1.5,alignItems:"center",children:[V.jsx(wn,{sx:{width:18,height:18,bgcolor:"#f57f17",borderRadius:1}}),V.jsx(Jt,{variant:"body2",children:"Starts within 6 hours"})]}),V.jsxs(hr,{direction:"row",spacing:1.5,alignItems:"center",children:[V.jsx(wn,{sx:{width:18,height:18,bgcolor:"#c62828",borderRadius:1}}),V.jsx(Jt,{variant:"body2",children:"Starts in > 6 hours"})]}),V.jsxs(hr,{direction:"row",spacing:1.5,alignItems:"center",children:[V.jsx(wn,{sx:{width:18,height:18,bgcolor:"#1976d2",borderRadius:1}}),V.jsx(Jt,{variant:"body2",children:"No start time listed"})]})]})]}),V.jsx("div",{ref:t,style:{height:"100%"}})]}),V.jsxs(hr,{direction:{xs:"column",sm:"row"},spacing:3,sx:{mt:3},alignItems:"center",children:[V.jsx(Jt,{variant:"h6",sx:{minWidth:180},children:"Radius (meters)"}),V.jsx(oae,{value:h,min:200,max:2e4,step:100,onChange:(M,L)=>p(L),sx:{width:400},size:"medium"})]}),V.jsx(Jt,{variant:"h4",sx:{mt:4,mb:2,fontWeight:700},children:"Events found"}),V.jsx(hr,{spacing:2,sx:{mt:2},children:_.map(M=>V.jsx(Vl,{sx:{p:3,display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:2},children:V.jsxs(hr,{spacing:.5,children:[V.jsx(Jt,{variant:"h6",sx:{fontWeight:600},children:M.name}),V.jsxs(Jt,{variant:"body1",color:"text.secondary",children:[M.date," ",M.time,"  ",M.location]})]})},M.code))})]})]})}function bu({children:t}){return V.jsx(sg.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.98},transition:{duration:.4,ease:"easeOut"},children:t})}function Q_({children:t}){const{user:e,loading:n}=H.useContext(Sp),r=Oh();return n?V.jsx(bu,{children:V.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"system-ui, sans-serif"},children:"Loading session"})}):e?t:V.jsx(ON,{to:"/login",replace:!0,state:{from:r}})}function Hfe(){const t=Oh();return V.jsx(y9,{mode:"wait",children:V.jsxs(Oj,{location:t,children:[V.jsx(Pc,{path:"/",element:V.jsx(bu,{children:V.jsx(mae,{})})}),V.jsx(Pc,{path:"/login",element:V.jsx(bu,{children:V.jsx(yae,{})})}),V.jsx(Pc,{path:"/signup",element:V.jsx(bu,{children:V.jsx(vae,{})})}),V.jsx(Pc,{path:"/dashboard",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Ade,{})})})}),V.jsx(Pc,{path:"/profile/edit",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Dde,{})})})}),V.jsx(Pc,{path:"/profile/me",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Lde,{})})})}),V.jsx(Pc,{path:"/p/:slug",element:V.jsx(bu,{children:V.jsx(Nde,{})})}),V.jsx(Pc,{path:"/profile/view/:slug",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Fde,{})})})}),V.jsx(Pc,{path:"/nearby/:eventCode",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Lfe,{})})})}),V.jsx(Pc,{path:"/events/:eventCode",element:V.jsx(Q_,{children:V.jsx(bu,{children:V.jsx(Ffe,{})})})}),V.jsx(Pc,{path:"/map",element:V.jsx(bu,{children:V.jsx(qfe,{})})}),V.jsx(Pc,{path:"*",element:V.jsx(ON,{to:"/",replace:!0})})]},t.pathname)})}class Gfe extends Ct.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n}),console.error("Caught by ErrorBoundary:",e,n)}render(){return this.state.hasError?V.jsxs("div",{style:{padding:24},children:[V.jsx("h1",{children:"Something went wrong"}),V.jsx("p",{children:"The application encountered an error during rendering. The full error and stack trace are shown below."}),V.jsxs("div",{style:{whiteSpace:"pre-wrap",background:"#111",color:"#fff",padding:12,borderRadius:8,overflow:"auto"},children:[V.jsx("strong",{children:"Error:"}),V.jsx("div",{style:{marginTop:8},children:this.state.error?.message}),V.jsx("hr",{style:{borderColor:"#333"}}),V.jsx("strong",{children:"Stack:"}),V.jsx("div",{style:{marginTop:8},children:this.state.error?.stack}),this.state.errorInfo?.componentStack&&V.jsxs(V.Fragment,{children:[V.jsx("hr",{style:{borderColor:"#333"}}),V.jsx("strong",{children:"Component stack:"}),V.jsx("div",{style:{marginTop:8},children:this.state.errorInfo.componentStack})]})]})]}):this.props.children}}qU.createRoot(document.getElementById("root")).render(V.jsx(s8,{children:V.jsx(wde,{children:V.jsx(IQ,{children:V.jsx(Gfe,{children:V.jsx(Hfe,{})})})})}));
